/*! For license information please see main.77d4fe03.js.LICENSE.txt */
!function(){var e={463:function(e,t,n){"use strict";var r=n(791),a=n(296);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function m(e,t,n,r,a,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){v[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];v[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){v[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){v[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){v[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){v[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){v[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){v[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){v[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function b(e,t,n,r){var a=v.hasOwnProperty(t)?v[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);v[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);v[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);v[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),v.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var k=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),_=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var M=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var L,F=Object.assign;function j(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var z=!1;function V(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),i=r.stack.split("\n"),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(1!==o||1!==s)do{if(o--,0>--s||a[o]!==i[s]){var u="\n"+a[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function U(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case x:return"Portal";case N:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case C:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case _:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){$(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ie(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ve(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ke=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,Ee=null,Se=null;function Ne(e){if(e=ba(e)){if("function"!==typeof xe)throw Error(i(280));var t=e.stateNode;t&&(t=wa(t),xe(e.stateNode,e.type,t))}}function Te(e){Ee?Se?Se.push(e):Se=[e]:Ee=e}function _e(){if(Ee){var e=Ee,t=Se;if(Se=Ee=null,Ne(e),t)for(e=0;e<t.length;e++)Ne(t[e])}}function Ie(e,t){return e(t)}function Ae(){}var Ce=!1;function De(e,t,n){if(Ce)return e(t,n);Ce=!0;try{return Ie(e,t,n)}finally{Ce=!1,(null!==Ee||null!==Se)&&(Ae(),_e())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=wa(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Me=!1;if(l)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Me=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(le){Me=!1}function Pe(e,t,n,r,a,i,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Le=!1,Fe=null,je=!1,ze=null,Ve={onError:function(e){Le=!0,Fe=e}};function Ue(e,t,n,r,a,i,o,s,u){Le=!1,Fe=null,Pe.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Be(e)!==e)throw Error(i(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(r=a.return)){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return He(a),e;if(o===r)return He(a),t;o=o.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=o;else{for(var s=!1,u=a.child;u;){if(u===n){s=!0,n=a,r=o;break}if(u===r){s=!0,r=a,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=a;break}if(u===r){s=!0,r=o,n=a;break}u=u.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=a.unstable_scheduleCallback,Qe=a.unstable_cancelCallback,Ye=a.unstable_shouldYield,Xe=a.unstable_requestPaint,$e=a.unstable_now,Je=a.unstable_getCurrentPriorityLevel,Ze=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,rt=a.unstable_IdlePriority,at=null,it=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~a;0!==s?r=ft(s):0!==(i&=o)&&(r=ft(i))}else 0!==(o=n&~a)?r=ft(o):0!==i&&(r=ft(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(i=t&-t)||16===a&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-ot(t)),r|=e[n],t&=~a;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var bt=0;function kt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,Et,St,Nt,Tt=!1,_t=[],It=null,At=null,Ct=null,Dt=new Map,Ot=new Map,Mt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Ct=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Lt(e,t,n,r,a,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},null!==t&&(null!==(t=ba(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Ft(e){var t=ga(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Nt(e.priority,(function(){Et(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ba(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);ke=r,n.target.dispatchEvent(r),ke=null,t.shift()}return!0}function zt(e,t,n){jt(e)&&n.delete(t)}function Vt(){Tt=!1,null!==It&&jt(It)&&(It=null),null!==At&&jt(At)&&(At=null),null!==Ct&&jt(Ct)&&(Ct=null),Dt.forEach(zt),Ot.forEach(zt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return Ut(t,e)}if(0<_t.length){Ut(_t[0],e);for(var n=1;n<_t.length;n++){var r=_t[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&Ut(It,e),null!==At&&Ut(At,e),null!==Ct&&Ut(Ct,e),Dt.forEach(t),Ot.forEach(t),n=0;n<Mt.length;n++)(r=Mt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Mt.length&&null===(n=Mt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Mt.shift()}var qt=k.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,n,r){var a=bt,i=qt.transition;qt.transition=null;try{bt=1,Gt(e,t,n,r)}finally{bt=a,qt.transition=i}}function Kt(e,t,n,r){var a=bt,i=qt.transition;qt.transition=null;try{bt=4,Gt(e,t,n,r)}finally{bt=a,qt.transition=i}}function Gt(e,t,n,r){if(Ht){var a=Yt(e,t,n,r);if(null===a)Hr(e,t,r,Qt,n),Pt(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return It=Lt(It,e,t,n,r,a),!0;case"dragenter":return At=Lt(At,e,t,n,r,a),!0;case"mouseover":return Ct=Lt(Ct,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return Dt.set(i,Lt(Dt.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,Ot.set(i,Lt(Ot.get(i)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Pt(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==a;){var i=ba(a);if(null!==i&&wt(i),null===(i=Yt(e,t,n,r))&&Hr(e,t,r,Qt,n),i===a)break;a=i}null!==a&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=ga(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,a="value"in $t?$t.value:$t.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===a[i-t];t++);return Zt=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,a,i){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(dn),mn=an(F({},dn,{dataTransfer:0})),vn=an(F({},fn,{relatedTarget:0})),yn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(gn),kn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function Nn(){return Sn}var Tn=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),_n=an(Tn),In=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nn})),Cn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=an(Dn),Mn=[9,13,27,32],Rn=l&&"CompositionEvent"in window,Pn=null;l&&"documentMode"in document&&(Pn=document.documentMode);var Ln=l&&"TextEvent"in window&&!Pn,Fn=l&&(!Rn||Pn&&8<Pn&&11>=Pn),jn=String.fromCharCode(32),zn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Wn(e,t,n,r){Te(r),0<(t=Kr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Qn(e){jr(e,0)}function Yn(e){if(G(ka(e)))return e}function Xn(e,t){if("change"===e)return t}var $n=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Wn(t,Gn,e,we(e)),De(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function ir(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!f.call(t,a)||!sr(e[a],t[a]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=void 0===r.end?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=lr(n,i);var o=lr(n,r);a&&o&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=l&&"documentMode"in document&&11>=document.documentMode,vr=null,yr=null,gr=null,br=!1;function kr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==vr||vr!==Q(r)||("selectionStart"in(r=vr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&ur(gr,r)||(gr=r,0<(r=Kr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Er={},Sr={};function Nr(e){if(Er[e])return Er[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return Er[e]=n[t];return e}l&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Tr=Nr("animationend"),_r=Nr("animationiteration"),Ir=Nr("animationstart"),Ar=Nr("transitionend"),Cr=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Cr.set(e,t),u(t,[e])}for(var Mr=0;Mr<Dr.length;Mr++){var Rr=Dr[Mr];Or(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Or(Tr,"onAnimationEnd"),Or(_r,"onAnimationIteration"),Or(Ir,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,o,s,u,c){if(Ue.apply(this,arguments),Le){if(!Le)throw Error(i(198));var l=Fe;Le=!1,Fe=null,je||(je=!0,ze=l)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==i&&a.isPropagationStopped())break e;Fr(a,s,c),i=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==i&&a.isPropagationStopped())break e;Fr(a,s,c),i=u}}}if(je)throw e=ze,je=!1,ze=null,e}function zr(e,t){var n=t[ma];void 0===n&&(n=t[ma]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[Ur]){e[Ur]=!0,o.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Xt(t)){case 1:var a=Wt;break;case 4:a=Kt;break;default:a=Gt}n=a.bind(null,t,n,e),a=void 0,!Me||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,a){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===a||8===s.nodeType&&s.parentNode===a)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===a||8===u.nodeType&&u.parentNode===a))return;o=o.return}for(;null!==s;){if(null===(o=ga(s)))return;if(5===(u=o.tag)||6===u){r=i=o;continue e}s=s.parentNode}}r=r.return}De((function(){var r=i,a=we(n),o=[];e:{var s=Cr.get(e);if(void 0!==s){var u=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=_n;break;case"focusin":c="focus",u=vn;break;case"focusout":c="blur",u=vn;break;case"beforeblur":case"afterblur":u=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=An;break;case Tr:case _r:case Ir:u=yn;break;case Ar:u=Cn;break;case"scroll":u=hn;break;case"wheel":u=On;break;case"copy":case"cut":case"paste":u=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=In}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var m=(d=p).stateNode;if(5===d.tag&&null!==m&&(d=m,null!==h&&(null!=(m=Oe(p,h))&&l.push(Wr(p,m,d)))),f)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,a),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===ke||!(c=n.relatedTarget||n.fromElement)||!ga(c)&&!c[pa])&&(u||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?ga(c):null)&&(c!==(f=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=In,m="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==u?s:ka(u),d=null==c?s:ka(c),(s=new l(m,p+"leave",u,n,a)).target=f,s.relatedTarget=d,m=null,ga(a)===r&&((l=new l(h,p+"enter",c,n,a)).target=d,l.relatedTarget=f,m=l),f=m,u&&c)e:{for(h=c,p=0,d=l=u;d;d=Gr(d))p++;for(d=0,m=h;m;m=Gr(m))d++;for(;0<p-d;)l=Gr(l),p--;for(;0<d-p;)h=Gr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Gr(l),h=Gr(h)}l=null}else l=null;null!==u&&Qr(o,s,u,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(u=(s=r?ka(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var v=Xn;else if(Hn(s))if($n)v=or;else{v=ar;var y=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(v=ir);switch(v&&(v=v(e,r))?Wn(o,v,n,a):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=r?ka(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(vr=y,yr=r,gr=null);break;case"focusout":gr=yr=vr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,kr(o,n,a);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":kr(o,n,a)}var g;if(Rn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?Vn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(g=en()):(Jt="value"in($t=a)?$t.value:$t.textContent,Bn=!0)),0<(y=Kr(r,b)).length&&(b=new kn(b,e,null,n,a),o.push({event:b,listeners:y}),g?b.data=g:null!==(g=Un(n))&&(b.data=g))),(g=Ln?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(zn=!0,jn);case"textInput":return(e=t.data)===jn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Rn&&Vn(e,t)?(e=en(),Zt=Jt=$t=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(a=new kn("onBeforeInput","beforeinput",null,n,a),o.push({event:a,listeners:r}),a.data=g))}jr(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=Oe(e,n))&&r.unshift(Wr(e,i,a)),null!=(i=Oe(e,t))&&r.push(Wr(e,i,a))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,a){for(var i=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,a?null!=(u=Oe(n,i))&&o.unshift(Wr(n,u,s)):a||null!=(u=Oe(n,i))&&o.push(Wr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function Jr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(i(425))}function Zr(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ra="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,ia="function"===typeof Promise?Promise:void 0,oa="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ia?function(e){return ia.resolve(null).then(e).catch(sa)}:ra;function sa(e){setTimeout((function(){throw e}))}function ua(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);Bt(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function la(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fa=Math.random().toString(36).slice(2),ha="__reactFiber$"+fa,da="__reactProps$"+fa,pa="__reactContainer$"+fa,ma="__reactEvents$"+fa,va="__reactListeners$"+fa,ya="__reactHandles$"+fa;function ga(e){var t=e[ha];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pa]||n[ha]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=la(e);null!==e;){if(n=e[ha])return n;e=la(e)}return t}n=(e=n).parentNode}return null}function ba(e){return!(e=e[ha]||e[pa])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ka(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function wa(e){return e[da]||null}var xa=[],Ea=-1;function Sa(e){return{current:e}}function Na(e){0>Ea||(e.current=xa[Ea],xa[Ea]=null,Ea--)}function Ta(e,t){Ea++,xa[Ea]=e.current,e.current=t}var _a={},Ia=Sa(_a),Aa=Sa(!1),Ca=_a;function Da(e,t){var n=e.type.contextTypes;if(!n)return _a;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in n)i[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Oa(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ma(){Na(Aa),Na(Ia)}function Ra(e,t,n){if(Ia.current!==_a)throw Error(i(168));Ta(Ia,t),Ta(Aa,n)}function Pa(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(i(108,q(e)||"Unknown",a));return F({},n,r)}function La(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_a,Ca=Ia.current,Ta(Ia,e),Ta(Aa,Aa.current),!0}function Fa(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Pa(e,t,Ca),r.__reactInternalMemoizedMergedChildContext=e,Na(Aa),Na(Ia),Ta(Ia,e)):Na(Aa),Ta(Aa,n)}var ja=null,za=!1,Va=!1;function Ua(e){null===ja?ja=[e]:ja.push(e)}function Ba(){if(!Va&&null!==ja){Va=!0;var e=0,t=bt;try{var n=ja;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ja=null,za=!1}catch(a){throw null!==ja&&(ja=ja.slice(e+1)),Ge(Ze,Ba),a}finally{bt=t,Va=!1}}return null}var qa=[],Ha=0,Wa=null,Ka=0,Ga=[],Qa=0,Ya=null,Xa=1,$a="";function Ja(e,t){qa[Ha++]=Ka,qa[Ha++]=Wa,Wa=e,Ka=t}function Za(e,t,n){Ga[Qa++]=Xa,Ga[Qa++]=$a,Ga[Qa++]=Ya,Ya=e;var r=Xa;e=$a;var a=32-ot(r)-1;r&=~(1<<a),n+=1;var i=32-ot(t)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,Xa=1<<32-ot(t)+a|n<<a|r,$a=i+e}else Xa=1<<i|n<<a|r,$a=e}function ei(e){null!==e.return&&(Ja(e,1),Za(e,1,0))}function ti(e){for(;e===Wa;)Wa=qa[--Ha],qa[Ha]=null,Ka=qa[--Ha],qa[Ha]=null;for(;e===Ya;)Ya=Ga[--Qa],Ga[Qa]=null,$a=Ga[--Qa],Ga[Qa]=null,Xa=Ga[--Qa],Ga[Qa]=null}var ni=null,ri=null,ai=!1,ii=null;function oi(e,t){var n=Oc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function si(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,ri=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,ri=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ya?{id:Xa,overflow:$a}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Oc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ni=e,ri=null,!0);default:return!1}}function ui(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ci(e){if(ai){var t=ri;if(t){var n=t;if(!si(e,t)){if(ui(e))throw Error(i(418));t=ca(n.nextSibling);var r=ni;t&&si(e,t)?oi(r,n):(e.flags=-4097&e.flags|2,ai=!1,ni=e)}}else{if(ui(e))throw Error(i(418));e.flags=-4097&e.flags|2,ai=!1,ni=e}}}function li(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function fi(e){if(e!==ni)return!1;if(!ai)return li(e),ai=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=ri)){if(ui(e))throw hi(),Error(i(418));for(;t;)oi(e,t),t=ca(t.nextSibling)}if(li(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ri=ca(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ri=null}}else ri=ni?ca(e.stateNode.nextSibling):null;return!0}function hi(){for(var e=ri;e;)e=ca(e.nextSibling)}function di(){ri=ni=null,ai=!1}function pi(e){null===ii?ii=[e]:ii.push(e)}var mi=k.ReactCurrentBatchConfig;function vi(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var yi=Sa(null),gi=null,bi=null,ki=null;function wi(){ki=bi=gi=null}function xi(e){var t=yi.current;Na(yi),e._currentValue=t}function Ei(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Si(e,t){gi=e,ki=bi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ks=!0),e.firstContext=null)}function Ni(e){var t=e._currentValue;if(ki!==e)if(e={context:e,memoizedValue:t,next:null},null===bi){if(null===gi)throw Error(i(308));bi=e,gi.dependencies={lanes:0,firstContext:e}}else bi=bi.next=e;return t}var Ti=null;function _i(e){null===Ti?Ti=[e]:Ti.push(e)}function Ii(e,t,n,r){var a=t.interleaved;return null===a?(n.next=n,_i(t)):(n.next=a.next,a.next=n),t.interleaved=n,Ai(e,r)}function Ai(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ci=!1;function Di(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Mi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ri(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Au)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Ai(e,n)}return null===(a=r.interleaved)?(t.next=t,_i(r)):(t.next=a.next,a.next=t),r.interleaved=t,Ai(e,n)}function Pi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Li(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?a=i=o:i=i.next=o,n=n.next}while(null!==n);null===i?a=i=t:i=i.next=t}else a=i=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fi(e,t,n,r){var a=e.updateQueue;Ci=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var u=s,c=u.next;u.next=null,null===o?i=c:o.next=c,o=u;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===s?l.firstBaseUpdate=c:s.next=c,l.lastBaseUpdate=u))}if(null!==i){var f=a.baseState;for(o=0,l=c=u=null,s=i;;){var h=s.lane,d=s.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,m=s;switch(h=t,d=n,m.tag){case 1:if("function"===typeof(p=m.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Ci=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=a.effects)?a.effects=[s]:h.push(s))}else d={eventTime:d,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(c=l=d,u=f):l=l.next=d,o|=h;if(null===(s=s.next)){if(null===(s=a.shared.pending))break;s=(h=s).next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}if(null===l&&(u=f),a.baseState=u,a.firstBaseUpdate=c,a.lastBaseUpdate=l,null!==(t=a.shared.interleaved)){a=t;do{o|=a.lane,a=a.next}while(a!==t)}else null===i&&(a.shared.lanes=0);Fu|=o,e.lanes=o,e.memoizedState=f}}function ji(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(i(191,a));a.call(r)}}}var zi=(new r.Component).refs;function Vi(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ui={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),a=nc(e),i=Mi(r,a);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Ri(e,i,a))&&(rc(t,e,a,r),Pi(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),a=nc(e),i=Mi(r,a);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Ri(e,i,a))&&(rc(t,e,a,r),Pi(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),a=Mi(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Ri(e,a,r))&&(rc(t,e,r,n),Pi(t,e,r))}};function Bi(e,t,n,r,a,i,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(a,i))}function qi(e,t,n){var r=!1,a=_a,i=t.contextType;return"object"===typeof i&&null!==i?i=Ni(i):(a=Oa(t)?Ca:Ia.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Da(e,a):_a),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ui,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function Hi(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ui.enqueueReplaceState(t,t.state,null)}function Wi(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=zi,Di(e);var i=t.contextType;"object"===typeof i&&null!==i?a.context=Ni(i):(i=Oa(t)?Ca:Ia.current,a.context=Da(e,i)),a.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(Vi(e,t,i,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&Ui.enqueueReplaceState(a,a.state,null),Fi(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function Ki(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var a=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=a.refs;t===zi&&(t=a.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function Gi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qi(e){return(0,e._init)(e._payload)}function Yi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=jc(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===E?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===O&&Qi(i)===t.type)?((r=a(t,n.props)).ref=Ki(e,t,n),r.return=e,r):((r=Pc(n.type,n.key,n.props,null,e.mode,r)).ref=Ki(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zc(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function f(e,t,n,r,i){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=jc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Pc(t.type,t.key,t.props,null,e.mode,n)).ref=Ki(e,null,t),n.return=e,n;case x:return(t=zc(t,e.mode,n)).return=e,t;case O:return h(e,(0,t._init)(t._payload),n)}if(te(t)||P(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Gi(e,t)}return null}function d(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===a?c(e,t,n,r):null;case x:return n.key===a?l(e,t,n,r):null;case O:return d(e,t,(a=n._init)(n._payload),r)}if(te(n)||P(n))return null!==a?null:f(e,t,n,r,null);Gi(e,n)}return null}function p(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,a);case O:return p(e,t,n,(0,r._init)(r._payload),a)}if(te(r)||P(r))return f(t,e=e.get(n)||null,r,a,null);Gi(t,r)}return null}function m(a,i,s,u){for(var c=null,l=null,f=i,m=i=0,v=null;null!==f&&m<s.length;m++){f.index>m?(v=f,f=null):v=f.sibling;var y=d(a,f,s[m],u);if(null===y){null===f&&(f=v);break}e&&f&&null===y.alternate&&t(a,f),i=o(y,i,m),null===l?c=y:l.sibling=y,l=y,f=v}if(m===s.length)return n(a,f),ai&&Ja(a,m),c;if(null===f){for(;m<s.length;m++)null!==(f=h(a,s[m],u))&&(i=o(f,i,m),null===l?c=f:l.sibling=f,l=f);return ai&&Ja(a,m),c}for(f=r(a,f);m<s.length;m++)null!==(v=p(f,a,m,s[m],u))&&(e&&null!==v.alternate&&f.delete(null===v.key?m:v.key),i=o(v,i,m),null===l?c=v:l.sibling=v,l=v);return e&&f.forEach((function(e){return t(a,e)})),ai&&Ja(a,m),c}function v(a,s,u,c){var l=P(u);if("function"!==typeof l)throw Error(i(150));if(null==(u=l.call(u)))throw Error(i(151));for(var f=l=null,m=s,v=s=0,y=null,g=u.next();null!==m&&!g.done;v++,g=u.next()){m.index>v?(y=m,m=null):y=m.sibling;var b=d(a,m,g.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(a,m),s=o(b,s,v),null===f?l=b:f.sibling=b,f=b,m=y}if(g.done)return n(a,m),ai&&Ja(a,v),l;if(null===m){for(;!g.done;v++,g=u.next())null!==(g=h(a,g.value,c))&&(s=o(g,s,v),null===f?l=g:f.sibling=g,f=g);return ai&&Ja(a,v),l}for(m=r(a,m);!g.done;v++,g=u.next())null!==(g=p(m,a,v,g.value,c))&&(e&&null!==g.alternate&&m.delete(null===g.key?v:g.key),s=o(g,s,v),null===f?l=g:f.sibling=g,f=g);return e&&m.forEach((function(e){return t(a,e)})),ai&&Ja(a,v),l}return function e(r,i,o,u){if("object"===typeof o&&null!==o&&o.type===E&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=i;null!==l;){if(l.key===c){if((c=o.type)===E){if(7===l.tag){n(r,l.sibling),(i=a(l,o.props.children)).return=r,r=i;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&Qi(c)===l.type){n(r,l.sibling),(i=a(l,o.props)).ref=Ki(r,l,o),i.return=r,r=i;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===E?((i=Lc(o.props.children,r.mode,u,o.key)).return=r,r=i):((u=Pc(o.type,o.key,o.props,null,r.mode,u)).ref=Ki(r,i,o),u.return=r,r=u)}return s(r);case x:e:{for(l=o.key;null!==i;){if(i.key===l){if(4===i.tag&&i.stateNode.containerInfo===o.containerInfo&&i.stateNode.implementation===o.implementation){n(r,i.sibling),(i=a(i,o.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=zc(o,r.mode,u)).return=r,r=i}return s(r);case O:return e(r,i,(l=o._init)(o._payload),u)}if(te(o))return m(r,i,o,u);if(P(o))return v(r,i,o,u);Gi(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==i&&6===i.tag?(n(r,i.sibling),(i=a(i,o)).return=r,r=i):(n(r,i),(i=jc(o,r.mode,u)).return=r,r=i),s(r)):n(r,i)}}var Xi=Yi(!0),$i=Yi(!1),Ji={},Zi=Sa(Ji),eo=Sa(Ji),to=Sa(Ji);function no(e){if(e===Ji)throw Error(i(174));return e}function ro(e,t){switch(Ta(to,t),Ta(eo,e),Ta(Zi,Ji),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Na(Zi),Ta(Zi,t)}function ao(){Na(Zi),Na(eo),Na(to)}function io(e){no(to.current);var t=no(Zi.current),n=ue(t,e.type);t!==n&&(Ta(eo,e),Ta(Zi,n))}function oo(e){eo.current===e&&(Na(Zi),Na(eo))}var so=Sa(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=k.ReactCurrentDispatcher,ho=k.ReactCurrentBatchConfig,po=0,mo=null,vo=null,yo=null,go=!1,bo=!1,ko=0,wo=0;function xo(){throw Error(i(321))}function Eo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function So(e,t,n,r,a,o){if(po=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?ss:us,e=n(r,a),bo){o=0;do{if(bo=!1,ko=0,25<=o)throw Error(i(301));o+=1,yo=vo=null,t.updateQueue=null,fo.current=cs,e=n(r,a)}while(bo)}if(fo.current=os,t=null!==vo&&null!==vo.next,po=0,yo=vo=mo=null,go=!1,t)throw Error(i(300));return e}function No(){var e=0!==ko;return ko=0,e}function To(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?mo.memoizedState=yo=e:yo=yo.next=e,yo}function _o(){if(null===vo){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=vo.next;var t=null===yo?mo.memoizedState:yo.next;if(null!==t)yo=t,vo=e;else{if(null===e)throw Error(i(310));e={memoizedState:(vo=e).memoizedState,baseState:vo.baseState,baseQueue:vo.baseQueue,queue:vo.queue,next:null},null===yo?mo.memoizedState=yo=e:yo=yo.next=e}return yo}function Io(e,t){return"function"===typeof t?t(e):t}function Ao(e){var t=_o(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=vo,a=r.baseQueue,o=n.pending;if(null!==o){if(null!==a){var s=a.next;a.next=o.next,o.next=s}r.baseQueue=a=o,n.pending=null}if(null!==a){o=a.next,r=r.baseState;var u=s=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(u=c=h,s=r):c=c.next=h,mo.lanes|=f,Fu|=f}l=l.next}while(null!==l&&l!==o);null===c?s=r:c.next=u,sr(r,t.memoizedState)||(ks=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{o=a.lane,mo.lanes|=o,Fu|=o,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Co(e){var t=_o(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do{o=e(o,s.action),s=s.next}while(s!==a);sr(o,t.memoizedState)||(ks=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Do(){}function Oo(e,t){var n=mo,r=_o(),a=t(),o=!sr(r.memoizedState,a);if(o&&(r.memoizedState=a,ks=!0),r=r.queue,Ho(Po.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,zo(9,Ro.bind(null,n,r,a,t),void 0,null),null===Cu)throw Error(i(349));0!==(30&po)||Mo(n,t,a)}return a}function Mo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ro(e,t,n,r){t.value=n,t.getSnapshot=r,Lo(t)&&Fo(e)}function Po(e,t,n){return n((function(){Lo(t)&&Fo(e)}))}function Lo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Fo(e){var t=Ai(e,1);null!==t&&rc(t,e,1,-1)}function jo(e){var t=To();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,mo,e),[t.memoizedState,e]}function zo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return _o().memoizedState}function Uo(e,t,n,r){var a=To();mo.flags|=e,a.memoizedState=zo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var a=_o();r=void 0===r?null:r;var i=void 0;if(null!==vo){var o=vo.memoizedState;if(i=o.destroy,null!==r&&Eo(r,o.deps))return void(a.memoizedState=zo(t,n,i,r))}mo.flags|=e,a.memoizedState=zo(1|t,n,i,r)}function qo(e,t){return Uo(8390656,8,e,t)}function Ho(e,t){return Bo(2048,8,e,t)}function Wo(e,t){return Bo(4,2,e,t)}function Ko(e,t){return Bo(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Go.bind(null,t,e),n)}function Yo(){}function Xo(e,t){var n=_o();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Eo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $o(e,t){var n=_o();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Eo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,ks=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),mo.lanes|=n,Fu|=n,e.baseState=!0),t)}function Zo(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{bt=n,ho.transition=r}}function es(){return _o().memoizedState}function ts(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))as(t,n);else if(null!==(n=Ii(e,t,n,r))){rc(n,e,r,tc()),is(n,t,r)}}function ns(e,t,n){var r=nc(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))as(t,a);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=i(o,n);if(a.hasEagerState=!0,a.eagerState=s,sr(s,o)){var u=t.interleaved;return null===u?(a.next=a,_i(t)):(a.next=u.next,u.next=a),void(t.interleaved=a)}}catch(c){}null!==(n=Ii(e,t,a,r))&&(rc(n,e,r,a=tc()),is(n,t,r))}}function rs(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function as(e,t){bo=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function is(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var os={readContext:Ni,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},ss={readContext:Ni,useCallback:function(e,t){return To().memoizedState=[e,void 0===t?null:t],e},useContext:Ni,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Uo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Uo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Uo(4,2,e,t)},useMemo:function(e,t){var n=To();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=To();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,mo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},To().memoizedState=e},useState:jo,useDebugValue:Yo,useDeferredValue:function(e){return To().memoizedState=e},useTransition:function(){var e=jo(!1),t=e[0];return e=Zo.bind(null,e[1]),To().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mo,a=To();if(ai){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Cu)throw Error(i(349));0!==(30&po)||Mo(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,qo(Po.bind(null,r,o,e),[e]),r.flags|=2048,zo(9,Ro.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=To(),t=Cu.identifierPrefix;if(ai){var n=$a;t=":"+t+"R"+(n=(Xa&~(1<<32-ot(Xa)-1)).toString(32)+n),0<(n=ko++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Ni,useCallback:Xo,useContext:Ni,useEffect:Ho,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Ko,useMemo:$o,useReducer:Ao,useRef:Vo,useState:function(){return Ao(Io)},useDebugValue:Yo,useDeferredValue:function(e){return Jo(_o(),vo.memoizedState,e)},useTransition:function(){return[Ao(Io)[0],_o().memoizedState]},useMutableSource:Do,useSyncExternalStore:Oo,useId:es,unstable_isNewReconciler:!1},cs={readContext:Ni,useCallback:Xo,useContext:Ni,useEffect:Ho,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Ko,useMemo:$o,useReducer:Co,useRef:Vo,useState:function(){return Co(Io)},useDebugValue:Yo,useDeferredValue:function(e){var t=_o();return null===vo?t.memoizedState=e:Jo(t,vo.memoizedState,e)},useTransition:function(){return[Co(Io)[0],_o().memoizedState]},useMutableSource:Do,useSyncExternalStore:Oo,useId:es,unstable_isNewReconciler:!1};function ls(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var a=n}catch(i){a="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:a,digest:null}}function fs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Mi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wu||(Wu=!0,Ku=r),hs(0,t)},n}function ms(e,t,n){(n=Mi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){hs(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){hs(0,t),"function"!==typeof r&&(null===Gu?Gu=new Set([this]):Gu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function vs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=Tc.bind(null,e,t,n),t.then(e,e))}function ys(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gs(e,t,n,r,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Mi(-1,1)).tag=2,Ri(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var bs=k.ReactCurrentOwner,ks=!1;function ws(e,t,n,r){t.child=null===e?$i(t,null,n,r):Xi(t,e.child,n,r)}function xs(e,t,n,r,a){n=n.render;var i=t.ref;return Si(t,a),r=So(e,t,n,r,i,a),n=No(),null===e||ks?(ai&&n&&ei(t),t.flags|=1,ws(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ws(e,t,a))}function Es(e,t,n,r,a){if(null===e){var i=n.type;return"function"!==typeof i||Mc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pc(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Ss(e,t,i,r,a))}if(i=e.child,0===(e.lanes&a)){var o=i.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Ws(e,t,a)}return t.flags|=1,(e=Rc(i,r)).ref=t.ref,e.return=t,t.child=e}function Ss(e,t,n,r,a){if(null!==e){var i=e.memoizedProps;if(ur(i,r)&&e.ref===t.ref){if(ks=!1,t.pendingProps=r=i,0===(e.lanes&a))return t.lanes=e.lanes,Ws(e,t,a);0!==(131072&e.flags)&&(ks=!0)}}return _s(e,t,n,r,a)}function Ns(e,t,n){var r=t.pendingProps,a=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ta(Ru,Mu),Mu|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ta(Ru,Mu),Mu|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Ta(Ru,Mu),Mu|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Ta(Ru,Mu),Mu|=r;return ws(e,t,a,n),t.child}function Ts(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function _s(e,t,n,r,a){var i=Oa(n)?Ca:Ia.current;return i=Da(t,i),Si(t,a),n=So(e,t,n,r,i,a),r=No(),null===e||ks?(ai&&r&&ei(t),t.flags|=1,ws(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ws(e,t,a))}function Is(e,t,n,r,a){if(Oa(n)){var i=!0;La(t)}else i=!1;if(Si(t,a),null===t.stateNode)Hs(e,t),qi(t,n,r),Wi(t,n,r,a),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ni(c):c=Da(t,c=Oa(n)?Ca:Ia.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&Hi(t,o,r,c),Ci=!1;var h=t.memoizedState;o.state=h,Fi(t,r,o,a),u=t.memoizedState,s!==r||h!==u||Aa.current||Ci?("function"===typeof l&&(Vi(t,n,l,r),u=t.memoizedState),(s=Ci||Bi(t,n,s,r,h,u,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Oi(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:vi(t.type,s),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=Ni(u):u=Da(t,u=Oa(n)?Ca:Ia.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==f||h!==u)&&Hi(t,o,r,u),Ci=!1,h=t.memoizedState,o.state=h,Fi(t,r,o,a);var p=t.memoizedState;s!==f||h!==p||Aa.current||Ci?("function"===typeof d&&(Vi(t,n,d,r),p=t.memoizedState),(c=Ci||Bi(t,n,c,r,h,p,u)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return As(e,t,n,r,i,a)}function As(e,t,n,r,a,i){Ts(e,t);var o=0!==(128&t.flags);if(!r&&!o)return a&&Fa(t,n,!1),Ws(e,t,i);r=t.stateNode,bs.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Xi(t,e.child,null,i),t.child=Xi(t,null,s,i)):ws(e,t,s,i),t.memoizedState=r.state,a&&Fa(t,n,!0),t.child}function Cs(e){var t=e.stateNode;t.pendingContext?Ra(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ra(0,t.context,!1),ro(e,t.containerInfo)}function Ds(e,t,n,r,a){return di(),pi(a),t.flags|=256,ws(e,t,n,r),t.child}var Os,Ms,Rs,Ps,Ls={dehydrated:null,treeContext:null,retryLane:0};function Fs(e){return{baseLanes:e,cachePool:null,transitions:null}}function js(e,t,n){var r,a=t.pendingProps,o=so.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ta(so,1&o),null===e)return ci(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=a.children,e=a.fallback,s?(a=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&a)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Fc(u,a,0,null),e=Lc(e,a,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Fs(n),t.memoizedState=Ls,e):zs(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,a,o,s){if(n)return 256&t.flags?(t.flags&=-257,Vs(e,t,s,r=fs(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,a=t.mode,r=Fc({mode:"visible",children:r.children},a,0,null),(o=Lc(o,a,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Xi(t,e.child,null,s),t.child.memoizedState=Fs(s),t.memoizedState=Ls,o);if(0===(1&t.mode))return Vs(e,t,s,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var u=r.dgst;return r=u,Vs(e,t,s,r=fs(o=Error(i(419)),r,void 0))}if(u=0!==(s&e.childLanes),ks||u){if(null!==(r=Cu)){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|s))?0:a)&&a!==o.retryLane&&(o.retryLane=a,Ai(e,a),rc(r,e,a,-1))}return vc(),Vs(e,t,s,r=fs(Error(i(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Ic.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,ri=ca(a.nextSibling),ni=t,ai=!0,ii=null,null!==e&&(Ga[Qa++]=Xa,Ga[Qa++]=$a,Ga[Qa++]=Ya,Xa=e.id,$a=e.overflow,Ya=t),t=zs(t,r.children),t.flags|=4096,t)}(e,t,u,a,r,o,n);if(s){s=a.fallback,u=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&u)&&t.child!==o?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Rc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Rc(r,s):(s=Lc(s,u,n,null)).flags|=2,s.return=t,a.return=t,a.sibling=s,t.child=a,a=s,s=t.child,u=null===(u=e.child.memoizedState)?Fs(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ls,a}return e=(s=e.child).sibling,a=Rc(s,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function zs(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vs(e,t,n,r){return null!==r&&pi(r),Xi(t,e.child,null,n),(e=zs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Us(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ei(e.return,t,n)}function Bs(e,t,n,r,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function qs(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Us(e,n,t);else if(19===e.tag)Us(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ta(so,r),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Bs(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===uo(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Bs(t,!0,n,null,i);break;case"together":Bs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ws(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ks(e,t){if(!ai)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qs(e,t,n){var r=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(t),null;case 1:case 17:return Oa(t.type)&&Ma(),Gs(t),null;case 3:return r=t.stateNode,ao(),Na(Aa),Na(Ia),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ii&&(sc(ii),ii=null))),Ms(e,t),Gs(t),null;case 5:oo(t);var a=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Rs(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Gs(t),null}if(e=no(Zi.current),fi(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[ha]=t,r[da]=o,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(a=0;a<Pr.length;a++)zr(Pr[a],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":X(r,o),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},zr("invalid",r);break;case"textarea":ae(r,o),zr("invalid",r)}for(var u in ge(n,o),a=null,o)if(o.hasOwnProperty(u)){var c=o[u];"children"===u?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),a=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),a=["children",""+c]):s.hasOwnProperty(u)&&null!=c&&"onScroll"===u&&zr("scroll",r)}switch(n){case"input":K(r),Z(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[ha]=t,e[da]=r,Os(e,t,!1,!1),t.stateNode=e;e:{switch(u=be(n,r),n){case"dialog":zr("cancel",e),zr("close",e),a=r;break;case"iframe":case"object":case"embed":zr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Pr.length;a++)zr(Pr[a],e);a=r;break;case"source":zr("error",e),a=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),a=r;break;case"details":zr("toggle",e),a=r;break;case"input":X(e,r),a=Y(e,r),zr("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=F({},r,{value:void 0}),zr("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),zr("invalid",e)}for(o in ge(n,a),c=a)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ve(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=l&&"onScroll"===o&&zr("scroll",e):null!=l&&b(e,o,l,u))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gs(t),null;case 6:if(e&&null!=t.stateNode)Ps(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=no(to.current),no(Zi.current),fi(t)){if(r=t.stateNode,n=t.memoizedProps,r[ha]=t,(o=r.nodeValue!==n)&&null!==(e=ni))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ha]=t,t.stateNode=r}return Gs(t),null;case 13:if(Na(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ai&&null!==ri&&0!==(1&t.mode)&&0===(128&t.flags))hi(),di(),t.flags|=98560,o=!1;else if(o=fi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(i(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(i(317));o[ha]=t}else di(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gs(t),o=!1}else null!==ii&&(sc(ii),ii=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Pu&&(Pu=3):vc())),null!==t.updateQueue&&(t.flags|=4),Gs(t),null);case 4:return ao(),Ms(e,t),null===e&&Br(t.stateNode.containerInfo),Gs(t),null;case 10:return xi(t.type._context),Gs(t),null;case 19:if(Na(so),null===(o=t.memoizedState))return Gs(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)Ks(o,!1);else{if(0!==Pu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=uo(e))){for(t.flags|=128,Ks(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ta(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>qu&&(t.flags|=128,r=!0,Ks(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ks(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!ai)return Gs(t),null}else 2*$e()-o.renderingStartTime>qu&&1073741824!==n&&(t.flags|=128,r=!0,Ks(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=so.current,Ta(so,r?1&n|2:1&n),t):(Gs(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Mu)&&(Gs(t),6&t.subtreeFlags&&(t.flags|=8192)):Gs(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Ys(e,t){switch(ti(t),t.tag){case 1:return Oa(t.type)&&Ma(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ao(),Na(Aa),Na(Ia),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Na(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));di()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Na(so),null;case 4:return ao(),null;case 10:return xi(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Os=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ms=function(){},Rs=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,no(Zi.current);var i,o=null;switch(n){case"input":a=Y(e,a),r=Y(e,r),o=[];break;case"select":a=F({},a,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":a=re(e,a),r=re(e,r),o=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,a)if(!r.hasOwnProperty(l)&&a.hasOwnProperty(l)&&null!=a[l])if("style"===l){var u=a[l];for(i in u)u.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(u=null!=a?a[l]:void 0,r.hasOwnProperty(l)&&c!==u&&(null!=c||null!=u))if("style"===l)if(u){for(i in u)!u.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&u[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&zr("scroll",e),o||u===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ps=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xs=!1,$s=!1,Js="function"===typeof WeakSet?WeakSet:Set,Zs=null;function eu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Nc(e,t,r)}else n.current=null}function tu(e,t,n){try{n()}catch(r){Nc(e,t,r)}}var nu=!1;function ru(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,void 0!==i&&tu(t,n,i)}a=a.next}while(a!==r)}}function au(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function iu(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ou(e){var t=e.alternate;null!==t&&(e.alternate=null,ou(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ha],delete t[da],delete t[ma],delete t[va],delete t[ya])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function su(e){return 5===e.tag||3===e.tag||4===e.tag}function uu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||su(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}var fu=null,hu=!1;function du(e,t,n){for(n=n.child;null!==n;)pu(e,t,n),n=n.sibling}function pu(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(at,n)}catch(s){}switch(n.tag){case 5:$s||eu(n,t);case 6:var r=fu,a=hu;fu=null,du(e,t,n),hu=a,null!==(fu=r)&&(hu?(e=fu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fu.removeChild(n.stateNode));break;case 18:null!==fu&&(hu?(e=fu,n=n.stateNode,8===e.nodeType?ua(e.parentNode,n):1===e.nodeType&&ua(e,n),Bt(e)):ua(fu,n.stateNode));break;case 4:r=fu,a=hu,fu=n.stateNode.containerInfo,hu=!0,du(e,t,n),fu=r,hu=a;break;case 0:case 11:case 14:case 15:if(!$s&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var i=a,o=i.destroy;i=i.tag,void 0!==o&&(0!==(2&i)||0!==(4&i))&&tu(n,t,o),a=a.next}while(a!==r)}du(e,t,n);break;case 1:if(!$s&&(eu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Nc(n,t,s)}du(e,t,n);break;case 21:du(e,t,n);break;case 22:1&n.mode?($s=(r=$s)||null!==n.memoizedState,du(e,t,n),$s=r):du(e,t,n);break;default:du(e,t,n)}}function mu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Js),t.forEach((function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:fu=u.stateNode,hu=!1;break e;case 3:case 4:fu=u.stateNode.containerInfo,hu=!0;break e}u=u.return}if(null===fu)throw Error(i(160));pu(o,s,a),fu=null,hu=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(l){Nc(a,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yu(t,e),t=t.sibling}function yu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vu(t,e),gu(e),4&r){try{ru(3,e,e.return),au(3,e)}catch(v){Nc(e,e.return,v)}try{ru(5,e,e.return)}catch(v){Nc(e,e.return,v)}}break;case 1:vu(t,e),gu(e),512&r&&null!==n&&eu(n,n.return);break;case 5:if(vu(t,e),gu(e),512&r&&null!==n&&eu(n,n.return),32&e.flags){var a=e.stateNode;try{he(a,"")}catch(v){Nc(e,e.return,v)}}if(4&r&&null!=(a=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===o.type&&null!=o.name&&$(a,o),be(u,s);var l=be(u,o);for(s=0;s<c.length;s+=2){var f=c[s],h=c[s+1];"style"===f?ve(a,h):"dangerouslySetInnerHTML"===f?fe(a,h):"children"===f?he(a,h):b(a,f,h,l)}switch(u){case"input":J(a,o);break;case"textarea":ie(a,o);break;case"select":var d=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(a,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(a,!!o.multiple,o.defaultValue,!0):ne(a,!!o.multiple,o.multiple?[]:"",!1))}a[da]=o}catch(v){Nc(e,e.return,v)}}break;case 6:if(vu(t,e),gu(e),4&r){if(null===e.stateNode)throw Error(i(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(v){Nc(e,e.return,v)}}break;case 3:if(vu(t,e),gu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(v){Nc(e,e.return,v)}break;case 4:default:vu(t,e),gu(e);break;case 13:vu(t,e),gu(e),8192&(a=e.child).flags&&(o=null!==a.memoizedState,a.stateNode.isHidden=o,!o||null!==a.alternate&&null!==a.alternate.memoizedState||(Bu=$e())),4&r&&mu(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?($s=(l=$s)||f,vu(t,e),$s=l):vu(t,e),gu(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Zs=e,f=e.child;null!==f;){for(h=Zs=f;null!==Zs;){switch(p=(d=Zs).child,d.tag){case 0:case 11:case 14:case 15:ru(4,d,d.return);break;case 1:eu(d,d.return);var m=d.stateNode;if("function"===typeof m.componentWillUnmount){r=d,n=d.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(v){Nc(r,n,v)}}break;case 5:eu(d,d.return);break;case 22:if(null!==d.memoizedState){xu(h);continue}}null!==p?(p.return=d,Zs=p):xu(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{a=h.stateNode,l?"function"===typeof(o=a.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=h.stateNode,s=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,u.style.display=me("display",s))}catch(v){Nc(e,e.return,v)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(v){Nc(e,e.return,v)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vu(t,e),gu(e),4&r&&mu(e);case 21:}}function gu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(su(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(he(a,""),r.flags&=-33),lu(e,uu(e),a);break;case 3:case 4:var o=r.stateNode.containerInfo;cu(e,uu(e),o);break;default:throw Error(i(161))}}catch(s){Nc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bu(e,t,n){Zs=e,ku(e,t,n)}function ku(e,t,n){for(var r=0!==(1&e.mode);null!==Zs;){var a=Zs,i=a.child;if(22===a.tag&&r){var o=null!==a.memoizedState||Xs;if(!o){var s=a.alternate,u=null!==s&&null!==s.memoizedState||$s;s=Xs;var c=$s;if(Xs=o,($s=u)&&!c)for(Zs=a;null!==Zs;)u=(o=Zs).child,22===o.tag&&null!==o.memoizedState?Eu(a):null!==u?(u.return=o,Zs=u):Eu(a);for(;null!==i;)Zs=i,ku(i,t,n),i=i.sibling;Zs=a,Xs=s,$s=c}wu(e)}else 0!==(8772&a.subtreeFlags)&&null!==i?(i.return=a,Zs=i):wu(e)}}function wu(e){for(;null!==Zs;){var t=Zs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$s||au(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$s)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:vi(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ji(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ji(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(i(163))}$s||512&t.flags&&iu(t)}catch(d){Nc(t,t.return,d)}}if(t===e){Zs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zs=n;break}Zs=t.return}}function xu(e){for(;null!==Zs;){var t=Zs;if(t===e){Zs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zs=n;break}Zs=t.return}}function Eu(e){for(;null!==Zs;){var t=Zs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{au(4,t)}catch(u){Nc(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(u){Nc(t,a,u)}}var i=t.return;try{iu(t)}catch(u){Nc(t,i,u)}break;case 5:var o=t.return;try{iu(t)}catch(u){Nc(t,o,u)}}}catch(u){Nc(t,t.return,u)}if(t===e){Zs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Zs=s;break}Zs=t.return}}var Su,Nu=Math.ceil,Tu=k.ReactCurrentDispatcher,_u=k.ReactCurrentOwner,Iu=k.ReactCurrentBatchConfig,Au=0,Cu=null,Du=null,Ou=0,Mu=0,Ru=Sa(0),Pu=0,Lu=null,Fu=0,ju=0,zu=0,Vu=null,Uu=null,Bu=0,qu=1/0,Hu=null,Wu=!1,Ku=null,Gu=null,Qu=!1,Yu=null,Xu=0,$u=0,Ju=null,Zu=-1,ec=0;function tc(){return 0!==(6&Au)?$e():-1!==Zu?Zu:Zu=$e()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Au)&&0!==Ou?Ou&-Ou:null!==mi.transition?(0===ec&&(ec=mt()),ec):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function rc(e,t,n,r){if(50<$u)throw $u=0,Ju=null,Error(i(185));yt(e,n,r),0!==(2&Au)&&e===Cu||(e===Cu&&(0===(2&Au)&&(ju|=n),4===Pu&&uc(e,Ou)),ac(e,r),1===n&&0===Au&&0===(1&t.mode)&&(qu=$e()+500,za&&Ba()))}function ac(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ot(i),s=1<<o,u=a[o];-1===u?0!==(s&n)&&0===(s&r)||(a[o]=dt(s,t)):u<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var r=ht(e,e===Cu?Ou:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){za=!0,Ua(e)}(cc.bind(null,e)):Ua(cc.bind(null,e)),oa((function(){0===(6&Au)&&Ba()})),n=null;else{switch(kt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Cc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Zu=-1,ec=0,0!==(6&Au))throw Error(i(327));var n=e.callbackNode;if(Ec()&&e.callbackNode!==n)return null;var r=ht(e,e===Cu?Ou:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var a=Au;Au|=2;var o=mc();for(Cu===e&&Ou===t||(Hu=null,qu=$e()+500,dc(e,t));;)try{bc();break}catch(u){pc(e,u)}wi(),Tu.current=o,Au=a,null!==Du?t=0:(Cu=null,Ou=0,t=Pu)}if(0!==t){if(2===t&&(0!==(a=pt(e))&&(r=a,t=oc(e,a))),1===t)throw n=Lu,dc(e,0),uc(e,r),ac(e,$e()),n;if(6===t)uc(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!sr(i(),a))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Lu,dc(e,0),uc(e,r),ac(e,$e()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:xc(e,Uu,Hu);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=Bu+500-$e())){if(0!==ht(e,0))break;if(((a=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ra(xc.bind(null,e,Uu,Hu),t);break}xc(e,Uu,Hu);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>a&&(a=s),r&=~o}if(r=a,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Nu(r/1960))-r)){e.timeoutHandle=ra(xc.bind(null,e,Uu,Hu),r);break}xc(e,Uu,Hu);break;default:throw Error(i(329))}}}return ac(e,$e()),e.callbackNode===n?ic.bind(null,e):null}function oc(e,t){var n=Vu;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Uu,Uu=n,null!==t&&sc(t)),e}function sc(e){null===Uu?Uu=e:Uu.push.apply(Uu,e)}function uc(e,t){for(t&=~zu,t&=~ju,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Au))throw Error(i(327));Ec();var t=ht(e,0);if(0===(1&t))return ac(e,$e()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Lu,dc(e,0),uc(e,t),ac(e,$e()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Uu,Hu),ac(e,$e()),null}function lc(e,t){var n=Au;Au|=1;try{return e(t)}finally{0===(Au=n)&&(qu=$e()+500,za&&Ba())}}function fc(e){null!==Yu&&0===Yu.tag&&0===(6&Au)&&Ec();var t=Au;Au|=1;var n=Iu.transition,r=bt;try{if(Iu.transition=null,bt=1,e)return e()}finally{bt=r,Iu.transition=n,0===(6&(Au=t))&&Ba()}}function hc(){Mu=Ru.current,Na(Ru)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aa(n)),null!==Du)for(n=Du.return;null!==n;){var r=n;switch(ti(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ma();break;case 3:ao(),Na(Aa),Na(Ia),lo();break;case 5:oo(r);break;case 4:ao();break;case 13:case 19:Na(so);break;case 10:xi(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Cu=e,Du=e=Rc(e.current,null),Ou=Mu=t,Pu=0,Lu=null,zu=ju=Fu=0,Uu=Vu=null,null!==Ti){for(t=0;t<Ti.length;t++)if(null!==(r=(n=Ti[t]).interleaved)){n.interleaved=null;var a=r.next,i=n.pending;if(null!==i){var o=i.next;i.next=a,r.next=o}n.pending=r}Ti=null}return e}function pc(e,t){for(;;){var n=Du;try{if(wi(),fo.current=os,go){for(var r=mo.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}go=!1}if(po=0,yo=vo=mo=null,bo=!1,ko=0,_u.current=null,null===n||null===n.return){Pu=1,Lu=t,Du=null;break}e:{var o=e,s=n.return,u=n,c=t;if(t=Ou,u.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=u,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=ys(s);if(null!==p){p.flags&=-257,gs(p,s,u,0,t),1&p.mode&&vs(o,l,t),c=l;var m=(t=p).updateQueue;if(null===m){var v=new Set;v.add(c),t.updateQueue=v}else m.add(c);break e}if(0===(1&t)){vs(o,l,t),vc();break e}c=Error(i(426))}else if(ai&&1&u.mode){var y=ys(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gs(y,s,u,0,t),pi(ls(c,u));break e}}o=c=ls(c,u),4!==Pu&&(Pu=2),null===Vu?Vu=[o]:Vu.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Li(o,ps(0,c,t));break e;case 1:u=c;var g=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Gu||!Gu.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Li(o,ms(o,u,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(k){t=k,Du===n&&null!==n&&(Du=n=n.return);continue}break}}function mc(){var e=Tu.current;return Tu.current=os,null===e?os:e}function vc(){0!==Pu&&3!==Pu&&2!==Pu||(Pu=4),null===Cu||0===(268435455&Fu)&&0===(268435455&ju)||uc(Cu,Ou)}function yc(e,t){var n=Au;Au|=2;var r=mc();for(Cu===e&&Ou===t||(Hu=null,dc(e,t));;)try{gc();break}catch(a){pc(e,a)}if(wi(),Au=n,Tu.current=r,null!==Du)throw Error(i(261));return Cu=null,Ou=0,Pu}function gc(){for(;null!==Du;)kc(Du)}function bc(){for(;null!==Du&&!Ye();)kc(Du)}function kc(e){var t=Su(e.alternate,e,Mu);e.memoizedProps=e.pendingProps,null===t?wc(e):Du=t,_u.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qs(n,t,Mu)))return void(Du=n)}else{if(null!==(n=Ys(n,t)))return n.flags&=32767,void(Du=n);if(null===e)return Pu=6,void(Du=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Du=t);Du=t=e}while(null!==t);0===Pu&&(Pu=5)}function xc(e,t,n){var r=bt,a=Iu.transition;try{Iu.transition=null,bt=1,function(e,t,n,r){do{Ec()}while(null!==Yu);if(0!==(6&Au))throw Error(i(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-ot(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}(e,o),e===Cu&&(Du=Cu=null,Ou=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qu||(Qu=!0,Cc(tt,(function(){return Ec(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Iu.transition,Iu.transition=null;var s=bt;bt=1;var u=Au;Au|=4,_u.current=null,function(e,t){if(ea=Ht,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var s=0,u=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==a&&3!==h.nodeType||(u=s+a),h!==o||0!==r&&3!==h.nodeType||(c=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===a&&(u=s),d===o&&++f===r&&(c=s),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===u||-1===c?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},Ht=!1,Zs=t;null!==Zs;)if(e=(t=Zs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zs=e;else for(;null!==Zs;){t=Zs;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var v=m.memoizedProps,y=m.memoizedState,g=t.stateNode,b=g.getSnapshotBeforeUpdate(t.elementType===t.type?v:vi(t.type,v),y);g.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var k=t.stateNode.containerInfo;1===k.nodeType?k.textContent="":9===k.nodeType&&k.documentElement&&k.removeChild(k.documentElement);break;default:throw Error(i(163))}}catch(w){Nc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zs=e;break}Zs=t.return}m=nu,nu=!1}(e,n),yu(n,e),pr(ta),Ht=!!ea,ta=ea=null,e.current=n,bu(n,e,a),Xe(),Au=u,bt=s,Iu.transition=o}else e.current=n;if(Qu&&(Qu=!1,Yu=e,Xu=a),o=e.pendingLanes,0===o&&(Gu=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ac(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Wu)throw Wu=!1,e=Ku,Ku=null,e;0!==(1&Xu)&&0!==e.tag&&Ec(),o=e.pendingLanes,0!==(1&o)?e===Ju?$u++:($u=0,Ju=e):$u=0,Ba()}(e,t,n,r)}finally{Iu.transition=a,bt=r}return null}function Ec(){if(null!==Yu){var e=kt(Xu),t=Iu.transition,n=bt;try{if(Iu.transition=null,bt=16>e?16:e,null===Yu)var r=!1;else{if(e=Yu,Yu=null,Xu=0,0!==(6&Au))throw Error(i(331));var a=Au;for(Au|=4,Zs=e.current;null!==Zs;){var o=Zs,s=o.child;if(0!==(16&Zs.flags)){var u=o.deletions;if(null!==u){for(var c=0;c<u.length;c++){var l=u[c];for(Zs=l;null!==Zs;){var f=Zs;switch(f.tag){case 0:case 11:case 15:ru(8,f,o)}var h=f.child;if(null!==h)h.return=f,Zs=h;else for(;null!==Zs;){var d=(f=Zs).sibling,p=f.return;if(ou(f),f===l){Zs=null;break}if(null!==d){d.return=p,Zs=d;break}Zs=p}}}var m=o.alternate;if(null!==m){var v=m.child;if(null!==v){m.child=null;do{var y=v.sibling;v.sibling=null,v=y}while(null!==v)}}Zs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Zs=s;else e:for(;null!==Zs;){if(0!==(2048&(o=Zs).flags))switch(o.tag){case 0:case 11:case 15:ru(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zs=g;break e}Zs=o.return}}var b=e.current;for(Zs=b;null!==Zs;){var k=(s=Zs).child;if(0!==(2064&s.subtreeFlags)&&null!==k)k.return=s,Zs=k;else e:for(s=b;null!==Zs;){if(0!==(2048&(u=Zs).flags))try{switch(u.tag){case 0:case 11:case 15:au(9,u)}}catch(x){Nc(u,u.return,x)}if(u===s){Zs=null;break e}var w=u.sibling;if(null!==w){w.return=u.return,Zs=w;break e}Zs=u.return}}if(Au=a,Ba(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(at,e)}catch(x){}r=!0}return r}finally{bt=n,Iu.transition=t}}return!1}function Sc(e,t,n){e=Ri(e,t=ps(0,t=ls(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ac(e,t))}function Nc(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gu||!Gu.has(r))){t=Ri(t,e=ms(t,e=ls(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ac(t,e));break}}t=t.return}}function Tc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Cu===e&&(Ou&n)===n&&(4===Pu||3===Pu&&(130023424&Ou)===Ou&&500>$e()-Bu?dc(e,0):zu|=n),ac(e,t)}function _c(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Ai(e,t))&&(yt(e,t,n),ac(e,n))}function Ic(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),_c(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),_c(e,n)}function Cc(e,t){return Ge(e,t)}function Dc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oc(e,t,n,r){return new Dc(e,t,n,r)}function Mc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=Oc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pc(e,t,n,r,a,o){var s=2;if(r=e,"function"===typeof e)Mc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case E:return Lc(n.children,a,o,t);case S:s=8,a|=8;break;case N:return(e=Oc(12,n,t,2|a)).elementType=N,e.lanes=o,e;case A:return(e=Oc(13,n,t,a)).elementType=A,e.lanes=o,e;case C:return(e=Oc(19,n,t,a)).elementType=C,e.lanes=o,e;case M:return Fc(n,a,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:s=10;break e;case _:s=9;break e;case I:s=11;break e;case D:s=14;break e;case O:s=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Oc(s,n,t,a)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Oc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Oc(22,e,r,t)).elementType=M,e.lanes=n,e.stateNode={isHidden:!1},e}function jc(e,t,n){return(e=Oc(6,e,null,t)).lanes=n,e}function zc(e,t,n){return(t=Oc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vt(0),this.expirationTimes=vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vt(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,a,i,o,s,u){return e=new Vc(e,t,n,s,u),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Oc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Di(i),e}function Bc(e){if(!e)return _a;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oa(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Oa(n))return Pa(e,n,t)}return t}function qc(e,t,n,r,a,i,o,s,u){return(e=Uc(n,r,!0,e,0,i,0,s,u)).context=Bc(null),n=e.current,(i=Mi(r=tc(),a=nc(n))).callback=void 0!==t&&null!==t?t:null,Ri(n,i,a),e.current.lanes=a,yt(e,a,r),ac(e,r),e}function Hc(e,t,n,r){var a=t.current,i=tc(),o=nc(a);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Mi(i,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ri(a,t,o))&&(rc(e,a,o,i),Pi(e,a,o)),o}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}Su=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Aa.current)ks=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ks=!1,function(e,t,n){switch(t.tag){case 3:Cs(t),di();break;case 5:io(t);break;case 1:Oa(t.type)&&La(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Ta(yi,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ta(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?js(e,t,n):(Ta(so,1&so.current),null!==(e=Ws(e,t,n))?e.sibling:null);Ta(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qs(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ta(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Ns(e,t,n)}return Ws(e,t,n)}(e,t,n);ks=0!==(131072&e.flags)}else ks=!1,ai&&0!==(1048576&t.flags)&&Za(t,Ka,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Hs(e,t),e=t.pendingProps;var a=Da(t,Ia.current);Si(t,n),a=So(null,t,r,e,a,n);var o=No();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oa(r)?(o=!0,La(t)):o=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Di(t),a.updater=Ui,t.stateNode=a,a._reactInternals=t,Wi(t,r,e,n),t=As(null,t,r,!0,o,n)):(t.tag=0,ai&&o&&ei(t),ws(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Hs(e,t),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return Mc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===D)return 14}return 2}(r),e=vi(r,e),a){case 0:t=_s(null,t,r,e,n);break e;case 1:t=Is(null,t,r,e,n);break e;case 11:t=xs(null,t,r,e,n);break e;case 14:t=Es(null,t,r,vi(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,_s(e,t,r,a=t.elementType===r?a:vi(r,a),n);case 1:return r=t.type,a=t.pendingProps,Is(e,t,r,a=t.elementType===r?a:vi(r,a),n);case 3:e:{if(Cs(t),null===e)throw Error(i(387));r=t.pendingProps,a=(o=t.memoizedState).element,Oi(e,t),Fi(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ds(e,t,r,n,a=ls(Error(i(423)),t));break e}if(r!==a){t=Ds(e,t,r,n,a=ls(Error(i(424)),t));break e}for(ri=ca(t.stateNode.containerInfo.firstChild),ni=t,ai=!0,ii=null,n=$i(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(di(),r===a){t=Ws(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return io(t),null===e&&ci(t),r=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,s=a.children,na(r,a)?s=null:null!==o&&na(r,o)&&(t.flags|=32),Ts(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&ci(t),null;case 13:return js(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Xi(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,xs(e,t,r,a=t.elementType===r?a:vi(r,a),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,o=t.memoizedProps,s=a.value,Ta(yi,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===a.children&&!Aa.current){t=Ws(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var c=u.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Mi(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Ei(o.return,n,t),u.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(i(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),Ei(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Si(t,n),r=r(a=Ni(a)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return a=vi(r=t.type,t.pendingProps),Es(e,t,r,a=vi(r.type,a),n);case 15:return Ss(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:vi(r,a),Hs(e,t),t.tag=1,Oa(r)?(e=!0,La(t)):e=!1,Si(t,n),qi(t,r,a),Wi(t,r,a,n),As(null,t,r,!0,e,n);case 19:return qs(e,t,n);case 22:return Ns(e,t,n)}throw Error(i(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,a){var i=n._reactRootContainer;if(i){var o=i;if("function"===typeof a){var s=a;a=function(){var e=Wc(o);s.call(e)}}Hc(t,o,e,a)}else o=function(e,t,n,r,a){if(a){if("function"===typeof r){var i=r;r=function(){var e=Wc(o);i.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pa]=o.current,Br(8===e.nodeType?e.parentNode:e),fc(),o}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var s=r;r=function(){var e=Wc(u);s.call(e)}}var u=Uc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=u,e[pa]=u.current,Br(8===e.nodeType?e.parentNode:e),fc((function(){Hc(t,u,n,r)})),u}(n,t,e,a,r);return Wc(o)}Xc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Hc(e,t,null,null)},Xc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Hc(null,e,null,null)})),t[pa]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Mt.length&&0!==t&&t<Mt[n].priority;n++);Mt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),ac(t,$e()),0===(6&Au)&&(qu=$e()+500,Ba()))}break;case 13:fc((function(){var t=Ai(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Gc(e,1)}},xt=function(e){if(13===e.tag){var t=Ai(e,134217728);if(null!==t)rc(t,e,134217728,tc());Gc(e,134217728)}},Et=function(e){if(13===e.tag){var t=nc(e),n=Ai(e,t);if(null!==n)rc(n,e,t,tc());Gc(e,t)}},St=function(){return bt},Nt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},xe=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=wa(r);if(!a)throw Error(i(90));G(r),J(r,a)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=lc,Ae=fc;var tl={usingClientEntryPoint:!1,Events:[ba,ka,wa,Te,_e,lc]},nl={findFiberByHostInstance:ga,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var al=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!al.isDisabled&&al.supportsFiber)try{at=al.inject(rl),it=al}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(i(299));var n=!1,r="",a=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,a),e[pa]=t.current,Br(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(i(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,a=!1,o="",s=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,a,0,o,s),e[pa]=t.current,Br(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Xc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(i(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(i(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pa]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},682:function(e,t,n){"use strict";var r=n(956);var a=n(247);function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"h5",{enumerable:!0,get:function(){return i(a).default}})},956:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){a=!0,i=u}finally{try{!r&&s.return&&s.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=n(791);var i=function(e,t){var n=(0,a.useRef)((function(){throw new Error("Cannot call an event handler while rendering.")}));return(0,a.useEffect)((function(){n.current=e}),[e].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t))),(0,a.useCallback)((function(e){return(0,n.current)(e)}),[n])};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onEnd,n=void 0===t?function(){}:t,o=e.onResult,s=void 0===o?function(){}:o,u=e.onError,c=void 0===u?function(){}:u,l=(0,a.useRef)(null),f=(0,a.useState)(!1),h=r(f,2),d=h[0],p=h[1],m=(0,a.useState)(!1),v=r(m,2),y=v[0],g=v[1],b=function(e){var t=Array.from(e.results).map((function(e){return e[0]})).map((function(e){return e.transcript})).join("");s(t)},k=function(e){"not-allowed"===e.error&&(l.current.onend=function(){},p(!1)),c(e)},w=i((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!d&&y){var t=e.lang,n=void 0===t?"":t,r=e.interimResults,a=void 0===r||r,i=e.continuous,o=void 0!==i&&i,s=e.maxAlternatives,u=void 0===s?1:s,c=e.grammars;p(!0),l.current.lang=n,l.current.interimResults=a,l.current.onresult=b,l.current.onerror=k,l.current.continuous=o,l.current.maxAlternatives=u,c&&(l.current.grammars=c),l.current.onend=function(){return l.current.start()},l.current.start()}}),[d,y,l]),x=i((function(){d&&y&&(l.current.onresult=function(){},l.current.onend=function(){},l.current.onerror=function(){},p(!1),l.current.stop(),n())}),[d,y,l,n]);return(0,a.useEffect)((function(){"undefined"!==typeof window&&(window.SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition,window.SpeechRecognition&&(g(!0),l.current=new window.SpeechRecognition))}),[]),{listen:w,listening:d,stop:x,supported:y}}},247:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){a=!0,i=u}finally{try{!r&&s.return&&s.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=n(791);t.default=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).onEnd,t=void 0===e?function(){}:e,n=(0,a.useState)([]),i=r(n,2),o=i[0],s=i[1],u=(0,a.useState)(!1),c=r(u,2),l=c[0],f=c[1],h=(0,a.useState)(!1),d=r(h,2),p=d[0],m=d[1],v=function(e){s(e)},y=function(){f(!1),t()};(0,a.useEffect)((function(){"undefined"!==typeof window&&window.speechSynthesis&&(m(!0),function(){var e=window.speechSynthesis.getVoices();e.length>0?v(e):window.speechSynthesis.onvoiceschanged=function(t){e=t.target.getVoices(),v(e)}}())}),[]);return{supported:p,speak:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.voice,n=void 0===t?null:t,r=e.text,a=void 0===r?"":r,i=e.rate,o=void 0===i?1:i,s=e.pitch,u=void 0===s?1:s,c=e.volume,l=void 0===c?1:c;if(p){f(!0);var h=new window.SpeechSynthesisUtterance;h.text=a,h.voice=n,h.onend=y,h.rate=o,h.pitch=u,h.volume=l,window.speechSynthesis.speak(h)}},speaking:l,cancel:function(){p&&(f(!1),window.speechSynthesis.cancel())},voices:o}}},374:function(e,t,n){"use strict";var r=n(791),a=Symbol.for("react.element"),i=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:l,props:i,_owner:s.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,v={};function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function g(){}function b(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var k=b.prototype=new g;k.constructor=b,m(k,y.prototype),k.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,E={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function N(e,t,r){var a,i={},o=null,s=null;if(null!=t)for(a in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,a)&&!S.hasOwnProperty(a)&&(i[a]=t[a]);var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(a in u=e.defaultProps)void 0===i[a]&&(i[a]=u[a]);return{$$typeof:n,type:e,key:o,ref:s,props:i,_owner:E.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var _=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,a,i,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===i?"."+I(u,0):i,w(o)?(a="",null!=e&&(a=e.replace(_,"$&/")+"/"),A(o,t,a,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,a+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(_,"$&/")+"/")+e)),t.push(o)),1;if(u=0,i=""===i?".":i+":",w(e))for(var c=0;c<e.length;c++){var l=i+I(s=e[c],c);u+=A(s,t,a,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=A(s=s.value,t,a,l=i+I(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function C(e,t,n){if(null==e)return e;var r=[],a=0;return A(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},M={transition:null},R={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:M,ReactCurrentOwner:E};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=a,t.Profiler=o,t.PureComponent=b,t.StrictMode=i,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=m({},e.props),i=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=E.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)x.call(t,c)&&!S.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];a.children=u}return{$$typeof:n,type:e.type,key:i,ref:o,props:a,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=N,t.createFactory=function(e){var t=N.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=M.transition;M.transition={};try{e()}finally{M.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<i(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,o=a>>>1;r<o;){var s=2*(r+1)-1,u=e[s],c=s+1,l=e[c];if(0>i(u,n))c<a&&0>i(l,u)?(e[r]=l,e[c]=n,r=c):(e[r]=u,e[s]=n,r=s);else{if(!(c<a&&0>i(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],l=[],f=1,h=null,d=3,p=!1,m=!1,v=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function k(e){for(var t=r(l);null!==t;){if(null===t.callback)a(l);else{if(!(t.startTime<=e))break;a(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(v=!1,k(e),!m)if(null!==r(c))m=!0,M(x);else{var t=r(l);null!==t&&R(w,t.startTime-e)}}function x(e,n){m=!1,v&&(v=!1,g(T),T=-1),p=!0;var i=d;try{for(k(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!A());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var s=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(c)&&a(c),k(n)}else a(c);h=r(c)}if(null!==h)var u=!0;else{var f=r(l);null!==f&&R(w,f.startTime-n),u=!1}return u}finally{h=null,d=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,S=!1,N=null,T=-1,_=5,I=-1;function A(){return!(t.unstable_now()-I<_)}function C(){if(null!==N){var e=t.unstable_now();I=e;var n=!0;try{n=N(!0,e)}finally{n?E():(S=!1,N=null)}}else S=!1}if("function"===typeof b)E=function(){b(C)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,O=D.port2;D.port1.onmessage=C,E=function(){O.postMessage(null)}}else E=function(){y(C,0)};function M(e){N=e,S||(S=!0,E())}function R(e,n){T=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,M(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,a,i){var o=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?o+i:o:i=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:f++,callback:a,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>o?(e.sortIndex=i,n(l,e),null===r(c)&&e===r(l)&&(v?(g(T),T=-1):v=!0,R(w,i-o))):(e.sortIndex=s,n(c,e),m||p||(m=!0,M(x))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},699:function(e,t,n){var r=n(501),a=n(112),i=n(132),o=n(890),s=n(113),u=n(725),c=n(411);c.alea=r,c.xor128=a,c.xorwow=i,c.xorshift7=o,c.xor4096=s,c.tychei=u,e.exports=c},501:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n=function(){var e=4022871197,t=function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)};return t}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function u(e,t){var n=new o(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.alea=u}(0,e=n.nmd(e),n.amdD)},725:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.tychei=u}(0,e=n.nmd(e),n.amdD)},112:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor128=u}(0,e=n.nmd(e),n.amdD)},113:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),a=0,i=-32;i<u;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=o+1640531527|0,a=0==(n=s[127&i]^=r+o)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=o,e.X=s,e.i=a}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor4096=u}(0,e=n.nmd(e),n.amdD)},890:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorshift7=u}(0,e=n.nmd(e),n.amdD)},132:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorwow=u}(0,e=n.nmd(e),n.amdD)},411:function(e,t,n){var r;!function(a,i){var o,s=this,u=256,c=6,l="random",f=i.pow(u,c),h=i.pow(2,52),d=2*h,p=u-1;function m(e,t,n){var r=[],p=b(g((t=1==t?{entropy:!0}:t||{}).entropy?[e,k(a)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(u):(e=new Uint8Array(u),(s.crypto||s.msCrypto).getRandomValues(e)),k(e)}catch(r){var t=s.navigator,n=t&&t.plugins;return[+new Date,s,n,s.screen,k(a)]}}():e,3),r),m=new v(r),w=function(){for(var e=m.g(c),t=f,n=0;e<h;)e=(e+n)*u,t*=u,n=m.g(1);for(;e>=d;)e/=2,t/=2,n>>>=1;return(e+n)/t};return w.int32=function(){return 0|m.g(4)},w.quick=function(){return m.g(4)/4294967296},w.double=w,b(k(m.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&y(r,m),e.state=function(){return y(m,{})}),n?(i[l]=e,t):e})(w,p,"global"in t?t.global:this==i,t.state)}function v(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<u;)o[a]=a++;for(a=0;a<u;a++)o[a]=o[i=p&i+e[a%n]+(t=o[a])],o[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,o=r.S;e--;)t=o[a=p&a+1],n=n*u+o[p&(o[a]=o[i=p&i+t])+(o[i]=t)];return r.i=a,r.j=i,n})(u)}function y(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function g(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(g(e[n],t-1))}catch(i){}return r.length?r:"string"==a?e:e+"\0"}function b(e,t){for(var n,r=e+"",a=0;a<r.length;)t[p&a]=p&(n^=19*t[p&a])+r.charCodeAt(a++);return k(t)}function k(e){return String.fromCharCode.apply(0,e)}if(i["seed"+l]=m,b(i.random(),a),e.exports){e.exports=m;try{o=n(42)}catch(w){}}else void 0===(r=function(){return m}.call(t,n,t,e))||(e.exports=r)}([],Math)},410:function(){},628:function(){},42:function(){}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,a){if(1&a&&(r=this(r)),8&a)return r;if("object"===typeof r&&r){if(4&a&&r.__esModule)return r;if(16&a&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&a&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(i,o),i}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){"use strict";var e={};n.r(e),n.d(e,{arraysEqual:function(){return qb},assert:function(){return Fb},assertNonNegativeIntegerDimensions:function(){return bk},assertNonNull:function(){return zb},assertShapesMatch:function(){return jb},bytesFromStringArray:function(){return ok},bytesPerElement:function(){return ik},checkConversionForErrors:function(){return tk},clamp:function(){return Ob},computeStrides:function(){return dk},createScalarValue:function(){return LE},createShuffledIndices:function(){return Gb},decodeString:function(){return UE},distSquared:function(){return Lb},encodeString:function(){return VE},fetch:function(){return zE},flatten:function(){return Vb},getArrayFromDType:function(){return ek},getTypedArrayFromDType:function(){return Zb},hasEncodingLoss:function(){return rk},indexToLoc:function(){return wk},inferDtype:function(){return lk},inferFromImplicitShape:function(){return Xb},isBoolean:function(){return uk},isFunction:function(){return fk},isInt:function(){return Hb},isNumber:function(){return ck},isPromise:function(){return xk},isScalarShape:function(){return Bb},isString:function(){return sk},isTypedArray:function(){return ak},isValidDtype:function(){return nk},locToIndex:function(){return kk},makeOnesTypedArray:function(){return vk},makeZerosNestedTypedArray:function(){return gk},makeZerosTypedArray:function(){return yk},nearestDivisor:function(){return hk},nearestLargerEven:function(){return Mb},now:function(){return jE},parseAxisParam:function(){return $b},randUniform:function(){return Pb},repeatedTry:function(){return Yb},rightPad:function(){return Qb},shuffle:function(){return Cb},shuffleCombo:function(){return Db},sizeFromShape:function(){return Ub},sizeToSquarishShape:function(){return Kb},squeezeShape:function(){return Jb},sum:function(){return Rb},tanh:function(){return Wb},toNestedArray:function(){return mk},toTypedArray:function(){return FE}});var t={};n.r(t),n.d(t,{assertTypesMatch:function(){return hS},getTensorsInContainer:function(){return pS},isTensorInList:function(){return dS},makeTypesMatch:function(){return fS}});var r={};n.r(r),n.d(r,{isBrowser:function(){return ES},isMobile:function(){return xS}});var a={};n.r(a),n.d(a,{browserFiles:function(){return GN},browserHTTPRequest:function(){return iT},concatenateArrayBuffers:function(){return WS},copyModel:function(){return AN},decodeWeights:function(){return zS},encodeWeights:function(){return FS},fromMemory:function(){return uT},getLoadHandlers:function(){return ZS},getModelArtifactsInfoForJSON:function(){return GS},getSaveHandlers:function(){return JS},http:function(){return aT},isHTTPScheme:function(){return nT},listModels:function(){return NN},loadWeights:function(){return $N},moveModel:function(){return DN},registerLoadRouter:function(){return $S},registerSaveRouter:function(){return XS},removeModel:function(){return _N},weightsLoaderFactory:function(){return ZN},withSaveHandler:function(){return cT}});var i={};n.r(i),n.d(i,{confusionMatrix:function(){return pT}});var o={};n.r(o),n.d(o,{fromPixels:function(){return gT},toPixels:function(){return vT}});var s={};n.r(s),n.d(s,{prepareAndValidate:function(){return bT}});var u={};n.r(u),n.d(u,{calculateShapes:function(){return xT},validateInput:function(){return wT},validateUpdateShape:function(){return kT}});var c={};n.r(c),n.d(c,{assertParamsValid:function(){return ET},computeFlatOffset:function(){return LT},computeOutShape:function(){return NT},getNormalizedAxes:function(){return AT},isSliceContinous:function(){return PT},maskToAxes:function(){return ST},parseSliceParams:function(){return FT},sliceInfo:function(){return jT},startForAxis:function(){return MT},startIndicesWithElidedDims:function(){return CT},stopForAxis:function(){return RT},stopIndicesWithElidedDims:function(){return DT},stridesForAxis:function(){return OT},stridesWithElidedDims:function(){return TT}});var l={};n.r(l),n.d(l,{Serializable:function(){return zT},SerializationMap:function(){return VT},registerClass:function(){return UT}});var f={};n.r(f),n.d(f,{TEST_EPSILON_FLOAT16:function(){return qT},encodeStrings:function(){return ZT},expectArrayBuffersEqual:function(){return JT},expectArraysClose:function(){return HT},expectArraysEqual:function(){return QT},expectNumbersClose:function(){return YT},expectPromiseToFail:function(){return GT},expectValuesInRange:function(){return $T},testEpsilon:function(){return WT}});var h={};n.r(h),n.d(h,{conv2d:function(){return qD},depthwiseConv2d:function(){return KD},matMul:function(){return GD}});var d={};n.r(d),n.d(d,{collectGatherOpShapeInfo:function(){return SM},computeOutShape:function(){return EM},segOpComputeOptimalWindowSize:function(){return xM}});var p={};n.r(p),n.d(p,{ERF_A1:function(){return oM},ERF_A2:function(){return sM},ERF_A3:function(){return uM},ERF_A4:function(){return cM},ERF_A5:function(){return lM},ERF_P:function(){return iM},PARALLELIZE_THRESHOLD:function(){return GO},SELU_SCALE:function(){return aM},SELU_SCALEALPHA:function(){return rM},applyActivation:function(){return UD},assertAndGetBroadcastShape:function(){return G_},assertAxesAreInnerMostDims:function(){return BA},assertParamsConsistent:function(){return WO},assignToTypedArray:function(){return gM},axesAreInnerMostDims:function(){return jA},calculateShapes:function(){return xT},combineLocations:function(){return zA},complexWithEvenIndex:function(){return mM},complexWithOddIndex:function(){return vM},computeConv2DInfo:function(){return pI},computeConv3DInfo:function(){return mI},computeDefaultPad:function(){return vI},computeDilation2DInfo:function(){return fI},computeOptimalWindowSize:function(){return QO},computeOutAndReduceShapes:function(){return VA},computeOutShape:function(){return KO},computePool2DInfo:function(){return hI},computePool3DInfo:function(){return dI},convertConv2DDataFormat:function(){return EI},eitherStridesOrDilationsAreOne:function(){return xI},expandShapeToKeepDim:function(){return UA},exponent:function(){return kM},exponents:function(){return bM},fromStringArrayToUint8:function(){return TM},fromUint8ToStringArray:function(){return NM},getAxesPermutation:function(){return qA},getBroadcastDims:function(){return W_},getComplexWithIndex:function(){return yM},getFusedBiasGradient:function(){return VD},getFusedDyActivation:function(){return zD},getImageCenter:function(){return YO},getInnerMostAxes:function(){return WA},getPermuted:function(){return $O},getReductionAxes:function(){return K_},getReshaped:function(){return XO},getReshapedPermuted:function(){return JO},getSliceBeginCoords:function(){return ZO},getSliceSize:function(){return eM},getUndoAxesPermutation:function(){return HA},log:function(){return hM},mergeRealAndImagArrays:function(){return dM},prepareAndValidate:function(){return bT},prepareSplitSize:function(){return wM},segment_util:function(){return d},shouldFuse:function(){return BD},slice_util:function(){return c},splitRealAndImagArrays:function(){return pM},tupleValuesAreOne:function(){return wI},upcastType:function(){return cS},validateInput:function(){return wT},validateUpdateShape:function(){return kT},warn:function(){return fM}});var m={};n.r(m),n.d(m,{nonMaxSuppressionV3Impl:function(){return iO},nonMaxSuppressionV4Impl:function(){return oO},nonMaxSuppressionV5Impl:function(){return sO},whereImpl:function(){return xD}});var v={};n.r(v),n.d(v,{Abs:function(){return Ck},Acos:function(){return Dk},Acosh:function(){return Ok},AdadeltaOptimizer:function(){return j_},AdagradOptimizer:function(){return V_},AdamOptimizer:function(){return q_},AdamaxOptimizer:function(){return Y_},Add:function(){return Mk},AddN:function(){return Rk},All:function(){return Pk},Any:function(){return Lk},ArgMax:function(){return Fk},ArgMin:function(){return jk},Asin:function(){return zk},Asinh:function(){return Vk},Atan:function(){return Uk},Atan2:function(){return qk},Atanh:function(){return Bk},AvgPool:function(){return Hk},AvgPool3D:function(){return Kk},AvgPool3DGrad:function(){return Gk},AvgPoolGrad:function(){return Wk},BatchMatMul:function(){return Qk},BatchToSpaceND:function(){return Yk},Bincount:function(){return Xk},BroadcastTo:function(){return $k},Cast:function(){return Jk},Ceil:function(){return Zk},ClipByValue:function(){return ew},Complex:function(){return tw},ComplexAbs:function(){return nw},Concat:function(){return rw},Conv2D:function(){return aw},Conv2DBackpropFilter:function(){return iw},Conv2DBackpropInput:function(){return ow},Conv3D:function(){return sw},Conv3DBackpropFilterV2:function(){return uw},Conv3DBackpropInputV2:function(){return cw},Cos:function(){return lw},Cosh:function(){return fw},CropAndResize:function(){return dw},Cumsum:function(){return hw},DataStorage:function(){return _b},DenseBincount:function(){return pw},DepthToSpace:function(){return mw},DepthwiseConv2dNative:function(){return vw},DepthwiseConv2dNativeBackpropFilter:function(){return yw},DepthwiseConv2dNativeBackpropInput:function(){return gw},Diag:function(){return bw},Dilation2D:function(){return kw},Dilation2DBackpropFilter:function(){return xw},Dilation2DBackpropInput:function(){return ww},ENV:function(){return _k},Elu:function(){return Sw},EluGrad:function(){return Nw},Environment:function(){return Sk},Equal:function(){return _w},Erf:function(){return Tw},Exp:function(){return Iw},ExpandDims:function(){return Aw},Expm1:function(){return Cw},FFT:function(){return Dw},Fill:function(){return Ow},FlipLeftRight:function(){return Mw},Floor:function(){return Rw},FloorDiv:function(){return Pw},FromPixels:function(){return kE},FusedBatchNorm:function(){return Lw},FusedConv2D:function(){return EE},FusedDepthwiseConv2D:function(){return SE},GatherNd:function(){return jw},GatherV2:function(){return Fw},Greater:function(){return zw},GreaterEqual:function(){return Vw},IFFT:function(){return Bw},Identity:function(){return Uw},Imag:function(){return qw},IsFinite:function(){return Hw},IsInf:function(){return Ww},IsNan:function(){return Kw},KernelBackend:function(){return Ib},LRN:function(){return rx},LRNGrad:function(){return ax},LeakyRelu:function(){return Gw},Less:function(){return Qw},LessEqual:function(){return Yw},LinSpace:function(){return Xw},Log:function(){return $w},Log1p:function(){return Jw},LogSoftmax:function(){return nx},LogicalAnd:function(){return Zw},LogicalNot:function(){return ex},LogicalOr:function(){return tx},Max:function(){return ix},MaxPool:function(){return sx},MaxPool3D:function(){return cx},MaxPool3DGrad:function(){return lx},MaxPoolGrad:function(){return ux},MaxPoolWithArgmax:function(){return fx},Maximum:function(){return ox},Mean:function(){return hx},Min:function(){return dx},Minimum:function(){return px},MirrorPad:function(){return mx},Mod:function(){return vx},MomentumOptimizer:function(){return $_},Multinomial:function(){return yx},Multiply:function(){return gx},Neg:function(){return bx},NonMaxSuppressionV3:function(){return wx},NonMaxSuppressionV4:function(){return xx},NonMaxSuppressionV5:function(){return Ex},NotEqual:function(){return kx},OP_SCOPE_SUFFIX:function(){return CS},OneHot:function(){return Nx},OnesLike:function(){return Sx},Optimizer:function(){return F_},Pack:function(){return Tx},PadV2:function(){return _x},Pool:function(){return Ix},Pow:function(){return Ax},Prelu:function(){return Cx},Prod:function(){return Dx},RMSPropOptimizer:function(){return J_},Range:function(){return Ox},Rank:function(){return nS},Real:function(){return Mx},RealDiv:function(){return Ew},Reciprocal:function(){return Rx},Reduction:function(){return NO},Relu:function(){return Px},Relu6:function(){return Ux},Reshape:function(){return Lx},ResizeBilinear:function(){return zx},ResizeBilinearGrad:function(){return Vx},ResizeNearestNeighbor:function(){return Fx},ResizeNearestNeighborGrad:function(){return jx},Reverse:function(){return Bx},RotateWithOffset:function(){return wE},Round:function(){return qx},Rsqrt:function(){return Hx},SGDOptimizer:function(){return X_},ScatterNd:function(){return Wx},Select:function(){return Kx},Selu:function(){return Gx},Sigmoid:function(){return Jx},Sign:function(){return $x},Sin:function(){return Yx},Sinh:function(){return Xx},Slice:function(){return Qx},Softmax:function(){return aE},Softplus:function(){return Zx},SpaceToBatchND:function(){return nE},SparseToDense:function(){return uE},SplitV:function(){return rE},Sqrt:function(){return eE},Square:function(){return oE},SquaredDifference:function(){return iE},Step:function(){return bE},StridedSlice:function(){return cE},Sub:function(){return sE},Sum:function(){return tE},Tan:function(){return lE},Tanh:function(){return fE},Tensor:function(){return tS},TensorBuffer:function(){return JE},Tile:function(){return hE},TopK:function(){return dE},Transpose:function(){return pE},Unique:function(){return mE},Unpack:function(){return vE},UnsortedSegmentSum:function(){return yE},Variable:function(){return sS},ZerosLike:function(){return gE},_FusedMatMul:function(){return xE},abs:function(){return H_},acos:function(){return Z_},acosh:function(){return eI},add:function(){return x_},addN:function(){return tI},all:function(){return nI},any:function(){return rI},argMax:function(){return aI},argMin:function(){return iI},asin:function(){return oI},asinh:function(){return sI},atan:function(){return uI},atan2:function(){return cI},atanh:function(){return lI},avgPool:function(){return NI},avgPool3d:function(){return TI},backend:function(){return k_},backend_util:function(){return p},basicLSTMCell:function(){return DI},batchNorm:function(){return MI},batchNorm2d:function(){return RI},batchNorm3d:function(){return PI},batchNorm4d:function(){return LI},batchToSpaceND:function(){return OI},bincount:function(){return FI},booleanMaskAsync:function(){return TD},broadcastTo:function(){return jI},browser:function(){return o},buffer:function(){return FN},cast:function(){return jN},ceil:function(){return zI},clipByValue:function(){return VI},clone:function(){return zN},complex:function(){return OS},concat:function(){return _I},concat1d:function(){return UI},concat2d:function(){return BI},concat3d:function(){return qI},concat4d:function(){return HI},conv1d:function(){return KI},conv2d:function(){return WI},conv2dTranspose:function(){return QI},conv3d:function(){return YI},conv3dTranspose:function(){return $I},copyRegisteredKernels:function(){return RE},cos:function(){return JI},cosh:function(){return ZI},cosineWindow:function(){return PD},cumsum:function(){return eA},customGrad:function(){return R_},denseBincount:function(){return tA},deprecationWarn:function(){return a_},depthToSpace:function(){return nA},depthwiseConv2d:function(){return rA},device_util:function(){return r},diag:function(){return aA},dilation2d:function(){return iA},disableDeprecationWarnings:function(){return r_},dispose:function(){return l_},disposeVariables:function(){return i_},div:function(){return S_},divNoNan:function(){return uA},dot:function(){return cA},dropout:function(){return MD},elu:function(){return lA},enableDebugMode:function(){return n_},enableProdMode:function(){return t_},enclosingPowerOfTwo:function(){return RD},engine:function(){return o_},env:function(){return Nk},equal:function(){return oA},erf:function(){return fA},exp:function(){return hA},expandDims:function(){return dA},expm1:function(){return pA},eye:function(){return vA},fft:function(){return eD},fill:function(){return z_},findBackend:function(){return y_},findBackendFactory:function(){return g_},floor:function(){return yA},floorDiv:function(){return E_},fused:function(){return h},gather:function(){return gA},gatherND:function(){return OD},gather_util:function(){return s},getBackend:function(){return m_},getGradient:function(){return IE},getKernel:function(){return _E},getKernelsForBackend:function(){return AE},grad:function(){return A_},grads:function(){return C_},greater:function(){return bA},greaterEqual:function(){return kA},ifft:function(){return tD},imag:function(){return wA},image:function(){return jO},inTopKAsync:function(){return FD},io:function(){return a},irfft:function(){return nD},isFinite:function(){return xA},isInf:function(){return EA},isNaN:function(){return SA},keep:function(){return f_},kernel_impls:function(){return m},leakyRelu:function(){return NA},less:function(){return TA},lessEqual:function(){return _A},linalg:function(){return zO},linspace:function(){return IA},localResponseNormalization:function(){return AA},log:function(){return CA},log1p:function(){return DA},logSigmoid:function(){return RA},logSoftmax:function(){return FA},logSumExp:function(){return KA},logicalAnd:function(){return GA},logicalNot:function(){return QA},logicalOr:function(){return YA},logicalXor:function(){return XA},losses:function(){return VO},matMul:function(){return lT},math:function(){return i},max:function(){return PA},maxPool:function(){return $A},maxPool3d:function(){return JA},maxPoolWithArgmax:function(){return ZA},maximum:function(){return Q_},mean:function(){return eC},memory:function(){return s_},min:function(){return tC},minimum:function(){return nC},mirrorPad:function(){return rC},mod:function(){return aC},moments:function(){return iC},movingAverage:function(){return AD},mul:function(){return N_},multiRNNCell:function(){return oC},multinomial:function(){return sC},neg:function(){return OA},nextFrame:function(){return HO},norm:function(){return ID},notEqual:function(){return uC},oneHot:function(){return fT},ones:function(){return lC},onesLike:function(){return fC},op:function(){return DS},outerProduct:function(){return hC},pad:function(){return dC},pad1d:function(){return pC},pad2d:function(){return mC},pad3d:function(){return vC},pad4d:function(){return yC},pool:function(){return bC},pow:function(){return U_},prelu:function(){return kC},print:function(){return VN},prod:function(){return wC},profile:function(){return u_},rand:function(){return xC},randomGamma:function(){return _C},randomNormal:function(){return IC},randomUniform:function(){return AC},range:function(){return CC},ready:function(){return p_},real:function(){return DC},reciprocal:function(){return OC},registerBackend:function(){return b_},registerGradient:function(){return DE},registerKernel:function(){return CE},relu:function(){return MC},relu6:function(){return RC},removeBackend:function(){return v_},reshape:function(){return SI},reverse:function(){return PC},reverse1d:function(){return LC},reverse2d:function(){return FC},reverse3d:function(){return jC},reverse4d:function(){return zC},rfft:function(){return aD},round:function(){return VC},rsqrt:function(){return UC},scalar:function(){return L_},scatterND:function(){return CD},scatter_util:function(){return u},selu:function(){return BC},separableConv2d:function(){return qC},serialization:function(){return l},setBackend:function(){return d_},setPlatform:function(){return w_},setdiff1dAsync:function(){return WC},sigmoid:function(){return II},sign:function(){return KC},signal:function(){return FO},sin:function(){return GC},sinh:function(){return QC},slice:function(){return AI},slice1d:function(){return YC},slice2d:function(){return XC},slice3d:function(){return $C},slice4d:function(){return JC},slice_util:function(){return c},softmax:function(){return ZC},softplus:function(){return MA},spaceToBatchND:function(){return gC},sparseToDense:function(){return DD},spectral:function(){return LO},split:function(){return rD},sqrt:function(){return T_},square:function(){return __},squaredDifference:function(){return iD},squeeze:function(){return oD},stack:function(){return sD},step:function(){return uD},stridedSlice:function(){return cD},sub:function(){return B_},sum:function(){return LA},sumOutType:function(){return lS},tan:function(){return lD},tanh:function(){return CI},tensor:function(){return RS},tensor1d:function(){return fD},tensor2d:function(){return hD},tensor3d:function(){return mT},tensor4d:function(){return dD},tensor5d:function(){return pD},tensor6d:function(){return mD},tensor_util:function(){return t},test_util:function(){return f},tidy:function(){return c_},tile:function(){return mA},time:function(){return h_},topk:function(){return vD},train:function(){return BO},transpose:function(){return hT},truncatedNormal:function(){return yD},unique:function(){return gD},unregisterGradient:function(){return ME},unregisterKernel:function(){return OE},unsortedSegmentSum:function(){return bD},unstack:function(){return kD},upcastType:function(){return cS},util:function(){return e},valueAndGrad:function(){return D_},valueAndGrads:function(){return O_},variable:function(){return wD},variableGrads:function(){return M_},version_core:function(){return e_},where:function(){return sA},whereAsync:function(){return SD},zeros:function(){return cC},zerosLike:function(){return I_}});var y={};n.r(y),n.d(y,{json:function(){return LM}});var g={};n.r(g),n.d(g,{json:function(){return FM}});var b={};n.r(b),n.d(b,{json:function(){return jM}});var k={};n.r(k),n.d(k,{json:function(){return zM}});var w={};n.r(w),n.d(w,{json:function(){return VM}});var x={};n.r(x),n.d(x,{json:function(){return UM}});var E={};n.r(E),n.d(E,{json:function(){return BM}});var S={};n.r(S),n.d(S,{json:function(){return qM}});var N={};n.r(N),n.d(N,{json:function(){return HM}});var T={};n.r(T),n.d(T,{json:function(){return WM}});var _={};n.r(_),n.d(_,{json:function(){return KM}});var I={};n.r(I),n.d(I,{json:function(){return GM}});var A={};n.r(A),n.d(A,{json:function(){return QM}});var C={};n.r(C),n.d(C,{json:function(){return YM}});var D={};n.r(D),n.d(D,{json:function(){return XM}});var O={};n.r(O),n.d(O,{json:function(){return $M}});var M={};n.r(M),n.d(M,{json:function(){return JM}});var R,P=n(791),L=n.t(P,2),F=n(250);function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function z(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function V(e,t){if(e){if("string"===typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}function U(e){return function(e){if(Array.isArray(e))return j(e)}(e)||z(e)||V(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function H(e){var t=function(e,t){if("object"!==q(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===q(t)?t:String(t)}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,H(r.key),r)}}function K(e,t,n){return t&&W(e.prototype,t),n&&W(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function G(e,t){return G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},G(e,t)}function Q(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G(e,t)}function Y(e){return Y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Y(e)}function X(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(bP){return!1}}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e){var t=X();return function(){var n,r=Y(e);if(t){var a=Y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===q(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $(e)}(this,n)}}function Z(e){if(Array.isArray(e))return e}function ee(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function te(e,t){return Z(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(l){c=!0,a=l}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(e,t)||V(e,t)||ee()}function ne(e,t,n){return ne=X()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&G(a,n.prototype),a},ne.apply(null,arguments)}function re(e){var t="function"===typeof Map?new Map:void 0;return re=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return ne(e,arguments,Y(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),G(n,e)},re(e)}function ae(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=V(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function ie(){return ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ie.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(R||(R={}));var oe,se="popstate";function ue(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function ce(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(bP){}}}function le(e,t){return{usr:e.state,key:e.key,idx:t}}function fe(e,t,n,r){return void 0===n&&(n=null),ie({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?de(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function he(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,a=void 0===r?"":r,i=e.hash,o=void 0===i?"":i;return a&&"?"!==a&&(n+="?"===a.charAt(0)?a:"?"+a),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function de(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function pe(e,t,n,r){void 0===r&&(r={});var a=r,i=a.window,o=void 0===i?document.defaultView:i,s=a.v5Compat,u=void 0!==s&&s,c=o.history,l=R.Pop,f=null,h=d();function d(){return(c.state||{idx:null}).idx}function p(){l=R.Pop;var e=d(),t=null==e?null:e-h;h=e,f&&f({action:l,location:v.location,delta:t})}function m(e){var t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:he(e);return ue(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==h&&(h=0,c.replaceState(ie({},c.state,{idx:h}),""));var v={get action(){return l},get location(){return e(o,c)},listen:function(e){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(se,p),f=e,function(){o.removeEventListener(se,p),f=null}},createHref:function(e){return t(o,e)},createURL:m,encodeLocation:function(e){var t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=R.Push;var r=fe(v.location,e,t);n&&n(r,e);var a=le(r,h=d()+1),i=v.createHref(r);try{c.pushState(a,"",i)}catch(s){o.location.assign(i)}u&&f&&f({action:l,location:v.location,delta:1})},replace:function(e,t){l=R.Replace;var r=fe(v.location,e,t);n&&n(r,e);var a=le(r,h=d()),i=v.createHref(r);c.replaceState(a,"",i),u&&f&&f({action:l,location:v.location,delta:0})},go:function(e){return c.go(e)}};return v}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(oe||(oe={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function me(e,t,n){void 0===n&&(n="/");var r=Ae(("string"===typeof t?de(t):t).pathname||"/",n);if(null==r)return null;var a=ve(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(a);for(var i=null,o=0;null==i&&o<a.length;++o)i=Te(a[o],Ie(r));return i}function ve(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var a=function(e,a,i){var o={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};o.relativePath.startsWith("/")&&(ue(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var s=Me([r,o.relativePath]),u=n.concat(o);e.children&&e.children.length>0&&(ue(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),ve(e.children,t,u,s)),(null!=e.path||e.index)&&t.push({path:s,score:Ne(s,e.index),routesMeta:u})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,i=ae(ye(e.path));try{for(i.s();!(r=i.n()).done;){var o=r.value;a(e,t,o)}}catch(s){i.e(s)}finally{i.f()}}else a(e,t)})),t}function ye(e){var t=e.split("/");if(0===t.length)return[];var n,r=Z(n=t)||z(n)||V(n)||ee(),a=r[0],i=r.slice(1),o=a.endsWith("?"),s=a.replace(/\?$/,"");if(0===i.length)return o?[s,""]:[s];var u=ye(i.join("/")),c=[];return c.push.apply(c,U(u.map((function(e){return""===e?s:[s,e].join("/")})))),o&&c.push.apply(c,U(u)),c.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var ge=/^:\w+$/,be=3,ke=2,we=1,xe=10,Ee=-2,Se=function(e){return"*"===e};function Ne(e,t){var n=e.split("/"),r=n.length;return n.some(Se)&&(r+=Ee),t&&(r+=ke),n.filter((function(e){return!Se(e)})).reduce((function(e,t){return e+(ge.test(t)?be:""===t?we:xe)}),r)}function Te(e,t){for(var n=e.routesMeta,r={},a="/",i=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,c="/"===a?t:t.slice(a.length)||"/",l=_e({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},c);if(!l)return null;Object.assign(r,l.params);var f=s.route;i.push({params:r,pathname:Me([a,l.pathname]),pathnameBase:Re(Me([a,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(a=Me([a,l.pathnameBase]))}return i}function _e(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);ce("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))");var i=new RegExp(a,t?void 0:"i");return[i,r]}(e.path,e.caseSensitive,e.end),r=te(n,2),a=r[0],i=r[1],o=t.match(a);if(!o)return null;var s=o[0],u=s.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:i.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";u=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return ce(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(c[n]||"",t),e}),{}),pathname:s,pathnameBase:u,pattern:e}}function Ie(e){try{return decodeURI(e)}catch(t){return ce(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function Ae(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function Ce(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function De(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function Oe(e,t,n,r){var a;void 0===r&&(r=!1),"string"===typeof e?a=de(e):(ue(!(a=ie({},e)).pathname||!a.pathname.includes("?"),Ce("?","pathname","search",a)),ue(!a.pathname||!a.pathname.includes("#"),Ce("#","pathname","hash",a)),ue(!a.search||!a.search.includes("#"),Ce("#","search","hash",a)));var i,o=""===e||""===a.pathname,s=o?"/":a.pathname;if(r||null==s)i=n;else{var u=t.length-1;if(s.startsWith("..")){for(var c=s.split("/");".."===c[0];)c.shift(),u-=1;a.pathname=c.join("/")}i=u>=0?t[u]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?de(e):e,r=n.pathname,a=n.search,i=void 0===a?"":a,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:Pe(i),hash:Le(s)}}(a,i),f=s&&"/"!==s&&s.endsWith("/"),h=(o||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!f&&!h||(l.pathname+="/"),l}var Me=function(e){return e.join("/").replace(/\/\/+/g,"/")},Re=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},Pe=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},Le=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},Fe=function(e){Q(n,e);var t=J(n);function n(){return B(this,n),t.apply(this,arguments)}return K(n)}(re(Error));function je(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var ze=["post","put","patch","delete"],Ve=(new Set(ze),["get"].concat(ze));new Set(Ve),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;Symbol("deferred");var Ue="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Be=P.useState,qe=P.useEffect,He=P.useLayoutEffect,We=P.useDebugValue;function Ke(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!Ue(n,r)}catch(a){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement,L.useSyncExternalStore;var Ge=P.createContext(null);var Qe=P.createContext(null);var Ye=P.createContext(null);var Xe=P.createContext(null);var $e=P.createContext(null);var Je=P.createContext({outlet:null,matches:[]});var Ze=P.createContext(null);function et(){return et=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},et.apply(this,arguments)}function tt(){return null!=P.useContext($e)}function nt(){return tt()||ue(!1),P.useContext($e).location}function rt(){tt()||ue(!1);var e=P.useContext(Xe),t=e.basename,n=e.navigator,r=P.useContext(Je).matches,a=nt().pathname,i=JSON.stringify(De(r).map((function(e){return e.pathnameBase}))),o=P.useRef(!1);P.useEffect((function(){o.current=!0}));var s=P.useCallback((function(e,r){if(void 0===r&&(r={}),o.current)if("number"!==typeof e){var s=Oe(e,JSON.parse(i),a,"path"===r.relative);"/"!==t&&(s.pathname="/"===s.pathname?t:Me([t,s.pathname])),(r.replace?n.replace:n.push)(s,r.state,r)}else n.go(e)}),[t,n,i,a]);return s}var at=P.createContext(null);function it(e,t){var n=(void 0===t?{}:t).relative,r=P.useContext(Je).matches,a=nt().pathname,i=JSON.stringify(De(r).map((function(e){return e.pathnameBase})));return P.useMemo((function(){return Oe(e,JSON.parse(i),a,"path"===n)}),[e,i,a,n])}function ot(){var e=function(){var e,t=P.useContext(Ze),n=ht(ut.UseRouteError),r=dt(ut.UseRouteError);if(t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=je(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r};return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},t),n?P.createElement("pre",{style:a},n):null,null)}var st,ut,ct=function(e){Q(n,e);var t=J(n);function n(e){var r;return B(this,n),(r=t.call(this,e)).state={location:e.location,error:e.error},r}return K(n,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?P.createElement(Je.Provider,{value:this.props.routeContext},P.createElement(Ze.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),n}(P.Component);function lt(e){var t=e.routeContext,n=e.match,r=e.children,a=P.useContext(Ge);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),P.createElement(Je.Provider,{value:t},r)}function ft(e,t,n){if(void 0===t&&(t=[]),null==e){if(null==n||!n.errors)return null;e=n.matches}var r=e,a=null==n?void 0:n.errors;if(null!=a){var i=r.findIndex((function(e){return e.route.id&&(null==a?void 0:a[e.route.id])}));i>=0||ue(!1),r=r.slice(0,Math.min(r.length,i+1))}return r.reduceRight((function(e,i,o){var s=i.route.id?null==a?void 0:a[i.route.id]:null,u=null;n&&(u=i.route.ErrorBoundary?P.createElement(i.route.ErrorBoundary,null):i.route.errorElement?i.route.errorElement:P.createElement(ot,null));var c=t.concat(r.slice(0,o+1)),l=function(){var t=e;return s?t=u:i.route.Component?t=P.createElement(i.route.Component,null):i.route.element&&(t=i.route.element),P.createElement(lt,{match:i,routeContext:{outlet:e,matches:c},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===o)?P.createElement(ct,{location:n.location,component:u,error:s,children:l(),routeContext:{outlet:null,matches:c}}):l()}),null)}function ht(e){var t=P.useContext(Qe);return t||ue(!1),t}function dt(e){var t=function(e){var t=P.useContext(Je);return t||ue(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||ue(!1),n.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"}(st||(st={})),function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(ut||(ut={}));var pt;function mt(e){return function(e){var t=P.useContext(Je).outlet;return t?P.createElement(at.Provider,{value:e},t):t}(e.context)}function vt(e){ue(!1)}function yt(e){var t=e.basename,n=void 0===t?"/":t,r=e.children,a=void 0===r?null:r,i=e.location,o=e.navigationType,s=void 0===o?R.Pop:o,u=e.navigator,c=e.static,l=void 0!==c&&c;tt()&&ue(!1);var f=n.replace(/^\/*/,"/"),h=P.useMemo((function(){return{basename:f,navigator:u,static:l}}),[f,u,l]);"string"===typeof i&&(i=de(i));var d=i,p=d.pathname,m=void 0===p?"/":p,v=d.search,y=void 0===v?"":v,g=d.hash,b=void 0===g?"":g,k=d.state,w=void 0===k?null:k,x=d.key,E=void 0===x?"default":x,S=P.useMemo((function(){var e=Ae(m,f);return null==e?null:{location:{pathname:e,search:y,hash:b,state:w,key:E},navigationType:s}}),[f,m,y,b,w,E,s]);return null==S?null:P.createElement(Xe.Provider,{value:h},P.createElement($e.Provider,{children:a,value:S}))}function gt(e){var t=e.children,n=e.location,r=P.useContext(Ge);return function(e,t){tt()||ue(!1);var n,r=P.useContext(Xe).navigator,a=P.useContext(Qe),i=P.useContext(Je).matches,o=i[i.length-1],s=o?o.params:{},u=(o&&o.pathname,o?o.pathnameBase:"/"),c=(o&&o.route,nt());if(t){var l,f="string"===typeof t?de(t):t;"/"===u||(null==(l=f.pathname)?void 0:l.startsWith(u))||ue(!1),n=f}else n=c;var h=n.pathname||"/",d=me(e,{pathname:"/"===u?h:h.slice(u.length)||"/"}),p=ft(d&&d.map((function(e){return Object.assign({},e,{params:Object.assign({},s,e.params),pathname:Me([u,r.encodeLocation?r.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:Me([u,r.encodeLocation?r.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),i,a||void 0);return t&&p?P.createElement($e.Provider,{value:{location:et({pathname:"/",search:"",hash:"",state:null,key:"default"},n),navigationType:R.Pop}},p):p}(r&&!t?r.router.routes:kt(t),n)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(pt||(pt={}));var bt=new Promise((function(){}));P.Component;function kt(e,t){void 0===t&&(t=[]);var n=[];return P.Children.forEach(e,(function(e,r){if(P.isValidElement(e))if(e.type!==P.Fragment){e.type!==vt&&ue(!1),e.props.index&&e.props.children&&ue(!1);var a=[].concat(U(t),[r]),i={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=kt(e.props.children,a)),n.push(i)}else n.push.apply(n,kt(e.props.children,t))})),n}function wt(){return wt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wt.apply(this,arguments)}function xt(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var Et=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function St(e){var t,n=e.basename,r=e.children,a=e.window,i=P.useRef();null==i.current&&(i.current=(void 0===(t={window:a,v5Compat:!0})&&(t={}),pe((function(e,t){var n=e.location;return fe("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:he(t)}),null,t)));var o=i.current,s=te(P.useState({action:o.action,location:o.location}),2),u=s[0],c=s[1];return P.useLayoutEffect((function(){return o.listen(c)}),[o]),P.createElement(yt,{basename:n,children:r,location:u.location,navigationType:u.action,navigator:o})}var Nt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Tt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_t=P.forwardRef((function(e,t){var n,r=e.onClick,a=e.relative,i=e.reloadDocument,o=e.replace,s=e.state,u=e.target,c=e.to,l=e.preventScrollReset,f=xt(e,Et),h=P.useContext(Xe).basename,d=!1;if("string"===typeof c&&Tt.test(c)&&(n=c,Nt)){var p=new URL(window.location.href),m=c.startsWith("//")?new URL(p.protocol+c):new URL(c),v=Ae(m.pathname,h);m.origin===p.origin&&null!=v?c=v+m.search+m.hash:d=!0}var y=function(e,t){var n=(void 0===t?{}:t).relative;tt()||ue(!1);var r=P.useContext(Xe),a=r.basename,i=r.navigator,o=it(e,{relative:n}),s=o.hash,u=o.pathname,c=o.search,l=u;return"/"!==a&&(l="/"===u?a:Me([a,u])),i.createHref({pathname:l,search:c,hash:s})}(c,{relative:a}),g=function(e,t){var n=void 0===t?{}:t,r=n.target,a=n.replace,i=n.state,o=n.preventScrollReset,s=n.relative,u=rt(),c=nt(),l=it(e,{relative:s});return P.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();var n=void 0!==a?a:he(c)===he(l);u(e,{replace:n,state:i,preventScrollReset:o,relative:s})}}),[c,u,l,a,i,r,e,o,s])}(c,{replace:o,state:s,target:u,preventScrollReset:l,relative:a});return P.createElement("a",wt({},f,{href:n||y,onClick:d||i?r:function(e){r&&r(e),e.defaultPrevented||g(e)},ref:t,target:u}))}));var It,At;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(It||(It={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(At||(At={}));var Ct=n(184),Dt=function(e){e.children;return(0,Ct.jsx)(Ct.Fragment,{children:(0,Ct.jsx)("div",{className:"container h-screen py-20",children:(0,Ct.jsxs)("div",{className:"flex items-center my-5 gap-x-5",children:[(0,Ct.jsx)(_t,{to:"/",className:"p-4 text-slate-700 transition-colors bg-transparent rounded-lg border-[1px] hover:text-red-600 ",children:"Quay l\u1ea1i"}),(0,Ct.jsx)(_t,{to:"/multiple-choice",className:"p-4 text-white transition-colors rounded-lg bg-[#4F67FF] hover:bg-opacity-80 ",children:"Tr\u1eafc nghi\u1ec7m"}),(0,Ct.jsx)(_t,{to:"/fill-in-the-word",className:"p-4 text-white transition-colors rounded-lg bg-[#4F67FF] hover:bg-opacity-80 ",children:"\u0110i\u1ec1n t\u1eeb"})]})})})};function Ot(){Ot=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(I){u=function(e,t,n){return e[t]=n}}function c(e,t,n,a){var i=t&&t.prototype instanceof h?t:h,o=Object.create(i.prototype),s=new N(a||[]);return r(o,"_invoke",{value:w(e,n,s)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(I){return{type:"throw",arg:I}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var m={};u(m,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(T([])));y&&y!==t&&n.call(y,i)&&(m=y);var g=p.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function a(r,i,o,s){var u=l(e[r],e,i);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==q(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){a("next",e,o,s)}),(function(e){a("throw",e,o,s)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return a("throw",e,o,s)}))}s(u.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return _()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=x(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var a=l(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,f;var i=a.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function T(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:_}}function _(){return{value:void 0,done:!0}}return d.prototype=p,r(g,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=u(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,s,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(k.prototype),u(k.prototype,o,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new k(c(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(g),u(g,s,"Generator"),u(g,i,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;S(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function Mt(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,a)}function Rt(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){Mt(i,r,a,o,s,"next",e)}function s(e){Mt(i,r,a,o,s,"throw",e)}o(void 0)}))}}function Pt(){return Pt="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Y(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},Pt.apply(this,arguments)}function Lt(e,t,n){return(t=H(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ft=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var a=e.charCodeAt(r);a<128?t[n++]=a:a<2048?(t[n++]=a>>6|192,t[n++]=63&a|128):55296===(64512&a)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(a=65536+((1023&a)<<10)+(1023&e.charCodeAt(++r)),t[n++]=a>>18|240,t[n++]=a>>12&63|128,t[n++]=a>>6&63|128,t[n++]=63&a|128):(t[n++]=a>>12|224,t[n++]=a>>6&63|128,t[n++]=63&a|128)}return t},jt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],a=0;a<e.length;a+=3){var i=e[a],o=a+1<e.length,s=o?e[a+1]:0,u=a+2<e.length,c=u?e[a+2]:0,l=i>>2,f=(3&i)<<4|s>>4,h=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ft(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var a=e[n++];if(a<128)t[r++]=String.fromCharCode(a);else if(a>191&&a<224){var i=e[n++];t[r++]=String.fromCharCode((31&a)<<6|63&i)}else if(a>239&&a<365){var o=((7&a)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&a)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],a=0;a<e.length;){var i=n[e.charAt(a++)],o=a<e.length?n[e.charAt(a)]:0,s=++a<e.length?n[e.charAt(a)]:64,u=++a<e.length?n[e.charAt(a)]:64;if(++a,null==i||null==o||null==s||null==u)throw new zt;var c=i<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var f=s<<6&192|u;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},zt=function(e){Q(n,e);var t=J(n);function n(){var e;return B(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return K(n)}(re(Error)),Vt=function(e){return function(e){var t=Ft(e);return jt.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Ut=function(e){try{return jt.decodeString(e,!0)}catch(bP){console.error("base64Decode failed: ",bP)}return null};var Bt=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},qt=function(){try{return Bt()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(bP){return}var t=e&&Ut(e[1]);return t&&JSON.parse(t)}}()}catch(bP){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(bP))}},Ht=function(e){var t,n;return null===(n=null===(t=qt())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Wt=function(e){var t=Ht(e);if(t){var n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));var r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]}},Kt=function(){var e;return null===(e=qt())||void 0===e?void 0:e.config},Gt=function(e){var t;return null===(t=qt())||void 0===t?void 0:t["_".concat(e)]},Qt=function(){function e(){var t=this;B(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return K(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Yt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Xt(){try{return"object"===typeof indexedDB}catch(bP){return!1}}var $t="FirebaseError",Jt=function(e){Q(n,e);var t=J(n);function n(e,r,a){var i;return B(this,n),(i=t.call(this,r)).code=e,i.customData=a,i.name=$t,Object.setPrototypeOf($(i),n.prototype),Error.captureStackTrace&&Error.captureStackTrace($(i),Zt.prototype.create),i}return K(n)}(re(Error)),Zt=function(){function e(t,n,r){B(this,e),this.service=t,this.serviceName=n,this.errors=r}return K(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],a=r?function(e,t){return e.replace(en,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",i="".concat(this.serviceName,": ").concat(a," (").concat(n,").");return new Jt(n,i,t)}}]),e}();var en=/\{\$([^}]+)}/g;function tn(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),a=0,i=n;a<i.length;a++){var o=i[a];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(nn(s)&&nn(u)){if(!tn(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function nn(e){return null!==e&&"object"===typeof e}function rn(e){for(var t=[],n=function(){var e=te(a[r],2),n=e[0],i=e[1];Array.isArray(i)?i.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))},r=0,a=Object.entries(e);r<a.length;r++)n();return t.length?"&"+t.join("&"):""}function an(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=te(e.split("="),2),r=n[0],a=n[1];t[decodeURIComponent(r)]=decodeURIComponent(a)}})),t}function on(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var sn=function(){function e(t,n){var r=this;B(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return K(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,a=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=ae(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a in e&&"function"===typeof e[a])return!0}}catch(i){r.e(i)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=un),void 0===r.error&&(r.error=un),void 0===r.complete&&(r.complete=un);var i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{a.finalError?r.error(a.finalError):r.complete()}catch(bP){}})),this.observers.push(r),i}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(bP){"undefined"!==typeof console&&console.error&&console.error(bP)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function un(){}function cn(e){return e&&e._delegate?e._delegate:e}var ln=function(){function e(t,n,r){B(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return K(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),fn="[DEFAULT]",hn=function(){function e(t,n){B(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return K(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Qt;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(bP){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(bP){if(r)return null;throw bP}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:fn})}catch(bP){}var t,n=ae(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=te(t.value,2),a=r[0],i=r[1],o=this.normalizeInstanceIdentifier(a);try{var s=this.getOrInitializeService({instanceIdentifier:o});i.resolve(s)}catch(bP){}}}catch(u){n.e(u)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Rt(Ot().mark((function e(){var t;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(U(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),U(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var a,i=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=ae(this.instancesDeferred.entries());try{for(o.s();!(a=o.n()).done;){var s=te(a.value,2),u=s[0],c=s[1];r===this.normalizeInstanceIdentifier(u)&&c.resolve(i)}}catch(l){o.e(l)}finally{o.f()}return i}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),a=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;a.add(e),this.onInitCallbacks.set(r,a);var i=this.instances.get(r);return i&&e(i,r),function(){a.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,a=ae(n);try{for(a.s();!(r=a.n()).done;){var i=r.value;try{i(e,t)}catch(o){}}}catch(s){a.e(s)}finally{a.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,a=void 0===r?{}:r,i=this.instances.get(n);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===fn?void 0:t),options:a}),this.instances.set(n,i),this.instancesOptions.set(n,a),this.invokeOnInitCallbacks(i,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,i)}catch(o){}return i||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn;return this.component?this.component.multipleInstances?e:fn:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var dn,pn,mn=function(){function e(t){B(this,e),this.name=t,this.providers=new Map}return K(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new hn(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),vn=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(pn||(pn={}));var yn={debug:pn.DEBUG,verbose:pn.VERBOSE,info:pn.INFO,warn:pn.WARN,error:pn.ERROR,silent:pn.SILENT},gn=pn.INFO,bn=(Lt(dn={},pn.DEBUG,"log"),Lt(dn,pn.VERBOSE,"log"),Lt(dn,pn.INFO,"info"),Lt(dn,pn.WARN,"warn"),Lt(dn,pn.ERROR,"error"),dn),kn=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=bn[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var a,i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];(a=console)[r].apply(a,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},wn=function(){function e(t){B(this,e),this.name=t,this._logLevel=gn,this._logHandler=kn,this._userLogHandler=null,vn.push(this)}return K(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in pn))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?yn[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,pn.DEBUG].concat(t)),this._logHandler.apply(this,[this,pn.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,pn.VERBOSE].concat(t)),this._logHandler.apply(this,[this,pn.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,pn.INFO].concat(t)),this._logHandler.apply(this,[this,pn.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,pn.WARN].concat(t)),this._logHandler.apply(this,[this,pn.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,pn.ERROR].concat(t)),this._logHandler.apply(this,[this,pn.ERROR].concat(t))}}]),e}();function xn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function En(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xn(Object(n),!0).forEach((function(t){Lt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Sn,Nn,Tn=function(e,t){return t.some((function(t){return e instanceof t}))};var _n=new WeakMap,In=new WeakMap,An=new WeakMap,Cn=new WeakMap,Dn=new WeakMap;var On={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return In.get(e);if("objectStoreNames"===t)return e.objectStoreNames||An.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pn(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Mn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Nn||(Nn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Ln(this),n),Pn(_n.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Pn(e.apply(Ln(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];var i=e.call.apply(e,[Ln(this),t].concat(r));return An.set(i,t.sort?t.sort():[t]),Pn(i)}}function Rn(e){return"function"===typeof e?Mn(e):(e instanceof IDBTransaction&&function(e){if(!In.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",a),e.removeEventListener("error",i),e.removeEventListener("abort",i)},a=function(){t(),r()},i=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",a),e.addEventListener("error",i),e.addEventListener("abort",i)}));In.set(e,t)}}(e),Tn(e,Sn||(Sn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,On):e)}function Pn(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",a),e.removeEventListener("error",i)},a=function(){t(Pn(e.result)),r()},i=function(){n(e.error),r()};e.addEventListener("success",a),e.addEventListener("error",i)}));return t.then((function(t){t instanceof IDBCursor&&_n.set(t,e)})).catch((function(){})),Dn.set(t,e),t}(e);if(Cn.has(e))return Cn.get(e);var t=Rn(e);return t!==e&&(Cn.set(e,t),Dn.set(t,e)),t}var Ln=function(e){return Dn.get(e)};var Fn,jn,zn=["get","getKey","getAll","getAllKeys","count"],Vn=["put","add","delete","clear"],Un=new Map;function Bn(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Un.get(t))return Un.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,a=Vn.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(a||zn.includes(n))){var i=function(){var e=Rt(Ot().mark((function e(t){var i,o,s,u,c,l,f=arguments;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,a?"readwrite":"readonly"),s=o.store,u=f.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=f[l];return r&&(s=s.index(c.shift())),e.next=6,Promise.all([(i=s)[n].apply(i,c),a&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Un.set(t,i),i}}}On=function(e){return En(En({},e),{},{get:function(t,n,r){return Bn(t,n)||e.get(t,n,r)},has:function(t,n){return!!Bn(t,n)||e.has(t,n)}})}(On);var qn=function(){function e(t){B(this,e),this.container=t}return K(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Hn="@firebase/app",Wn="0.9.4",Kn=new wn("@firebase/app"),Gn="[DEFAULT]",Qn=(Lt(Fn={},Hn,"fire-core"),Lt(Fn,"@firebase/app-compat","fire-core-compat"),Lt(Fn,"@firebase/analytics","fire-analytics"),Lt(Fn,"@firebase/analytics-compat","fire-analytics-compat"),Lt(Fn,"@firebase/app-check","fire-app-check"),Lt(Fn,"@firebase/app-check-compat","fire-app-check-compat"),Lt(Fn,"@firebase/auth","fire-auth"),Lt(Fn,"@firebase/auth-compat","fire-auth-compat"),Lt(Fn,"@firebase/database","fire-rtdb"),Lt(Fn,"@firebase/database-compat","fire-rtdb-compat"),Lt(Fn,"@firebase/functions","fire-fn"),Lt(Fn,"@firebase/functions-compat","fire-fn-compat"),Lt(Fn,"@firebase/installations","fire-iid"),Lt(Fn,"@firebase/installations-compat","fire-iid-compat"),Lt(Fn,"@firebase/messaging","fire-fcm"),Lt(Fn,"@firebase/messaging-compat","fire-fcm-compat"),Lt(Fn,"@firebase/performance","fire-perf"),Lt(Fn,"@firebase/performance-compat","fire-perf-compat"),Lt(Fn,"@firebase/remote-config","fire-rc"),Lt(Fn,"@firebase/remote-config-compat","fire-rc-compat"),Lt(Fn,"@firebase/storage","fire-gcs"),Lt(Fn,"@firebase/storage-compat","fire-gcs-compat"),Lt(Fn,"@firebase/firestore","fire-fst"),Lt(Fn,"@firebase/firestore-compat","fire-fst-compat"),Lt(Fn,"fire-js","fire-js"),Lt(Fn,"firebase","fire-js-all"),Fn),Yn=new Map,Xn=new Map;function $n(e,t){try{e.container.addComponent(t)}catch(bP){Kn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),bP)}}function Jn(e){var t=e.name;if(Xn.has(t))return Kn.debug("There were multiple attempts to register component ".concat(t,".")),!1;Xn.set(t,e);var n,r=ae(Yn.values());try{for(r.s();!(n=r.n()).done;){$n(n.value,e)}}catch(a){r.e(a)}finally{r.f()}return!0}function Zn(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}var er=(Lt(jn={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Lt(jn,"bad-app-name","Illegal App name: '{$appName}"),Lt(jn,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),Lt(jn,"app-deleted","Firebase App named '{$appName}' already deleted"),Lt(jn,"no-options","Need to provide options, when not being deployed to hosting via source."),Lt(jn,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Lt(jn,"invalid-log-argument","First argument to `onLog` must be null or a function."),Lt(jn,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),Lt(jn,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),Lt(jn,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),Lt(jn,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),jn),tr=new Zt("app","Firebase",er),nr=function(){function e(t,n,r){var a=this;B(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ln("app",(function(){return a}),"PUBLIC"))}return K(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw tr.create("app-deleted",{appName:this._name})}}]),e}(),rr="9.17.2";function ar(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:Gn,automaticDataCollectionEnabled:!1},t),a=r.name;if("string"!==typeof a||!a)throw tr.create("bad-app-name",{appName:String(a)});if(n||(n=Kt()),!n)throw tr.create("no-options");var i=Yn.get(a);if(i){if(tn(n,i.options)&&tn(r,i.config))return i;throw tr.create("duplicate-app",{appName:a})}var o,s=new mn(a),u=ae(Xn.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s.addComponent(c)}}catch(f){u.e(f)}finally{u.f()}var l=new nr(n,r,s);return Yn.set(a,l),l}function ir(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn,t=Yn.get(e);if(!t&&e===Gn)return ar();if(!t)throw tr.create("no-app",{appName:e});return t}function or(e,t,n){var r,a=null!==(r=Qn[e])&&void 0!==r?r:e;n&&(a+="-".concat(n));var i=a.match(/\s|\//),o=t.match(/\s|\//);if(i||o){var s=['Unable to register library "'.concat(a,'" with version "').concat(t,'":')];return i&&s.push('library name "'.concat(a,'" contains illegal characters (whitespace or "/")')),i&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Kn.warn(s.join(" "))}Jn(new ln("".concat(a,"-version"),(function(){return{library:a,version:t}}),"VERSION"))}var sr="firebase-heartbeat-database",ur=1,cr="firebase-heartbeat-store",lr=null;function fr(){return lr||(lr=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,a=n.upgrade,i=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=Pn(s);return a&&s.addEventListener("upgradeneeded",(function(e){a(Pn(s.result),e.oldVersion,e.newVersion,Pn(s.transaction))})),r&&s.addEventListener("blocked",(function(){return r()})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),i&&e.addEventListener("versionchange",(function(){return i()}))})).catch((function(){})),u}(sr,ur,{upgrade:function(e,t){if(0===t)e.createObjectStore(cr)}}).catch((function(e){throw tr.create("idb-open",{originalErrorMessage:e.message})}))),lr}function hr(e){return dr.apply(this,arguments)}function dr(){return dr=Rt(Ot().mark((function e(t){var n,r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fr();case 3:return n=e.sent,e.abrupt("return",n.transaction(cr).objectStore(cr).get(vr(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof Jt?Kn.warn(e.t0.message):(r=tr.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Kn.warn(r.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),dr.apply(this,arguments)}function pr(e,t){return mr.apply(this,arguments)}function mr(){return mr=Rt(Ot().mark((function e(t,n){var r,a,i,o;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fr();case 3:return r=e.sent,a=r.transaction(cr,"readwrite"),i=a.objectStore(cr),e.next=8,i.put(n,vr(t));case 8:return e.abrupt("return",a.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof Jt?Kn.warn(e.t0.message):(o=tr.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Kn.warn(o.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),mr.apply(this,arguments)}function vr(e){return"".concat(e.name,"!").concat(e.options.appId)}var yr=1024,gr=function(){function e(t){var n=this;B(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new xr(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return K(e,[{key:"triggerHeartbeat",value:function(){var e=Rt(Ot().mark((function e(){var t,n,r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=br(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Rt(Ot().mark((function e(){var t,n,r,a,i;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=br(),n=kr(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,a=n.unsentEntries,i=Vt(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(a.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=a,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",i);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function br(){return(new Date).toISOString().substring(0,10)}function kr(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yr,r=[],a=e.slice(),i=ae(e);try{var o=function(){var e=t.value,i=r.find((function(t){return t.agent===e.agent}));if(i){if(i.dates.push(e.date),Er(r)>n)return i.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Er(r)>n)return r.pop(),"break";a=a.slice(1)};for(i.s();!(t=i.n()).done;){if("break"===o())break}}catch(s){i.e(s)}finally{i.f()}return{heartbeatsToSend:r,unsentEntries:a}}var wr,xr=function(){function e(t){B(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return K(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Rt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Xt()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=function(){a.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},a.onupgradeneeded=function(){n=!1},a.onerror=function(){var e;t((null===(e=a.error)||void 0===e?void 0:e.message)||"")}}catch(i){t(i)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Rt(Ot().mark((function e(){var t;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,hr(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Rt(Ot().mark((function e(t){var n,r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",pr(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Rt(Ot().mark((function e(t){var n,r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",pr(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(U(r.heartbeats),U(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Er(e){return Vt(JSON.stringify({version:2,heartbeats:e})).length}wr="",Jn(new ln("platform-logger",(function(e){return new qn(e)}),"PRIVATE")),Jn(new ln("heartbeat",(function(e){return new gr(e)}),"PRIVATE")),or(Hn,Wn,wr),or(Hn,Wn,"esm2017"),or("fire-js","");function Sr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}Object.create;var Nr;Object.create;function Tr(){return Lt({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var _r=Tr,Ir=new Zt("auth","Firebase",Tr()),Ar=new wn("@firebase/auth");function Cr(e){if(Ar.logLevel<=pn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Ar.error.apply(Ar,["Auth (".concat(rr,"): ").concat(e)].concat(n))}}function Dr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Rr.apply(void 0,[e].concat(n))}function Or(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Rr.apply(void 0,[e].concat(n))}function Mr(e,t,n){var r=Object.assign(Object.assign({},_r()),Lt({},t,n));return new Zt("auth","Firebase",r).create(t,{appName:e.name})}function Rr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var a,i=n[0],o=U(n.slice(1));return o[0]&&(o[0].appName=e.name),(a=e._errorFactory).create.apply(a,[i].concat(U(o)))}return Ir.create.apply(Ir,[e].concat(n))}function Pr(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];throw Rr.apply(void 0,[t].concat(r))}}function Lr(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Cr(t),new Error(t)}function Fr(e,t){e||Lr(t)}var jr=new Map;function zr(e){Fr(e instanceof Function,"Expected a class definition");var t=jr.get(e);return t?(Fr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,jr.set(e,t),t)}function Vr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Ur(){return"http:"===Br()||"https:"===Br()}function Br(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function qr(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Ur()||function(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}var Hr=function(){function e(t,n){B(this,e),this.shortDelay=t,this.longDelay=n,Fr(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Yt())||"object"===typeof navigator&&"ReactNative"===navigator.product}return K(e,[{key:"get",value:function(){return qr()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}]),e}();function Wr(e,t){Fr(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Kr=function(){function e(){B(this,e)}return K(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Lr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Lr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Lr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Gr=(Lt(Nr={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),Lt(Nr,"MISSING_CUSTOM_TOKEN","internal-error"),Lt(Nr,"INVALID_IDENTIFIER","invalid-email"),Lt(Nr,"MISSING_CONTINUE_URI","internal-error"),Lt(Nr,"INVALID_PASSWORD","wrong-password"),Lt(Nr,"MISSING_PASSWORD","internal-error"),Lt(Nr,"EMAIL_EXISTS","email-already-in-use"),Lt(Nr,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),Lt(Nr,"INVALID_IDP_RESPONSE","invalid-credential"),Lt(Nr,"INVALID_PENDING_TOKEN","invalid-credential"),Lt(Nr,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),Lt(Nr,"MISSING_REQ_TYPE","internal-error"),Lt(Nr,"EMAIL_NOT_FOUND","user-not-found"),Lt(Nr,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),Lt(Nr,"EXPIRED_OOB_CODE","expired-action-code"),Lt(Nr,"INVALID_OOB_CODE","invalid-action-code"),Lt(Nr,"MISSING_OOB_CODE","internal-error"),Lt(Nr,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),Lt(Nr,"INVALID_ID_TOKEN","invalid-user-token"),Lt(Nr,"TOKEN_EXPIRED","user-token-expired"),Lt(Nr,"USER_NOT_FOUND","user-token-expired"),Lt(Nr,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),Lt(Nr,"INVALID_CODE","invalid-verification-code"),Lt(Nr,"INVALID_SESSION_INFO","invalid-verification-id"),Lt(Nr,"INVALID_TEMPORARY_PROOF","invalid-credential"),Lt(Nr,"MISSING_SESSION_INFO","missing-verification-id"),Lt(Nr,"SESSION_EXPIRED","code-expired"),Lt(Nr,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),Lt(Nr,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),Lt(Nr,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),Lt(Nr,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),Lt(Nr,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),Lt(Nr,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),Lt(Nr,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),Lt(Nr,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),Lt(Nr,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),Lt(Nr,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),Lt(Nr,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Nr),Qr=new Hr(3e4,6e4);function Yr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Xr(e,t,n,r){return $r.apply(this,arguments)}function $r(){return $r=Rt(Ot().mark((function e(t,n,r,a){var i,o=arguments;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Jr(t,i,Rt(Ot().mark((function e(){var i,o,s,u;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={},o={},a&&("GET"===n?o=a:i={body:JSON.stringify(a)}),s=rn(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Kr.fetch()(na(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},i)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),$r.apply(this,arguments)}function Jr(e,t,n){return Zr.apply(this,arguments)}function Zr(){return Zr=Rt(Ot().mark((function e(t,n,r){var a,i,o,s,u,c,l,f,h,d;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,a=Object.assign(Object.assign({},Gr),n),e.prev=2,i=new ra(t),e.next=6,Promise.race([r(),i.promise]);case 6:return o=e.sent,i.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw aa(t,"account-exists-with-different-credential",s);case 13:if(!o.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(u=o.ok?s.errorMessage:s.error.message,c=u.split(" : "),l=te(c,2),f=l[0],h=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw aa(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw aa(t,"email-already-in-use",s);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw aa(t,"user-disabled",s);case 29:if(d=a[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!h){e.next=34;break}throw Mr(t,d,h);case 34:Dr(t,d);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof Jt)){e.next=41;break}throw e.t0;case 41:Dr(t,"internal-error",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),Zr.apply(this,arguments)}function ea(e,t,n,r){return ta.apply(this,arguments)}function ta(){return ta=Rt(Ot().mark((function e(t,n,r,a){var i,o,s=arguments;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,Xr(t,n,r,a,i);case 3:return"mfaPendingCredential"in(o=e.sent)&&Dr(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),ta.apply(this,arguments)}function na(e,t,n,r){var a="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Wr(e.config,a):"".concat(e.config.apiScheme,"://").concat(a)}var ra=function(){function e(t){var n=this;B(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Or(n.auth,"network-request-failed"))}),Qr.get())}))}return K(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function aa(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var a=Or(e,t,r);return a.customData._tokenResponse=n,a}function ia(e,t){return oa.apply(this,arguments)}function oa(){return oa=Rt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xr(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),oa.apply(this,arguments)}function sa(e,t){return ua.apply(this,arguments)}function ua(){return ua=Rt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xr(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),ua.apply(this,arguments)}function ca(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(bP){}}function la(){return la=Rt(Ot().mark((function e(t){var n,r,a,i,o,s,u=arguments;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=cn(t),e.next=4,r.getIdToken(n);case 4:return a=e.sent,Pr((i=ha(a))&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error"),o="object"===typeof i.firebase?i.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:i,token:a,authTime:ca(fa(i.auth_time)),issuedAtTime:ca(fa(i.iat)),expirationTime:ca(fa(i.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),la.apply(this,arguments)}function fa(e){return 1e3*Number(e)}function ha(e){var t=te(e.split("."),3),n=t[0],r=t[1],a=t[2];if(void 0===n||void 0===r||void 0===a)return Cr("JWT malformed, contained fewer than 3 sections"),null;try{var i=Ut(r);return i?JSON.parse(i):(Cr("Failed to decode base64 JWT payload"),null)}catch(bP){return Cr("Caught error parsing JWT payload as JSON",null===bP||void 0===bP?void 0:bP.toString()),null}}function da(e,t){return pa.apply(this,arguments)}function pa(){return pa=Rt(Ot().mark((function e(t,n){var r=arguments;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Jt&&ma(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),pa.apply(this,arguments)}function ma(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var va=function(){function e(t){B(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return K(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Rt(Ot().mark((function t(){return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=Rt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),ya=function(){function e(t,n){B(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return K(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=ca(this.lastLoginAt),this.creationTime=ca(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function ga(e){return ba.apply(this,arguments)}function ba(){return ba=Rt(Ot().mark((function e(t){var n,r,a,i,o,s,u,c,l,f,h;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,e.next=6,da(t,sa(r,{idToken:a}));case 6:Pr(null===(i=e.sent)||void 0===i?void 0:i.users.length,r,"internal-error"),o=i.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=Sr(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],u=wa(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===u||void 0===u?void 0:u.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new ya(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),ba.apply(this,arguments)}function ka(){return(ka=Rt(Ot().mark((function e(t){var n;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=cn(t),e.next=3,ga(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wa(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(U(n),U(t))}function xa(e,t){return Ea.apply(this,arguments)}function Ea(){return Ea=Rt(Ot().mark((function e(t,n){var r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jr(t,{},Rt(Ot().mark((function e(){var r,a,i,o,s,u;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=rn({grant_type:"refresh_token",refresh_token:n}).slice(1),a=t.config,i=a.tokenApiHost,o=a.apiKey,s=na(t,i,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Kr.fetch()(s,{method:"POST",headers:u,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),Ea.apply(this,arguments)}var Sa=function(){function e(){B(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return K(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Pr(e.idToken,"internal-error"),Pr("undefined"!==typeof e.idToken,"internal-error"),Pr("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=ha(e);return Pr(t,"internal-error"),Pr("undefined"!==typeof t.exp,"internal-error"),Pr("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Rt(Ot().mark((function e(t){var n,r=arguments;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Pr(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Rt(Ot().mark((function e(t,n){var r,a,i,o;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xa(t,n);case 2:r=e.sent,a=r.accessToken,i=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(a,i,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Lr("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,a=n.accessToken,i=n.expirationTime,o=new e;return r&&(Pr("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),a&&(Pr("string"===typeof a,"internal-error",{appName:t}),o.accessToken=a),i&&(Pr("number"===typeof i,"internal-error",{appName:t}),o.expirationTime=i),o}}]),e}();function Na(e,t){Pr("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Ta=function(){function e(t){B(this,e);var n=t.uid,r=t.auth,a=t.stsTokenManager,i=Sr(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new va(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?U(i.providerData):[],this.metadata=new ya(i.createdAt||void 0,i.lastLoginAt||void 0)}return K(e,[{key:"getIdToken",value:function(){var e=Rt(Ot().mark((function e(t){var n;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,da(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Pr(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return la.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return ka.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Pr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Pr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Rt(Ot().mark((function e(t){var n,r,a=arguments;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]&&a[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,ga(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Rt(Ot().mark((function e(){var t;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,da(this,ia(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,a,i,o,s,u,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(a=n.email)&&void 0!==a?a:void 0,d=null!==(i=n.phoneNumber)&&void 0!==i?i:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,m=null!==(s=n.tenantId)&&void 0!==s?s:void 0,v=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,b=n.uid,k=n.emailVerified,w=n.isAnonymous,x=n.providerData,E=n.stsTokenManager;Pr(b&&E,t,"internal-error");var S=Sa.fromJSON(this.name,E);Pr("string"===typeof b,t,"internal-error"),Na(f,t.name),Na(h,t.name),Pr("boolean"===typeof k,t,"internal-error"),Pr("boolean"===typeof w,t,"internal-error"),Na(d,t.name),Na(p,t.name),Na(m,t.name),Na(v,t.name),Na(y,t.name),Na(g,t.name);var N=new e({uid:b,auth:t,email:h,emailVerified:k,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:m,stsTokenManager:S,createdAt:y,lastLoginAt:g});return x&&Array.isArray(x)&&(N.providerData=x.map((function(e){return Object.assign({},e)}))),v&&(N._redirectEventId=v),N}},{key:"_fromIdTokenResponse",value:function(){var t=Rt(Ot().mark((function t(n,r){var a,i,o,s=arguments;return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=s.length>2&&void 0!==s[2]&&s[2],(i=new Sa).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:i,isAnonymous:a}),t.next=6,ga(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),_a=function(){function e(){B(this,e),this.type="NONE",this.storage={}}return K(e,[{key:"_isAvailable",value:function(){var e=Rt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Rt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Rt(Ot().mark((function e(t){var n;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Rt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();_a.type="NONE";var Ia=_a;function Aa(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Ca=function(){function e(t,n,r){B(this,e),this.persistence=t,this.auth=n,this.userKey=r;var a=this.auth,i=a.config,o=a.name;this.fullUserKey=Aa(this.userKey,i.apiKey,o),this.fullPersistenceKey=Aa("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return K(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Rt(Ot().mark((function e(){var t;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Ta._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Rt(Ot().mark((function e(t){var n;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Rt(Ot().mark((function t(n,r){var a,i,o,s,u,c,l,f,h,d,p,m=arguments;return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=m.length>2&&void 0!==m[2]?m[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(zr(Ia),n,a));case 3:return t.next=5,Promise.all(r.map(function(){var e=Rt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:i=t.sent.filter((function(e){return e})),o=i[0]||zr(Ia),s=Aa(a,n.config.apiKey,n.name),u=null,c=ae(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(s);case 17:if(!(h=t.sent)){t.next=23;break}return d=Ta._fromJSON(n,h),f!==o&&(u=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=i.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,a));case 40:if(o=p[0],!u){t.next=44;break}return t.next=44,o._set(s,u.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Rt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,a));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Da(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Pa(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Oa(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Fa(t))return"Blackberry";if(ja(t))return"Webos";if(Ma(t))return"Safari";if((t.includes("chrome/")||Ra(t))&&!t.includes("edge/"))return"Chrome";if(La(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Oa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt();return/firefox\//i.test(e)}function Ma(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ra(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt();return/crios\//i.test(e)}function Pa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt();return/iemobile/i.test(e)}function La(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt();return/android/i.test(e)}function Fa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt();return/blackberry/i.test(e)}function ja(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt();return/webos/i.test(e)}function za(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Va(){return function(){var e=Yt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Ua(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt();return za(e)||La(e)||ja(e)||Fa(e)||/windows phone/i.test(e)||Pa(e)}function Ba(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Da(Yt());break;case"Worker":t="".concat(Da(Yt()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(rr,"/").concat(r)}var qa=function(){function e(t){B(this,e),this.auth=t,this.queue=[]}return K(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(bP){r(bP)}}))};r.onAbort=t,this.queue.push(r);var a=this.queue.length-1;return function(){n.queue[a]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=Rt(Ot().mark((function e(t){var n,r,a,i,o,s,u;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=ae(this.queue),e.prev=5,r.s();case 7:if((a=r.n()).done){e.next=14;break}return i=a.value,e.next=11,i(t);case 11:i.onAbort&&n.push(i.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=ae(n);try{for(o.s();!(s=o.n()).done;){u=s.value;try{u()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Ha=function(){function e(t,n,r){B(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ka(this),this.idTokenSubscription=new Ka(this),this.beforeStateQueue=new qa(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ir,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return K(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=zr(t)),this._initializationPromise=this.queue(Rt(Ot().mark((function r(){var a,i;return Ot().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Ca.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(a=n._popupRedirectResolver)||void 0===a?void 0:a._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(i=n.currentUser)||void 0===i?void 0:i.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Rt(Ot().mark((function e(){var t;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Rt(Ot().mark((function e(t){var n,r,a,i,o,s,u;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,a=r,i=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null===a||void 0===a?void 0:a._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:u=e.sent,o&&o!==s||!(null===u||void 0===u?void 0:u.user)||(a=u.user,i=!0);case 14:if(a){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(a._redirectEventId){e.next=32;break}if(!i){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(a);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),a=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!a){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(a));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return Pr(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==a._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(a));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(a));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Rt(Ot().mark((function e(t){var n;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Rt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ga(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Rt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Rt(Ot().mark((function e(t){var n;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?cn(t):null)&&Pr(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Rt(Ot().mark((function e(t){var n,r=this,a=arguments;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]&&a[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&Pr(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(Rt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Rt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Rt(Ot().mark((function n(){return Ot().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(zr(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Zt("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Rt(Ot().mark((function e(t,n){var r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Rt(Ot().mark((function e(t){var n;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Pr(n=t&&zr(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Ca.create(this,[zr(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Rt(Ot().mark((function e(t){var n,r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Rt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Rt(Ot().mark((function e(t){var n=this;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Rt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var a=this;if(this._deleted)return function(){};var i="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Pr(o,this,"internal-error"),o.then((function(){return i(a.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=Rt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Pr(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ba(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Rt(Ot().mark((function e(){var t,n,r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Lt({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Wa(e){return cn(e)}var Ka=function(){function e(t){var n=this;B(this,e),this.auth=t,this.observer=null,this.addObserver=function(e,t){var n=new sn(e,t);return n.subscribe.bind(n)}((function(e){return n.observer=e}))}return K(e,[{key:"next",get:function(){return Pr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Ga(e,t,n){var r=Wa(e);Pr(r._canInitEmulator,r,"emulator-config-failed"),Pr(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var a=!!(null===n||void 0===n?void 0:n.disableWarnings),i=Qa(t),o=function(e){var t=Qa(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){var i=a[1];return{host:i,port:Ya(r.substr(i.length+1))}}var o=te(r.split(":"),2);return{host:o[0],port:Ya(o[1])}}(t),s=o.host,u=o.port,c=null===u?"":":".concat(u);r.config.emulator={url:"".concat(i,"//").concat(s).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:u,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:a})}),a||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Qa(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ya(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Xa=function(){function e(t,n){B(this,e),this.providerId=t,this.signInMethod=n}return K(e,[{key:"toJSON",value:function(){return Lr("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Lr("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Lr("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Lr("not implemented")}}]),e}();function $a(e,t){return Ja.apply(this,arguments)}function Ja(){return Ja=Rt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Ja.apply(this,arguments)}function Za(e,t){return ei.apply(this,arguments)}function ei(){return ei=Rt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ea(t,"POST","/v1/accounts:signInWithPassword",Yr(t,n)));case 1:case"end":return e.stop()}}),e)}))),ei.apply(this,arguments)}function ti(e,t){return ni.apply(this,arguments)}function ni(){return ni=Rt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ea(t,"POST","/v1/accounts:signInWithEmailLink",Yr(t,n)));case 1:case"end":return e.stop()}}),e)}))),ni.apply(this,arguments)}function ri(e,t){return ai.apply(this,arguments)}function ai(){return ai=Rt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ea(t,"POST","/v1/accounts:signInWithEmailLink",Yr(t,n)));case 1:case"end":return e.stop()}}),e)}))),ai.apply(this,arguments)}var ii=function(e){Q(n,e);var t=J(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return B(this,n),(i=t.call(this,"password",a))._email=e,i._password=r,i._tenantId=o,i}return K(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Rt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Za(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",ti(t,{email:this._email,oobCode:this._password}));case 5:Dr(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Rt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",$a(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",ri(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Dr(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Xa);function oi(e,t){return si.apply(this,arguments)}function si(){return si=Rt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ea(t,"POST","/v1/accounts:signInWithIdp",Yr(t,n)));case 1:case"end":return e.stop()}}),e)}))),si.apply(this,arguments)}var ui=function(e){Q(n,e);var t=J(n);function n(){var e;return B(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return K(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return oi(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,oi(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,oi(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=rn(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Dr("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,a=t.signInMethod,i=Sr(t,["providerId","signInMethod"]);if(!r||!a)return null;var o=new n(r,a);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}}]),n}(Xa);function ci(e,t){return li.apply(this,arguments)}function li(){return li=Rt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xr(t,"POST","/v1/accounts:sendVerificationCode",Yr(t,n)));case 1:case"end":return e.stop()}}),e)}))),li.apply(this,arguments)}function fi(){return fi=Rt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ea(t,"POST","/v1/accounts:signInWithPhoneNumber",Yr(t,n)));case 1:case"end":return e.stop()}}),e)}))),fi.apply(this,arguments)}function hi(){return hi=Rt(Ot().mark((function e(t,n){var r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ea(t,"POST","/v1/accounts:signInWithPhoneNumber",Yr(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw aa(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),hi.apply(this,arguments)}var di=Lt({},"USER_NOT_FOUND","user-not-found");function pi(){return pi=Rt(Ot().mark((function e(t,n){var r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",ea(t,"POST","/v1/accounts:signInWithPhoneNumber",Yr(t,r),di));case 2:case"end":return e.stop()}}),e)}))),pi.apply(this,arguments)}var mi=function(e){Q(n,e);var t=J(n);function n(e){var r;return B(this,n),(r=t.call(this,"phone","phone")).params=e,r}return K(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return fi.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return hi.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return pi.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,a=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:a}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,a=t.verificationCode,i=t.phoneNumber,o=t.temporaryProof;return a||r||i||o?new n({verificationId:r,verificationCode:a,phoneNumber:i,temporaryProof:o}):null}}]),n}(Xa);var vi=function(){function e(t){var n,r,a,i,o,s;B(this,e);var u=an(on(t)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(a=u.mode)&&void 0!==a?a:null);Pr(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(i=u.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return K(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=an(on(e)).link,n=t?an(on(t)).deep_link_id:null,r=an(on(e)).deep_link_id;return(r?an(on(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}();var yi=function(){function e(){B(this,e),this.providerId=e.PROVIDER_ID}return K(e,null,[{key:"credential",value:function(e,t){return ii._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=vi.parseLink(t);return Pr(n,"argument-error"),ii._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();yi.PROVIDER_ID="password",yi.EMAIL_PASSWORD_SIGN_IN_METHOD="password",yi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var gi=function(){function e(t){B(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return K(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),bi=function(e){Q(n,e);var t=J(n);function n(){var e;return B(this,n),(e=t.apply(this,arguments)).scopes=[],e}return K(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return U(this.scopes)}}]),n}(gi),ki=function(e){Q(n,e);var t=J(n);function n(){return B(this,n),t.call(this,"facebook.com")}return K(n,null,[{key:"credential",value:function(e){return ui._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(bi);ki.FACEBOOK_SIGN_IN_METHOD="facebook.com",ki.PROVIDER_ID="facebook.com";var wi=function(e){Q(n,e);var t=J(n);function n(){var e;return B(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return K(n,null,[{key:"credential",value:function(e,t){return ui._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,a=t.oauthAccessToken;if(!r&&!a)return null;try{return n.credential(r,a)}catch(i){return null}}}]),n}(bi);wi.GOOGLE_SIGN_IN_METHOD="google.com",wi.PROVIDER_ID="google.com";var xi=function(e){Q(n,e);var t=J(n);function n(){return B(this,n),t.call(this,"github.com")}return K(n,null,[{key:"credential",value:function(e){return ui._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(bi);xi.GITHUB_SIGN_IN_METHOD="github.com",xi.PROVIDER_ID="github.com";var Ei=function(e){Q(n,e);var t=J(n);function n(){return B(this,n),t.call(this,"twitter.com")}return K(n,null,[{key:"credential",value:function(e,t){return ui._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,a=t.oauthTokenSecret;if(!r||!a)return null;try{return n.credential(r,a)}catch(i){return null}}}]),n}(bi);Ei.TWITTER_SIGN_IN_METHOD="twitter.com",Ei.PROVIDER_ID="twitter.com";var Si=function(){function e(t){B(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return K(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Rt(Ot().mark((function t(n,r,a){var i,o,s,u,c=arguments;return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Ta._fromIdTokenResponse(n,a,i);case 3:return o=t.sent,s=Ni(a),u=new e({user:o,providerId:s,_tokenResponse:a,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Rt(Ot().mark((function t(n,r,a){var i;return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(a,!0);case 2:return i=Ni(a),t.abrupt("return",new e({user:n,providerId:i,_tokenResponse:a,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Ni(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}var Ti=function(e){Q(n,e);var t=J(n);function n(e,r,a,i){var o,s;return B(this,n),(o=t.call(this,r.code,r.message)).operationType=a,o.user=i,Object.setPrototypeOf($(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:a},o}return K(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,a){return new n(e,t,r,a)}}]),n}(Jt);function _i(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Ti._fromErrorAndOperation(e,n,t,r);throw n}))}function Ii(e,t){return Ai.apply(this,arguments)}function Ai(){return Ai=Rt(Ot().mark((function e(t,n){var r,a,i=arguments;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]&&i[2],e.t0=da,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return a=e.sent,e.abrupt("return",Si._forOperation(t,"link",a));case 14:case"end":return e.stop()}}),e)}))),Ai.apply(this,arguments)}function Ci(e,t){return Di.apply(this,arguments)}function Di(){return Di=Rt(Ot().mark((function e(t,n){var r,a,i,o,s,u,c=arguments;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],a=t.auth,i="reauthenticate",e.prev=3,e.next=6,da(t,_i(a,i,n,t),r);case 6:return Pr((o=e.sent).idToken,a,"internal-error"),Pr(s=ha(o.idToken),a,"internal-error"),u=s.sub,Pr(t.uid===u,a,"user-mismatch"),e.abrupt("return",Si._forOperation(t,i,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Dr(a,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Di.apply(this,arguments)}function Oi(e,t){return Mi.apply(this,arguments)}function Mi(){return Mi=Rt(Ot().mark((function e(t,n){var r,a,i,o,s=arguments;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],a="signIn",e.next=4,_i(t,a,n);case 4:return i=e.sent,e.next=7,Si._fromIdTokenResponse(t,a,i);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Mi.apply(this,arguments)}function Ri(e,t){return Pi.apply(this,arguments)}function Pi(){return Pi=Rt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Oi(Wa(t),n));case 1:case"end":return e.stop()}}),e)}))),Pi.apply(this,arguments)}function Li(e,t,n){return Ri(cn(e),yi.credential(t,n))}function Fi(e,t){return Xr(e,"POST","/v2/accounts/mfaEnrollment:start",Yr(e,t))}new WeakMap;var ji="__sak",zi=function(){function e(t,n){B(this,e),this.storageRetriever=t,this.type=n}return K(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(ji,"1"),this.storage.removeItem(ji),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Vi=10,Ui=function(e){Q(n,e);var t=J(n);function n(){var e;return B(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Yt();return Ma(e)||za(e)}()&&function(){try{return!(!window||window===window.top)}catch(bP){return!1}}(),e.fallbackToPolling=Ua(),e._shouldAllowMigration=!0,e}return K(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],a=this.storage.getItem(r),i=this.localCache[r];a!==i&&e(r,i,a)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var a=this.storage.getItem(r);if(e.newValue!==a)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var i=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Va()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Vi):i()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,a=Array.from(n);r<a.length;r++){(0,a[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Rt(Ot().mark((function e(t,r){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pt(Y(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Rt(Ot().mark((function e(t){var r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pt(Y(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Rt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pt(Y(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(zi);Ui.type="LOCAL";var Bi=Ui,qi=function(e){Q(n,e);var t=J(n);function n(){return B(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return K(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(zi);qi.type="SESSION";var Hi=qi;function Wi(e){return Promise.all(e.map(function(){var e=Rt(Ot().mark((function e(t){var n;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Ki=function(){function e(t){B(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return K(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Rt(Ot().mark((function e(t){var n,r,a,i,o,s,u,c;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,a=r.eventId,i=r.eventType,o=r.data,null===(s=this.handlersMap[i])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:a,eventType:i}),u=Array.from(s).map(function(){var e=Rt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Wi(u);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:a,eventType:i,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Gi(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Ki.receivers=[];var Qi=function(){function e(t){B(this,e),this.target=t,this.handlers=new Set}return K(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Rt(Ot().mark((function e(t,n){var r,a,i,o,s=this,u=arguments;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,a="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=Gi("",20);a.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:a,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),i=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),e(n.data.response);break;default:clearTimeout(l),clearTimeout(i),u(new Error("invalid_response"))}}},s.handlers.add(o),a.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[a.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Yi(){return window}function Xi(){return"undefined"!==typeof Yi().WorkerGlobalScope&&"function"===typeof Yi().importScripts}function $i(){return Ji.apply(this,arguments)}function Ji(){return(Ji=Rt(Ot().mark((function e(){var t;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Zi(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var eo="firebaseLocalStorageDb",to=1,no="firebaseLocalStorage",ro="fbase_key",ao=function(){function e(t){B(this,e),this.request=t}return K(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function io(e,t){return e.transaction([no],t?"readwrite":"readonly").objectStore(no)}function oo(){var e=indexedDB.deleteDatabase(eo);return new ao(e).toPromise()}function so(){var e=indexedDB.open(eo,to);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(no,{keyPath:ro})}catch(bP){n(bP)}})),e.addEventListener("success",Rt(Ot().mark((function n(){var r;return Ot().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(no)){n.next=12;break}return r.close(),n.next=5,oo();case 5:return n.t0=t,n.next=8,so();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function uo(e,t,n){return co.apply(this,arguments)}function co(){return co=Rt(Ot().mark((function e(t,n,r){var a,i;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=io(t,!0).put((Lt(a={},ro,n),Lt(a,"value",r),a)),e.abrupt("return",new ao(i).toPromise());case 2:case"end":return e.stop()}}),e)}))),co.apply(this,arguments)}function lo(e,t){return fo.apply(this,arguments)}function fo(){return fo=Rt(Ot().mark((function e(t,n){var r,a;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=io(t,!1).get(n),e.next=3,new ao(r).toPromise();case 3:return a=e.sent,e.abrupt("return",void 0===a?null:a.value);case 5:case"end":return e.stop()}}),e)}))),fo.apply(this,arguments)}function ho(e,t){var n=io(e,!0).delete(t);return new ao(n).toPromise()}var po=function(){function e(){B(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return K(e,[{key:"_openDb",value:function(){var e=Rt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,so();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Rt(Ot().mark((function e(t){var n,r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Rt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xi()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Rt(Ot().mark((function e(){var t=this;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Ki._getInstance(Xi()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Rt(Ot().mark((function e(n,r){var a;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return a=e.sent,e.abrupt("return",{keyProcessed:a.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Rt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Rt(Ot().mark((function e(){var t,n,r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$i();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Qi(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Rt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Zi()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Rt(Ot().mark((function e(){var t;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,so();case 5:return t=e.sent,e.next=8,uo(t,ji,"1");case 8:return e.next=10,ho(t,ji);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Rt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Rt(Ot().mark((function e(t,n){var r=this;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Rt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return uo(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Rt(Ot().mark((function e(t){var n;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return lo(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Rt(Ot().mark((function e(t){var n=this;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Rt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return ho(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Rt(Ot().mark((function e(){var t,n,r,a,i,o,s,u,c,l,f;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=io(e,!1).getAll();return new ao(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,a=ae(t);try{for(a.s();!(i=a.n()).done;)o=i.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(h){a.e(h)}finally{a.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,a=Array.from(n);r<a.length;r++){(0,a[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Rt(Ot().mark((function t(){return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();po.type="LOCAL";var mo=po;function vo(e,t){return Xr(e,"POST","/v2/accounts/mfaSignIn:start",Yr(e,t))}function yo(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Or("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function go(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}go("rcb"),new Hr(3e4,6e4);var bo="recaptcha";function ko(e,t,n){return wo.apply(this,arguments)}function wo(){return wo=Rt(Ot().mark((function e(t,n,r){var a,i,o,s,u,c,l,f,h;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(i=e.sent,e.prev=3,Pr("string"===typeof i,t,"argument-error"),Pr(r.type===bo,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return Pr("enroll"===s.type,t,"internal-error"),e.next=13,Fi(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:i}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return Pr("signin"===s.type,t,"internal-error"),Pr(c=(null===(a=o.multiFactorHint)||void 0===a?void 0:a.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,vo(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:i}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,ci(t,{phoneNumber:o.phoneNumber,recaptchaToken:i});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),wo.apply(this,arguments)}var xo=function(){function e(t){B(this,e),this.providerId=e.PROVIDER_ID,this.auth=Wa(t)}return K(e,[{key:"verifyPhoneNumber",value:function(e,t){return ko(this.auth,e,cn(t))}}],[{key:"credential",value:function(e,t){return mi._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?mi._fromTokenResponse(n,r):null}}]),e}();function Eo(e,t){return t?zr(t):(Pr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}xo.PROVIDER_ID="phone",xo.PHONE_SIGN_IN_METHOD="phone";var So=function(e){Q(n,e);var t=J(n);function n(e){var r;return B(this,n),(r=t.call(this,"custom","custom")).params=e,r}return K(n,[{key:"_getIdTokenResponse",value:function(e){return oi(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return oi(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return oi(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Xa);function No(e){return Oi(e.auth,new So(e),e.bypassAuthState)}function To(e){var t=e.auth,n=e.user;return Pr(n,t,"internal-error"),Ci(n,new So(e),e.bypassAuthState)}function _o(e){return Io.apply(this,arguments)}function Io(){return Io=Rt(Ot().mark((function e(t){var n,r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Pr(r=t.user,n,"internal-error"),e.abrupt("return",Ii(r,new So(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),Io.apply(this,arguments)}var Ao=function(){function e(t,n,r,a){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];B(this,e),this.auth=t,this.resolver=r,this.user=a,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return K(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Rt(Ot().mark((function t(n,r){return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Rt(Ot().mark((function e(t){var n,r,a,i,o,s,u;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,a=t.postBody,i=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return No;case"linkViaPopup":case"linkViaRedirect":return _o;case"reauthViaPopup":case"reauthViaRedirect":return To;default:Dr(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Co=new Hr(2e3,1e4);var Do=function(e){Q(n,e);var t=J(n);function n(e,r,a,i,o){var s;return B(this,n),(s=t.call(this,e,r,i,o)).provider=a,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=$(s),s}return K(n,[{key:"executeNotNull",value:function(){var e=Rt(Ot().mark((function e(){var t;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Pr(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Rt(Ot().mark((function e(){var t,n=this;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Fr(1===this.filter.length,"Popup operations only handle one event"),t=Gi(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Or(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Or(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Or(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Co.get())}()}}]),n}(Ao);Do.currentPopupAction=null;var Oo="pendingRedirect",Mo=new Map,Ro=function(e){Q(n,e);var t=J(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return B(this,n),(a=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,i)).eventId=null,a}return K(n,[{key:"execute",value:function(){var e=Rt(Ot().mark((function e(){var t,r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Mo.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Po(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Pt(Y(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Mo.set(this.auth._key(),t);case 21:return this.bypassAuthState||Mo.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Rt(Ot().mark((function e(t){var r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Pt(Y(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Pt(Y(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Rt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Ao);function Po(e,t){return Lo.apply(this,arguments)}function Lo(){return Lo=Rt(Ot().mark((function e(t,n){var r,a,i;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=zo(n),a=jo(t),e.next=4,a._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,a._get(r);case 8:return e.t0=e.sent,i="true"===e.t0,e.next=12,a._remove(r);case 12:return e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)}))),Lo.apply(this,arguments)}function Fo(e,t){Mo.set(e._key(),t)}function jo(e){return zr(e._redirectPersistence)}function zo(e){return Aa(Oo,e.config.apiKey,e.name)}function Vo(e,t){return Uo.apply(this,arguments)}function Uo(){return Uo=Rt(Ot().mark((function e(t,n){var r,a,i,o,s,u=arguments;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],a=Wa(t),i=Eo(a,n),o=new Ro(a,i,r),e.next=6,o.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,a._persistUserIfCurrent(s.user);case 11:return e.next=13,a._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),Uo.apply(this,arguments)}var Bo=function(){function e(t){B(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return K(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ho(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Ho(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Or(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(qo(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(qo(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function qo(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Ho(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Wo(e){return Ko.apply(this,arguments)}function Ko(){return Ko=Rt(Ot().mark((function e(t){var n,r=arguments;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Xr(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Ko.apply(this,arguments)}var Go=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Qo=/^https?/;function Yo(){return Yo=Rt(Ot().mark((function e(t){var n,r,a,i,o;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Wo(t);case 4:n=e.sent,r=n.authorizedDomains,a=ae(r),e.prev=7,a.s();case 9:if((i=a.n()).done){e.next=20;break}if(o=i.value,e.prev=11,!Xo(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),a.e(e.t1);case 25:return e.prev=25,a.f(),e.finish(25);case 28:Dr(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),Yo.apply(this,arguments)}function Xo(e){var t=Vr(),n=new URL(t),r=n.protocol,a=n.hostname;if(e.startsWith("chrome-extension://")){var i=new URL(e);return""===i.hostname&&""===a?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&i.hostname===a}if(!Qo.test(r))return!1;if(Go.test(e))return a===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)}var $o=new Hr(3e4,6e4);function Jo(){var e=Yi().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=U(e.H[r].L),e.CP)for(var a=0;a<e.CP.length;a++)e.CP[a]=null}}var Zo=null;function es(e){return Zo=Zo||function(e){return new Promise((function(t,n){var r,a,i;function o(){Jo(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Jo(),n(Or(e,"network-request-failed"))},timeout:$o.get()})}if(null===(a=null===(r=Yi().gapi)||void 0===r?void 0:r.iframes)||void 0===a?void 0:a.Iframe)t(gapi.iframes.getContext());else{if(!(null===(i=Yi().gapi)||void 0===i?void 0:i.load)){var s=go("iframefcb");return Yi()[s]=function(){gapi.load?o():n(Or(e,"network-request-failed"))},yo("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Zo=null,e}))}(e),Zo}var ts=new Hr(5e3,15e3),ns="__/auth/iframe",rs="emulator/auth/iframe",as={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},is=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function os(e){var t=e.config;Pr(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Wr(t,rs):"https://".concat(e.config.authDomain,"/").concat(ns),r={apiKey:t.apiKey,appName:e.name,v:rr},a=is.get(e.config.apiHost);a&&(r.eid=a);var i=e._getFrameworks();return i.length&&(r.fw=i.join(",")),"".concat(n,"?").concat(rn(r).slice(1))}function ss(e){return us.apply(this,arguments)}function us(){return us=Rt(Ot().mark((function e(t){var n,r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,es(t);case 2:return n=e.sent,Pr(r=Yi().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:os(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:as,dontclear:!0},(function(e){return new Promise(function(){var n=Rt(Ot().mark((function n(r,a){var i,o,s;return Ot().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){Yi().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:i=Or(t,"network-request-failed"),o=Yi().setTimeout((function(){a(i)}),ts.get()),e.ping(s).then(s,(function(){a(i)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),us.apply(this,arguments)}var cs={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ls=500,fs=600,hs="_blank",ds="http://localhost",ps=function(){function e(t){B(this,e),this.window=t,this.associatedEvent=null}return K(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(bP){}}}]),e}();function ms(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ls,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:fs,i=Math.max((window.screen.availHeight-a)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",u=Object.assign(Object.assign({},cs),{width:r.toString(),height:a.toString(),top:i,left:o}),c=Yt().toLowerCase();n&&(s=Ra(c)?hs:n),Oa(c)&&(t=t||ds,u.scrollbars="yes");var l=Object.entries(u).reduce((function(e,t){var n=te(t,2),r=n[0],a=n[1];return"".concat(e).concat(r,"=").concat(a,",")}),"");if(function(){var e;return za(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==s)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",s),new ps(null);var f=window.open(t||"",s,l);Pr(f,e,"popup-blocked");try{f.focus()}catch(bP){}return new ps(f)}var vs="__/auth/handler",ys="emulator/auth/handler";function gs(e,t,n,r,a,i){Pr(e.config.authDomain,e,"auth-domain-config-required"),Pr(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:rr,eventId:a};if(t instanceof gi){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var s=0,u=Object.entries(i||{});s<u.length;s++){var c=te(u[s],2),l=c[0],f=c[1];o[l]=f}}if(t instanceof bi){var h=t.getScopes().filter((function(e){return""!==e}));h.length>0&&(o.scopes=h.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var d=o,p=0,m=Object.keys(d);p<m.length;p++){var v=m[p];void 0===d[v]&&delete d[v]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(vs);return Wr(t,ys)}(e),"?").concat(rn(d).slice(1))}var bs="webStorageSupport",ks=function(){function e(){B(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Hi,this._completeRedirectFn=Vo,this._overrideRedirectResult=Fo}return K(e,[{key:"_openPopup",value:function(){var e=Rt(Ot().mark((function e(t,n,r,a){var i,o;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Fr(null===(i=this.eventManagers[t._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()"),o=gs(t,n,r,Vr(),a),e.abrupt("return",ms(t,o,Gi()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Rt(Ot().mark((function e(t,n,r,a){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return i=gs(t,n,r,Vr(),a),Yi().location.href=i,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var i}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],a=r.manager,i=r.promise;return a?Promise.resolve(a):(Fr(i,"If manager is not set, promise should be"),i)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=Rt(Ot().mark((function e(t){var n,r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ss(t);case 2:return n=e.sent,r=new Bo(t),n.register("authEvent",(function(e){return Pr(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(bs,{type:bs},(function(n){var r,a=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[bs];void 0!==a&&t(!!a),Dr(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Yo.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Ua()||Ma()||za()}}]),e}(),ws=ks,xs=function(){function e(t){B(this,e),this.factorId=t}return K(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Lr("unexpected MultiFactorSessionType")}}}]),e}(),Es=function(e){Q(n,e);var t=J(n);function n(e){var r;return B(this,n),(r=t.call(this,"phone")).credential=e,r}return K(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Xr(e,"POST","/v2/accounts/mfaEnrollment:finalize",Yr(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Xr(e,"POST","/v2/accounts/mfaSignIn:finalize",Yr(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(xs);(function(){function e(){B(this,e)}return K(e,null,[{key:"assertion",value:function(e){return Es._fromCredential(e)}}]),e}()).FACTOR_ID="phone";var Ss="@firebase/auth",Ns="0.21.4",Ts=function(){function e(t){B(this,e),this.auth=t,this.internalListeners=new Map}return K(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Rt(Ot().mark((function e(t){var n;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Pr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var _s,Is=Gt("authIdTokenMaxAge")||300,As=null,Cs=function(e){return function(){var t=Rt(Ot().mark((function t(n){var r,a,i;return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=n,!t.t0){t.next=5;break}return t.next=4,n.getIdTokenResult();case 4:t.t0=t.sent;case 5:if(r=t.t0,!((a=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3)&&a>Is)){t.next=9;break}return t.abrupt("return");case 9:if(i=null===r||void 0===r?void 0:r.token,As!==i){t.next=12;break}return t.abrupt("return");case 12:return As=i,t.next=15,fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:"Bearer ".concat(i)}:{}});case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};_s="Browser",Jn(new ln("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),i=r.options,o=i.apiKey,s=i.authDomain;return function(e,t){Pr(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),Pr(!(null===s||void 0===s?void 0:s.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:s,clientPlatform:_s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ba(_s)},a=new Ha(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(zr);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(a,n),a}(r,a)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Jn(new ln("auth-internal",(function(e){return function(e){return new Ts(e)}(Wa(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),or(Ss,Ns,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_s)),or(Ss,Ns,"esm2017");or("firebase","9.17.2","app");var Ds,Os="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Ms={},Rs=Rs||{},Ps=Os||self;function Ls(){}function Fs(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function js(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var zs="closure_uid_"+(1e9*Math.random()>>>0),Vs=0;function Us(e,t,n){return e.call.apply(e.bind,arguments)}function Bs(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function qs(e,t,n){return(qs=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Us:Bs).apply(null,arguments)}function Hs(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Ws(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var a=Array(arguments.length-2),i=2;i<arguments.length;i++)a[i-2]=arguments[i];return t.prototype[n].apply(e,a)}}function Ks(){this.s=this.s,this.o=this.o}Ks.prototype.s=!1,Ks.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function(e){Object.prototype.hasOwnProperty.call(e,zs)&&e[zs]||(e[zs]=++Vs)}(this)},Ks.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Gs=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Qs(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Ys(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Fs(r)){var a=e.length||0,i=r.length||0;e.length=a+i;for(var o=0;o<i;o++)e[a+o]=r[o]}else e.push(r)}}function Xs(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Xs.prototype.h=function(){this.defaultPrevented=!0};var $s=function(){if(!Ps.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Ps.addEventListener("test",Ls,t),Ps.removeEventListener("test",Ls,t)}catch(AP){}return e}();function Js(e){return/^[\s\xa0]*$/.test(e)}var Zs=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function eu(e,t){return e<t?-1:e>t?1:0}function tu(){var e=Ps.navigator;return e&&(e=e.userAgent)?e:""}function nu(e){return-1!=tu().indexOf(e)}function ru(e){return ru[" "](e),e}ru[" "]=Ls;var au,iu=nu("Opera"),ou=nu("Trident")||nu("MSIE"),su=nu("Edge"),uu=su||ou,cu=nu("Gecko")&&!(-1!=tu().toLowerCase().indexOf("webkit")&&!nu("Edge"))&&!(nu("Trident")||nu("MSIE"))&&!nu("Edge"),lu=-1!=tu().toLowerCase().indexOf("webkit")&&!nu("Edge");function fu(){var e=Ps.document;return e?e.documentMode:void 0}e:{var hu="",du=function(){var e=tu();return cu?/rv:([^\);]+)(\)|;)/.exec(e):su?/Edge\/([\d\.]+)/.exec(e):ou?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):lu?/WebKit\/(\S+)/.exec(e):iu?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(du&&(hu=du?du[1]:""),ou){var pu=fu();if(null!=pu&&pu>parseFloat(hu)){au=String(pu);break e}}au=hu}var mu,vu={};function yu(){return function(e){var t=vu;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Zs(String(au)).split("."),n=Zs("9").split("."),r=Math.max(t.length,n.length),a=0;0==e&&a<r;a++){var i=t[a]||"",o=n[a]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==i[0].length&&0==o[0].length)break;e=eu(0==i[1].length?0:parseInt(i[1],10),0==o[1].length?0:parseInt(o[1],10))||eu(0==i[2].length,0==o[2].length)||eu(i[2],o[2]),i=i[3],o=o[3]}while(0==e)}return 0<=e}))}if(Ps.document&&ou){var gu=fu();mu=gu||(parseInt(au,10)||void 0)}else mu=void 0;var bu=mu;function ku(e,t){if(Xs.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(cu){e:{try{ru(t.nodeName);var a=!0;break e}catch(i){}a=!1}a||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:wu[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&ku.X.h.call(this)}}Ws(ku,Xs);var wu={2:"touch",3:"pen",4:"mouse"};ku.prototype.h=function(){ku.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var xu="closure_listenable_"+(1e6*Math.random()|0),Eu=0;function Su(e,t,n,r,a){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=a,this.key=++Eu,this.ba=this.ea=!1}function Nu(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function Tu(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function _u(e){var t={};for(var n in e)t[n]=e[n];return t}var Iu="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Au(e,t){for(var n,r,a=1;a<arguments.length;a++){for(n in r=arguments[a])e[n]=r[n];for(var i=0;i<Iu.length;i++)n=Iu[i],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Cu(e){this.src=e,this.g={},this.h=0}function Du(e,t){var n=t.type;if(n in e.g){var r,a=e.g[n],i=Gs(a,t);(r=0<=i)&&Array.prototype.splice.call(a,i,1),r&&(Nu(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Ou(e,t,n,r){for(var a=0;a<e.length;++a){var i=e[a];if(!i.ba&&i.listener==t&&i.capture==!!n&&i.ha==r)return a}return-1}Cu.prototype.add=function(e,t,n,r,a){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var o=Ou(e,t,r,a);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new Su(t,this.src,i,!!r,a)).ea=n,e.push(t)),t};var Mu="closure_lm_"+(1e6*Math.random()|0),Ru={};function Pu(e,t,n,r,a){if(r&&r.once)return Fu(e,t,n,r,a);if(Array.isArray(t)){for(var i=0;i<t.length;i++)Pu(e,t[i],n,r,a);return null}return n=Hu(n),e&&e[xu]?e.N(t,n,js(r)?!!r.capture:!!r,a):Lu(e,t,n,!1,r,a)}function Lu(e,t,n,r,a,i){if(!t)throw Error("Invalid event type");var o=js(a)?!!a.capture:!!a,s=Bu(e);if(s||(e[Mu]=s=new Cu(e)),(n=s.add(t,n,r,o,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Uu;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)$s||(a=o),void 0===a&&(a=!1),e.addEventListener(t.toString(),r,a);else if(e.attachEvent)e.attachEvent(Vu(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Fu(e,t,n,r,a){if(Array.isArray(t)){for(var i=0;i<t.length;i++)Fu(e,t[i],n,r,a);return null}return n=Hu(n),e&&e[xu]?e.O(t,n,js(r)?!!r.capture:!!r,a):Lu(e,t,n,!0,r,a)}function ju(e,t,n,r,a){if(Array.isArray(t))for(var i=0;i<t.length;i++)ju(e,t[i],n,r,a);else r=js(r)?!!r.capture:!!r,n=Hu(n),e&&e[xu]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Ou(i=e.g[t],n,r,a))&&(Nu(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=Bu(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Ou(t,n,r,a)),(n=-1<e?t[e]:null)&&zu(n))}function zu(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[xu])Du(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Vu(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Bu(t))?(Du(n,e),0==n.h&&(n.src=null,t[Mu]=null)):Nu(e)}}}function Vu(e){return e in Ru?Ru[e]:Ru[e]="on"+e}function Uu(e,t){if(e.ba)e=!0;else{t=new ku(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&zu(e),e=n.call(r,t)}return e}function Bu(e){return(e=e[Mu])instanceof Cu?e:null}var qu="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hu(e){return"function"===typeof e?e:(e[qu]||(e[qu]=function(t){return e.handleEvent(t)}),e[qu])}function Wu(){Ks.call(this),this.i=new Cu(this),this.P=this,this.I=null}function Ku(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Xs(t,e);else if(t instanceof Xs)t.target=t.target||e;else{var a=t;Au(t=new Xs(r,e),a)}if(a=!0,n)for(var i=n.length-1;0<=i;i--){var o=t.g=n[i];a=Gu(o,r,!0,t)&&a}if(a=Gu(o=t.g=e,r,!0,t)&&a,a=Gu(o,r,!1,t)&&a,n)for(i=0;i<n.length;i++)a=Gu(o=t.g=n[i],r,!1,t)&&a}function Gu(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var a=!0,i=0;i<t.length;++i){var o=t[i];if(o&&!o.ba&&o.capture==n){var s=o.listener,u=o.ha||o.src;o.ea&&Du(e.i,o),a=!1!==s.call(u,r)&&a}}return a&&!r.defaultPrevented}Ws(Wu,Ks),Wu.prototype[xu]=!0,Wu.prototype.removeEventListener=function(e,t,n,r){ju(this,e,t,n,r)},Wu.prototype.M=function(){if(Wu.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Nu(n[r]);delete t.g[e],t.h--}}this.I=null},Wu.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Wu.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Qu=Ps.JSON.stringify;function Yu(){var e=rc,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Xu,$u=function(){function e(){B(this,e),this.h=this.g=null}return K(e,[{key:"add",value:function(e,t){var n=Ju.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Ju=new(function(){function e(t,n){B(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return K(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Zu}),(function(e){return e.reset()})),Zu=function(){function e(){B(this,e),this.next=this.g=this.h=null}return K(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function ec(e){Ps.setTimeout((function(){throw e}),0)}function tc(e,t){Xu||function(){var e=Ps.Promise.resolve(void 0);Xu=function(){e.then(ac)}}(),nc||(Xu(),nc=!0),rc.add(e,t)}var nc=!1,rc=new $u;function ac(){for(var e;e=Yu();){try{e.h.call(e.g)}catch(AP){ec(AP)}var t=Ju;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}nc=!1}function ic(e,t){Wu.call(this),this.h=e||1,this.g=t||Ps,this.j=qs(this.lb,this),this.l=Date.now()}function oc(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function sc(e,t,n){if("function"===typeof e)n&&(e=qs(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=qs(e.handleEvent,e)}return 2147483647<Number(t)?-1:Ps.setTimeout(e,t||0)}function uc(e){e.g=sc((function(){e.g=null,e.i&&(e.i=!1,uc(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Ws(ic,Wu),(Ds=ic.prototype).ca=!1,Ds.R=null,Ds.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Ku(this,"tick"),this.ca&&(oc(this),this.start()))}},Ds.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ds.M=function(){ic.X.M.call(this),oc(this),delete this.g};var cc=function(e){Q(n,e);var t=J(n);function n(e,r){var a;return B(this,n),(a=t.call(this)).m=e,a.j=r,a.h=null,a.i=!1,a.g=null,a}return K(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:uc(this)}},{key:"M",value:function(){Pt(Y(n.prototype),"M",this).call(this),this.g&&(Ps.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Ks);function lc(e){Ks.call(this),this.h=e,this.g={}}Ws(lc,Ks);var fc=[];function hc(e,t,n,r){Array.isArray(n)||(n&&(fc[0]=n.toString()),n=fc);for(var a=0;a<n.length;a++){var i=Pu(t,n[a],r||e.handleEvent,!1,e.h||e);if(!i)break;e.g[i.key]=i}}function dc(e){Tu(e.g,(function(e,t){this.g.hasOwnProperty(t)&&zu(e)}),e),e.g={}}function pc(){this.g=!0}function mc(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var a=r[1];if(Array.isArray(a)&&!(1>a.length)){var i=a[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var o=1;o<a.length;o++)a[o]=""}}}return Qu(n)}catch(kP){return t}}(e,n)+(r?" "+r:"")}))}lc.prototype.M=function(){lc.X.M.call(this),dc(this)},lc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},pc.prototype.Aa=function(){this.g=!1},pc.prototype.info=function(){};var vc={},yc=null;function gc(){return yc=yc||new Wu}function bc(e){Xs.call(this,vc.Pa,e)}function kc(e){var t=gc();Ku(t,new bc(t))}function wc(e,t){Xs.call(this,vc.STAT_EVENT,e),this.stat=t}function xc(e){var t=gc();Ku(t,new wc(t,e))}function Ec(e,t){Xs.call(this,vc.Qa,e),this.size=t}function Sc(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Ps.setTimeout((function(){e()}),t)}vc.Pa="serverreachability",Ws(bc,Xs),vc.STAT_EVENT="statevent",Ws(wc,Xs),vc.Qa="timingevent",Ws(Ec,Xs);var Nc={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Tc={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function _c(){}function Ic(e){return e.h||(e.h=e.i())}function Ac(){}_c.prototype.h=null;var Cc,Dc={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Oc(){Xs.call(this,"d")}function Mc(){Xs.call(this,"c")}function Rc(){}function Pc(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new lc(this),this.O=Fc,e=uu?125:void 0,this.T=new ic(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Lc}function Lc(){this.i=null,this.g="",this.h=!1}Ws(Oc,Xs),Ws(Mc,Xs),Ws(Rc,_c),Rc.prototype.g=function(){return new XMLHttpRequest},Rc.prototype.i=function(){return{}},Cc=new Rc;var Fc=45e3,jc={},zc={};function Vc(e,t,n){e.K=1,e.v=il(el(t)),e.s=n,e.P=!0,Uc(e,null)}function Uc(e,t){e.F=Date.now(),Wc(e),e.A=el(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),gl(n.i,"t",r),e.C=0,n=e.l.H,e.h=new Lc,e.g=bf(e.l,n?t:null,!e.s),0<e.N&&(e.L=new cc(qs(e.La,e,e.g),e.N)),hc(e.S,e.g,"readystatechange",e.ib),t=e.H?_u(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),kc(),function(e,t,n,r,a,i){e.info((function(){if(e.g)if(i)for(var o="",s=i.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+a+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function Bc(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function qc(e,t,n){for(var r,a=!0;!e.I&&e.C<n.length;){if((r=Hc(e,n))==zc){4==t&&(e.o=4,xc(14),a=!1),mc(e.j,e.m,null,"[Incomplete Response]");break}if(r==jc){e.o=4,xc(15),mc(e.j,e.m,n,"[Invalid Chunk]"),a=!1;break}mc(e.j,e.m,r,null),Xc(e,r)}Bc(e)&&r!=zc&&r!=jc&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,xc(16),a=!1),e.i=e.i&&a,a?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),ff(t),t.K=!0,xc(11))):(mc(e.j,e.m,n,"[Invalid Chunked Response]"),Yc(e),Qc(e))}function Hc(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?zc:(n=Number(t.substring(n,r)),isNaN(n)?jc:(r+=1)+n>t.length?zc:(t=t.substr(r,n),e.C=r+n,t))}function Wc(e){e.V=Date.now()+e.O,Kc(e,e.O)}function Kc(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Sc(qs(e.gb,e),t)}function Gc(e){e.B&&(Ps.clearTimeout(e.B),e.B=null)}function Qc(e){0==e.l.G||e.I||pf(e.l,e)}function Yc(e){Gc(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,oc(e.T),dc(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Xc(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Nl(n.h,e)))if(!e.J&&Nl(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(i){r=null}if(Array.isArray(r)&&3==r.length){var a=r;if(0==a[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;df(n),nf(n)}lf(n),xc(18)}}else n.Ba=a[1],0<n.Ba-n.T&&37500>a[2]&&n.L&&0==n.A&&!n.v&&(n.v=Sc(qs(n.cb,n),6e3));if(1>=Sl(n.h)&&n.ja){try{n.ja()}catch(i){}n.ja=void 0}}else vf(n,11)}else if((e.J||n.g==e)&&df(n),!Js(t))for(a=n.Fa.g.parse(t),t=0;t<a.length;t++){var i=a[t];if(n.T=i[0],i=i[1],2==n.G)if("c"==i[0]){n.I=i[1],n.ka=i[2];var o=i[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var s=i[4];null!=s&&(n.Ca=s,n.j.info("SVER="+n.Ca));var u=i[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.h;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(Tl(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.za=h,al(r.F,r.D,h))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=gf(r,r.H?r.ka:null,r.V),d.J){_l(r.h,d);var p=d,m=r.J;m&&p.setTimeout(m),p.B&&(Gc(p),Wc(p)),r.g=d}else cf(r);0<n.i.length&&af(n)}else"stop"!=i[0]&&"close"!=i[0]||vf(n,7);else 3==n.G&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?vf(n,7):tf(n):"noop"!=i[0]&&n.l&&n.l.wa(i),n.A=0)}kc()}catch(i){}}function $c(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Fs(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Fs(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Fs(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),a=r.length,i=0;i<a;i++)t.call(void 0,r[i],n&&n[i],e)}(Ds=Pc.prototype).setTimeout=function(e){this.O=e},Ds.ib=function(e){e=e.target;var t=this.L;t&&3==Yl(e)?t.l():this.La(e)},Ds.La=function(e){try{if(e==this.g)e:{var t=Yl(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||uu||this.g&&(this.h.h||this.g.fa()||Xl(this.g)))){this.I||4!=t||7==n||kc(),Gc(this);var r=this.g.aa();this.Y=r;t:if(Bc(this)){var a=Xl(this.g);e="";var i=a.length,o=4==Yl(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Yc(this),Qc(this);var s="";break t}this.h.i=new Ps.TextDecoder}for(n=0;n<i;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:o&&n==i-1});a.splice(0,i),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.fa();if(this.i=200==r,function(e,t,n,r,a,i,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+a+"]: "+t+"\n"+n+"\n"+i+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var u,c=this.g;if((u=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Js(u)){var l=u;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,xc(12),Yc(this),Qc(this);break e}mc(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Xc(this,r)}this.P?(qc(this,t,s),uu&&this.i&&3==t&&(hc(this.S,this.T,"tick",this.hb),this.T.start())):(mc(this.j,this.m,s,null),Xc(this,s)),4==t&&Yc(this),this.i&&!this.I&&(4==t?pf(this.l,this):(this.i=!1,Wc(this)))}else 400==r&&0<s.indexOf("Unknown SID")?(this.o=3,xc(12)):(this.o=0,xc(13)),Yc(this),Qc(this)}}}catch(t){}},Ds.hb=function(){if(this.g){var e=Yl(this.g),t=this.g.fa();this.C<t.length&&(Gc(this),qc(this,e,t),this.i&&4!=e&&Wc(this))}},Ds.cancel=function(){this.I=!0,Yc(this)},Ds.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(kc(),xc(17)),Yc(this),this.o=2,Qc(this)):Kc(this,this.V-e)};var Jc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zc(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Zc){this.h=void 0!==t?t:e.h,tl(this,e.j),this.s=e.s,this.g=e.g,nl(this,e.m),this.l=e.l,t=e.i;var n=new pl;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),rl(this,n),this.o=e.o}else e&&(n=String(e).match(Jc))?(this.h=!!t,tl(this,n[1]||"",!0),this.s=ol(n[2]||""),this.g=ol(n[3]||"",!0),nl(this,n[4]),this.l=ol(n[5]||"",!0),rl(this,n[6]||"",!0),this.o=ol(n[7]||"")):(this.h=!!t,this.i=new pl(null,this.h))}function el(e){return new Zc(e)}function tl(e,t,n){e.j=n?ol(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function nl(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function rl(e,t,n){t instanceof pl?(e.i=t,function(e,t){t&&!e.j&&(ml(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(vl(this,t),gl(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=sl(t,hl)),e.i=new pl(t,e.h))}function al(e,t,n){e.i.set(t,n)}function il(e){return al(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ol(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function sl(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,ul),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ul(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Zc.prototype.toString=function(){var e=[],t=this.j;t&&e.push(sl(t,cl,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(sl(t,cl,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(sl(n,"/"==n.charAt(0)?fl:ll,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",sl(n,dl)),e.join("")};var cl=/[#\/\?@]/g,ll=/[#\?:]/g,fl=/[#\?]/g,hl=/[#\?@]/g,dl=/#/g;function pl(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ml(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),a=null;if(0<=r){var i=e[n].substring(0,r);a=e[n].substring(r+1)}else i=e[n];t(i,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function vl(e,t){ml(e),t=bl(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function yl(e,t){return ml(e),t=bl(e,t),e.g.has(t)}function gl(e,t,n){vl(e,t),0<n.length&&(e.i=null,e.g.set(bl(e,t),Qs(n)),e.h+=n.length)}function bl(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Ds=pl.prototype).add=function(e,t){ml(this),this.i=null,e=bl(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Ds.forEach=function(e,t){ml(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Ds.oa=function(){ml(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var a=e[r],i=0;i<a.length;i++)n.push(t[r]);return n},Ds.W=function(e){ml(this);var t=[];if("string"===typeof e)yl(this,e)&&(t=t.concat(this.g.get(bl(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Ds.set=function(e,t){return ml(this),this.i=null,yl(this,e=bl(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Ds.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},Ds.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],a=encodeURIComponent(String(r)),i=this.W(r);for(r=0;r<i.length;r++){var o=a;""!==i[r]&&(o+="="+encodeURIComponent(String(i[r]))),e.push(o)}}return this.i=e.join("&")};var kl=K((function e(t,n){B(this,e),this.h=t,this.g=n}));function wl(e){this.l=e||xl,Ps.PerformanceNavigationTiming?e=0<(e=Ps.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Ps.g&&Ps.g.Ga&&Ps.g.Ga()&&Ps.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var xl=10;function El(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Sl(e){return e.h?1:e.g?e.g.size:0}function Nl(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Tl(e,t){e.g?e.g.add(t):e.h=t}function _l(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Il(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=ae(e.g.values());try{for(r.s();!(t=r.n()).done;){var a=t.value;n=n.concat(a.D)}}catch(i){r.e(i)}finally{r.f()}return n}return Qs(e.i)}function Al(){}function Cl(){this.g=new Al}function Dl(e,t,n){var r=n||"";try{$c(e,(function(e,n){var a=e;js(e)&&(a=Qu(e)),t.push(r+n+"="+encodeURIComponent(a))}))}catch(bP){throw t.push(r+"type="+encodeURIComponent("_badmap")),bP}}function Ol(e,t,n,r,a){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,a(r)}catch(i){}}function Ml(e){this.l=e.ac||null,this.j=e.jb||!1}function Rl(e,t){Wu.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Pl,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}wl.prototype.cancel=function(){if(this.i=Il(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=ae(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Al.prototype.stringify=function(e){return Ps.JSON.stringify(e,void 0)},Al.prototype.parse=function(e){return Ps.JSON.parse(e,void 0)},Ws(Ml,_c),Ml.prototype.g=function(){return new Rl(this.l,this.j)},Ml.prototype.i=function(e){return function(){return e}}({}),Ws(Rl,Wu);var Pl=0;function Ll(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function Fl(e){e.readyState=4,e.l=null,e.j=null,e.A=null,jl(e)}function jl(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Ds=Rl.prototype).open=function(e,t){if(this.readyState!=Pl)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,jl(this)},Ds.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Ps).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},Ds.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Fl(this)),this.readyState=Pl},Ds.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,jl(this)),this.g&&(this.readyState=3,jl(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof Ps.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ll(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},Ds.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Fl(this):jl(this),3==this.readyState&&Ll(this)}},Ds.Va=function(e){this.g&&(this.response=this.responseText=e,Fl(this))},Ds.Ua=function(e){this.g&&(this.response=e,Fl(this))},Ds.ga=function(){this.g&&Fl(this)},Ds.setRequestHeader=function(e,t){this.v.append(e,t)},Ds.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Ds.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Rl.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var zl=Ps.JSON.parse;function Vl(e){Wu.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ul,this.K=this.L=!1}Ws(Vl,Wu);var Ul="",Bl=/^https?$/i,ql=["POST","PUT"];function Hl(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Wl(e),Gl(e)}function Wl(e){e.D||(e.D=!0,Ku(e,"complete"),Ku(e,"error"))}function Kl(e){if(e.h&&"undefined"!=typeof Rs&&(!e.C[1]||4!=Yl(e)||2!=e.aa()))if(e.v&&4==Yl(e))sc(e.Ha,0,e);else if(Ku(e,"readystatechange"),4==Yl(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var a;if(a=0===n){var i=String(e.H).match(Jc)[1]||null;if(!i&&Ps.self&&Ps.self.location){var o=Ps.self.location.protocol;i=o.substr(0,o.length-1)}a=!Bl.test(i?i.toLowerCase():"")}t=a}if(t)Ku(e,"complete"),Ku(e,"success");else{e.m=6;try{var s=2<Yl(e)?e.g.statusText:""}catch(_P){s=""}e.j=s+" ["+e.aa()+"]",Wl(e)}}finally{Gl(e)}}}function Gl(e,t){if(e.g){Ql(e);var n=e.g,r=e.C[0]?Ls:null;e.g=null,e.C=null,t||Ku(e,"ready");try{n.onreadystatechange=r}catch(bP){}}}function Ql(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Ps.clearTimeout(e.A),e.A=null)}function Yl(e){return e.g?e.g.readyState:0}function Xl(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Ul:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Pf){return null}}function $l(e){var t="";return Tu(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Jl(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=$l(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):al(e,t,n))}function Zl(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function ef(e){this.Ca=0,this.i=[],this.j=new pc,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Zl("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Zl("baseRetryDelayMs",5e3,e),this.bb=Zl("retryDelaySeedMs",1e4,e),this.$a=Zl("forwardChannelMaxRetries",2,e),this.ta=Zl("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new wl(e&&e.concurrentRequestLimit),this.Fa=new Cl,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function tf(e){if(rf(e),3==e.G){var t=e.U++,n=el(e.F);al(n,"SID",e.I),al(n,"RID",t),al(n,"TYPE","terminate"),sf(e,n),(t=new Pc(e,e.j,t,void 0)).K=2,t.v=il(el(n)),n=!1,Ps.navigator&&Ps.navigator.sendBeacon&&(n=Ps.navigator.sendBeacon(t.v.toString(),"")),!n&&Ps.Image&&((new Image).src=t.v,n=!0),n||(t.g=bf(t.l,null),t.g.da(t.v)),t.F=Date.now(),Wc(t)}yf(e)}function nf(e){e.g&&(ff(e),e.g.cancel(),e.g=null)}function rf(e){nf(e),e.u&&(Ps.clearTimeout(e.u),e.u=null),df(e),e.h.cancel(),e.m&&("number"===typeof e.m&&Ps.clearTimeout(e.m),e.m=null)}function af(e){El(e.h)||e.m||(e.m=!0,tc(e.Ja,e),e.C=0)}function of(e,t){var n;n=t?t.m:e.U++;var r=el(e.F);al(r,"SID",e.I),al(r,"RID",n),al(r,"AID",e.T),sf(e,r),e.o&&e.s&&Jl(r,e.o,e.s),n=new Pc(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=uf(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),Tl(e.h,n),Vc(n,r,t)}function sf(e,t){e.ia&&Tu(e.ia,(function(e,n){al(t,n,e)})),e.l&&$c({},(function(e,n){al(t,n,e)}))}function uf(e,t,n){n=Math.min(e.i.length,n);var r=e.l?qs(e.l.Ra,e.l,e):null;e:for(var a=e.i,i=-1;;){var o=["count="+n];-1==i?0<n?(i=a[0].h,o.push("ofs="+i)):i=0:o.push("ofs="+i);for(var s=!0,u=0;u<n;u++){var c=a[u].h,l=a[u].g;if(0>(c-=i))i=Math.max(0,a[u].h-100),s=!1;else try{Dl(l,o,"req"+c+"_")}catch(f){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function cf(e){e.g||e.u||(e.Z=1,tc(e.Ia,e),e.A=0)}function lf(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=Sc(qs(e.Ia,e),mf(e,e.A)),e.A++,!0)}function ff(e){null!=e.B&&(Ps.clearTimeout(e.B),e.B=null)}function hf(e){e.g=new Pc(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=el(e.sa);al(t,"RID","rpc"),al(t,"SID",e.I),al(t,"CI",e.L?"0":"1"),al(t,"AID",e.T),al(t,"TYPE","xmlhttp"),sf(e,t),e.o&&e.s&&Jl(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=il(el(t)),n.s=null,n.P=!0,Uc(n,e)}function df(e){null!=e.v&&(Ps.clearTimeout(e.v),e.v=null)}function pf(e,t){var n=null;if(e.g==t){df(e),ff(e),e.g=null;var r=2}else{if(!Nl(e.h,t))return;n=t.D,_l(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var a=e.C;Ku(r=gc(),new Ec(r,n)),af(e)}else cf(e);else if(3==(a=t.o)||0==a&&0<e.pa||!(1==r&&function(e,t){return!(Sl(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=Sc(qs(e.Ja,e,t),mf(e,e.C)),e.C++,!0))}(e,t)||2==r&&lf(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),a){case 1:vf(e,5);break;case 4:vf(e,10);break;case 3:vf(e,6);break;default:vf(e,2)}}function mf(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function vf(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=qs(e.kb,e);n||(n=new Zc("//www.google.com/images/cleardot.gif"),Ps.location&&"http"==Ps.location.protocol||tl(n,"https"),il(n)),function(e,t){var n=new pc;if(Ps.Image){var r=new Image;r.onload=Hs(Ol,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Hs(Ol,n,r,"TestLoadImage: error",!1,t),r.onabort=Hs(Ol,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Hs(Ol,n,r,"TestLoadImage: timeout",!1,t),Ps.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else xc(2);e.G=0,e.l&&e.l.va(t),yf(e),rf(e)}function yf(e){if(e.G=0,e.la=[],e.l){var t=Il(e.h);0==t.length&&0==e.i.length||(Ys(e.la,t),Ys(e.la,e.i),e.h.i.length=0,Qs(e.i),e.i.length=0),e.l.ua()}}function gf(e,t,n){var r=n instanceof Zc?el(n):new Zc(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),nl(r,r.m);else{var a=Ps.location;r=a.protocol,t=t?t+"."+a.hostname:a.hostname,a=+a.port;var i=new Zc(null,void 0);r&&tl(i,r),t&&(i.g=t),a&&nl(i,a),n&&(i.l=n),r=i}return n=e.D,t=e.za,n&&t&&al(r,n,t),al(r,"VER",e.ma),sf(e,r),r}function bf(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new Vl(new Ml({jb:!0})):new Vl(e.ra)).Ka(e.H),t}function kf(){}function wf(){if(ou&&!(10<=Number(bu)))throw Error("Environmental error: no available transport.")}function xf(e,t){Wu.call(this),this.g=new ef(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!Js(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Js(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Nf(this)}function Ef(e){Oc.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Sf(){Mc.call(this),this.status=1}function Nf(e){this.g=e}(Ds=Vl.prototype).Ka=function(e){this.L=e},Ds.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Cc.g(),this.C=this.u?Ic(this.u):Ic(Cc),this.g.onreadystatechange=qs(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(s){return void Hl(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var a in r)n.set(a,r[a]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var i,o=ae(r.keys());try{for(o.s();!(i=o.n()).done;){var s=i.value;n.set(s,r.get(s))}}catch(d){o.e(d)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),a=Ps.FormData&&e instanceof Ps.FormData,!(0<=Gs(ql,t))||r||a||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var u,c=ae(n);try{for(c.s();!(u=c.n()).done;){var l=te(u.value,2),f=l[0],h=l[1];this.g.setRequestHeader(f,h)}}catch(d){c.e(d)}finally{c.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ql(this),0<this.B&&((this.K=function(e){return ou&&yu()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=qs(this.qa,this)):this.A=sc(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Hl(this,s)}},Ds.qa=function(){"undefined"!=typeof Rs&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ku(this,"timeout"),this.abort(8))},Ds.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Ku(this,"complete"),Ku(this,"abort"),Gl(this))},Ds.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Gl(this,!0)),Vl.X.M.call(this)},Ds.Ha=function(){this.s||(this.F||this.v||this.l?Kl(this):this.fb())},Ds.fb=function(){Kl(this)},Ds.aa=function(){try{return 2<Yl(this)?this.g.status:-1}catch(gP){return-1}},Ds.fa=function(){try{return this.g?this.g.responseText:""}catch(gP){return""}},Ds.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),zl(t)}},Ds.Ea=function(){return this.m},Ds.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Ds=ef.prototype).ma=8,Ds.G=1,Ds.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new Pc(this,this.j,e,void 0),n=this.s;if(this.S&&(n?Au(n=_u(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,a=0;a<this.i.length;a++){var i=this.i[a];if(void 0===(i="__data__"in i.g&&"string"===typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(r+=i)){r=a;break e}if(4096===r||a===this.i.length-1){r=a+1;break e}}r=1e3}else r=1e3;r=uf(this,t,r),al(a=el(this.F),"RID",e),al(a,"CVER",22),this.D&&al(a,"X-HTTP-Session-Id",this.D),sf(this,a),n&&(this.N?r="headers="+encodeURIComponent(String($l(n)))+"&"+r:this.o&&Jl(a,this.o,n)),Tl(this.h,t),this.Ya&&al(a,"TYPE","init"),this.O?(al(a,"$req",r),al(a,"SID","null"),t.Z=!0,Vc(t,a,null)):Vc(t,a,r),this.G=2}}else 3==this.G&&(e?of(this,e):0==this.i.length||El(this.h)||of(this))},Ds.Ia=function(){if(this.u=null,hf(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=Sc(qs(this.eb,this),e)}},Ds.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,xc(10),nf(this),hf(this))},Ds.cb=function(){null!=this.v&&(this.v=null,nf(this),lf(this),xc(19))},Ds.kb=function(e){e?(this.j.info("Successfully pinged google.com"),xc(2)):(this.j.info("Failed to ping google.com"),xc(1))},(Ds=kf.prototype).xa=function(){},Ds.wa=function(){},Ds.va=function(){},Ds.ua=function(){},Ds.Ra=function(){},wf.prototype.g=function(e,t){return new xf(e,t)},Ws(xf,Wu),xf.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;xc(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=gf(e,null,e.V),af(e)},xf.prototype.close=function(){tf(this.g)},xf.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Qu(e),e=n);t.i.push(new kl(t.ab++,e)),3==t.G&&af(t)},xf.prototype.M=function(){this.g.l=null,delete this.j,tf(this.g),delete this.g,xf.X.M.call(this)},Ws(Ef,Oc),Ws(Sf,Mc),Ws(Nf,kf),Nf.prototype.xa=function(){Ku(this.g,"a")},Nf.prototype.wa=function(e){Ku(this.g,new Ef(e))},Nf.prototype.va=function(e){Ku(this.g,new Sf)},Nf.prototype.ua=function(){Ku(this.g,"b")},wf.prototype.createWebChannel=wf.prototype.g,xf.prototype.send=xf.prototype.u,xf.prototype.open=xf.prototype.m,xf.prototype.close=xf.prototype.close,Nc.NO_ERROR=0,Nc.TIMEOUT=8,Nc.HTTP_ERROR=6,Tc.COMPLETE="complete",Ac.EventType=Dc,Dc.OPEN="a",Dc.CLOSE="b",Dc.ERROR="c",Dc.MESSAGE="d",Wu.prototype.listen=Wu.prototype.N,Vl.prototype.listenOnce=Vl.prototype.O,Vl.prototype.getLastError=Vl.prototype.Oa,Vl.prototype.getLastErrorCode=Vl.prototype.Ea,Vl.prototype.getStatus=Vl.prototype.aa,Vl.prototype.getResponseJson=Vl.prototype.Sa,Vl.prototype.getResponseText=Vl.prototype.fa,Vl.prototype.send=Vl.prototype.da,Vl.prototype.setWithCredentials=Vl.prototype.Ka;var Tf=Ms.createWebChannelTransport=function(){return new wf},_f=Ms.getStatEventTarget=function(){return gc()},If=Ms.ErrorCode=Nc,Af=Ms.EventType=Tc,Cf=Ms.Event=vc,Df=Ms.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Of=Ms.FetchXmlHttpFactory=Ml,Mf=Ms.WebChannel=Ac,Rf=Ms.XhrIo=Vl,Pf="@firebase/firestore",Lf=function(){function e(t){B(this,e),this.uid=t}return K(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Lf.UNAUTHENTICATED=new Lf(null),Lf.GOOGLE_CREDENTIALS=new Lf("google-credentials-uid"),Lf.FIRST_PARTY=new Lf("first-party-uid"),Lf.MOCK_USER=new Lf("mock-user");var Ff="9.17.2",jf=new wn("@firebase/firestore");function zf(){return jf.logLevel}function Vf(e){if(jf.logLevel<=pn.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map(qf);jf.debug.apply(jf,["Firestore (".concat(Ff,"): ").concat(e)].concat(U(a)))}}function Uf(e){if(jf.logLevel<=pn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map(qf);jf.error.apply(jf,["Firestore (".concat(Ff,"): ").concat(e)].concat(U(a)))}}function Bf(e){if(jf.logLevel<=pn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map(qf);jf.warn.apply(jf,["Firestore (".concat(Ff,"): ").concat(e)].concat(U(a)))}}function qf(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Hf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Ff,") INTERNAL ASSERTION FAILED: ")+e;throw Uf(t),new Error(t)}function Wf(e,t){e||Hf()}function Kf(e,t){return e}var Gf={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Qf=function(e){Q(n,e);var t=J(n);function n(e,r){var a;return B(this,n),(a=t.call(this,e,r)).code=e,a.message=r,a.toString=function(){return"".concat(a.name,": [code=").concat(a.code,"]: ").concat(a.message)},a}return K(n)}(Jt),Yf=K((function e(){var t=this;B(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Xf=K((function e(t,n){B(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),$f=function(){function e(){B(this,e)}return K(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Lf.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Jf=function(){function e(t){B(this,e),this.token=t,this.changeListener=null}return K(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Zf=function(){function e(t){B(this,e),this.t=t,this.currentUser=Lf.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return K(e,[{key:"start",value:function(e,t){var n=this,r=this.i,a=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},i=new Yf;this.o=function(){n.i++,n.currentUser=n.u(),i.resolve(),i=new Yf,e.enqueueRetryable((function(){return a(n.currentUser)}))};var o=function(){var t=i;e.enqueueRetryable(Rt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,a(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){Vf("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(Vf("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Yf)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Vf("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Wf("string"==typeof n.accessToken),new Xf(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Wf(null===e||"string"==typeof e),new Lf(e)}}]),e}(),eh=function(){function e(t,n,r,a){B(this,e),this.h=t,this.l=n,this.m=r,this.g=a,this.type="FirstParty",this.user=Lf.FIRST_PARTY,this.p=new Map}return K(e,[{key:"I",value:function(){return this.g?this.g():(Wf(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}},{key:"headers",get:function(){this.p.set("X-Goog-AuthUser",this.l);var e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}]),e}(),th=function(){function e(t,n,r,a){B(this,e),this.h=t,this.l=n,this.m=r,this.g=a}return K(e,[{key:"getToken",value:function(){return Promise.resolve(new eh(this.h,this.l,this.m,this.g))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Lf.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),nh=K((function e(t){B(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),rh=function(){function e(t){B(this,e),this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}return K(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Vf("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.A;return n.A=e.token,Vf("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var a=function(e){Vf("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.T.onInit((function(e){return a(e)})),setTimeout((function(){if(!n.appCheck){var e=n.T.getImmediate({optional:!0});e?a(e):Vf("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Wf("string"==typeof t.token),e.A=t.token,new nh(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function ah(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var ih=function(){function e(){B(this,e)}return K(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=ah(40),a=0;a<r.length;++a)n.length<20&&r[a]<t&&(n+=e.charAt(r[a]%e.length));return n}}]),e}();function oh(e,t){return e<t?-1:e>t?1:0}function sh(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}var uh=function(){function e(t,n){if(B(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Qf(Gf.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Qf(Gf.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Qf(Gf.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Qf(Gf.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return K(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?oh(this.nanoseconds,e.nanoseconds):oh(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),ch=function(){function e(t){B(this,e),this.timestamp=t}return K(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new uh(0,0))}},{key:"max",value:function(){return new e(new uh(253402300799,999999999))}}]),e}(),lh=function(){function e(t,n,r){B(this,e),void 0===n?n=0:n>t.length&&Hf(),void 0===r?r=t.length-n:r>t.length-n&&Hf(),this.segments=t,this.offset=n,this.len=r}return K(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var a=e.get(r),i=t.get(r);if(a<i)return-1;if(a>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),fh=function(e){Q(n,e);var t=J(n);function n(){return B(this,n),t.apply(this,arguments)}return K(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];for(var i=0,o=r;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Qf(Gf.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,U(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(lh),hh=/^[_a-zA-Z][_a-zA-Z0-9]*$/,dh=function(e){Q(n,e);var t=J(n);function n(){return B(this,n),t.apply(this,arguments)}return K(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return hh.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",a=0,i=function(){if(0===r.length)throw new Qf(Gf.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;a<e.length;){var s=e[a];if("\\"===s){if(a+1===e.length)throw new Qf(Gf.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[a+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Qf(Gf.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,a+=2}else"`"===s?(o=!o,a++):"."!==s||o?(r+=s,a++):(i(),a++)}if(i(),o)throw new Qf(Gf.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(lh),ph=function(){function e(t){B(this,e),this.path=t}return K(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===fh.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(fh.fromString(t))}},{key:"fromName",value:function(t){return new e(fh.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(fh.emptyPath())}},{key:"comparator",value:function(e,t){return fh.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new fh(t.slice()))}}]),e}(),mh=K((function e(t,n,r,a){B(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=a}));mh.UNKNOWN_ID=-1;function vh(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,a=ch.fromTimestamp(1e9===r?new uh(n+1,0):new uh(n,r));return new gh(a,ph.empty(),t)}function yh(e){return new gh(e.readTime,e.key,-1)}var gh=function(){function e(t,n,r){B(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return K(e,null,[{key:"min",value:function(){return new e(ch.min(),ph.empty(),-1)}},{key:"max",value:function(){return new e(ch.max(),ph.empty(),-1)}}]),e}();function bh(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=ph.comparator(e.documentKey,t.documentKey))?n:oh(e.largestBatchId,t.largestBatchId)}var kh="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",wh=function(){function e(){B(this,e),this.onCommittedListeners=[]}return K(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function xh(e){return Eh.apply(this,arguments)}function Eh(){return Eh=Rt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Gf.FAILED_PRECONDITION&&t.message===kh){e.next=2;break}throw t;case 2:Vf("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Eh.apply(this,arguments)}var Sh=function(){function e(t){var n=this;B(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return K(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Hf(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,a){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,a)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,a)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,a=0,i=!1;t.forEach((function(t){++r,t.next((function(){++a,i&&a===r&&e()}),(function(e){return n(e)}))})),i=!0,a===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),a=ae(t);try{var i=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(a.s();!(n=a.n()).done;)i()}catch(o){a.e(o)}finally{a.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,a){r.push(t.call(n,e,a))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var a=t.length,i=new Array(a),o=0,s=function(){var s=u;n(t[s]).next((function(t){i[s]=t,++o===a&&e(i)}),(function(e){return r(e)}))},u=0;u<a;u++)s()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function a(){!0===t()?n().next((function(){a()}),r):e()}()}))}}]),e}();function Nh(e){return"IndexedDbTransactionError"===e.name}var Th=function(){function e(t,n){var r=this;B(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ut(e)},this.ct=function(e){return n.writeSequenceNumber(e)})}return K(e,[{key:"ut",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ct&&this.ct(e),e}}]),e}();Th.at=-1;var _h=K((function e(t,n,r,a,i,o,s,u){B(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=a,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u})),Ih=function(){function e(t,n){B(this,e),this.projectId=t,this.database=n||"(default)"}return K(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Ah(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ch(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Dh(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Oh(e){return null==e}function Mh(e){return 0===e&&1/e==-1/0}function Rh(e){return"number"==typeof e&&Number.isInteger(e)&&!Mh(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Ph=function(e){Q(n,e);var t=J(n);function n(){var e;return B(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return K(n)}(re(Error));var Lh=function(e){function t(e){B(this,t),this.binaryString=e}return K(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return oh(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw e instanceof DOMException?new Ph("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Lh.EMPTY_BYTE_STRING=new Lh("");var Fh=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jh(e){if(Wf(!!e),"string"==typeof e){var t=0,n=Fh.exec(e);if(Wf(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var a=new Date(e);return{seconds:Math.floor(a.getTime()/1e3),nanos:t}}return{seconds:zh(e.seconds),nanos:zh(e.nanos)}}function zh(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Vh(e){return"string"==typeof e?Lh.fromBase64String(e):Lh.fromUint8Array(e)}function Uh(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Bh(e){var t=e.mapValue.fields.__previous_value__;return Uh(t)?Bh(t):t}function qh(e){var t=jh(e.mapValue.fields.__local_write_time__.timestampValue);return new uh(t.seconds,t.nanos)}var Hh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Wh(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Uh(e)?4:id(e)?9007199254740991:10:Hf()}function Kh(e,t){if(e===t)return!0;var n=Wh(e);if(n!==Wh(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return qh(e).isEqual(qh(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=jh(e.timestampValue),r=jh(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Vh(e.bytesValue).isEqual(Vh(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return zh(e.geoPointValue.latitude)===zh(t.geoPointValue.latitude)&&zh(e.geoPointValue.longitude)===zh(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return zh(e.integerValue)===zh(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=zh(e.doubleValue),r=zh(t.doubleValue);return n===r?Mh(n)===Mh(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return sh(e.arrayValue.values||[],t.arrayValue.values||[],Kh);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ah(n)!==Ah(r))return!1;for(var a in n)if(n.hasOwnProperty(a)&&(void 0===r[a]||!Kh(n[a],r[a])))return!1;return!0}(e,t);default:return Hf()}}function Gh(e,t){return void 0!==(e.values||[]).find((function(e){return Kh(e,t)}))}function Qh(e,t){if(e===t)return 0;var n=Wh(e),r=Wh(t);if(n!==r)return oh(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return oh(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=zh(e.integerValue||e.doubleValue),r=zh(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Yh(e.timestampValue,t.timestampValue);case 4:return Yh(qh(e),qh(t));case 5:return oh(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Vh(e),r=Vh(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),a=0;a<n.length&&a<r.length;a++){var i=oh(n[a],r[a]);if(0!==i)return i}return oh(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=oh(zh(e.latitude),zh(t.latitude));return 0!==n?n:oh(zh(e.longitude),zh(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],a=0;a<n.length&&a<r.length;++a){var i=Qh(n[a],r[a]);if(i)return i}return oh(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Hh.mapValue&&t===Hh.mapValue)return 0;if(e===Hh.mapValue)return 1;if(t===Hh.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),a=t.fields||{},i=Object.keys(a);r.sort(),i.sort();for(var o=0;o<r.length&&o<i.length;++o){var s=oh(r[o],i[o]);if(0!==s)return s;var u=Qh(n[r[o]],a[i[o]]);if(0!==u)return u}return oh(r.length,i.length)}(e.mapValue,t.mapValue);default:throw Hf()}}function Yh(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return oh(e,t);var n=jh(e),r=jh(t),a=oh(n.seconds,r.seconds);return 0!==a?a:oh(n.nanos,r.nanos)}function Xh(e){return $h(e)}function $h(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=jh(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Vh(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,ph.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,a=ae(e.values||[]);try{for(a.s();!(t=a.n()).done;){var i=t.value;r?r=!1:n+=",",n+=$h(i)}}catch(o){a.e(o)}finally{a.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,a=ae(Object.keys(e.fields||{}).sort());try{for(a.s();!(t=a.n()).done;){var i=t.value;r?r=!1:n+=",",n+="".concat(i,":").concat($h(e.fields[i]))}}catch(o){a.e(o)}finally{a.f()}return n+"}"}(e.mapValue):Hf();var t,n}function Jh(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Zh(e){return!!e&&"integerValue"in e}function ed(e){return!!e&&"arrayValue"in e}function td(e){return!!e&&"nullValue"in e}function nd(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function rd(e){return!!e&&"mapValue"in e}function ad(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Ch(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=ad(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ad(e.arrayValue.values[r]);return n}return Object.assign({},e)}function id(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}var od=K((function e(t,n){B(this,e),this.position=t,this.inclusive=n}));function sd(e,t,n){for(var r=0,a=0;a<e.position.length;a++){var i=t[a],o=e.position[a];if(r=i.field.isKeyField()?ph.comparator(ph.fromName(o.referenceValue),n.key):Qh(o,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function ud(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Kh(e.position[n],t.position[n]))return!1;return!0}var cd=K((function e(){B(this,e)})),ld=function(e){Q(n,e);var t=J(n);function n(e,r,a){var i;return B(this,n),(i=t.call(this)).field=e,i.op=r,i.value=a,i}return K(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Qh(t,this.value)):null!==t&&Wh(this.value)===Wh(t)&&this.matchesComparison(Qh(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Hf()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new gd(e,t,r):"array-contains"===t?new xd(e,r):"in"===t?new Ed(e,r):"not-in"===t?new Sd(e,r):"array-contains-any"===t?new Nd(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new bd(e,n):new kd(e,n)}}]),n}(cd),fd=function(e){Q(n,e);var t=J(n);function n(e,r){var a;return B(this,n),(a=t.call(this)).filters=e,a.op=r,a.ft=null,a}return K(n,[{key:"matches",value:function(e){return hd(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ft||(this.ft=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ft}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.dt((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"dt",value:function(e){var t,n=ae(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(a){n.e(a)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(cd);function hd(e){return"and"===e.op}function dd(e){return pd(e)&&hd(e)}function pd(e){var t,n=ae(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof fd)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function md(e){if(e instanceof ld)return e.field.canonicalString()+e.op.toString()+Xh(e.value);if(dd(e))return e.filters.map((function(e){return md(e)})).join(",");var t=e.filters.map((function(e){return md(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function vd(e,t){return e instanceof ld?function(e,t){return t instanceof ld&&e.op===t.op&&e.field.isEqual(t.field)&&Kh(e.value,t.value)}(e,t):e instanceof fd?function(e,t){return t instanceof fd&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&vd(n,t.filters[r])}),!0)}(e,t):void Hf()}function yd(e){return e instanceof ld?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Xh(e.value))}(e):e instanceof fd?function(e){return e.op.toString()+" {"+e.getFilters().map(yd).join(" ,")+"}"}(e):"Filter"}var gd=function(e){Q(n,e);var t=J(n);function n(e,r,a){var i;return B(this,n),(i=t.call(this,e,r,a)).key=ph.fromName(a.referenceValue),i}return K(n,[{key:"matches",value:function(e){var t=ph.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(ld),bd=function(e){Q(n,e);var t=J(n);function n(e,r){var a;return B(this,n),(a=t.call(this,e,"in",r)).keys=wd("in",r),a}return K(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(ld),kd=function(e){Q(n,e);var t=J(n);function n(e,r){var a;return B(this,n),(a=t.call(this,e,"not-in",r)).keys=wd("not-in",r),a}return K(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(ld);function wd(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return ph.fromName(e.referenceValue)}))}var xd=function(e){Q(n,e);var t=J(n);function n(e,r){return B(this,n),t.call(this,e,"array-contains",r)}return K(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return ed(t)&&Gh(t.arrayValue,this.value)}}]),n}(ld),Ed=function(e){Q(n,e);var t=J(n);function n(e,r){return B(this,n),t.call(this,e,"in",r)}return K(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Gh(this.value.arrayValue,t)}}]),n}(ld),Sd=function(e){Q(n,e);var t=J(n);function n(e,r){return B(this,n),t.call(this,e,"not-in",r)}return K(n,[{key:"matches",value:function(e){if(Gh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Gh(this.value.arrayValue,t)}}]),n}(ld),Nd=function(e){Q(n,e);var t=J(n);function n(e,r){return B(this,n),t.call(this,e,"array-contains-any",r)}return K(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!ed(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Gh(t.value.arrayValue,e)}))}}]),n}(ld),Td=K((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";B(this,e),this.field=t,this.dir=n}));function _d(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Id=function(){function e(t,n){B(this,e),this.comparator=t,this.root=n||Cd.EMPTY}return K(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Cd.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Cd.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Ad(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Ad(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Ad(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Ad(this.root,e,this.comparator,!0)}}]),e}(),Ad=function(){function e(t,n,r,a){B(this,e),this.isReverse=a,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=n?r(t.key,n):1,n&&a&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return K(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Cd=function(){function e(t,n,r,a,i){B(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=a?a:e.EMPTY,this.right=null!=i?i:e.EMPTY,this.size=this.left.size+1+this.right.size}return K(e,[{key:"copy",value:function(t,n,r,a,i){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=a?a:this.left,null!=i?i:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,a=n(e,r.key);return(r=a<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===a?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,a=this;if(n(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===n(t,a.key)){if(a.right.isEmpty())return e.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,n))}return a.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Hf();if(this.right.isRed())throw Hf();var e=this.left.check();if(e!==this.right.check())throw Hf();return e+(this.isRed()?0:1)}}]),e}();Cd.EMPTY=null,Cd.RED=!0,Cd.BLACK=!1,Cd.EMPTY=new(function(){function e(){B(this,e),this.size=0}return K(e,[{key:"key",get:function(){throw Hf()}},{key:"value",get:function(){throw Hf()}},{key:"color",get:function(){throw Hf()}},{key:"left",get:function(){throw Hf()}},{key:"right",get:function(){throw Hf()}},{key:"copy",value:function(e,t,n,r,a){return this}},{key:"insert",value:function(e,t,n){return new Cd(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Dd=function(){function e(t){B(this,e),this.comparator=t,this.data=new Id(this.comparator)}return K(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Od(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Od(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var a=n.getNext().key,i=r.getNext().key;if(0!==this.comparator(a,i))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Od=function(){function e(t){B(this,e),this.iter=t}return K(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();var Md=function(){function e(t){B(this,e),this.fields=t,t.sort(dh.comparator)}return K(e,[{key:"unionWith",value:function(t){var n,r=new Dd(dh.comparator),a=ae(this.fields);try{for(a.s();!(n=a.n()).done;){var i=n.value;r=r.add(i)}}catch(c){a.e(c)}finally{a.f()}var o,s=ae(t);try{for(s.s();!(o=s.n()).done;){var u=o.value;r=r.add(u)}}catch(c){s.e(c)}finally{s.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=ae(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return sh(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),Rd=function(){function e(t){B(this,e),this.value=t}return K(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!rd(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ad(t)}},{key:"setAll",value:function(e){var t=this,n=dh.emptyPath(),r={},a=[];e.forEach((function(e,i){if(!n.isImmediateParentOf(i)){var o=t.getFieldsMap(n);t.applyChanges(o,r,a),r={},a=[],n=i.popLast()}e?r[i.lastSegment()]=ad(e):a.push(i.lastSegment())}));var i=this.getFieldsMap(n);this.applyChanges(i,r,a)}},{key:"delete",value:function(e){var t=this.field(e.popLast());rd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Kh(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];rd(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Ch(t,(function(t,n){return e[t]=n}));var r,a=ae(n);try{for(a.s();!(r=a.n()).done;){var i=r.value;delete e[i]}}catch(o){a.e(o)}finally{a.f()}}},{key:"clone",value:function(){return new e(ad(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();var Pd=function(){function e(t,n,r,a,i,o,s){B(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=a,this.createTime=i,this.data=o,this.documentState=s}return K(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(ch.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Rd.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Rd.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=ch.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,ch.min(),ch.min(),ch.min(),Rd.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,a){return new e(t,1,n,ch.min(),r,a,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,ch.min(),ch.min(),Rd.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,ch.min(),ch.min(),Rd.empty(),2)}}]),e}(),Ld=K((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;B(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=a,this.limit=i,this.startAt=o,this.endAt=s,this._t=null}));function Fd(e){return new Ld(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function jd(e){var t=Kf(e);if(null===t._t){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return md(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Oh(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Xh(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Xh(e)})).join(",")),t._t=n}return t._t}function zd(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!_d(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!vd(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ud(e.startAt,t.startAt)&&ud(e.endAt,t.endAt)}function Vd(e){return ph.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var Ud=K((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;B(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=a,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=u,this.wt=null,this.gt=null,this.startAt,this.endAt}));function Bd(e,t,n,r,a,i,o,s){return new Ud(e,t,n,r,a,i,o,s)}function qd(e){return new Ud(e)}function Hd(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Wd(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Kd(e){var t,n=ae(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(a){n.e(a)}finally{n.f()}return null}function Gd(e){return null!==e.collectionGroup}function Qd(e){var t=Kf(e);if(null===t.wt){t.wt=[];var n=Kd(t),r=Wd(t);if(null!==n&&null===r)n.isKeyField()||t.wt.push(new Td(n)),t.wt.push(new Td(dh.keyField(),"asc"));else{var a,i=!1,o=ae(t.explicitOrderBy);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.wt.push(s),s.field.isKeyField()&&(i=!0)}}catch(c){o.e(c)}finally{o.f()}if(!i){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new Td(dh.keyField(),u))}}}return t.wt}function Yd(e){var t=Kf(e);if(!t.gt)if("F"===t.limitType)t.gt=Fd(t.path,t.collectionGroup,Qd(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],a=ae(Qd(t));try{for(a.s();!(n=a.n()).done;){var i=n.value,o="desc"===i.dir?"asc":"desc";r.push(new Td(i.field,o))}}catch(c){a.e(c)}finally{a.f()}var s=t.endAt?new od(t.endAt.position,t.endAt.inclusive):null,u=t.startAt?new od(t.startAt.position,t.startAt.inclusive):null;t.gt=Fd(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t.gt}function Xd(e,t){t.getFirstInequalityField(),Kd(e);var n=e.filters.concat([t]);return new Ud(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function $d(e,t,n){return new Ud(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Jd(e,t){return zd(Yd(e),Yd(t))&&e.limitType===t.limitType}function Zd(e){return"".concat(jd(Yd(e)),"|lt:").concat(e.limitType)}function ep(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return yd(e)})).join(", "),"]")),Oh(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Xh(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Xh(e)})).join(",")),"Target(".concat(t,")")}(Yd(e)),"; limitType=").concat(e.limitType,")")}function tp(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ph.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=ae(Qd(e));try{for(r.s();!(n=r.n()).done;){var a=n.value;if(!a.field.isKeyField()&&null===t.data.field(a.field))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=ae(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=sd(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Qd(e),t))&&!(e.endAt&&!function(e,t,n){var r=sd(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Qd(e),t))}(e,t)}function np(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function rp(e){return function(t,n){var r,a=!1,i=ae(Qd(e));try{for(i.s();!(r=i.n()).done;){var o=r.value,s=ap(o,t,n);if(0!==s)return s;a=a||o.field.isKeyField()}}catch(u){i.e(u)}finally{i.f()}return 0}}function ap(e,t,n){var r=e.field.isKeyField()?ph.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),a=n.data.field(e);return null!==r&&null!==a?Qh(r,a):Hf()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Hf()}}function ip(e,t){if(e.yt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mh(t)?"-0":t}}function op(e){return{integerValue:""+e}}function sp(e,t){return Rh(t)?op(t):ip(e,t)}var up=K((function e(){B(this,e),this._=void 0}));function cp(e,t,n){return e instanceof hp?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof dp?pp(e,t):e instanceof mp?vp(e,t):function(e,t){var n=fp(e,t),r=gp(n)+gp(e.It);return Zh(n)&&Zh(e.It)?op(r):ip(e.Tt,r)}(e,t)}function lp(e,t,n){return e instanceof dp?pp(e,t):e instanceof mp?vp(e,t):n}function fp(e,t){return e instanceof yp?Zh(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var hp=function(e){Q(n,e);var t=J(n);function n(){return B(this,n),t.apply(this,arguments)}return K(n)}(up),dp=function(e){Q(n,e);var t=J(n);function n(e){var r;return B(this,n),(r=t.call(this)).elements=e,r}return K(n)}(up);function pp(e,t){var n,r=bp(t),a=ae(e.elements);try{var i=function(){var e=n.value;r.some((function(t){return Kh(t,e)}))||r.push(e)};for(a.s();!(n=a.n()).done;)i()}catch(o){a.e(o)}finally{a.f()}return{arrayValue:{values:r}}}var mp=function(e){Q(n,e);var t=J(n);function n(e){var r;return B(this,n),(r=t.call(this)).elements=e,r}return K(n)}(up);function vp(e,t){var n,r=bp(t),a=ae(e.elements);try{var i=function(){var e=n.value;r=r.filter((function(t){return!Kh(t,e)}))};for(a.s();!(n=a.n()).done;)i()}catch(o){a.e(o)}finally{a.f()}return{arrayValue:{values:r}}}var yp=function(e){Q(n,e);var t=J(n);function n(e,r){var a;return B(this,n),(a=t.call(this)).Tt=e,a.It=r,a}return K(n)}(up);function gp(e){return zh(e.integerValue||e.doubleValue)}function bp(e){return ed(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var kp=function(){function e(t,n){B(this,e),this.updateTime=t,this.exists=n}return K(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function wp(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var xp=K((function e(){B(this,e)}));function Ep(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Rp(e.key,kp.none()):new _p(e.key,e.data,kp.none());var n,r=e.data,a=Rd.empty(),i=new Dd(dh.comparator),o=ae(t.fields);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(!i.has(s)){var u=r.field(s);null===u&&s.length>1&&(s=s.popLast(),u=r.field(s)),null===u?a.delete(s):a.set(s,u),i=i.add(s)}}}catch(c){o.e(c)}finally{o.f()}return new Ip(e.key,a,new Md(i.toArray()),kp.none())}function Sp(e,t,n){e instanceof _p?function(e,t,n){var r=e.value.clone(),a=Cp(e.fieldTransforms,t,n.transformResults);r.setAll(a),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Ip?function(e,t,n){if(wp(e.precondition,t)){var r=Cp(e.fieldTransforms,t,n.transformResults),a=t.data;a.setAll(Ap(e)),a.setAll(r),t.convertToFoundDocument(n.version,a).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Np(e,t,n,r){return e instanceof _p?function(e,t,n,r){if(!wp(e.precondition,t))return n;var a=e.value.clone(),i=Dp(e.fieldTransforms,r,t);return a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null}(e,t,n,r):e instanceof Ip?function(e,t,n,r){if(!wp(e.precondition,t))return n;var a=Dp(e.fieldTransforms,r,t),i=t.data;return i.setAll(Ap(e)),i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return wp(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Tp(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&sh(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof dp&&t instanceof dp||e instanceof mp&&t instanceof mp?sh(e.elements,t.elements,Kh):e instanceof yp&&t instanceof yp?Kh(e.It,t.It):e instanceof hp&&t instanceof hp}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var _p=function(e){Q(n,e);var t=J(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return B(this,n),(i=t.call(this)).key=e,i.value=r,i.precondition=a,i.fieldTransforms=o,i.type=0,i}return K(n,[{key:"getFieldMask",value:function(){return null}}]),n}(xp),Ip=function(e){Q(n,e);var t=J(n);function n(e,r,a,i){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return B(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=a,o.precondition=i,o.fieldTransforms=s,o.type=1,o}return K(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(xp);function Ap(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Cp(e,t,n){var r=new Map;Wf(e.length===n.length);for(var a=0;a<n.length;a++){var i=e[a],o=i.transform,s=t.data.field(i.field);r.set(i.field,lp(o,s,n[a]))}return r}function Dp(e,t,n){var r,a=new Map,i=ae(e);try{for(i.s();!(r=i.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);a.set(o.field,cp(s,u,t))}}catch(c){i.e(c)}finally{i.f()}return a}var Op,Mp,Rp=function(e){Q(n,e);var t=J(n);function n(e,r){var a;return B(this,n),(a=t.call(this)).key=e,a.precondition=r,a.type=2,a.fieldTransforms=[],a}return K(n,[{key:"getFieldMask",value:function(){return null}}]),n}(xp),Pp=K((function e(t){B(this,e),this.count=t}));function Lp(e){if(void 0===e)return Uf("GRPC error has no .code"),Gf.UNKNOWN;switch(e){case Op.OK:return Gf.OK;case Op.CANCELLED:return Gf.CANCELLED;case Op.UNKNOWN:return Gf.UNKNOWN;case Op.DEADLINE_EXCEEDED:return Gf.DEADLINE_EXCEEDED;case Op.RESOURCE_EXHAUSTED:return Gf.RESOURCE_EXHAUSTED;case Op.INTERNAL:return Gf.INTERNAL;case Op.UNAVAILABLE:return Gf.UNAVAILABLE;case Op.UNAUTHENTICATED:return Gf.UNAUTHENTICATED;case Op.INVALID_ARGUMENT:return Gf.INVALID_ARGUMENT;case Op.NOT_FOUND:return Gf.NOT_FOUND;case Op.ALREADY_EXISTS:return Gf.ALREADY_EXISTS;case Op.PERMISSION_DENIED:return Gf.PERMISSION_DENIED;case Op.FAILED_PRECONDITION:return Gf.FAILED_PRECONDITION;case Op.ABORTED:return Gf.ABORTED;case Op.OUT_OF_RANGE:return Gf.OUT_OF_RANGE;case Op.UNIMPLEMENTED:return Gf.UNIMPLEMENTED;case Op.DATA_LOSS:return Gf.DATA_LOSS;default:return Hf()}}(Mp=Op||(Op={}))[Mp.OK=0]="OK",Mp[Mp.CANCELLED=1]="CANCELLED",Mp[Mp.UNKNOWN=2]="UNKNOWN",Mp[Mp.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Mp[Mp.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Mp[Mp.NOT_FOUND=5]="NOT_FOUND",Mp[Mp.ALREADY_EXISTS=6]="ALREADY_EXISTS",Mp[Mp.PERMISSION_DENIED=7]="PERMISSION_DENIED",Mp[Mp.UNAUTHENTICATED=16]="UNAUTHENTICATED",Mp[Mp.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Mp[Mp.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Mp[Mp.ABORTED=10]="ABORTED",Mp[Mp.OUT_OF_RANGE=11]="OUT_OF_RANGE",Mp[Mp.UNIMPLEMENTED=12]="UNIMPLEMENTED",Mp[Mp.INTERNAL=13]="INTERNAL",Mp[Mp.UNAVAILABLE=14]="UNAVAILABLE",Mp[Mp.DATA_LOSS=15]="DATA_LOSS";var Fp=function(){function e(t,n){B(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return K(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,a=ae(n);try{for(a.s();!(r=a.n()).done;){var i=te(r.value,2),o=i[0],s=i[1];if(this.equalsFn(o,e))return s}}catch(u){a.e(u)}finally{a.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return void(r[a]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Ch(this.inner,(function(t,n){var r,a=ae(n);try{for(a.s();!(r=a.n()).done;){var i=te(r.value,2),o=i[0],s=i[1];e(o,s)}}catch(u){a.e(u)}finally{a.f()}}))}},{key:"isEmpty",value:function(){return Dh(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),jp=new Id(ph.comparator);function zp(){return jp}var Vp=new Id(ph.comparator);function Up(){for(var e=Vp,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var a=0,i=n;a<i.length;a++){var o=i[a];e=e.insert(o.key,o)}return e}function Bp(e){var t=Vp;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function qp(){return Wp()}function Hp(){return Wp()}function Wp(){return new Fp((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}new Id(ph.comparator);var Kp=new Dd(ph.comparator);function Gp(){for(var e=Kp,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var a=0,i=n;a<i.length;a++){var o=i[a];e=e.add(o)}return e}var Qp=new Dd(oh);function Yp(){return Qp}var Xp=function(){function e(t,n,r,a,i){B(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=i}return K(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var a=new Map;return a.set(t,$p.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(ch.min(),a,Yp(),zp(),Gp())}}]),e}(),$p=function(){function e(t,n,r,a,i){B(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=i}return K(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Gp(),Gp(),Gp())}}]),e}(),Jp=K((function e(t,n,r,a){B(this,e),this.Et=t,this.removedTargetIds=n,this.key=r,this.At=a})),Zp=K((function e(t,n){B(this,e),this.targetId=t,this.Rt=n})),em=K((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Lh.EMPTY_BYTE_STRING,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;B(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=a})),tm=function(){function e(){B(this,e),this.bt=0,this.vt=am(),this.Pt=Lh.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}return K(e,[{key:"current",get:function(){return this.Vt}},{key:"resumeToken",get:function(){return this.Pt}},{key:"Dt",get:function(){return 0!==this.bt}},{key:"Ct",get:function(){return this.St}},{key:"xt",value:function(e){e.approximateByteSize()>0&&(this.St=!0,this.Pt=e)}},{key:"Nt",value:function(){var e=Gp(),t=Gp(),n=Gp();return this.vt.forEach((function(r,a){switch(a){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Hf()}})),new $p(this.Pt,this.Vt,e,t,n)}},{key:"kt",value:function(){this.St=!1,this.vt=am()}},{key:"Ot",value:function(e,t){this.St=!0,this.vt=this.vt.insert(e,t)}},{key:"Mt",value:function(e){this.St=!0,this.vt=this.vt.remove(e)}},{key:"Ft",value:function(){this.bt+=1}},{key:"$t",value:function(){this.bt-=1}},{key:"Bt",value:function(){this.St=!0,this.Vt=!0}}]),e}(),nm=function(){function e(t){B(this,e),this.Lt=t,this.qt=new Map,this.Ut=zp(),this.Kt=rm(),this.Gt=new Dd(oh)}return K(e,[{key:"Qt",value:function(e){var t,n=ae(e.Et);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.At&&e.At.isFoundDocument()?this.jt(r,e.At):this.zt(r,e.key,e.At)}}catch(s){n.e(s)}finally{n.f()}var a,i=ae(e.removedTargetIds);try{for(i.s();!(a=i.n()).done;){var o=a.value;this.zt(o,e.key,e.At)}}catch(s){i.e(s)}finally{i.f()}}},{key:"Wt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Ht(n);switch(e.state){case 0:t.Jt(n)&&r.xt(e.resumeToken);break;case 1:r.$t(),r.Dt||r.kt(),r.xt(e.resumeToken);break;case 2:r.$t(),r.Dt||t.removeTarget(n);break;case 3:t.Jt(n)&&(r.Bt(),r.xt(e.resumeToken));break;case 4:t.Jt(n)&&(t.Yt(n),r.xt(e.resumeToken));break;default:Hf()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.qt.forEach((function(e,r){n.Jt(r)&&t(r)}))}},{key:"Zt",value:function(e){var t=e.targetId,n=e.Rt.count,r=this.Xt(t);if(r){var a=r.target;if(Vd(a))if(0===n){var i=new ph(a.path);this.zt(t,i,Pd.newNoDocument(i,ch.min()))}else Wf(1===n);else this.te(t)!==n&&(this.Yt(t),this.Gt=this.Gt.add(t))}}},{key:"ee",value:function(e){var t=this,n=new Map;this.qt.forEach((function(r,a){var i=t.Xt(a);if(i){if(r.current&&Vd(i.target)){var o=new ph(i.target.path);null!==t.Ut.get(o)||t.ne(a,o)||t.zt(a,o,Pd.newNoDocument(o,e))}r.Ct&&(n.set(a,r.Nt()),r.kt())}}));var r=Gp();this.Kt.forEach((function(e,n){var a=!0;n.forEachWhile((function(e){var n=t.Xt(e);return!n||2===n.purpose||(a=!1,!1)})),a&&(r=r.add(e))})),this.Ut.forEach((function(t,n){return n.setReadTime(e)}));var a=new Xp(e,n,this.Gt,this.Ut,r);return this.Ut=zp(),this.Kt=rm(),this.Gt=new Dd(oh),a}},{key:"jt",value:function(e,t){if(this.Jt(e)){var n=this.ne(e,t.key)?2:0;this.Ht(e).Ot(t.key,n),this.Ut=this.Ut.insert(t.key,t),this.Kt=this.Kt.insert(t.key,this.se(t.key).add(e))}}},{key:"zt",value:function(e,t,n){if(this.Jt(e)){var r=this.Ht(e);this.ne(e,t)?r.Ot(t,1):r.Mt(t),this.Kt=this.Kt.insert(t,this.se(t).delete(e)),n&&(this.Ut=this.Ut.insert(t,n))}}},{key:"removeTarget",value:function(e){this.qt.delete(e)}},{key:"te",value:function(e){var t=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ft",value:function(e){this.Ht(e).Ft()}},{key:"Ht",value:function(e){var t=this.qt.get(e);return t||(t=new tm,this.qt.set(e,t)),t}},{key:"se",value:function(e){var t=this.Kt.get(e);return t||(t=new Dd(oh),this.Kt=this.Kt.insert(e,t)),t}},{key:"Jt",value:function(e){var t=null!==this.Xt(e);return t||Vf("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Xt",value:function(e){var t=this.qt.get(e);return t&&t.Dt?null:this.Lt.ie(e)}},{key:"Yt",value:function(e){var t=this;this.qt.set(e,new tm),this.Lt.getRemoteKeysForTarget(e).forEach((function(n){t.zt(e,n,null)}))}},{key:"ne",value:function(e,t){return this.Lt.getRemoteKeysForTarget(e).has(t)}}]),e}();function rm(){return new Id(ph.comparator)}function am(){return new Id(ph.comparator)}var im={asc:"ASCENDING",desc:"DESCENDING"},om={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sm={and:"AND",or:"OR"},um=K((function e(t,n){B(this,e),this.databaseId=t,this.yt=n}));function cm(e,t){return e.yt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function lm(e,t){return e.yt?t.toBase64():t.toUint8Array()}function fm(e){return Wf(!!e),ch.fromTimestamp(function(e){var t=jh(e);return new uh(t.seconds,t.nanos)}(e))}function hm(e,t){return function(e){return new fh(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function dm(e){var t=fh.fromString(e);return Wf(Am(t)),t}function pm(e,t){var n=dm(t);if(n.get(1)!==e.databaseId.projectId)throw new Qf(Gf.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Qf(Gf.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ph(gm(n))}function mm(e,t){return hm(e.databaseId,t)}function vm(e){var t=dm(e);return 4===t.length?fh.emptyPath():gm(t)}function ym(e){return new fh(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function gm(e){return Wf(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function bm(e,t){return{documents:[mm(e,t.path)]}}function km(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=mm(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=mm(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var a=function(e){if(0!==e.length)return Im(fd.create(e,"and"))}(t.filters);a&&(n.structuredQuery.where=a);var i=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Tm(e.field),direction:Em(e.dir)}}(e)}))}(t.orderBy);i&&(n.structuredQuery.orderBy=i);var o,s=function(e,t){return e.yt||Oh(t)?t:{value:t}}(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function wm(e){var t=vm(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,a=null;if(r>0){Wf(1===r);var i=n.from[0];i.allDescendants?a=i.collectionId:t=t.child(i.collectionId)}var o=[];n.where&&(o=function(e){var t=xm(e);return t instanceof fd&&dd(t)?t.getFilters():[t]}(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new Td(_m(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return Oh(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new od(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new od(n,t)}(n.endAt)),Bd(t,a,s,o,u,"F",c,l)}function xm(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=_m(e.unaryFilter.field);return ld.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=_m(e.unaryFilter.field);return ld.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=_m(e.unaryFilter.field);return ld.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var a=_m(e.unaryFilter.field);return ld.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Hf()}}(e):void 0!==e.fieldFilter?function(e){return ld.create(_m(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Hf()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return fd.create(e.compositeFilter.filters.map((function(e){return xm(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Hf()}}(e.compositeFilter.op))}(e):Hf()}function Em(e){return im[e]}function Sm(e){return om[e]}function Nm(e){return sm[e]}function Tm(e){return{fieldPath:e.canonicalString()}}function _m(e){return dh.fromServerFormat(e.fieldPath)}function Im(e){return e instanceof ld?function(e){if("=="===e.op){if(nd(e.value))return{unaryFilter:{field:Tm(e.field),op:"IS_NAN"}};if(td(e.value))return{unaryFilter:{field:Tm(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(nd(e.value))return{unaryFilter:{field:Tm(e.field),op:"IS_NOT_NAN"}};if(td(e.value))return{unaryFilter:{field:Tm(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tm(e.field),op:Sm(e.op),value:e.value}}}(e):e instanceof fd?function(e){var t=e.getFilters().map((function(e){return Im(e)}));return 1===t.length?t[0]:{compositeFilter:{op:Nm(e.op),filters:t}}}(e):Hf()}function Am(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var Cm=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Dm=([].concat(U(Cm),["documentOverlays"]),["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"]),Om=Dm;[].concat(Om,["indexConfiguration","indexState","indexEntries"]);var Mm=function(){function e(t,n,r,a){B(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=a}return K(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var a=this.mutations[r];a.key.isEqual(e.key)&&Sp(a,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=ae(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var a=n.value;a.key.isEqual(e.key)&&(t=Np(a,e,t,this.localWriteTime))}}catch(u){r.e(u)}finally{r.f()}var i,o=ae(this.mutations);try{for(o.s();!(i=o.n()).done;){var s=i.value;s.key.isEqual(e.key)&&(t=Np(s,e,t,this.localWriteTime))}}catch(u){o.e(u)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Hp();return this.mutations.forEach((function(a){var i=e.get(a.key),o=i.overlayedDocument,s=n.applyToLocalView(o,i.mutatedFields),u=Ep(o,s=t.has(a.key)?null:s);null!==u&&r.set(a.key,u),o.isValidDocument()||o.convertToNoDocument(ch.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Gp())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&sh(this.mutations,e.mutations,(function(e,t){return Tp(e,t)}))&&sh(this.baseMutations,e.baseMutations,(function(e,t){return Tp(e,t)}))}}]),e}(),Rm=function(){function e(t,n){B(this,e),this.largestBatchId=t,this.mutation=n}return K(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Pm=function(){function e(t,n,r,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ch.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ch.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Lh.EMPTY_BYTE_STRING;B(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return K(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Lm=K((function e(t){B(this,e),this.oe=t}));function Fm(e){var t=wm({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?$d(t,t.limit,"L"):t}var jm=function(){function e(){B(this,e)}return K(e,[{key:"ae",value:function(e,t){this.he(e,t),t.le()}},{key:"he",value:function(e,t){if("nullValue"in e)this.fe(t,5);else if("booleanValue"in e)this.fe(t,10),t.de(e.booleanValue?1:0);else if("integerValue"in e)this.fe(t,15),t.de(zh(e.integerValue));else if("doubleValue"in e){var n=zh(e.doubleValue);isNaN(n)?this.fe(t,13):(this.fe(t,15),Mh(n)?t.de(0):t.de(n))}else if("timestampValue"in e){var r=e.timestampValue;this.fe(t,20),"string"==typeof r?t._e(r):(t._e("".concat(r.seconds||"")),t.de(r.nanos||0))}else if("stringValue"in e)this.we(e.stringValue,t),this.me(t);else if("bytesValue"in e)this.fe(t,30),t.ge(Vh(e.bytesValue)),this.me(t);else if("referenceValue"in e)this.ye(e.referenceValue,t);else if("geoPointValue"in e){var a=e.geoPointValue;this.fe(t,45),t.de(a.latitude||0),t.de(a.longitude||0)}else"mapValue"in e?id(e)?this.fe(t,Number.MAX_SAFE_INTEGER):(this.pe(e.mapValue,t),this.me(t)):"arrayValue"in e?(this.Ie(e.arrayValue,t),this.me(t)):Hf()}},{key:"we",value:function(e,t){this.fe(t,25),this.Te(e,t)}},{key:"Te",value:function(e,t){t._e(e)}},{key:"pe",value:function(e,t){var n=e.fields||{};this.fe(t,55);for(var r=0,a=Object.keys(n);r<a.length;r++){var i=a[r];this.we(i,t),this.he(n[i],t)}}},{key:"Ie",value:function(e,t){var n=e.values||[];this.fe(t,50);var r,a=ae(n);try{for(a.s();!(r=a.n()).done;){var i=r.value;this.he(i,t)}}catch(o){a.e(o)}finally{a.f()}}},{key:"ye",value:function(e,t){var n=this;this.fe(t,37),ph.fromName(e).path.forEach((function(e){n.fe(t,60),n.Te(e,t)}))}},{key:"fe",value:function(e,t){e.de(t)}},{key:"me",value:function(e){e.de(2)}}]),e}();jm.Ee=new jm;var zm=function(){function e(){B(this,e),this.Ze=new Vm}return K(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Ze.add(t),Sh.resolve()}},{key:"getCollectionParents",value:function(e,t){return Sh.resolve(this.Ze.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Sh.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Sh.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Sh.resolve(null)}},{key:"getIndexType",value:function(e,t){return Sh.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Sh.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Sh.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Sh.resolve(gh.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Sh.resolve(gh.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Sh.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Sh.resolve()}}]),e}(),Vm=function(){function e(){B(this,e),this.index={}}return K(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Dd(fh.comparator),a=!r.has(n);return this.index[t]=r.add(n),a}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Dd(fh.comparator)).toArray()}}]),e}();new Uint8Array(0);var Um=function(){function e(t,n,r){B(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return K(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();Um.DEFAULT_COLLECTION_PERCENTILE=10,Um.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Um.DEFAULT=new Um(41943040,Um.DEFAULT_COLLECTION_PERCENTILE,Um.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Um.DISABLED=new Um(-1,0,0);var Bm=function(){function e(t){B(this,e),this.Pn=t}return K(e,[{key:"next",value:function(){return this.Pn+=2,this.Pn}}],[{key:"Vn",value:function(){return new e(0)}},{key:"Sn",value:function(){return new e(-1)}}]),e}();var qm=function(){function e(){B(this,e),this.changes=new Fp((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return K(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Pd.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Sh.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}();var Hm=K((function e(t,n){B(this,e),this.overlayedDocument=t,this.mutatedFields=n})),Wm=function(){function e(t,n,r,a){B(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=a}return K(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(a){return r=a,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&Np(r.mutation,e,Md.empty(),uh.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Gp()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Gp(),a=qp();return this.populateOverlays(e,a,t).next((function(){return n.computeViews(e,t,a,r).next((function(e){var t=Up();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=qp();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Gp())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var a=zp(),i=Wp(),o=Wp();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Ip)?a=a.insert(t.key,t):void 0!==o?(i.set(t.key,o.mutation.getFieldMask()),Np(o.mutation,t,o.mutation.getFieldMask(),uh.now())):i.set(t.key,Md.empty())})),this.recalculateAndSaveOverlays(e,a).next((function(e){return e.forEach((function(e,t){return i.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Hm(t,null!==(n=i.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Wp(),a=new Id((function(e,t){return e-t})),i=Gp();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,i=ae(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var i=t.get(n);if(null!==i){var o=r.get(n)||Md.empty();o=e.applyToLocalView(i,o),r.set(n,o);var s=(a.get(e.batchId)||Gp()).add(n);a=a.insert(e.batchId,s)}}))};for(i.s();!(n=i.n()).done;)o()}catch(s){i.e(s)}finally{i.f()}})).next((function(){for(var o=[],s=a.getReverseIterator(),u=function(){var a=s.getNext(),u=a.key,c=a.value,l=Hp();c.forEach((function(e){if(!i.has(e)){var n=Ep(t.get(e),r.get(e));null!==n&&l.set(e,n),i=i.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,u,l))};s.hasNext();)u();return Sh.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return ph.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Gd(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var a=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(i){var o=r-i.size>0?a.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Sh.resolve(qp()),s=-1,u=i;return o.next((function(t){return Sh.forEach(t,(function(t,n){return s<n.largestBatchId&&(s=n.largestBatchId),i.get(t)?Sh.resolve():a.remoteDocumentCache.getEntry(e,t).next((function(e){u=u.insert(t,e)}))})).next((function(){return a.populateOverlays(e,t,i)})).next((function(){return a.computeViews(e,u,t,Gp())})).next((function(e){return{batchId:s,changes:Bp(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new ph(t)).next((function(e){var t=Up();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,a=t.collectionGroup,i=Up();return this.indexManager.getCollectionParents(e,a).next((function(o){return Sh.forEach(o,(function(o){var s=function(e,t){return new Ud(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(a));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){i=i.insert(e,t)}))}))})).next((function(){return i}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,a=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(i){return r=i,a.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,Pd.newInvalidDocument(r)))}));var n=Up();return e.forEach((function(e,a){var i=r.get(e);void 0!==i&&Np(i.mutation,a,Md.empty(),uh.now()),tp(t,a)&&(n=n.insert(e,a))})),n}))}}]),e}(),Km=function(){function e(t){B(this,e),this.Tt=t,this.es=new Map,this.ns=new Map}return K(e,[{key:"getBundleMetadata",value:function(e,t){return Sh.resolve(this.es.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.es.set(t.id,{id:(n=t).id,version:n.version,createTime:fm(n.createTime)}),Sh.resolve()}},{key:"getNamedQuery",value:function(e,t){return Sh.resolve(this.ns.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ns.set(t.name,function(e){return{name:e.name,query:Fm(e.bundledQuery),readTime:fm(e.readTime)}}(t)),Sh.resolve()}}]),e}(),Gm=function(){function e(){B(this,e),this.overlays=new Id(ph.comparator),this.ss=new Map}return K(e,[{key:"getOverlay",value:function(e,t){return Sh.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=qp();return Sh.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,a){r.ce(e,t,a)})),Sh.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,a=this.ss.get(n);return void 0!==a&&(a.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ss.delete(n)),Sh.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=qp(),a=t.length+1,i=new ph(t.child("")),o=this.overlays.getIteratorFrom(i);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===a&&s.largestBatchId>n&&r.set(s.getKey(),s)}return Sh.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var a=new Id((function(e,t){return e-t})),i=this.overlays.getIterator();i.hasNext();){var o=i.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=a.get(o.largestBatchId);null===s&&(s=qp(),a=a.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=qp(),c=a.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return Sh.resolve(u)}},{key:"ce",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var a=this.ss.get(r.largestBatchId).delete(n.key);this.ss.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new Rm(t,n));var i=this.ss.get(t);void 0===i&&(i=Gp(),this.ss.set(t,i)),this.ss.set(t,i.add(n.key))}}]),e}(),Qm=function(){function e(){B(this,e),this.rs=new Dd(Ym.os),this.us=new Dd(Ym.cs)}return K(e,[{key:"isEmpty",value:function(){return this.rs.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Ym(e,t);this.rs=this.rs.add(n),this.us=this.us.add(n)}},{key:"hs",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.ls(new Ym(e,t))}},{key:"fs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"ds",value:function(e){var t=this,n=new ph(new fh([])),r=new Ym(n,e),a=new Ym(n,e+1),i=[];return this.us.forEachInRange([r,a],(function(e){t.ls(e),i.push(e.key)})),i}},{key:"_s",value:function(){var e=this;this.rs.forEach((function(t){return e.ls(t)}))}},{key:"ls",value:function(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}},{key:"ws",value:function(e){var t=new ph(new fh([])),n=new Ym(t,e),r=new Ym(t,e+1),a=Gp();return this.us.forEachInRange([n,r],(function(e){a=a.add(e.key)})),a}},{key:"containsKey",value:function(e){var t=new Ym(e,0),n=this.rs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Ym=function(){function e(t,n){B(this,e),this.key=t,this.gs=n}return K(e,null,[{key:"os",value:function(e,t){return ph.comparator(e.key,t.key)||oh(e.gs,t.gs)}},{key:"cs",value:function(e,t){return oh(e.gs,t.gs)||ph.comparator(e.key,t.key)}}]),e}(),Xm=function(){function e(t,n){B(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ys=1,this.ps=new Dd(Ym.os)}return K(e,[{key:"checkEmpty",value:function(e){return Sh.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var a=this.ys;this.ys++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var i=new Mm(a,t,n,r);this.mutationQueue.push(i);var o,s=ae(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.ps=this.ps.add(new Ym(u.key,a)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return Sh.resolve(i)}},{key:"lookupMutationBatch",value:function(e,t){return Sh.resolve(this.Is(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Ts(n),a=r<0?0:r;return Sh.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Sh.resolve(0===this.mutationQueue.length?-1:this.ys-1)}},{key:"getAllMutationBatches",value:function(e){return Sh.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Ym(t,0),a=new Ym(t,Number.POSITIVE_INFINITY),i=[];return this.ps.forEachInRange([r,a],(function(e){var t=n.Is(e.gs);i.push(t)})),Sh.resolve(i)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Dd(oh);return t.forEach((function(e){var t=new Ym(e,0),a=new Ym(e,Number.POSITIVE_INFINITY);n.ps.forEachInRange([t,a],(function(e){r=r.add(e.gs)}))})),Sh.resolve(this.Es(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,a=n;ph.isDocumentKey(a)||(a=a.child(""));var i=new Ym(new ph(a),0),o=new Dd(oh);return this.ps.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.gs)),!0)}),i),Sh.resolve(this.Es(o))}},{key:"Es",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Is(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Wf(0===this.As(t.batchId,"removed")),this.mutationQueue.shift();var r=this.ps;return Sh.forEach(t.mutations,(function(a){var i=new Ym(a.key,t.batchId);return r=r.delete(i),n.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((function(){n.ps=r}))}},{key:"bn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Ym(t,0),r=this.ps.firstAfterOrEqual(n);return Sh.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Sh.resolve()}},{key:"As",value:function(e,t){return this.Ts(e)}},{key:"Ts",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"Is",value:function(e){var t=this.Ts(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),$m=function(){function e(t){B(this,e),this.Rs=t,this.docs=new Id(ph.comparator),this.size=0}return K(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),a=r?r.size:0,i=this.Rs(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Sh.resolve(n?n.document.mutableCopy():Pd.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=zp();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Pd.newInvalidDocument(e))})),Sh.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var a=zp(),i=t.path,o=new ph(i.child("")),s=this.docs.getIteratorFrom(o);s.hasNext();){var u=s.getNext(),c=u.key,l=u.value.document;if(!i.isPrefixOf(c.path))break;c.path.length>i.length+1||bh(yh(l),n)<=0||(r.has(l.key)||tp(t,l))&&(a=a.insert(l.key,l.mutableCopy()))}return Sh.resolve(a)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Hf()}},{key:"bs",value:function(e,t){return Sh.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Jm(this)}},{key:"getSize",value:function(e){return Sh.resolve(this.size)}}]),e}(),Jm=function(e){Q(n,e);var t=J(n);function n(e){var r;return B(this,n),(r=t.call(this)).Xn=e,r}return K(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,a){a.isValidDocument()?n.push(t.Xn.addEntry(e,a)):t.Xn.removeEntry(r)})),Sh.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Xn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Xn.getEntries(e,t)}}]),n}(qm),Zm=function(){function e(t){B(this,e),this.persistence=t,this.vs=new Fp((function(e){return jd(e)}),zd),this.lastRemoteSnapshotVersion=ch.min(),this.highestTargetId=0,this.Ps=0,this.Vs=new Qm,this.targetCount=0,this.Ss=Bm.Vn()}return K(e,[{key:"forEachTarget",value:function(e,t){return this.vs.forEach((function(e,n){return t(n)})),Sh.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Sh.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Sh.resolve(this.Ps)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ss.next(),Sh.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ps&&(this.Ps=t),Sh.resolve()}},{key:"xn",value:function(e){this.vs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ss=new Bm(t),this.highestTargetId=t),e.sequenceNumber>this.Ps&&(this.Ps=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.xn(t),this.targetCount+=1,Sh.resolve()}},{key:"updateTargetData",value:function(e,t){return this.xn(t),Sh.resolve()}},{key:"removeTargetData",value:function(e,t){return this.vs.delete(t.target),this.Vs.ds(t.targetId),this.targetCount-=1,Sh.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,a=0,i=[];return this.vs.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.vs.delete(o),i.push(r.removeMatchingKeysForTargetId(e,s.targetId)),a++)})),Sh.waitFor(i).next((function(){return a}))}},{key:"getTargetCount",value:function(e){return Sh.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.vs.get(t)||null;return Sh.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Vs.hs(t,n),Sh.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Vs.fs(t,n);var r=this.persistence.referenceDelegate,a=[];return r&&t.forEach((function(t){a.push(r.markPotentiallyOrphaned(e,t))})),Sh.waitFor(a)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Vs.ds(t),Sh.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Vs.ws(t);return Sh.resolve(n)}},{key:"containsKey",value:function(e,t){return Sh.resolve(this.Vs.containsKey(t))}}]),e}(),ev=function(){function e(t,n){var r=this;B(this,e),this.Ds={},this.overlays={},this.Cs=new Th(0),this.xs=!1,this.xs=!0,this.referenceDelegate=t(this),this.Ns=new Zm(this),this.indexManager=new zm,this.remoteDocumentCache=new $m((function(e){return r.referenceDelegate.ks(e)})),this.Tt=new Lm(n),this.Os=new Km(this.Tt)}return K(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.xs=!1,Promise.resolve()}},{key:"started",get:function(){return this.xs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Gm,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Ds[e.toKey()];return n||(n=new Xm(t,this.referenceDelegate),this.Ds[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Ns}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Os}},{key:"runTransaction",value:function(e,t,n){var r=this;Vf("MemoryPersistence","Starting transaction:",e);var a=new tv(this.Cs.next());return this.referenceDelegate.Ms(),n(a).next((function(e){return r.referenceDelegate.Fs(a).next((function(){return e}))})).toPromise().then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"$s",value:function(e,t){return Sh.or(Object.values(this.Ds).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),tv=function(e){Q(n,e);var t=J(n);function n(e){var r;return B(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return K(n)}(wh),nv=function(){function e(t){B(this,e),this.persistence=t,this.Bs=new Qm,this.Ls=null}return K(e,[{key:"Us",get:function(){if(this.Ls)return this.Ls;throw Hf()}},{key:"addReference",value:function(e,t,n){return this.Bs.addReference(n,t),this.Us.delete(n.toString()),Sh.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Bs.removeReference(n,t),this.Us.add(n.toString()),Sh.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Us.add(t.toString()),Sh.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Bs.ds(t.targetId).forEach((function(e){return n.Us.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Us.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ms",value:function(){this.Ls=new Set}},{key:"Fs",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Sh.forEach(this.Us,(function(r){var a=ph.fromPath(r);return t.Ks(e,a).next((function(e){e||n.removeEntry(a,ch.min())}))})).next((function(){return t.Ls=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Ks(e,t).next((function(e){e?n.Us.delete(t.toString()):n.Us.add(t.toString())}))}},{key:"ks",value:function(e){return 0}},{key:"Ks",value:function(e,t){var n=this;return Sh.or([function(){return Sh.resolve(n.Bs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.$s(e,t)}])}}],[{key:"qs",value:function(t){return new e(t)}}]),e}();var rv=function(){function e(t,n,r,a){B(this,e),this.targetId=t,this.fromCache=n,this.Ci=r,this.xi=a}return K(e,null,[{key:"Ni",value:function(t,n){var r,a=Gp(),i=Gp(),o=ae(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:a=a.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,a,i)}}]),e}(),av=function(){function e(){B(this,e),this.ki=!1}return K(e,[{key:"initialize",value:function(e,t){this.Oi=e,this.indexManager=t,this.ki=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var a=this;return this.Mi(e,t).next((function(i){return i||a.Fi(e,t,r,n)})).next((function(n){return n||a.$i(e,t)}))}},{key:"Mi",value:function(e,t){var n=this;if(Hd(t))return Sh.resolve(null);var r=Yd(t);return this.indexManager.getIndexType(e,r).next((function(a){return 0===a?null:(null!==t.limit&&1===a&&(t=$d(t,null,"F"),r=Yd(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(a){var i=Gp.apply(void 0,U(a));return n.Oi.getDocuments(e,i).next((function(a){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Bi(t,a);return n.Li(t,o,i,r.readTime)?n.Mi(e,$d(t,null,"F")):n.qi(e,o,t,r)}))}))})))}))}},{key:"Fi",value:function(e,t,n,r){var a=this;return Hd(t)||r.isEqual(ch.min())?this.$i(e,t):this.Oi.getDocuments(e,n).next((function(i){var o=a.Bi(t,i);return a.Li(t,o,n,r)?a.$i(e,t):(zf()<=pn.DEBUG&&Vf("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ep(t)),a.qi(e,o,t,vh(r,-1)))}))}},{key:"Bi",value:function(e,t){var n=new Dd(rp(e));return t.forEach((function(t,r){tp(e,r)&&(n=n.add(r))})),n}},{key:"Li",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}},{key:"$i",value:function(e,t){return zf()<=pn.DEBUG&&Vf("QueryEngine","Using full collection scan to execute query:",ep(t)),this.Oi.getDocumentsMatchingQuery(e,t,gh.min())}},{key:"qi",value:function(e,t,n,r){return this.Oi.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),iv=function(){function e(t,n,r,a){B(this,e),this.persistence=t,this.Ui=n,this.Tt=a,this.Ki=new Id(oh),this.Gi=new Fp((function(e){return jd(e)}),zd),this.Qi=new Map,this.ji=t.getRemoteDocumentCache(),this.Ns=t.getTargetCache(),this.Os=t.getBundleCache(),this.zi(r)}return K(e,[{key:"zi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Wm(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ki)}))}}]),e}();function ov(e,t,n,r){return new iv(e,t,n,r)}function sv(e,t){return uv.apply(this,arguments)}function uv(){return uv=Rt(Ot().mark((function e(t,n){var r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Kf(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(a){return t=a,r.zi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var a,i=[],o=[],s=Gp(),u=ae(t);try{for(u.s();!(a=u.n()).done;){var c=a.value;i.push(c.batchId);var l,f=ae(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;s=s.add(h.key)}}catch(b){f.e(b)}finally{f.f()}}}catch(b){u.e(b)}finally{u.f()}var d,p=ae(n);try{for(p.s();!(d=p.n()).done;){var m=d.value;o.push(m.batchId);var v,y=ae(m.mutations);try{for(y.s();!(v=y.n()).done;){var g=v.value;s=s.add(g.key)}}catch(b){y.e(b)}finally{y.f()}}}catch(b){p.e(b)}finally{p.f()}return r.localDocuments.getDocuments(e,s).next((function(e){return{Wi:e,removedBatchIds:i,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),uv.apply(this,arguments)}function cv(e){var t=Kf(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Ns.getLastRemoteSnapshotVersion(e)}))}function lv(e,t){var n=Kf(e),r=t.snapshotVersion,a=n.Ki;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var i=n.ji.newChangeBuffer({trackRemovals:!0});a=n.Ki;var o=[];t.targetChanges.forEach((function(i,s){var u=a.get(s);if(u){o.push(n.Ns.removeMatchingKeys(e,i.removedDocuments,s).next((function(){return n.Ns.addMatchingKeys(e,i.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(s)?c=c.withResumeToken(Lh.EMPTY_BYTE_STRING,ch.min()).withLastLimboFreeSnapshotVersion(ch.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,r)),a=a.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,i)&&o.push(n.Ns.updateTargetData(e,c))}}));var s=zp(),u=Gp();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(fv(e,i,t.documentUpdates).next((function(e){s=e.Hi,u=e.Ji}))),!r.isEqual(ch.min())){var c=n.Ns.getLastRemoteSnapshotVersion(e).next((function(t){return n.Ns.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Sh.waitFor(o).next((function(){return i.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,s,u)})).next((function(){return s}))})).then((function(e){return n.Ki=a,e}))}function fv(e,t,n){var r=Gp(),a=Gp();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=zp();return n.forEach((function(n,i){var o=e.get(n);i.isFoundDocument()!==o.isFoundDocument()&&(a=a.add(n)),i.isNoDocument()&&i.version.isEqual(ch.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!o.isValidDocument()||i.version.compareTo(o.version)>0||0===i.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):Vf("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",i.version)})),{Hi:r,Ji:a}}))}function hv(e,t){var n=Kf(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Ns.getTargetData(e,t).next((function(a){return a?(r=a,Sh.resolve(r)):n.Ns.allocateTargetId(e).next((function(a){return r=new Pm(t,a,0,e.currentSequenceNumber),n.Ns.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ki.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ki=n.Ki.insert(e.targetId,e),n.Gi.set(t,e.targetId)),e}))}function dv(e,t,n){return pv.apply(this,arguments)}function pv(){return pv=Rt(Ot().mark((function e(t,n,r){var a,i,o;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Kf(t),i=a.Ki.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,a.persistence.runTransaction("Release target",o,(function(e){return a.persistence.referenceDelegate.removeTarget(e,i)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Nh(e.t1)){e.next=12;break}throw e.t1;case 12:Vf("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:a.Ki=a.Ki.remove(n),a.Gi.delete(i.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),pv.apply(this,arguments)}function mv(e,t,n){var r=Kf(e),a=ch.min(),i=Gp();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Kf(e),a=r.Gi.get(n);return void 0!==a?Sh.resolve(r.Ki.get(a)):r.Ns.getTargetData(t,n)}(r,e,Yd(t)).next((function(t){if(t)return a=t.lastLimboFreeSnapshotVersion,r.Ns.getMatchingKeysForTargetId(e,t.targetId).next((function(e){i=e}))})).next((function(){return r.Ui.getDocumentsMatchingQuery(e,t,n?a:ch.min(),n?i:Gp())})).next((function(e){return vv(r,np(t),e),{documents:e,Yi:i}}))}))}function vv(e,t,n){var r=e.Qi.get(t)||ch.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Qi.set(t,r)}var yv=function(){function e(){B(this,e),this.activeTargetIds=Yp()}return K(e,[{key:"sr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"ir",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"nr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),gv=function(){function e(){B(this,e),this.Ur=new yv,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return K(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Kr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Ur.ir(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Kr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Ur.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Ur=new yv,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),bv=function(){function e(){B(this,e)}return K(e,[{key:"Gr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),kv=function(){function e(){var t=this;B(this,e),this.Qr=function(){return t.jr()},this.zr=function(){return t.Wr()},this.Hr=[],this.Jr()}return K(e,[{key:"Gr",value:function(e){this.Hr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}},{key:"Jr",value:function(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}},{key:"jr",value:function(){Vf("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=ae(this.Hr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Wr",value:function(){Vf("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=ae(this.Hr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),wv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},xv=function(){function e(t){B(this,e),this.Yr=t.Yr,this.Zr=t.Zr}return K(e,[{key:"Xr",value:function(e){this.eo=e}},{key:"no",value:function(e){this.so=e}},{key:"onMessage",value:function(e){this.io=e}},{key:"close",value:function(){this.Zr()}},{key:"send",value:function(e){this.Yr(e)}},{key:"ro",value:function(){this.eo()}},{key:"oo",value:function(e){this.so(e)}},{key:"uo",value:function(e){this.io(e)}}]),e}(),Ev=function(e){Q(n,e);var t=J(n);function n(e){var r;return B(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return K(n,[{key:"wo",value:function(e,t,n,r){return new Promise((function(a,i){var o=new Rf;o.setWithCredentials(!0),o.listenOnce(Af.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case If.NO_ERROR:var t=o.getResponseJson();Vf("Connection","XHR received:",JSON.stringify(t)),a(t);break;case If.TIMEOUT:Vf("Connection",'RPC "'+e+'" timed out'),i(new Qf(Gf.DEADLINE_EXCEEDED,"Request time out"));break;case If.HTTP_ERROR:var n=o.getStatus();if(Vf("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Gf).indexOf(t)>=0?t:Gf.UNKNOWN}(s.status);i(new Qf(u,s.message))}else i(new Qf(Gf.UNKNOWN,"Server responded with status "+o.getStatus()))}else i(new Qf(Gf.UNAVAILABLE,"Connection failed."));break;default:Hf()}}finally{Vf("Connection",'RPC "'+e+'" completed.')}}));var s=JSON.stringify(r);o.send(t,"POST",s,n,15)}))}},{key:"yo",value:function(e,t,n){var r=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Tf(),i=_f(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Of({})),this._o(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;var s=r.join("");Vf("Connection","Creating WebChannel: "+s,o);var u=a.createWebChannel(s,o),c=!1,l=!1,f=new xv({Yr:function(e){l?Vf("Connection","Not sending because WebChannel is closed:",e):(c||(Vf("Connection","Opening WebChannel transport."),u.open(),c=!0),Vf("Connection","WebChannel sending:",e),u.send(e))},Zr:function(){return u.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(u,Mf.EventType.OPEN,(function(){l||Vf("Connection","WebChannel transport opened.")})),h(u,Mf.EventType.CLOSE,(function(){l||(l=!0,Vf("Connection","WebChannel transport closed"),f.oo())})),h(u,Mf.EventType.ERROR,(function(e){l||(l=!0,Bf("Connection","WebChannel transport errored:",e),f.oo(new Qf(Gf.UNAVAILABLE,"The operation could not be completed")))})),h(u,Mf.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];Wf(!!n);var r=n,a=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(a){Vf("Connection","WebChannel received error:",a);var i=a.status,o=function(e){var t=Op[e];if(void 0!==t)return Lp(t)}(i),s=a.message;void 0===o&&(o=Gf.INTERNAL,s="Unknown error status: "+i+" with message "+a.message),l=!0,f.oo(new Qf(o,s)),u.close()}else Vf("Connection","WebChannel received:",n),f.uo(n)}})),h(i,Cf.STAT_EVENT,(function(e){e.stat===Df.PROXY?Vf("Connection","Detected buffering proxy"):e.stat===Df.NOPROXY&&Vf("Connection","Detected no buffering proxy")})),setTimeout((function(){f.ro()}),0),f}}]),n}(function(){function e(t){B(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.co=n+"://"+t.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return K(e,[{key:"ho",get:function(){return!1}},{key:"lo",value:function(e,t,n,r,a){var i=this.fo(e,t);Vf("RestConnection","Sending: ",i,n);var o={};return this._o(o,r,a),this.wo(e,i,o,n).then((function(e){return Vf("RestConnection","Received: ",e),e}),(function(t){throw Bf("RestConnection","".concat(e," failed with error: "),t,"url: ",i,"request:",n),t}))}},{key:"mo",value:function(e,t,n,r,a,i){return this.lo(e,t,n,r,a)}},{key:"_o",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ff,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"fo",value:function(e,t){var n=wv[e];return"".concat(this.co,"/v1/").concat(t,":").concat(n)}}]),e}());function Sv(){return"undefined"!=typeof document?document:null}function Nv(e){return new um(e,!0)}var Tv=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;B(this,e),this.Ys=t,this.timerId=n,this.po=r,this.Io=a,this.To=i,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}return K(e,[{key:"reset",value:function(){this.Eo=0}},{key:"bo",value:function(){this.Eo=this.To}},{key:"vo",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Eo+this.Po()),r=Math.max(0,Date.now()-this.Ro),a=Math.max(0,n-r);a>0&&Vf("ExponentialBackoff","Backing off for ".concat(a," ms (base delay: ").concat(this.Eo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,a,(function(){return t.Ro=Date.now(),e()})),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}},{key:"Vo",value:function(){null!==this.Ao&&(this.Ao.skipDelay(),this.Ao=null)}},{key:"cancel",value:function(){null!==this.Ao&&(this.Ao.cancel(),this.Ao=null)}},{key:"Po",value:function(){return(Math.random()-.5)*this.Eo}}]),e}(),_v=function(){function e(t,n,r,a,i,o,s,u){B(this,e),this.Ys=t,this.So=r,this.Do=a,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new Tv(t,n)}return K(e,[{key:"Oo",value:function(){return 1===this.state||5===this.state||this.Mo()}},{key:"Mo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Fo()}},{key:"stop",value:function(){var e=Rt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Oo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"$o",value:function(){this.state=0,this.ko.reset()}},{key:"Bo",value:function(){var e=this;this.Mo()&&null===this.xo&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,(function(){return e.Lo()})))}},{key:"qo",value:function(e){this.Uo(),this.stream.send(e)}},{key:"Lo",value:function(){var e=Rt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Mo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Uo",value:function(){this.xo&&(this.xo.cancel(),this.xo=null)}},{key:"Ko",value:function(){this.No&&(this.No.cancel(),this.No=null)}},{key:"close",value:function(){var e=Rt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Uo(),this.Ko(),this.ko.cancel(),this.Co++,4!==t?this.ko.reset():n&&n.code===Gf.RESOURCE_EXHAUSTED?(Uf(n.toString()),Uf("Using maximum backoff delay to prevent overloading the backend."),this.ko.bo()):n&&n.code===Gf.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Go(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.no(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Go",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Qo(this.Co),n=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=te(t,2),a=r[0],i=r[1];e.Co===n&&e.jo(a,i)}),(function(n){t((function(){var t=new Qf(Gf.UNKNOWN,"Fetching auth token failed: "+n.message);return e.zo(t)}))}))}},{key:"jo",value:function(e,t){var n=this,r=this.Qo(this.Co);this.stream=this.Wo(e,t),this.stream.Xr((function(){r((function(){return n.state=2,n.No=n.Ys.enqueueAfterDelay(n.Do,1e4,(function(){return n.Mo()&&(n.state=3),Promise.resolve()})),n.listener.Xr()}))})),this.stream.no((function(e){r((function(){return n.zo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Fo",value:function(){var e=this;this.state=5,this.ko.vo(Rt(Ot().mark((function t(){return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"zo",value:function(e){return Vf("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Qo",value:function(e){var t=this;return function(n){t.Ys.enqueueAndForget((function(){return t.Co===e?n():(Vf("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Iv=function(e){Q(n,e);var t=J(n);function n(e,r,a,i,o,s){var u;return B(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,a,i,s)).Tt=o,u}return K(n,[{key:"Wo",value:function(e,t){return this.connection.yo("Listen",e,t)}},{key:"onMessage",value:function(e){this.ko.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Hf()}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],i=function(e,t){return e.yt?(Wf(void 0===t||"string"==typeof t),Lh.fromBase64String(t||"")):(Wf(void 0===t||t instanceof Uint8Array),Lh.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?Gf.UNKNOWN:Lp(e.code);return new Qf(t,e.message||"")}(o);n=new em(r,a,i,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=pm(e,u.document.name),l=fm(u.document.updateTime),f=u.document.createTime?fm(u.document.createTime):ch.min(),h=new Rd({mapValue:{fields:u.document.fields}}),d=Pd.newFoundDocument(c,l,f,h),p=u.targetIds||[],m=u.removedTargetIds||[];n=new Jp(p,m,d.key,d)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=pm(e,v.document),g=v.readTime?fm(v.readTime):ch.min(),b=Pd.newNoDocument(y,g),k=v.removedTargetIds||[];n=new Jp([],k,b.key,b)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var x=pm(e,w.document),E=w.removedTargetIds||[];n=new Jp([],E,x,null)}else{if(!("filter"in t))return Hf();t.filter;var S=t.filter;S.targetId;var N=S.count||0,T=new Pp(N),_=S.targetId;n=new Zp(_,T)}return n}(this.Tt,e),n=function(e){if(!("targetChange"in e))return ch.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?ch.min():t.readTime?fm(t.readTime):ch.min()}(e);return this.listener.Ho(t,n)}},{key:"Jo",value:function(e){var t={};t.database=ym(this.Tt),t.addTarget=function(e,t){var n,r=t.target;return(n=Vd(r)?{documents:bm(e,r)}:{query:km(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=lm(e,t.resumeToken):t.snapshotVersion.compareTo(ch.min())>0&&(n.readTime=cm(e,t.snapshotVersion.toTimestamp())),n}(this.Tt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Hf()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.Tt,e);n&&(t.labels=n),this.qo(t)}},{key:"Yo",value:function(e){var t={};t.database=ym(this.Tt),t.removeTarget=e,this.qo(t)}}]),n}(_v),Av=function(e){Q(n,e);var t=J(n);function n(e,r,a,i){var o;return B(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=a,o.Tt=i,o.iu=!1,o}return K(n,[{key:"ru",value:function(){if(this.iu)throw new Qf(Gf.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"lo",value:function(e,t,n){var r=this;return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var i=te(a,2),o=i[0],s=i[1];return r.connection.lo(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Gf.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Qf(Gf.UNKNOWN,e.toString())}))}},{key:"mo",value:function(e,t,n,r){var a=this;return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var o=te(i,2),s=o[0],u=o[1];return a.connection.mo(e,t,n,s,u,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Gf.UNAUTHENTICATED&&(a.authCredentials.invalidateToken(),a.appCheckCredentials.invalidateToken()),e):new Qf(Gf.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.iu=!0}}]),n}(function(){return K((function e(){B(this,e)}))}());var Cv=function(){function e(t,n){B(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}return K(e,[{key:"au",value:function(){var e=this;0===this.ou&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.uu=null,e.lu("Backend didn't respond within 10 seconds."),e.hu("Offline"),Promise.resolve()})))}},{key:"fu",value:function(e){"Online"===this.state?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.hu("Offline")))}},{key:"set",value:function(e){this.du(),this.ou=0,"Online"===e&&(this.cu=!1),this.hu(e)}},{key:"hu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"lu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.cu?(Uf(t),this.cu=!1):Vf("OnlineStateTracker",t)}},{key:"du",value:function(){null!==this.uu&&(this.uu.cancel(),this.uu=null)}}]),e}(),Dv=K((function e(t,n,r,a,i){var o=this;B(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=i,this.yu.Gr((function(e){r.enqueueAndForget(Rt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Bv(o),!e.t0){e.next=5;break}return Vf("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Rt(Ot().mark((function e(t){var n;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Kf(t)).mu.add(4),e.next=4,Rv(n);case 4:return n.pu.set("Unknown"),n.mu.delete(4),e.next=8,Ov(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.pu=new Cv(r,a)}));function Ov(e){return Mv.apply(this,arguments)}function Mv(){return Mv=Rt(Ot().mark((function e(t){var n,r,a;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Bv(t)){e.next=18;break}n=ae(t.gu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Mv.apply(this,arguments)}function Rv(e){return Pv.apply(this,arguments)}function Pv(){return Pv=Rt(Ot().mark((function e(t){var n,r,a;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=ae(t.gu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return a=r.value,e.next=7,a(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Pv.apply(this,arguments)}function Lv(e,t){var n=Kf(e);n.wu.has(t.targetId)||(n.wu.set(t.targetId,t),Uv(n)?Vv(n):ny(n).Mo()&&jv(n,t))}function Fv(e,t){var n=Kf(e),r=ny(n);n.wu.delete(t),r.Mo()&&zv(n,t),0===n.wu.size&&(r.Mo()?r.Bo():Bv(n)&&n.pu.set("Unknown"))}function jv(e,t){e.Iu.Ft(t.targetId),ny(e).Jo(t)}function zv(e,t){e.Iu.Ft(t),ny(e).Yo(t)}function Vv(e){e.Iu=new nm({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ie:function(t){return e.wu.get(t)||null}}),ny(e).start(),e.pu.au()}function Uv(e){return Bv(e)&&!ny(e).Oo()&&e.wu.size>0}function Bv(e){return 0===Kf(e).mu.size}function qv(e){e.Iu=void 0}function Hv(e){return Wv.apply(this,arguments)}function Wv(){return Wv=Rt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.wu.forEach((function(e,n){jv(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Wv.apply(this,arguments)}function Kv(e,t){return Gv.apply(this,arguments)}function Gv(){return Gv=Rt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:qv(t),Uv(t)?(t.pu.fu(n),Vv(t)):t.pu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Gv.apply(this,arguments)}function Qv(e,t,n){return Yv.apply(this,arguments)}function Yv(){return Yv=Rt(Ot().mark((function e(t,n,r){var a;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.pu.set("Online"),!(n instanceof em&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Rt(Ot().mark((function e(t,n){var r,a,i,o;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,a=ae(n.targetIds),e.prev=2,a.s();case 4:if((i=a.n()).done){e.next=14;break}if(o=i.value,e.t0=t.wu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.wu.delete(o),t.Iu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),a.e(e.t1);case 19:return e.prev=19,a.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Vf("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Xv(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Jp?t.Iu.Qt(n):n instanceof Zp?t.Iu.Zt(n):t.Iu.Wt(n),r.isEqual(ch.min())){e.next=29;break}return e.prev=14,e.next=17,cv(t.localStore);case 17:if(a=e.sent,e.t1=r.compareTo(a)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Iu.ee(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var a=e.wu.get(r);a&&e.wu.set(r,a.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.wu.get(t);if(n){e.wu.set(t,n.withResumeToken(Lh.EMPTY_BYTE_STRING,n.snapshotVersion)),zv(e,t);var r=new Pm(n.target,t,1,n.sequenceNumber);jv(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Vf("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Xv(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Yv.apply(this,arguments)}function Xv(e,t,n){return $v.apply(this,arguments)}function $v(){return $v=Rt(Ot().mark((function e(t,n,r){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Nh(n)){e.next=2;break}throw n;case 2:return t.mu.add(1),e.next=5,Rv(t);case 5:t.pu.set("Offline"),r||(r=function(){return cv(t.localStore)}),t.asyncQueue.enqueueRetryable(Rt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vf("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.mu.delete(1),e.next=6,Ov(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),$v.apply(this,arguments)}function Jv(e,t){return Zv.apply(this,arguments)}function Zv(){return Zv=Rt(Ot().mark((function e(t,n){var r,a;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Kf(t)).asyncQueue.verifyOperationInProgress(),Vf("RemoteStore","RemoteStore received new credentials"),a=Bv(r),r.mu.add(3),e.next=6,Rv(r);case 6:return a&&r.pu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.mu.delete(3),e.next=12,Ov(r);case 12:case"end":return e.stop()}}),e)}))),Zv.apply(this,arguments)}function ey(e,t){return ty.apply(this,arguments)}function ty(){return ty=Rt(Ot().mark((function e(t,n){var r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Kf(t),!n){e.next=7;break}return r.mu.delete(2),e.next=5,Ov(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.mu.add(2),e.next=12,Rv(r);case 12:r.pu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),ty.apply(this,arguments)}function ny(e){return e.Tu||(e.Tu=function(e,t,n){var r=Kf(e);return r.ru(),new Iv(t,r.connection,r.authCredentials,r.appCheckCredentials,r.Tt,n)}(e.datastore,e.asyncQueue,{Xr:Hv.bind(null,e),no:Kv.bind(null,e),Ho:Qv.bind(null,e)}),e.gu.push(function(){var t=Rt(Ot().mark((function t(n){return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Tu.$o(),Uv(e)?Vv(e):e.pu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Tu.stop();case 6:qv(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Tu}var ry=function(){function e(t,n,r,a,i){B(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=a,this.removalCallback=i,this.deferred=new Yf,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return K(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Qf(Gf.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,a,i){var o=new e(t,n,Date.now()+r,a,i);return o.start(r),o}}]),e}();function ay(e,t){if(Uf("AsyncQueue","".concat(t,": ").concat(e)),Nh(e))return new Qf(Gf.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var iy=function(){function e(t){B(this,e),this.comparator=t?function(e,n){return t(e,n)||ph.comparator(e.key,n.key)}:function(e,t){return ph.comparator(e.key,t.key)},this.keyedMap=Up(),this.sortedSet=new Id(this.comparator)}return K(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var a=n.getNext().key,i=r.getNext().key;if(!a.isEqual(i))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),oy=function(){function e(){B(this,e),this.Au=new Id(ph.comparator)}return K(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Au.get(t);n?0!==e.type&&3===n.type?this.Au=this.Au.insert(t,e):3===e.type&&1!==n.type?this.Au=this.Au.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Au=this.Au.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Au=this.Au.remove(t):1===e.type&&2===n.type?this.Au=this.Au.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):Hf():this.Au=this.Au.insert(t,e)}},{key:"Ru",value:function(){var e=[];return this.Au.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),sy=function(){function e(t,n,r,a,i,o,s,u,c){B(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u,this.hasCachedResults=c}return K(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,a,i){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,iy.emptySet(n),o,r,a,!0,!1,i)}}]),e}(),uy=K((function e(){B(this,e),this.bu=void 0,this.listeners=[]})),cy=K((function e(){B(this,e),this.queries=new Fp((function(e){return Zd(e)}),Jd),this.onlineState="Unknown",this.vu=new Set}));function ly(e,t){return fy.apply(this,arguments)}function fy(){return fy=Rt(Ot().mark((function e(t,n){var r,a,i,o,s;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Kf(t),a=n.query,i=!1,(o=r.queries.get(a))||(i=!0,o=new uy),!i){e.next=13;break}return e.prev=3,e.next=6,r.onListen(a);case 6:o.bu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=ay(e.t0,"Initialization of query '".concat(ep(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(a,o),o.listeners.push(n),n.Pu(r.onlineState),o.bu&&n.Vu(o.bu)&&vy(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),fy.apply(this,arguments)}function hy(e,t){return dy.apply(this,arguments)}function dy(){return dy=Rt(Ot().mark((function e(t,n){var r,a,i,o,s;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Kf(t),a=n.query,i=!1,(o=r.queries.get(a))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),!i){e.next=6;break}return e.abrupt("return",(r.queries.delete(a),r.onUnlisten(a)));case 6:case"end":return e.stop()}}),e)}))),dy.apply(this,arguments)}function py(e,t){var n,r=Kf(e),a=!1,i=ae(t);try{for(i.s();!(n=i.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=ae(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Vu(o)&&(a=!0)}}catch(f){l.e(f)}finally{l.f()}u.bu=o}}}catch(f){i.e(f)}finally{i.f()}a&&vy(r)}function my(e,t,n){var r=Kf(e),a=r.queries.get(t);if(a){var i,o=ae(a.listeners);try{for(o.s();!(i=o.n()).done;){i.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function vy(e){e.vu.forEach((function(e){e.next()}))}var yy=function(){function e(t,n,r){B(this,e),this.query=t,this.Su=n,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=r||{}}return K(e,[{key:"Vu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=ae(e.docChanges);try{for(r.s();!(t=r.n()).done;){var a=t.value;3!==a.type&&n.push(a)}}catch(o){r.e(o)}finally{r.f()}e=new sy(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var i=!1;return this.Du?this.xu(e)&&(this.Su.next(e),i=!0):this.Nu(e,this.onlineState)&&(this.ku(e),i=!0),this.Cu=e,i}},{key:"onError",value:function(e){this.Su.error(e)}},{key:"Pu",value:function(e){this.onlineState=e;var t=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),t=!0),t}},{key:"Nu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Ou||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"xu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"ku",value:function(e){e=sy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}]),e}();var gy=K((function e(t){B(this,e),this.key=t})),by=K((function e(t){B(this,e),this.key=t})),ky=function(){function e(t,n){B(this,e),this.query=t,this.Ku=n,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=Gp(),this.mutatedKeys=Gp(),this.ju=rp(t),this.zu=new iy(this.ju)}return K(e,[{key:"Wu",get:function(){return this.Ku}},{key:"Hu",value:function(e,t){var n=this,r=t?t.Ju:new oy,a=t?t.zu:this.zu,i=t?t.mutatedKeys:this.mutatedKeys,o=a,s=!1,u="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,c="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((function(e,t){var l=a.get(e),f=tp(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Yu(l,f)||(r.track({type:2,doc:f}),p=!0,(u&&n.ju(f,u)>0||c&&n.ju(f,c)<0)&&(s=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(f?(o=o.add(f),i=d?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),i=i.delete(l.key),r.track({type:1,doc:l})}return{zu:o,Ju:r,Li:s,mutatedKeys:i}}},{key:"Yu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,a=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;var i=e.Ju.Ru();i.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Hf()}};return n(e)-n(t)}(e.type,t.type)||r.ju(e.doc,t.doc)})),this.Zu(n);var o=t?this.Xu():[],s=0===this.Qu.size&&this.current?1:0,u=s!==this.Gu;return this.Gu=s,0!==i.length||u?{snapshot:new sy(this.query,e.zu,a,i,e.mutatedKeys,0===s,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),tc:o}:{tc:o}}},{key:"Pu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new oy,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}},{key:"ec",value:function(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}},{key:"Zu",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Ku=t.Ku.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Ku=t.Ku.delete(e)})),this.current=e.current)}},{key:"Xu",value:function(){var e=this;if(!this.current)return[];var t=this.Qu;this.Qu=Gp(),this.zu.forEach((function(t){e.ec(t.key)&&(e.Qu=e.Qu.add(t.key))}));var n=[];return t.forEach((function(t){e.Qu.has(t)||n.push(new by(t))})),this.Qu.forEach((function(e){t.has(e)||n.push(new gy(e))})),n}},{key:"nc",value:function(e){this.Ku=e.Yi,this.Qu=Gp();var t=this.Hu(e.documents);return this.applyChanges(t,!0)}},{key:"sc",value:function(){return sy.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,0===this.Gu,this.hasCachedResults)}}]),e}(),wy=K((function e(t,n,r){B(this,e),this.query=t,this.targetId=n,this.view=r})),xy=K((function e(t){B(this,e),this.key=t,this.ic=!1})),Ey=function(){function e(t,n,r,a,i,o){B(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=a,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.rc={},this.oc=new Fp((function(e){return Zd(e)}),Jd),this.uc=new Map,this.cc=new Set,this.ac=new Id(ph.comparator),this.hc=new Map,this.lc=new Qm,this.fc={},this.dc=new Map,this._c=Bm.Sn(),this.onlineState="Unknown",this.wc=void 0}return K(e,[{key:"isPrimaryClient",get:function(){return!0===this.wc}}]),e}();function Sy(e,t){return Ny.apply(this,arguments)}function Ny(){return Ny=Rt(Ot().mark((function e(t,n){var r,a,i,o,s,u;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Wy(t),!(o=r.oc.get(n))){e.next=6;break}a=o.targetId,r.sharedClientState.addLocalQueryTarget(a),i=o.view.sc(),e.next=15;break;case 6:return e.next=8,hv(r.localStore,Yd(n));case 8:return s=e.sent,r.isPrimaryClient&&Lv(r.remoteStore,s),u=r.sharedClientState.addLocalQueryTarget(s.targetId),a=s.targetId,e.next=14,Ty(r,n,a,"current"===u,s.resumeToken);case 14:i=e.sent;case 15:return e.abrupt("return",i);case 16:case"end":return e.stop()}}),e)}))),Ny.apply(this,arguments)}function Ty(e,t,n,r,a){return _y.apply(this,arguments)}function _y(){return _y=Rt(Ot().mark((function e(t,n,r,a,i){var o,s,u,c,l,f;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.mc=function(e,n,r){return function(){var e=Rt(Ot().mark((function e(t,n,r,a){var i,o,s;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.view.Hu(r),e.t0=i.Li,!e.t0){e.next=6;break}return e.next=5,mv(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Hu(t,i)}));case 5:i=e.sent;case 6:return o=a&&a.targetChanges.get(n.targetId),s=n.view.applyChanges(i,t.isPrimaryClient,o),e.abrupt("return",(Fy(t,n.targetId,s.tc),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,mv(t.localStore,n,!0);case 3:return o=e.sent,s=new ky(n,o.Yi),u=s.Hu(o.documents),c=$p.createSynthesizedTargetChangeForCurrentChange(r,a&&"Offline"!==t.onlineState,i),l=s.applyChanges(u,t.isPrimaryClient,c),Fy(t,r,l.tc),f=new wy(n,r,s),e.abrupt("return",(t.oc.set(n,f),t.uc.has(r)?t.uc.get(r).push(n):t.uc.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),_y.apply(this,arguments)}function Iy(e,t){return Ay.apply(this,arguments)}function Ay(){return Ay=Rt(Ot().mark((function e(t,n){var r,a,i;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Kf(t),a=r.oc.get(n),!((i=r.uc.get(a.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.uc.set(a.targetId,i.filter((function(e){return!Jd(e,n)}))),void r.oc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(a.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(a.targetId),e.t0){e.next=9;break}return e.next=9,dv(r.localStore,a.targetId,!1).then((function(){r.sharedClientState.clearQueryState(a.targetId),Fv(r.remoteStore,a.targetId),Py(r,a.targetId)})).catch(xh);case 9:e.next=14;break;case 11:return Py(r,a.targetId),e.next=14,dv(r.localStore,a.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Ay.apply(this,arguments)}function Cy(e,t){return Dy.apply(this,arguments)}function Dy(){return Dy=Rt(Ot().mark((function e(t,n){var r,a;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Kf(t),e.prev=1,e.next=4,lv(r.localStore,n);case 4:return a=e.sent,n.targetChanges.forEach((function(e,t){var n=r.hc.get(t);n&&(Wf(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.ic=!0:e.modifiedDocuments.size>0?Wf(n.ic):e.removedDocuments.size>0&&(Wf(n.ic),n.ic=!1))})),e.next=8,Vy(r,a,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,xh(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Dy.apply(this,arguments)}function Oy(e,t,n){var r=Kf(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var a=[];r.oc.forEach((function(e,n){var r=n.view.Pu(t);r.snapshot&&a.push(r.snapshot)})),function(e,t){var n=Kf(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var a,i=ae(n.listeners);try{for(i.s();!(a=i.n()).done;){a.value.Pu(t)&&(r=!0)}}catch(o){i.e(o)}finally{i.f()}})),r&&vy(n)}(r.eventManager,t),a.length&&r.rc.Ho(a),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function My(e,t,n){return Ry.apply(this,arguments)}function Ry(){return Ry=Rt(Ot().mark((function e(t,n,r){var a,i,o,s,u,c;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=Kf(t)).sharedClientState.updateQueryState(n,"rejected",r),i=a.hc.get(n),!(o=i&&i.key)){e.next=14;break}return s=(s=new Id(ph.comparator)).insert(o,Pd.newNoDocument(o,ch.min())),u=Gp().add(o),c=new Xp(ch.min(),new Map,new Dd(oh),s,u),e.next=9,Cy(a,c);case 9:a.ac=a.ac.remove(o),a.hc.delete(n),zy(a),e.next=16;break;case 14:return e.next=16,dv(a.localStore,n,!1).then((function(){return Py(a,n,r)})).catch(xh);case 16:case"end":return e.stop()}}),e)}))),Ry.apply(this,arguments)}function Py(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,a=ae(e.uc.get(t));try{for(a.s();!(r=a.n()).done;){var i=r.value;e.oc.delete(i),n&&e.rc.gc(i,n)}}catch(o){a.e(o)}finally{a.f()}e.uc.delete(t),e.isPrimaryClient&&e.lc.ds(t).forEach((function(t){e.lc.containsKey(t)||Ly(e,t)}))}function Ly(e,t){e.cc.delete(t.path.canonicalString());var n=e.ac.get(t);null!==n&&(Fv(e.remoteStore,n),e.ac=e.ac.remove(t),e.hc.delete(n),zy(e))}function Fy(e,t,n){var r,a=ae(n);try{for(a.s();!(r=a.n()).done;){var i=r.value;i instanceof gy?(e.lc.addReference(i.key,t),jy(e,i)):i instanceof by?(Vf("SyncEngine","Document no longer in limbo: "+i.key),e.lc.removeReference(i.key,t),e.lc.containsKey(i.key)||Ly(e,i.key)):Hf()}}catch(o){a.e(o)}finally{a.f()}}function jy(e,t){var n=t.key,r=n.path.canonicalString();e.ac.get(n)||e.cc.has(r)||(Vf("SyncEngine","New document in limbo: "+n),e.cc.add(r),zy(e))}function zy(e){for(;e.cc.size>0&&e.ac.size<e.maxConcurrentLimboResolutions;){var t=e.cc.values().next().value;e.cc.delete(t);var n=new ph(fh.fromString(t)),r=e._c.next();e.hc.set(r,new xy(n)),e.ac=e.ac.insert(n,r),Lv(e.remoteStore,new Pm(Yd(qd(n.path)),r,2,Th.at))}}function Vy(e,t,n){return Uy.apply(this,arguments)}function Uy(){return Uy=Rt(Ot().mark((function e(t,n,r){var a,i,o,s;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Kf(t),i=[],o=[],s=[],e.t0=a.oc.isEmpty(),e.t0){e.next=9;break}return a.oc.forEach((function(e,t){s.push(a.mc(t,n,r).then((function(e){if((e||r)&&a.isPrimaryClient&&a.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);var n=rv.Ni(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return a.rc.Ho(i),e.next=9,function(){var e=Rt(Ot().mark((function e(t,n){var r,a,i,o,s,u,c,l;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Kf(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Sh.forEach(n,(function(t){return Sh.forEach(t.Ci,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Sh.forEach(t.xi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Nh(e.t0)){e.next=10;break}throw e.t0;case 10:Vf("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:a=ae(n);try{for(a.s();!(i=a.n()).done;)o=i.value,s=o.targetId,o.fromCache||(u=r.Ki.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.Ki=r.Ki.insert(s,l))}catch(f){a.e(f)}finally{a.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(a.localStore,o);case 9:case"end":return e.stop()}}),e)}))),Uy.apply(this,arguments)}function By(e,t){return qy.apply(this,arguments)}function qy(){return qy=Rt(Ot().mark((function e(t,n){var r,a;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Kf(t)).currentUser.isEqual(n)){e.next=11;break}return Vf("SyncEngine","User change. New user:",n.toKey()),e.next=5,sv(r.localStore,n);case 5:return a=e.sent,r.currentUser=n,function(e,t){e.dc.forEach((function(e){e.forEach((function(e){e.reject(new Qf(Gf.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.dc.clear()}(r),r.sharedClientState.handleUserChange(n,a.removedBatchIds,a.addedBatchIds),e.next=11,Vy(r,a.Wi);case 11:case"end":return e.stop()}}),e)}))),qy.apply(this,arguments)}function Hy(e,t){var n=Kf(e),r=n.hc.get(t);if(r&&r.ic)return Gp().add(r.key);var a=Gp(),i=n.uc.get(t);if(!i)return a;var o,s=ae(i);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.oc.get(u);a=a.unionWith(c.view.Wu)}}catch(l){s.e(l)}finally{s.f()}return a}function Wy(e){var t=Kf(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Cy.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Hy.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=My.bind(null,t),t.rc.Ho=py.bind(null,t.eventManager),t.rc.gc=my.bind(null,t.eventManager),t}var Ky=function(){function e(){B(this,e),this.synchronizeTabs=!1}return K(e,[{key:"initialize",value:function(){var e=Rt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Tt=Nv(t.databaseInfo.databaseId),this.sharedClientState=this.Ic(t),this.persistence=this.Tc(t),e.next=5,this.persistence.start();case 5:this.localStore=this.Ec(t),this.gcScheduler=this.Ac(t,this.localStore),this.indexBackfillerScheduler=this.Rc(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ac",value:function(e,t){return null}},{key:"Rc",value:function(e,t){return null}},{key:"Ec",value:function(e){return ov(this.persistence,new av,e.initialUser,this.Tt)}},{key:"Tc",value:function(e){return new ev(nv.qs,this.Tt)}},{key:"Ic",value:function(e){return new gv}},{key:"terminate",value:function(){var e=Rt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Gy=function(){function e(){B(this,e)}return K(e,[{key:"initialize",value:function(){var e=Rt(Ot().mark((function e(t,n){var r=this;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Oy(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=By.bind(null,this.syncEngine),e.next=12,ey(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new cy}},{key:"createDatastore",value:function(e){var t,n=Nv(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Ev(t));return function(e,t,n,r){return new Av(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,a,i,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,a=function(e){return Oy(o.syncEngine,e,0)},i=kv.C()?new kv:new bv,new Dv(t,n,r,a,i)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,a,i,o){var s=new Ey(e,t,n,r,a,i);return o&&(s.wc=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Rt(Ot().mark((function e(t){var n;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Kf(t),Vf("RemoteStore","RemoteStore shutting down."),n.mu.add(5),e.next=5,Rv(n);case 5:n.yu.shutdown(),n.pu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();var Qy=function(){function e(t){B(this,e),this.observer=t,this.muted=!1}return K(e,[{key:"next",value:function(e){this.observer.next&&this.vc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.vc(this.observer.error,e):Uf("Uncaught Error in snapshot listener:",e.toString())}},{key:"Pc",value:function(){this.muted=!0}},{key:"vc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Yy=function(){function e(t,n,r,a){var i=this;B(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=a,this.user=Lf.UNAUTHENTICATED,this.clientId=ih.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Rt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vf("FirestoreClient","Received user=",t.uid),e.next=3,i.authCredentialListener(t);case 3:i.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Vf("FirestoreClient","Received new app check token=",e),i.appCheckCredentialListener(e,i.user)}))}return K(e,[{key:"getConfiguration",value:function(){var e=Rt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Qf(Gf.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Yf;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Rt(Ot().mark((function n(){var r;return Ot().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=ay(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function Xy(e,t){return $y.apply(this,arguments)}function $y(){return $y=Rt(Ot().mark((function e(t,n){var r,a;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Vf("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:a=r.initialUser,t.setCredentialChangeListener(function(){var e=Rt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=a.isEqual(t),e.t0){e.next=5;break}return e.next=4,sv(n.localStore,t);case 4:a=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),$y.apply(this,arguments)}function Jy(e,t){return Zy.apply(this,arguments)}function Zy(){return Zy=Rt(Ot().mark((function e(t,n){var r,a;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,eg(t);case 3:return r=e.sent,Vf("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return a=e.sent,e.next=10,n.initialize(r,a);case 10:t.setCredentialChangeListener((function(e){return Jv(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Jv(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),Zy.apply(this,arguments)}function eg(e){return tg.apply(this,arguments)}function tg(){return tg=Rt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Vf("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,Xy(t,new Ky);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),tg.apply(this,arguments)}function ng(e){return rg.apply(this,arguments)}function rg(){return rg=Rt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Vf("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,Jy(t,new Gy);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),rg.apply(this,arguments)}function ag(e){return ig.apply(this,arguments)}function ig(){return ig=Rt(Ot().mark((function e(t){var n,r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ng(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Sy.bind(null,n.syncEngine),r.onUnlisten=Iy.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),ig.apply(this,arguments)}function og(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Yf;return e.asyncQueue.enqueueAndForget(Rt(Ot().mark((function a(){return Ot().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=function(e,t,n,r,a){var i=new Qy({next:function(n){t.enqueueAndForget((function(){return hy(e,o)})),n.fromCache&&"server"===r.source?a.reject(new Qf(Gf.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):a.resolve(n)},error:function(e){return a.reject(e)}}),o=new yy(n,i,{includeMetadataChanges:!0,Ou:!0});return ly(e,o)},a.next=3,ag(e);case 3:return a.t1=a.sent,a.t2=e.asyncQueue,a.t3=t,a.t4=n,a.t5=r,a.abrupt("return",(0,a.t0)(a.t1,a.t2,a.t3,a.t4,a.t5));case 9:case"end":return a.stop()}}),a)})))),r.promise}var sg=new Map;function ug(e,t,n){if(!n)throw new Qf(Gf.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function cg(e){if(ph.isDocumentKey(e))throw new Qf(Gf.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function lg(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Hf()}function fg(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Qf(Gf.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=lg(e);throw new Qf(Gf.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}var hg=function(){function e(t){var n;if(B(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Qf(Gf.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Qf(Gf.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,function(e,t,n,r){if(!0===t&&!0===r)throw new Qf(Gf.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return K(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),dg=function(){function e(t,n,r,a){B(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hg({}),this._settingsFrozen=!1}return K(e,[{key:"app",get:function(){if(!this._app)throw new Qf(Gf.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Qf(Gf.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hg(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new $f;switch(e.type){case"gapi":var t=e.client;return new th(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Qf(Gf.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=sg.get(e);t&&(Vf("ComponentProvider","Removing Datastore"),sg.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function pg(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=(e=fg(e,dg))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==t&&Bf("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},i),{host:"".concat(t,":").concat(n),ssl:!1})),a.mockUserToken){var o,s;if("string"==typeof a.mockUserToken)o=a.mockUserToken,s=Lf.MOCK_USER;else{o=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,a=e.sub||e.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var i=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Vt(JSON.stringify({alg:"none",type:"JWT"})),Vt(JSON.stringify(i)),""].join(".")}(a.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var u=a.mockUserToken.sub||a.mockUserToken.user_id;if(!u)throw new Qf(Gf.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new Lf(u)}e._authCredentials=new Jf(new Xf(o,s))}}var mg=function(){function e(t,n,r){B(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return K(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new yg(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),vg=function(){function e(t,n,r){B(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return K(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),yg=function(e){Q(n,e);var t=J(n);function n(e,r,a){var i;return B(this,n),(i=t.call(this,e,r,qd(a)))._path=a,i.type="collection",i}return K(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new mg(this.firestore,null,new ph(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(vg);function gg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];if(e=cn(e),ug("collection","path",t),e instanceof dg){var i=fh.fromString.apply(fh,[t].concat(r));return cg(i),new yg(e,null,i)}if(!(e instanceof mg||e instanceof yg))throw new Qf(Gf.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(fh.fromString.apply(fh,[t].concat(r)));return cg(o),new yg(e.firestore,null,o)}var bg=function(){function e(){var t=this;B(this,e),this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new Tv(this,"async_queue_retry"),this.Hc=function(){var e=Sv();e&&Vf("AsyncQueue","Visibility state changed to "+e.visibilityState),t.ko.Vo()};var n=Sv();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Hc)}return K(e,[{key:"isShuttingDown",get:function(){return this.Kc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Jc(),this.Yc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;var t=Sv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Hc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Jc(),this.Kc)return new Promise((function(){}));var n=new Yf;return this.Yc((function(){return t.Kc&&t.zc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Uc.push(e),t.Zc()}))}},{key:"Zc",value:function(){var e=Rt(Ot().mark((function e(){var t=this;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Uc.length){e.next=14;break}return e.prev=1,e.next=4,this.Uc[0]();case 4:this.Uc.shift(),this.ko.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Nh(e.t0)){e.next=12;break}throw e.t0;case 12:Vf("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Uc.length>0&&this.ko.vo((function(){return t.Zc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Yc",value:function(e){var t=this,n=this.qc.then((function(){return t.jc=!0,e().catch((function(e){t.Qc=e,t.jc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Uf("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.jc=!1,e}))}));return this.qc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Jc(),this.Wc.indexOf(e)>-1&&(t=0);var a=ry.createAndSchedule(this,e,t,n,(function(e){return r.Xc(e)}));return this.Gc.push(a),a}},{key:"Jc",value:function(){this.Qc&&Hf()}},{key:"verifyOperationInProgress",value:function(){}},{key:"ta",value:function(){var e=Rt(Ot().mark((function e(){var t;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.qc,e.next=3,t;case 3:if(t!==this.qc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ea",value:function(e){var t,n=ae(this.Gc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"na",value:function(e){var t=this;return this.ta().then((function(){t.Gc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=ae(t.Gc);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.skipDelay(),"all"!==e&&a.timerId===e)break}}catch(i){r.e(i)}finally{r.f()}return t.ta()}))}},{key:"sa",value:function(e){this.Wc.push(e)}},{key:"Xc",value:function(e){var t=this.Gc.indexOf(e);this.Gc.splice(t,1)}}]),e}();var kg=function(e){Q(n,e);var t=J(n);function n(e,r,a,i){var o;return B(this,n),(o=t.call(this,e,r,a,i)).type="firestore",o._queue=new bg,o._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]",o}return K(n,[{key:"_terminate",value:function(){return this._firestoreClient||xg(this),this._firestoreClient.terminate()}}]),n}(dg);function wg(e){return e._firestoreClient||xg(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function xg(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new _h(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Yy(e._authCredentials,e._appCheckCredentials,e._queue,r)}var Eg=function(){function e(t){B(this,e),this._byteString=t}return K(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Lh.fromBase64String(t))}catch(t){throw new Qf(Gf.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Lh.fromUint8Array(t))}}]),e}(),Sg=function(){function e(){B(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var a=0;a<n.length;++a)if(0===n[a].length)throw new Qf(Gf.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dh(n)}return K(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var Ng=K((function e(t){B(this,e),this._methodName=t})),Tg=function(){function e(t,n){if(B(this,e),!isFinite(t)||t<-90||t>90)throw new Qf(Gf.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Qf(Gf.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return K(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return oh(this._lat,e._lat)||oh(this._long,e._long)}}]),e}(),_g=/^__.*__$/;function Ig(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Hf()}}var Ag=function(){function e(t,n,r,a,i,o){B(this,e),this.settings=t,this.databaseId=n,this.Tt=r,this.ignoreUndefinedProperties=a,void 0===i&&this.ia(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return K(e,[{key:"path",get:function(){return this.settings.path}},{key:"ra",get:function(){return this.settings.ra}},{key:"oa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ua",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.oa({path:n,ca:!1});return r.aa(e),r}},{key:"ha",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.oa({path:n,ca:!1});return r.ia(),r}},{key:"la",value:function(e){return this.oa({path:void 0,ca:!0})}},{key:"fa",value:function(e){return zg(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"ia",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.aa(this.path.get(e))}},{key:"aa",value:function(e){if(0===e.length)throw this.fa("Document fields must not be empty");if(Ig(this.ra)&&_g.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}]),e}(),Cg=function(){function e(t,n,r){B(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.Tt=r||Nv(t)}return K(e,[{key:"wa",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Ag({ra:e,methodName:t,_a:n,path:dh.emptyPath(),ca:!1,da:r},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}]),e}();function Dg(e){var t=e._freezeSettings(),n=Nv(e._databaseId);return new Cg(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Og(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Mg(n,e.wa(r?4:3,t))}function Mg(e,t){if(Pg(e=cn(e)))return Lg("Unsupported field value:",t,e),Rg(e,t);if(e instanceof Ng)return function(e,t){if(!Ig(t.ra))throw t.fa("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.fa("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ca&&4!==t.ra)throw t.fa("Nested arrays are not supported");return function(e,t){var n,r=[],a=0,i=ae(e);try{for(i.s();!(n=i.n()).done;){var o=Mg(n.value,t.la(a));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),a++}}catch(s){i.e(s)}finally{i.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=cn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return sp(t.Tt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=uh.fromDate(e);return{timestampValue:cm(t.Tt,n)}}if(e instanceof uh){var r=new uh(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:cm(t.Tt,r)}}if(e instanceof Tg)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Eg)return{bytesValue:lm(t.Tt,e._byteString)};if(e instanceof mg){var a=t.databaseId,i=e.firestore._databaseId;if(!i.isEqual(a))throw t.fa("Document reference is for database ".concat(i.projectId,"/").concat(i.database," but should be for database ").concat(a.projectId,"/").concat(a.database));return{referenceValue:hm(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.fa("Unsupported field value: ".concat(lg(e)))}(e,t)}function Rg(e,t){var n={};return Dh(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ch(e,(function(e,r){var a=Mg(r,t.ua(e));null!=a&&(n[e]=a)})),{mapValue:{fields:n}}}function Pg(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof uh||e instanceof Tg||e instanceof Eg||e instanceof mg||e instanceof Ng)}function Lg(e,t,n){if(!Pg(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=lg(n);throw"an object"===r?t.fa(e+" a custom object"):t.fa(e+" "+r)}}var Fg=new RegExp("[~\\*/\\[\\]]");function jg(e,t,n){if(t.search(Fg)>=0)throw zg("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return ne(Sg,U(t.split(".")))._internalPath}catch(NP){throw zg("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function zg(e,t,n,r,a){var i=r&&!r.isEmpty(),o=void 0!==a,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(i||o)&&(u+=" (found",i&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(a)),u+=")"),new Qf(Gf.INVALID_ARGUMENT,s+e+u)}var Vg=function(){function e(t,n,r,a,i){B(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=a,this._converter=i}return K(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new mg(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new Ug(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(Bg("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),Ug=function(e){Q(n,e);var t=J(n);function n(){return B(this,n),t.apply(this,arguments)}return K(n,[{key:"data",value:function(){return Pt(Y(n.prototype),"data",this).call(this)}}]),n}(Vg);function Bg(e,t){return"string"==typeof t?jg(e,t):t instanceof Sg?t._internalPath:t._delegate._internalPath}function qg(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Qf(Gf.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Hg=K((function e(){B(this,e)})),Wg=function(e){Q(n,e);var t=J(n);function n(){return B(this,n),t.apply(this,arguments)}return K(n)}(Hg);function Kg(e,t){for(var n=[],r=arguments.length,a=new Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i];t instanceof Hg&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof Yg})).length,n=e.filter((function(e){return e instanceof Gg})).length;if(t>1||t>0&&n>0)throw new Qf(Gf.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(a));var o,s=ae(n);try{for(s.s();!(o=s.n()).done;){e=o.value._apply(e)}}catch(u){s.e(u)}finally{s.f()}return e}var Gg=function(e){Q(n,e);var t=J(n);function n(e,r,a){var i;return B(this,n),(i=t.call(this))._field=e,i._op=r,i._value=a,i.type="where",i}return K(n,[{key:"_apply",value:function(e){var t=this._parse(e);return Jg(e._query,t),new vg(e.firestore,e.converter,Xd(e._query,t))}},{key:"_parse",value:function(e){var t=Dg(e.firestore),n=function(e,t,n,r,a,i,o){var s;if(a.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new Qf(Gf.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(i,"' queries on documentId()."));if("in"===i||"not-in"===i){$g(o,i);var u,c=[],l=ae(o);try{for(l.s();!(u=l.n()).done;){var f=u.value;c.push(Xg(r,e,f))}}catch(h){l.e(h)}finally{l.f()}s={arrayValue:{values:c}}}else s=Xg(r,e,o)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||$g(o,i),s=Og(n,"where",o,"in"===i||"not-in"===i);return ld.create(a,i,s)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Wg);function Qg(e,t,n){var r=t,a=Bg("where",e);return Gg._create(a,r,n)}var Yg=function(e){Q(n,e);var t=J(n);function n(e,r){var a;return B(this,n),(a=t.call(this)).type=e,a._queryConstraints=r,a}return K(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:fd.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,a=ae(t.getFlattenedFilters());try{for(a.s();!(n=a.n()).done;){var i=n.value;Jg(r,i),r=Xd(r,i)}}catch(o){a.e(o)}finally{a.f()}}(e._query,t),new vg(e.firestore,e.converter,Xd(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Hg);function Xg(e,t,n){if("string"==typeof(n=cn(n))){if(""===n)throw new Qf(Gf.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gd(t)&&-1!==n.indexOf("/"))throw new Qf(Gf.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(fh.fromString(n));if(!ph.isDocumentKey(r))throw new Qf(Gf.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Jh(e,new ph(r))}if(n instanceof mg)return Jh(e,n._key);throw new Qf(Gf.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(lg(n),"."))}function $g(e,t){if(!Array.isArray(e)||0===e.length)throw new Qf(Gf.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Jg(e,t){if(t.isInequality()){var n=Kd(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new Qf(Gf.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var a=Wd(e);null!==a&&Zg(e,r,a)}var i=function(e,t){var n,r=ae(e);try{for(r.s();!(n=r.n()).done;){var a,i=ae(n.value.getFlattenedFilters());try{for(i.s();!(a=i.n()).done;){var o=a.value;if(t.indexOf(o.op)>=0)return o.op}}catch(s){i.e(s)}finally{i.f()}}}catch(s){r.e(s)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new Qf(Gf.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Qf(Gf.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}function Zg(e,t,n){if(!n.isEqual(t))throw new Qf(Gf.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var eb=function(){function e(){B(this,e)}return K(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Wh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zh(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Vh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Hf()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Ch(e.fields,(function(e,a){r[e]=n.convertValue(a,t)})),r}},{key:"convertGeoPoint",value:function(e){return new Tg(zh(e.latitude),zh(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Bh(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(qh(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=jh(e);return new uh(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=fh.fromString(e);Wf(Am(n));var r=new Ih(n.get(1),n.get(3)),a=new ph(n.popFirst(5));return r.isEqual(t)||Uf("Document ".concat(a," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),a}}]),e}();var tb=function(){function e(t,n){B(this,e),this.hasPendingWrites=t,this.fromCache=n}return K(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),nb=function(e){Q(n,e);var t=J(n);function n(e,r,a,i,o,s){var u;return B(this,n),(u=t.call(this,e,r,a,i,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return K(n,[{key:"exists",value:function(){return Pt(Y(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new rb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(Bg("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(Vg),rb=function(e){Q(n,e);var t=J(n);function n(){return B(this,n),t.apply(this,arguments)}return K(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Pt(Y(n.prototype),"data",this).call(this,e)}}]),n}(nb),ab=function(){function e(t,n,r,a){B(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=a,this.metadata=new tb(a.hasPendingWrites,a.fromCache),this.query=r}return K(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new rb(n._firestore,n._userDataWriter,r.key,r,new tb(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Qf(Gf.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new rb(e._firestore,e._userDataWriter,t.doc.key,t.doc,new tb(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new rb(e._firestore,e._userDataWriter,t.doc.key,t.doc,new tb(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),a=-1,i=-1;return 0!==t.type&&(a=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(i=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:ib(t.type),doc:n,oldIndex:a,newIndex:i}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function ib(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Hf()}}var ob=function(e){Q(n,e);var t=J(n);function n(e){var r;return B(this,n),(r=t.call(this)).firestore=e,r}return K(n,[{key:"convertBytes",value:function(e){return new Eg(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new mg(this.firestore,null,t)}}]),n}(eb);function sb(e){e=fg(e,vg);var t=fg(e.firestore,kg),n=wg(t),r=new ob(t);return qg(e._query),og(n,e._query).then((function(n){return new ab(t,r,e,n)}))}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Ff=e}(rr),Jn(new ln("firestore",(function(e,n){var r=n.instanceIdentifier,a=n.options,i=e.getProvider("app").getImmediate(),o=new kg(new Zf(e.getProvider("auth-internal")),new rh(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Qf(Gf.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ih(e.options.projectId,t)}(i,r),i);return a=Object.assign({useFetchStreams:t},a),o._setSettings(a),o}),"PUBLIC").setMultipleInstances(!0)),or(Pf,"3.8.4",e),or(Pf,"3.8.4","esm2017")}();var ub=ar({apiKey:"AIzaSyBmIQ9-oUSHyxbQewz6CuYn5NkvKWsiQ_U",authDomain:"fir-auth-f08ad.firebaseapp.com",projectId:"fir-auth-f08ad",storageBucket:"fir-auth-f08ad.appspot.com",messagingSenderId:"401313850943",appId:"1:401313850943:web:5f9f2f3cdf6686138e3a8a"}),cb=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ir(),t=Zn(e,"auth");if(t.isInitialized())return t.getImmediate();var n=function(e,t){var n=Zn(e,"auth");if(n.isInitialized()){var r=n.getImmediate();if(tn(n.getOptions(),null!==t&&void 0!==t?t:{}))return r;Dr(r,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:ws,persistence:[mo,Bi,Hi]}),r=Gt("authTokenSyncURL");if(r){var a=Cs(r);!function(e,t,n){cn(e).beforeAuthStateChanged(t,n)}(n,a,(function(){return a(n.currentUser)})),function(e,t,n,r){cn(e).onIdTokenChanged(t,n,r)}(n,(function(e){return a(e)}))}var i=Ht("auth");return i&&Ga(n,"http://".concat(i)),n}(ub),lb=function(e,t){var n="string"==typeof e?e:t||"(default)",r=Zn("object"==typeof e?e:ir(),"firestore").getImmediate({identifier:n});if(!r._initialized){var a=Wt("firestore");a&&pg.apply(void 0,[r].concat(U(a)))}return r}(ub),fb=function(){var e=rt(),t=te((0,P.useState)(),2),n=t[0],r=t[1],a=te((0,P.useState)(),2),i=a[0],o=a[1],s=function(){var t=Rt(Ot().mark((function t(r){return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),t.prev=1,t.next=4,Li(cb,n,i);case 4:e("/"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),alert("Try again");case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}();return(0,Ct.jsx)("div",{className:"container flex flex-col items-center justify-center py-20 gap-y-5",children:(0,Ct.jsxs)("form",{className:"w-full max-w-[500px] rounded-lg shadow-md bg-white h-[300px] flex flex-col p-5",children:[(0,Ct.jsxs)("div",{className:"text-field",children:[(0,Ct.jsx)("label",{htmlFor:"email",children:"Username"}),(0,Ct.jsx)("input",{type:"email",id:"email",placeholder:"Enter your email",onChange:function(e){return r(e.target.value)},className:"focus:border-[#6a5af9] focus:border-b"})]}),(0,Ct.jsxs)("div",{className:"text-field ",children:[(0,Ct.jsx)("label",{htmlFor:"password",children:"Password"}),(0,Ct.jsx)("input",{autoComplete:"off",type:"password",id:"password",onChange:function(e){return o(e.target.value)},className:"focus:border-[#6a5af9] focus:border-b"})]}),(0,Ct.jsxs)("div",{className:"flex mt-auto gap-x-5",children:[(0,Ct.jsx)(_t,{to:"/",className:"bg-transparent w-full mt-auto px-6 py-3 text-sm font-medium text-slate-700 rounded-lg  text-opacity-1  border",children:"H\u1ee7y"}),(0,Ct.jsx)("button",{type:"submit",className:"bg-gradient-secondary w-full mt-auto px-6 py-3 text-sm font-medium text-white rounded-lg  text-opacity-1",onClick:s,children:"\u0110\u0103ng nh\u1eadp"})]})]})})},hb=(0,P.createContext)();function db(e){var t=te((0,P.useState)(),2),n=t[0],r=t[1],a={userInfo:n,setUserInfo:r};return(0,P.useEffect)((function(){!function(e,t,n,r){cn(e).onAuthStateChanged(t,n,r)}(cb,(function(e){r(e)}))}),[]),(0,Ct.jsx)(hb.Provider,En({value:a},e))}function pb(){var e=(0,P.useContext)(hb);if(void 0===typeof e)throw new Error("ERROR For me");return e}var mb=function(e){var t=e.children,n=e.className,r=e.links,a=void 0===r?"#":r;e.onClick;return(0,Ct.jsx)(_t,{className:"".concat(n," px-6 py-3 text-sm font-medium  rounded-lg  text-opacity-1 "),to:a,children:t})},vb=function(e){var t=e.onClick;return(0,Ct.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-6 h-6 cursor-pointer text-slate-500",onClick:t,children:(0,Ct.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"})})},yb=function(){var e=pb().userInfo,t=null===e||void 0===e?void 0:e.email;return(0,Ct.jsx)("header",{className:"w-full py-1 pb-5 bg-white border-b-[0.5px]",children:(0,Ct.jsxs)("div",{className:"flex items-center justify-between p-5",children:[(0,Ct.jsx)(_t,{className:"text-3xl font-bold logo",to:"/",children:"\ud83d\ude80Canary"}),e?(0,Ct.jsxs)("div",{className:"flex items-center gap-x-3 ",children:[(0,Ct.jsx)(mb,{className:"hover:animate-pulse bg-[#00CDC4] text-white",links:"sign-in",children:t}),(0,Ct.jsx)(vb,{onClick:function(){!function(e){cn(e).signOut()}(cb)}})]}):(0,Ct.jsxs)("div",{className:"flex items-center gap-x-3 ",children:[(0,Ct.jsx)(mb,{links:"sign-up",className:"border text-slate-700 ",children:"\u0110\u0103ng k\xfd"}),(0,Ct.jsx)(mb,{className:"hover:animate-pulse bg-[#00CDC4] text-white",links:"sign-in",children:"\u0110\u0103ng nh\u1eadp"})]})]})})},gb=[{title:"Nh\u1eadn di\u1ec7n v\u1eadt th\u1ec3",img:"https://img.freepik.com/free-vector/people-using-search-box-query-engine-giving-result_74855-11000.jpg?w=996&t=st=1679405907~exp=1679406507~hmac=0b432c739de35e2976ad6999553dbd81262d6e9b3e4786db204b763ed4a802a4",link:"AI"},{title:"Tr\xf2 ch\u01a1i",img:"https://img.freepik.com/free-vector/hand-drawn-kids-playing-background_23-2148060869.jpg?size=338&ext=jpg&uid=R40653510&ga=GA1.1.12167484.1678342596&semt=sph",link:"Exercise"},{title:"T\u1eeb v\u1ef1ng",img:"https://img.freepik.com/free-vector/learning-concept-illustration_114360-6186.jpg?size=338&ext=jpg&uid=R40653510&ga=GA1.1.12167484.1678342596&semt=sph",link:"Grammar"}],bb=function(){var e=rt();return(0,Ct.jsxs)(Ct.Fragment,{children:[(0,Ct.jsxs)("div",{className:"flex  items-center justify-center py-20 bg-[#8CA3FE] container rounded-lg gap-20",children:[(0,Ct.jsxs)("div",{className:"flex flex-col items-start",children:[(0,Ct.jsxs)("h1",{className:"mx-auto mb-10 text-3xl font-semibold leading-snug text-left text-white lg:leading-relaxed lg:text-4xl",children:["Test-English ",(0,Ct.jsx)("br",{}),(0,Ct.jsx)("span",{className:"txt-primary",children:"Take your learning with you!"})]}),(0,Ct.jsx)(_t,{className:"inline-flex items-center justify-center gap-x-3 px-8 py-4 font-sans font-semibold tracking-wide text-white bg-gradient-secondary rounded-lg h-[60px] w-full sm:w-[230px] button-effect text-left",to:"/exercise",children:"Let's Go"})]}),(0,Ct.jsx)("img",{src:"https://img.freepik.com/free-vector/hand-drawn-back-school-illustration_23-2149479527.jpg?t=st=1679398592~exp=1679399192~hmac=564c2f10d1c0bb6ae4b01b9c7465a2f5aabc5f3a3f3a703ddf5c7e8e53c7eeff",alt:"",className:"rounded-lg"})]}),(0,Ct.jsxs)("div",{className:"container my-10",children:[(0,Ct.jsxs)("div",{className:"mt-10 mb-5 text-left",children:[(0,Ct.jsx)("div",{className:"w-10 h-1 my-2 primary line"}),(0,Ct.jsx)("h3",{className:"text-2xl font-bold uppercase",children:"Our program"})]}),(0,Ct.jsx)("div",{className:"grid grid-cols-4 transition-all gap-x-5 dataDumies",children:gb.map((function(t,n){return(0,Ct.jsxs)("div",{className:"relative rounded-lg shadow-md cursor-pointer item",onClick:function(){return e("/".concat(t.link))},children:[(0,Ct.jsx)("div",{className:"w-full h-[350px] filter transition",children:(0,Ct.jsx)("img",{src:t.img,alt:"",className:"object-cover w-full h-full transition-all rounded-lg hover:opacity-80"})}),(0,Ct.jsx)("div",{className:"absolute bottom-0 left-0 z-50 w-full p-5 font-medium text-white bg-black rounded-lg bg-opacity-95",children:t.title})]},n)}))}),(0,Ct.jsxs)("div",{className:"mt-10 mb-5 text-left",children:[(0,Ct.jsx)("div",{className:"w-10 h-1 my-2 primary line"}),(0,Ct.jsx)("h3",{className:"text-2xl font-bold uppercase",children:"About Us"})]}),(0,Ct.jsxs)("div",{className:"grid grid-cols-3 gap-5",children:[(0,Ct.jsxs)("div",{className:"border  w-full h-[350px] bg-center bg-cover bg-no-repeat relative bg-opacity-70  rounded-lg",style:{backgroundImage:'url("https://img.freepik.com/free-vector/cute-lion-walking-with-cheerful-cartoon-vector-icon-illustration-animal-nature-icon-isolated_138676-4866.jpg?w=740&t=st=1679405730~exp=1679406330~hmac=b50e947bc68d6d615bad0bf097cfdd29e5cbf4bec63ee198f17842321e831bfd")'},children:[(0,Ct.jsx)("div",{className:"absolute inset-0 bg-black rounded-lg -z-0 bg-opacity-70"}),(0,Ct.jsxs)("div",{className:"absolute bottom-0 left-0 z-10 w-full p-5 text-left text-white",children:[(0,Ct.jsx)("h3",{className:"mb-4 text-3xl font-bold",children:"\u201c I'm a GOD \u201d"}),(0,Ct.jsx)("p",{className:"mb-2 font-semibold",children:"Do Phat Dat"}),(0,Ct.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ct.jsx)("p",{children:"Owner of Canary"}),(0,Ct.jsx)(_t,{to:"https://www.facebook.com/profile.php?id=100010598710045",className:"text-xs underline text-slate-300",target:"_blank",children:"Contact me"})]})]})]}),(0,Ct.jsxs)("div",{className:"border  w-full h-[350px] bg-center bg-cover bg-no-repeat relative bg-opacity-70  rounded-lg ",style:{backgroundImage:'url("https://img.freepik.com/free-vector/cute-shiba-inu-dog-wearing-dino-costume-cartoon-vector-icon-illustration-animal-holiday-isolated_138676-7108.jpg?size=338&ext=jpg&uid=R40653510&ga=GA1.1.12167484.1678342596&semt=ais")'},children:[(0,Ct.jsx)("div",{className:"absolute inset-0 transition-all bg-black rounded-lg -z-0 bg-opacity-70 hover:bg-opacity-50"}),(0,Ct.jsxs)("div",{className:"absolute bottom-0 left-0 z-10 w-full p-5 text-left text-white",children:[(0,Ct.jsx)("h3",{className:"mb-4 text-3xl font-bold",children:"\u201c I'm a GOD \u201d"}),(0,Ct.jsx)("p",{className:"mb-2 font-semibold",children:"Tran Ngoc Hung"}),(0,Ct.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ct.jsx)("p",{children:"Owner of Canary"}),(0,Ct.jsx)(_t,{to:"https://www.facebook.com/profile.php?id=100006405904709",className:"text-xs underline text-slate-300",target:"_blank",children:"Contact me"})]})]})]}),(0,Ct.jsxs)("div",{className:"border  w-full h-[350px] bg-center bg-cover bg-no-repeat relative bg-opacity-70  rounded-lg",style:{backgroundImage:'url("https://img.freepik.com/free-vector/cute-panda-with-bamboo-bag-cartoon-vector-icon-illustration-animal-education-icon-concept-isolated_138676-5818.jpg?size=338&ext=jpg&uid=R40653510&ga=GA1.1.12167484.1678342596&semt=ais")'},children:[(0,Ct.jsx)("div",{className:"absolute inset-0 bg-black rounded-lg -z-0 bg-opacity-70"}),(0,Ct.jsxs)("div",{className:"absolute bottom-0 left-0 z-10 w-full p-5 text-left text-white",children:[(0,Ct.jsx)("h3",{className:"mb-4 text-3xl font-bold",children:"\u201c I'm a GOD \u201d"}),(0,Ct.jsx)("p",{className:"mb-2 font-semibold",children:"Nguyen Hoang Nhat Giang"}),(0,Ct.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ct.jsx)("p",{children:"Owner of Canary"}),(0,Ct.jsx)(_t,{to:"https://www.facebook.com/profile.php?id=100013185541028",className:"text-xs underline text-slate-300",target:"_blank",children:"Contact me"})]})]})]})]})]})]})},kb=function(){return(0,Ct.jsx)("div",{className:"w-full bg-[#4F67FF] text-white  bg-opacity-80  p-20 "})},wb=function(){return(0,Ct.jsxs)("div",{className:"flex flex-col items-center justify-between h-screen",children:[(0,Ct.jsx)(yb,{}),(0,Ct.jsx)(mt,{}),(0,Ct.jsx)(kb,{})]})},xb=function(e){var t=e.item,n=e.setDe1,r=e.index,a=e.de1,i=e.next,o=(0,P.useRef)();return(0,P.useEffect)((function(){o.current.value=""}),[i]),(0,Ct.jsxs)("div",{className:"flex flex-col items-start p-5 mb-5 rounded-lg shadow ques",children:[(0,Ct.jsxs)("h4",{className:"text-2xl font-semibold text-black",children:["C\xe2u h\u1ecfi s\u1ed1 ",r+1,":"]}),(0,Ct.jsxs)("div",{className:"flex items-center w-full mb-10 gap-x-5",children:[(0,Ct.jsx)("div",{className:"w-[200px] h-[200px]",children:(0,Ct.jsx)("img",{src:t.Hinh,alt:"",className:"object-contain w-full h-full rounded-lg"})}),(0,Ct.jsxs)("div",{className:"flex gap-x-1",children:[(0,Ct.jsx)("label",{htmlFor:"ques",className:"text-xl text-black",children:t.CH?t.CH:"\u0110\xe2y l\xe0 g\xec"}),(0,Ct.jsx)("input",{ref:o,type:"text",id:"ques",className:" outline-none text-xl text-[#ffb86c] font-medium",placeholder:"...",onChange:function(e){return function(e,t){switch(t){case 0:n(En(En({},a),{},{ques_1:e.target.value}));break;case 1:n(En(En({},a),{},{ques_2:e.target.value}));break;case 2:n(En(En({},a),{},{ques_3:e.target.value}));break;case 3:n(En(En({},a),{},{ques_4:e.target.value}));break;case 4:n(En(En({},a),{},{ques_5:e.target.value}))}}(e,r)}})]})]})]})},Eb=function(){var e=te((0,P.useState)({ques_1:"",ques_2:"",ques_3:"",ques_4:"",ques_5:""}),2),t=e[0],n=e[1],r=te((0,P.useState)(0),2),a=r[0],i=r[1],o=te((0,P.useState)(0),2),s=o[0],u=o[1],c=rt(),l=te((0,P.useState)([]),2),f=l[0],h=l[1],d=[],p=pb().userInfo;(0,P.useEffect)((function(){var e=gg(lb,"kiem tra dien tu");function t(){return(t=Rt(Ot().mark((function t(){var n,r;return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,sb(e);case 2:n=t.sent,r=[],n.forEach((function(e){r.push(e.id,e.data())})),h(r);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),(0,P.useEffect)((function(){p||c("/sign-in")}),[p]);var m=f.filter((function(e){return e.maLoai===a}));m.map((function(e){d.push(e.DapAn.toLowerCase())}));return p?(0,Ct.jsx)(Ct.Fragment,{children:(0,Ct.jsxs)("div",{className:"container flex-col w-full my-20 bg-white border rounded-lg",children:[(0,Ct.jsx)("h3",{className:"my-5 text-2xl font-semibold text-center text-black uppercase",children:"\u0110i\u1ec1n t\u1eeb th\xedch h\u1ee3p v\xe0o ch\u1ed7 tr\u1ed1ng\ud83d\udcdd"}),(0,Ct.jsx)("div",{className:"grid grid-cols-2 gap-2",children:m.map((function(e,r){return(0,Ct.jsx)(xb,{next:a,de1:t,setDe1:n,index:r,item:e},r)}))}),s>=0&&(0,Ct.jsxs)("h3",{className:"font-semibold text-blue-400 ",children:["Score: ",(0,Ct.jsxs)("span",{className:"text-blue-700",children:[s,"/100"]})]}),(0,Ct.jsxs)("div",{className:"flex items-center justify-center gap-x-5",children:[(0,Ct.jsx)("button",{className:"px-6 py-3 my-10 rounded-lg bg-gradient-secondary",onClick:function(){if(""!==t.ques_1&&""!==t.ques_2&&""!==t.ques_3&&""!==t.ques_4&&""!==t.ques_5){var e=Object.values(t).filter((function(e,t){return e!==d[t]}));u(100-e.length/d.length*100)}else u(0)},children:"Ki\u1ec3m tra"}),100===s?(0,Ct.jsx)("button",{className:"px-6 py-3 my-10 rounded-lg bg-primary",onClick:function(){i(a+1),n({ques_1:"",ques_2:"",ques_3:"",ques_4:"",ques_5:""}),u(0)},children:"Ti\u1ebfp t\u1ee5c"}):null]})]})}):(0,Ct.jsx)(fb,{})},Sb=function(e){var t=e.item,n=(e.onClick,e.setChoice),r=e.index,a=e.choice,i=(e.reff,function(e,t){switch(t){case 0:n(En(En({},a),{},{ques_1:e.target.value}));break;case 1:n(En(En({},a),{},{ques_2:e.target.value}));break;case 2:n(En(En({},a),{},{ques_3:e.target.value}));break;case 3:n(En(En({},a),{},{ques_4:e.target.value}));break;case 4:n(En(En({},a),{},{ques_5:e.target.value}))}});return(0,Ct.jsxs)("div",{className:"flex p-5 my-10 rounded-lg shadow gap-x-5",children:[(0,Ct.jsx)("div",{className:"w-[250px] h-[150px]",children:(0,Ct.jsx)("img",{src:t.Hinh,alt:"",className:"w-full h-full rounded-lg"})}),(0,Ct.jsxs)("div",{className:"text-left text-black",children:[(0,Ct.jsx)("h4",{className:"my-10 text-xl font-semibold uppercase text-slate-700",children:t.CH}),(0,Ct.jsxs)("div",{className:"flex items-center justify-between gap-x-5",children:[(0,Ct.jsxs)("label",{className:"flex items-center text-xl gap-x-2",children:[(0,Ct.jsx)("input",{type:"radio",name:"answer".concat(r),onClick:function(e){return i(e,r)},value:"A",className:"w-5 h-5 "}),(0,Ct.jsx)("span",{children:t.A})]}),(0,Ct.jsxs)("label",{className:"flex items-center text-xl gap-x-2",children:[(0,Ct.jsx)("input",{type:"radio",name:"answer".concat(r),onClick:function(e){return i(e,r)},value:"B",className:"w-5 h-5 "}),(0,Ct.jsx)("span",{children:t.B})]}),(0,Ct.jsxs)("label",{className:"flex items-center text-xl gap-x-2",children:[(0,Ct.jsx)("input",{type:"radio",name:"answer".concat(r),onClick:function(e){return i(e,r)},value:"C",className:"w-5 h-5 "}),(0,Ct.jsx)("span",{children:t.C})]})]})]})]})},Nb=function(){rt();var e,t=te((0,P.useState)(0),2),n=t[0],r=t[1],a=pb().userInfo,i=te((0,P.useState)(!0),2),o=(i[0],i[1],te((0,P.useState)([]),2)),s=o[0],u=o[1],c=te((0,P.useState)(0),2),l=c[0],f=c[1],h=[],d=[],p=te((0,P.useState)(!1),2),m=p[0],v=p[1],y=te((0,P.useState)({errorAll:"",errorForOne:"",errorForTwo:"",errorForThree:"",errorForFour:"",errorForFive:""}),2),g=y[0],b=y[1],k=te((0,P.useState)({ques_1:"",ques_2:"",ques_3:"",ques_4:"",ques_5:""}),2),w=k[0],x=k[1];if((0,P.useEffect)((function(){var e=gg(lb,"kiem tra trac nghiem");function t(){return(t=Rt(Ot().mark((function t(){var n,r;return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,sb(e);case 2:n=t.sent,r=[],n.forEach((function(e){r.push(e.id,e.data())})),u(r);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),!a)return(0,Ct.jsx)(fb,{});var E=s.filter((function(e){return e.maLoai===n}));E.map((function(e){h.push(e.DapAn)}));E.map((function(e){switch(e.DapAn){case"A":d.push(e.A);break;case"B":d.push(e.B);break;case"C":d.push(e.C)}}));return(0,Ct.jsx)("div",{className:"container my-10 border",children:(0,Ct.jsxs)("div",{className:"p-10 bg-white rounded-lg",children:[(0,Ct.jsx)("h3",{className:"text-2xl font-semibold text-center text-black uppercase",children:"Ch\u1ecdn \u0111\xe1p \xe1n \u0111\xfang\ud83d\udcdd"}),(0,Ct.jsx)("div",{className:"grid grid-cols-2 gap-2",children:E&&E.map((function(e,t){return(0,Ct.jsx)(Sb,{item:e,setChoice:x,choice:w,index:t},t)}))}),g.errorForOne&&(0,Ct.jsx)("div",{className:"font-semibold text-red-600",children:g.errorForOne}),g.errorForTwo&&(0,Ct.jsx)("div",{className:"font-semibold text-red-600",children:g.errorForTwo}),g.errorForThree&&(0,Ct.jsx)("div",{className:"font-semibold text-red-600",children:g.errorForThree}),g.errorForFour&&(0,Ct.jsx)("div",{className:"font-semibold text-red-600",children:g.errorForFour}),g.errorForFive&&(0,Ct.jsx)("div",{className:"font-semibold text-red-600",children:g.errorForFive}),g.errorAll&&(0,Ct.jsx)("div",{className:"font-semibold text-red-600",children:g.errorAll}),(0,Ct.jsxs)("div",{className:" w-[500px]  text-slate-900 text-left",children:[(0,Ct.jsx)("h5",{className:"font-semibold cursor-pointer",onClick:function(){return v(!m)},children:"Xem K\u1ebft qu\u1ea3:"}),m&&d&&d.map((function(e,t){return(0,Ct.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,Ct.jsx)("span",{className:"font-medium",children:"C\xe2u ".concat(t+1," : ")}),(0,Ct.jsx)("span",{children:e})]},t)}))]}),l>=0&&(0,Ct.jsxs)("h3",{className:"mt-10 font-semibold text-blue-400",children:["Score: ",(0,Ct.jsxs)("span",{className:"text-blue-700",children:[l,"/100"]})]}),(0,Ct.jsxs)("div",{className:"flex items-center justify-center gap-x-5",children:[(0,Ct.jsx)("button",{className:"bg-gradient-secondary my-10 inline-block px-6 py-3 text-sm font-medium text-white rounded-lg  text-opacity-1",onClick:function(){""===w.ques_1?b(En(En({},g),{},{errorForOne:"Xin h\xe3y ch\u1ecdn \u0111\xe1p \xe1n c\xe2u 1"})):b(En(En({},g),{},{errorForOne:""})),""===w.ques_2?b(En(En({},g),{},{errorForTwo:"Xin h\xe3y ch\u1ecdn \u0111\xe1p \xe1n c\xe2u 2"})):b(En(En({},g),{},{errorForTwo:""})),""===w.ques_3?b(En(En({},g),{},{errorForThree:"Xin h\xe3y ch\u1ecdn \u0111\xe1p \xe1n c\xe2u 3"})):b(En(En({},g),{},{errorForThree:""})),""===w.ques_4?b(En(En({},g),{},{errorForFour:"Xin h\xe3y ch\u1ecdn \u0111\xe1p \xe1n c\xe2u 4"})):b(En(En({},g),{},{errorForFour:""})),""===w.ques_5?b(En(En({},g),{},{errorForFive:"Xin h\xe3y ch\u1ecdn \u0111\xe1p \xe1n c\xe2u 5"})):b(En(En({},g),{},{errorForFive:""})),""===w.ques_1&&""===w.ques_2&&""===w.ques_3&&""===w.ques_4&&""===w.ques_5?b(En(En({},g),{},{errorAll:"Xin h\xe3y ch\u1ecdn c\xe1c \u0111\xe1p \xe1n"})):b(En(En({},g),{},{errorAll:""}));var t=Object.values(w);e=t.filter((function(e,t){return e!==h[t]})),f(100-e.length/h.length*100)},children:"K\u1ebft qu\u1ea3"}),100===l?(0,Ct.jsx)("button",{className:"px-6 py-3 my-10 rounded-lg bg-primary animate-pulse",onClick:function(){r(n+1),f(0),x({ques_1:"",ques_2:"",ques_3:"",ques_4:"",ques_5:""})},children:"Ti\u1ebfp t\u1ee5c"}):null]})]})})},Tb=function(){return pb().userInfo?(0,Ct.jsx)(Ct.Fragment,{children:(0,Ct.jsx)(Dt,{})}):(0,Ct.jsx)(fb,{})},_b=function(){function e(t,n){B(this,e),this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return K(e,[{key:"get",value:function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}},{key:"set",value:function(e,t){this.dataIdsCount++,this.data.set(e,t)}},{key:"has",value:function(e){return this.data.has(e)}},{key:"delete",value:function(e){return this.dataIdsCount--,this.data.delete(e)}},{key:"numDataIds",value:function(){return this.dataIdsCount}}]),e}(),Ib=function(){function e(){B(this,e)}return K(e,[{key:"refCount",value:function(e){return Ab("refCount")}},{key:"incRef",value:function(e){return Ab("incRef")}},{key:"timerAvailable",value:function(){return!0}},{key:"time",value:function(e){return Ab("time")}},{key:"read",value:function(e){return Ab("read")}},{key:"readSync",value:function(e){return Ab("readSync")}},{key:"numDataIds",value:function(){return Ab("numDataIds")}},{key:"disposeData",value:function(e,t){return Ab("disposeData")}},{key:"write",value:function(e,t,n){return Ab("write")}},{key:"move",value:function(e,t,n,r,a){return Ab("move")}},{key:"memory",value:function(){return Ab("memory")}},{key:"floatPrecision",value:function(){return Ab("floatPrecision")}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"dispose",value:function(){return Ab("dispose")}}]),e}();function Ab(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}function Cb(e){for(var t=e.length,n=0,r=0;t>0;)r=Math.random()*t|0,n=e[--t],e[t]=e[r],e[r]=n}function Db(e,t){if(e.length!==t.length)throw Error("Array sizes must match to be shuffled together "+"First array length was ".concat(e.length)+"Second array length was ".concat(t.length));for(var n,r,a=e.length,i=0;a>0;)i=Math.random()*a|0,n=e[--a],r=t[a],e[a]=e[i],t[a]=t[i],e[i]=n,t[i]=r}function Ob(e,t,n){return Math.max(e,Math.min(t,n))}function Mb(e){return e%2===0?e:e+1}function Rb(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function Pb(e,t){var n=Math.random();return t*n+(1-n)*e}function Lb(e,t){for(var n=0,r=0;r<e.length;r++){var a=Number(e[r])-Number(t[r]);n+=a*a}return n}function Fb(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function jb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";Fb(qb(e,t),(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}function zb(e){Fb(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function Vb(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),Array.isArray(e)||ak(e)&&!n)for(var r=0;r<e.length;++r)Vb(e[r],t,n);else t.push(e);return t}function Ub(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function Bb(e){return 0===e.length}function qb(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Hb(e){return e%1===0}function Wb(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function Kb(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function Gb(e){for(var t=new Uint32Array(e),n=0;n<e;++n)t[n]=n;return Cb(t),t}function Qb(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function Yb(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return 0},n=arguments.length>2?arguments[2]:void 0;return new Promise((function(r,a){var i=0;!function o(){if(e())r();else{i++;var s=t(i);null!=n&&i>=n?a():setTimeout(o,s)}}()}))}function Xb(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(r," and dim ").concat(a));r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found ".concat(e[a]," at dim ").concat(a));if(-1===r){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when ")+"there are 0 elements");if(t%n!==0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(t," / ").concat(n));var i=e.slice();return i[r]=t/n,i}function $b(e,t){var n=t.length;return e=null==e?t.map((function(e,t){return t})):[].concat(e),Fb(e.every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e)})),Fb(e.every((function(e){return Hb(e)})),(function(){return"All values in axis param must be integers but "+"got axis ".concat(e)})),e.map((function(e){return e<0?n+e:e}))}function Jb(e,t){for(var n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,i=null==t||a?null:$b(t,e).sort(),o=0,s=0;s<e.length;++s){if(null!=i){if(i[o]===s&&1!==e[s])throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(e[s],"' is not 1"));(null==i[o]||i[o]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),i[o]<=s&&o++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function Zb(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type ".concat(e));n=new Uint8Array(t)}return n}function ek(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function tk(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}function nk(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function rk(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function ak(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function ik(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function ok(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}function sk(e){return"string"===typeof e||e instanceof String}function uk(e){return"boolean"===typeof e}function ck(e){return"number"===typeof e}function lk(e){return Array.isArray(e)?lk(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":ck(e)?"float32":sk(e)?"string":uk(e)?"bool":"float32"}function fk(e){return!!(e&&e.constructor&&e.call&&e.apply)}function hk(e,t){for(var n=t;n<e;++n)if(e%n===0)return n;return e}function dk(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function pk(e,t,n){var r=new Array;if(1===t.length)for(var a=t[0],i=0;i<a;i++)r[i]=n[e+i];else for(var o=t[0],s=t.slice(1),u=s.reduce((function(e,t){return e*t})),c=0;c<o;c++)r[c]=pk(e+c*u,s,n);return r}function mk(e,t){if(0===e.length)return t[0];var n=e.reduce((function(e,t){return e*t}));if(0===n)return[];if(n!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length,"."));return pk(0,e,t)}function vk(e,t){for(var n=yk(e,t),r=0;r<n.length;r++)n[r]=1;return n}function yk(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function gk(e,t){var n=e.reduce((function(e,t){return e*t}),1);if(null==t||"float32"===t)return mk(e,new Float32Array(n));if("int32"===t)return mk(e,new Int32Array(n));if("bool"===t)return mk(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function bk(e){e.forEach((function(t){Fb(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"].")}))}))}function kk(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function wk(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function xk(e){return e&&e.then&&"function"===typeof e.then}var Ek="tfjsflags",Sk=function(){function e(t){B(this,e),this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return K(e,[{key:"setPlatform",value:function(e,t){null!=this.platform&&console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(t,".")),this.platformName=e,this.platform=t}},{key:"registerFlag",value:function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];console.warn("Setting feature override from URL ".concat(e,": ").concat(r,".")),this.set(e,r)}}},{key:"getAsync",value:function(){var e=Rt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t in this.flags)){e.next=2;break}return e.abrupt("return",this.flags[t]);case 2:return e.next=4,this.evaluateFlag(t);case 4:return this.flags[t]=e.sent,e.abrupt("return",this.flags[t]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(e){if(e in this.flags)return this.flags[e];var t=this.evaluateFlag(e);if(xk(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[e]=t,this.flags[e]}},{key:"getNumber",value:function(e){return this.get(e)}},{key:"getBool",value:function(e){return this.get(e)}},{key:"getFlags",value:function(){return this.flags}},{key:"features",get:function(){return this.flags}},{key:"set",value:function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}},{key:"evaluateFlag",value:function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}},{key:"setFlags",value:function(e){this.flags=Object.assign({},e)}},{key:"reset",value:function(){this.flags={},this.urlFlags={},this.populateURLFlags()}},{key:"populateURLFlags",value:function(){var e=this;if("undefined"!==typeof this.global&&"undefined"!==typeof this.global.location&&"undefined"!==typeof this.global.location.search){var t=function(e){var t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,r[0],r[1]),r.join("=")})),t}(this.global.location.search);if(Ek in t)t[Ek].split(",").forEach((function(t){var n=te(t.split(":"),2),r=n[0],a=n[1];e.urlFlags[r]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if("".concat(+t)===t)return+t;throw new Error("Could not parse value flag value ".concat(t," for flag ").concat(e,"."))}(r,a)}))}}}]),e}();function Nk(){return _k}var Tk,_k=null;function Ik(){if(null==Tk){var e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof n.g)e=n.g;else if("undefined"!==typeof process)e=process;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}Tk=e}return Tk}function Ak(e,t){var n=function(){var e=Ik();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);var r=t();return n.set(e,r),n.get(e)}var Ck="Abs",Dk="Acos",Ok="Acosh",Mk="Add",Rk="AddN",Pk="All",Lk="Any",Fk="ArgMax",jk="ArgMin",zk="Asin",Vk="Asinh",Uk="Atan",Bk="Atanh",qk="Atan2",Hk="AvgPool",Wk="AvgPoolGrad",Kk="AvgPool3D",Gk="AvgPool3DGrad",Qk="BatchMatMul",Yk="BatchToSpaceND",Xk="Bincount",$k="BroadcastTo",Jk="Cast",Zk="Ceil",ew="ClipByValue",tw="Complex",nw="ComplexAbs",rw="Concat",aw="Conv2D",iw="Conv2DBackpropFilter",ow="Conv2DBackpropInput",sw="Conv3D",uw="Conv3DBackpropFilterV2",cw="Conv3DBackpropInputV2",lw="Cos",fw="Cosh",hw="Cumsum",dw="CropAndResize",pw="DenseBincount",mw="DepthToSpace",vw="DepthwiseConv2dNative",yw="DepthwiseConv2dNativeBackpropFilter",gw="DepthwiseConv2dNativeBackpropInput",bw="Diag",kw="Dilation2D",ww="Dilation2DBackpropInput",xw="Dilation2DBackpropFilter",Ew="RealDiv",Sw="Elu",Nw="EluGrad",Tw="Erf",_w="Equal",Iw="Exp",Aw="ExpandDims",Cw="Expm1",Dw="FFT",Ow="Fill",Mw="FlipLeftRight",Rw="Floor",Pw="FloorDiv",Lw="FusedBatchNorm",Fw="GatherV2",jw="GatherNd",zw="Greater",Vw="GreaterEqual",Uw="Identity",Bw="IFFT",qw="Imag",Hw="IsFinite",Ww="IsInf",Kw="IsNan",Gw="LeakyRelu",Qw="Less",Yw="LessEqual",Xw="LinSpace",$w="Log",Jw="Log1p",Zw="LogicalAnd",ex="LogicalNot",tx="LogicalOr",nx="LogSoftmax",rx="LRN",ax="LRNGrad",ix="Max",ox="Maximum",sx="MaxPool",ux="MaxPoolGrad",cx="MaxPool3D",lx="MaxPool3DGrad",fx="MaxPoolWithArgmax",hx="Mean",dx="Min",px="Minimum",mx="MirrorPad",vx="Mod",yx="Multinomial",gx="Multiply",bx="Neg",kx="NotEqual",wx="NonMaxSuppressionV3",xx="NonMaxSuppressionV4",Ex="NonMaxSuppressionV5",Sx="OnesLike",Nx="OneHot",Tx="Pack",_x="PadV2",Ix="Pool",Ax="Pow",Cx="Prelu",Dx="Prod",Ox="Range",Mx="Real",Rx="Reciprocal",Px="Relu",Lx="Reshape",Fx="ResizeNearestNeighbor",jx="ResizeNearestNeighborGrad",zx="ResizeBilinear",Vx="ResizeBilinearGrad",Ux="Relu6",Bx="Reverse",qx="Round",Hx="Rsqrt",Wx="ScatterNd",Kx="Select",Gx="Selu",Qx="Slice",Yx="Sin",Xx="Sinh",$x="Sign",Jx="Sigmoid",Zx="Softplus",eE="Sqrt",tE="Sum",nE="SpaceToBatchND",rE="SplitV",aE="Softmax",iE="SquaredDifference",oE="Square",sE="Sub",uE="SparseToDense",cE="StridedSlice",lE="Tan",fE="Tanh",hE="Tile",dE="TopK",pE="Transpose",mE="Unique",vE="Unpack",yE="UnsortedSegmentSum",gE="ZerosLike",bE="Step",kE="FromPixels",wE="RotateWithOffset",xE="_FusedMatMul",EE="FusedConv2D",SE="FusedDepthwiseConv2D",NE=Ak("kernelRegistry",(function(){return new Map})),TE=Ak("gradRegistry",(function(){return new Map}));function _E(e,t){var n=PE(e,t);return NE.get(n)}function IE(e){return TE.get(e)}function AE(e){for(var t=NE.entries(),n=[];;){var r=t.next(),a=r.done,i=r.value;if(a)break;var o=te(i,2),s=o[0],u=o[1];te(s.split("_"),1)[0]===e&&n.push(u)}return n}function CE(e){var t=e.kernelName,n=e.backendName,r=PE(t,n);NE.has(r)&&console.warn("The kernel '".concat(t,"' for backend ")+"'".concat(n,"' is already registered")),NE.set(r,e)}function DE(e){var t=e.kernelName;TE.has(t)&&Nk().getBool("DEBUG")&&console.warn("Overriding the gradient for '".concat(t,"'")),TE.set(t,e)}function OE(e,t){var n=PE(e,t);if(!NE.has(n))throw new Error("The kernel '".concat(e,"' for backend ")+"'".concat(t,"' is not registered"));NE.delete(n)}function ME(e){if(!TE.has(e))throw new Error("The gradient '".concat(e,"' for backend is not registered"));TE.delete(e)}function RE(e,t){AE(e).forEach((function(e){CE(Object.assign({},e,{backendName:t}))}))}function PE(e,t){return"".concat(t,"_").concat(e)}function LE(e,t){return"string"===t?VE(e):FE([e],t)}function FE(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=Vb(e)),Nk().getBool("DEBUG")&&tk(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var n=new Uint8Array(e.length),r=0;r<n.length;++r)0!==Math.round(e[r])&&(n[r]=1);return n}throw new Error("Unknown data type ".concat(t))}function jE(){return Nk().platform.now()}function zE(e,t){return Nk().platform.fetch(e,t)}function VE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",Nk().platform.encode(e,t)}function UE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",Nk().platform.decode(e,t)}var BE=function(){function e(t,n){B(this,e),this.backendTimer=t,this.logger=n,null==n&&(this.logger=new qE)}return K(e,[{key:"profileKernel",value:function(e,t,n){var r,a,i=function(){r=n()},o=jE();if(this.backendTimer.timerAvailable()?a=this.backendTimer.time(i):(i(),r.map((function(e){return e.dataSync()})),a=Promise.resolve({kernelMs:jE()-o})),Nk().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(var s=function(){var t=r[u];t.data().then((function(n){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found ".concat(a," in the result of '").concat(n,"'")),!0}}(n,t.dtype,e)}))},u=0;u<r.length;u++)s();return{kernelName:e,outputs:r,inputs:t,timeMs:a.then((function(e){return e.kernelMs})),extraInfo:a.then((function(e){return null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""}))}}},{key:"logKernelProfile",value:function(e){var t=this,n=e.kernelName,r=e.outputs,a=e.timeMs,i=e.inputs,o=e.extraInfo;r.forEach((function(e){Promise.all([e.data(),a,o]).then((function(r){t.logger.logKernelProfile(n,e,r[0],r[1],i,r[2])}))}))}}]),e}();var qE=function(){function e(){B(this,e)}return K(e,[{key:"logKernelProfile",value:function(e,t,n,r,a,i){var o="number"===typeof r?Qb("".concat(r,"ms"),9):r.error,s=Qb(e,25),u=t.rank,c=t.size,l=Qb(t.shape.toString(),14),f="";for(var h in a){var d=a[h];if(null!=d){var p=d.shape||t.shape,m=p.length;f+="".concat(h,": ").concat(m,"D ").concat(m>0?p:""," ")}}console.log("%c".concat(s,"\t%c").concat(o,"\t%c").concat(u,"D ").concat(l,"\t%c").concat(c,"\t%c").concat(f,"\t%c").concat(i),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}]),e}();var HE=20,WE=3,KE=7;function GE(e,t,n,r){var a=dk(t),i=function(e,t,n,r){var a=Ub(t),i=r[r.length-1],o=new Array(i).fill(0),s=t.length,u="complex64"===n?$E(e):e;if(s>1)for(var c=0;c<a/i;c++)for(var l=c*i,f=0;f<i;f++)o[f]=Math.max(o[f],QE(u[l+f],0,n).length);return o}(e,t,n,a),o=t.length,s=XE(e,t,n,a,i),u=["Tensor"];return r&&(u.push("  dtype: ".concat(n)),u.push("  rank: ".concat(o)),u.push("  shape: [".concat(t,"]")),u.push("  values:")),u.push(s.map((function(e){return"    "+e})).join("\n")),u.join("\n")}function QE(e,t,n){return Qb(Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(KE))," + ")+"".concat(parseFloat(e[1].toFixed(KE)),"j"):sk(e)?"'".concat(e,"'"):"bool"===n?YE(e):parseFloat(e.toFixed(KE)).toString(),t)}function YE(e){return 0===e?"false":"true"}function XE(e,t,n,r,a){var i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o="complex64"===n?2:1,s=t[0],u=t.length;if(0===u)return"complex64"===n?[QE($E(e)[0],0,n)]:"bool"===n?[YE(e[0])]:[e[0].toString()];if(1===u){if(s>HE){var c=WE*o,l=Array.from(e.slice(0,c)),f=Array.from(e.slice((s-WE)*o,s*o));return"complex64"===n&&(l=$E(l),f=$E(f)),["["+l.map((function(e,t){return QE(e,a[t],n)})).join(", ")+", ..., "+f.map((function(e,t){return QE(e,a[s-WE+t],n)})).join(", ")+"]"]}return["["+("complex64"===n?$E(e):Array.from(e)).map((function(e,t){return QE(e,a[t],n)})).join(", ")+"]"]}var h=t.slice(1),d=r.slice(1),p=r[0]*o,m=[];if(s>HE){for(var v=0;v<WE;v++){var y=v*p,g=y+p;m.push.apply(m,U(XE(e.slice(y,g),h,n,d,a,!1)))}m.push("...");for(var b=s-WE;b<s;b++){var k=b*p,w=k+p;m.push.apply(m,U(XE(e.slice(k,w),h,n,d,a,b===s-1)))}}else for(var x=0;x<s;x++){var E=x*p,S=E+p;m.push.apply(m,U(XE(e.slice(E,S),h,n,d,a,x===s-1)))}var N=2===u?",":"";m[0]="["+m[0]+N;for(var T=1;T<m.length-1;T++)m[T]=" "+m[T]+N;for(var _=",\n",I=2;I<u;I++)_+="\n";return m[m.length-1]=" "+m[m.length-1]+"]"+(i?"":_),m}function $E(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var JE=function(){function e(t,n,r){var a=this;if(B(this,e),this.dtype=n,this.shape=t.slice(),this.size=Ub(t),null!=r){var i=r.length;Fb(i===this.size,(function(){return"Length of values '".concat(i,"' does not match the size ")+"inferred by the shape '".concat(a.size,"'.")}))}if("complex64"===n)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||ek(n,this.size),this.strides=dk(t)}return K(e,[{key:"set",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];0===r.length&&(r=[0]),Fb(r.length===this.rank,(function(){return"The number of provided coordinates (".concat(r.length,") must ")+"match the rank (".concat(t.rank,")")}));var i=this.locToIndex(r);this.values[i]=e}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);for(var r=0,a=0,i=t;a<i.length;a++){var o=i[a];if(o<0||o>=this.shape[r]){var s="Requested out of range element at ".concat(t,". ")+"  Buffer shape=".concat(this.shape);throw new Error(s)}r++}for(var u=t[t.length-1],c=0;c<t.length-1;++c)u+=this.strides[c]*t[c];return this.values[u]}},{key:"locToIndex",value:function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}},{key:"indexToLoc",value:function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}},{key:"rank",get:function(){return this.shape.length}},{key:"toTensor",value:function(){return ZE().makeTensor(this.values,this.shape,this.dtype)}}]),e}(),ZE=null,eS=null;var tS=function(){function e(t,n,r,a){B(this,e),this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=Ub(t),this.strides=dk(t),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return K(e,[{key:"rank",get:function(){return this.shape.length}},{key:"buffer",value:function(){var e=Rt(Ot().mark((function e(){var t;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",eS.buffer(this.shape,this.dtype,t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bufferSync",value:function(){return eS.buffer(this.shape,this.dtype,this.dataSync())}},{key:"array",value:function(){var e=Rt(Ot().mark((function e(){var t;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",mk(this.shape,t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"arraySync",value:function(){return mk(this.shape,this.dataSync())}},{key:"data",value:function(){var e=Rt(Ot().mark((function e(){var t,n;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.throwIfDisposed(),t=ZE().read(this.dataId),"string"!==this.dtype){e.next=13;break}return e.next=5,t;case 5:return n=e.sent,e.prev=6,e.abrupt("return",n.map((function(e){return UE(e)})));case 10:throw e.prev=10,e.t0=e.catch(6),new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().");case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this,[[6,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"dataSync",value:function(){this.throwIfDisposed();var e=ZE().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return UE(e)}))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}},{key:"bytes",value:function(){var e=Rt(Ot().mark((function e(){var t;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwIfDisposed(),e.next=3,ZE().read(this.dataId);case 3:if(t=e.sent,"string"!==this.dtype){e.next=8;break}return e.abrupt("return",t);case 8:return e.abrupt("return",new Uint8Array(t.buffer));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){this.isDisposed||(ZE().disposeTensor(this),this.isDisposedInternal=!0)}},{key:"isDisposed",get:function(){return this.isDisposedInternal}},{key:"throwIfDisposed",value:function(){if(this.isDisposed)throw new Error("Tensor is disposed.")}},{key:"print",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return eS.print(this,e)}},{key:"clone",value:function(){return this.throwIfDisposed(),eS.clone(this)}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return GE(this.dataSync(),this.shape,this.dtype,e)}},{key:"cast",value:function(e){return this.throwIfDisposed(),eS.cast(this,e)}},{key:"variable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),ZE().makeVariable(this,e,t,n)}}]),e}();Object.defineProperty(tS,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}}),Ak("Tensor",(function(){return tS}));var nS,rS,aS,iS,oS,sS=function(e){Q(n,e);var t=J(n);function n(e,r,a,i){var o;return B(this,n),(o=t.call(this,e.shape,e.dtype,e.dataId,i)).trainable=r,o.name=a,o}return K(n,[{key:"assign",value:function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!qb(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and ")+"previous value (".concat(this.shape,") must match"));ZE().disposeTensor(this),this.dataId=e.dataId,ZE().incRef(this,null)}},{key:"dispose",value:function(){ZE().disposeVariable(this),this.isDisposedInternal=!0}}]),n}(tS);Object.defineProperty(sS,Symbol.hasInstance,{value:function(e){return e instanceof tS&&null!=e.assign&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(nS||(nS={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(rS||(rS={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(aS||(aS={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(iS||(iS={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(oS||(oS={}));var uS={float32:iS,int32:rS,bool:aS,complex64:oS};function cS(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return uS[e][t]}function lS(e){return cS(e,"int32")}function fS(e,t){if(e.dtype===t.dtype)return[e,t];var n=cS(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function hS(e,t){Fb(e.dtype===t.dtype,(function(){return"The dtypes of the first(".concat(e.dtype,") and")+" second(".concat(t.dtype,") input must match")}))}function dS(e,t){return t.some((function(t){return t.id===e.id}))}function pS(e){var t=[];return mS(e,t,new Set),t}function mS(e,t,n){if(null!=e)if(e instanceof tS)t.push(e);else if(r=e,Array.isArray(r)||"object"===typeof r){var r,a=e;for(var i in a){var o=a[i];n.has(o)||(n.add(o),mS(o,t,n))}}}function vS(e){return null!=e.kernelName}var yS=function(){function e(){B(this,e),this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((function(e){return e.name}))))}}}return K(e,[{key:"dispose",value:function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()}}]),e}(),gS=function(){function e(t){B(this,e),this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new yS}return K(e,[{key:"ready",value:function(){var e=Rt(Ot().mark((function e(){var t,n,r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.pendingBackendInit){e.next=2;break}return e.abrupt("return",this.pendingBackendInit.then((function(){})));case 2:if(null==this.backendInstance){e.next=4;break}return e.abrupt("return");case 4:t=this.getSortedBackends(),n=0;case 6:if(!(n<t.length)){e.next=18;break}return r=t[n],e.next=10,this.initializeBackend(r).success;case 10:if(!e.sent){e.next=15;break}return e.next=14,this.setBackend(r);case 14:return e.abrupt("return");case 15:n++,e.next=6;break;case 18:throw new Error("Could not initialize any backends, all backend initializations failed.");case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"backend",get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '".concat(t,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance}},{key:"backendNames",value:function(){return Object.keys(this.registryFactory)}},{key:"findBackend",value:function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]}},{key:"findBackendFactory",value:function(e){return e in this.registryFactory?this.registryFactory[e].factory:null}},{key:"registerBackend",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(console.warn("".concat(e," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}},{key:"setBackend",value:function(){var e=Rt(Ot().mark((function e(t){var n,r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.registryFactory[t]){e.next=2;break}throw new Error("Backend name '".concat(t,"' not found in registry"));case 2:if(this.backendName=t,null!=this.registry[t]){e.next=16;break}if(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,!n.asyncInit){e.next=12;break}return e.next=9,r;case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=r;case 13:if(e.t0){e.next=16;break}return e.abrupt("return",!1);case 16:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new BE(this.backendInstance),e.abrupt("return",!0);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setupRegisteredKernels",value:function(){var e=this;AE(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))}},{key:"disposeRegisteredKernels",value:function(e){var t=this;AE(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))}},{key:"initializeBackend",value:function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{var r=n.factory();if(!r||r instanceof Ib||"function"!==typeof r.then)return this.registry[e]=r,{success:!0,asyncInit:!1};var a=++this.pendingBackendInitId,i=r.then((function(n){return!(a<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return a<t.pendingBackendInitId||(t.pendingBackendInit=null,console.warn("Initialization of backend ".concat(e," failed")),console.warn(n.stack||n.message)),!1}));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}catch(o){return console.warn("Initialization of backend ".concat(e," failed")),console.warn(o.stack||o.message),{success:!1,asyncInit:!1}}}},{key:"removeBackend",value:function(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}},{key:"getSortedBackends",value:function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))}},{key:"initializeBackendsAndReturnBest",value:function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),a=r.success,i=r.asyncInit;if(i||a)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}},{key:"moveData",value:function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),i=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}},{key:"tidy",value:function(e,t){var n,r=this,a=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))}},{key:"scopedRun",value:function(e,t,n){e();try{var r=n();return t(),r}catch(a){throw t(),a}}},{key:"nextTensorId",value:function(){return e.nextTensorId++}},{key:"nextVariableId",value:function(){return e.nextVariableId++}},{key:"clone",value:function(e){var t=kS.runKernel(Uw,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){var t={x:e},n={dtype:"float32"};return kS.runKernel(Jk,t,n)}}}),[],{}),t}},{key:"runKernel",value:function(e,t,n){if(!(null!=_E(e,this.backendName)))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}},{key:"shouldCheckForMemLeaks",value:function(){return this.ENV.getBool("IS_TEST")}},{key:"checkKernelForMemLeak",value:function(e,t,n){var r=this.backend.numDataIds(),a=0;n.forEach((function(e){a+="complex64"===e.dtype?3:1}));var i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=r-t-a-i;if(o>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(o," data ids) after running '").concat(e,"'"))}},{key:"runKernelFunc",value:function(e){var t,n,r,a=this,i=[],o=this.isTapeOn(),s=this.state.numBytes,u=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;var c=vS(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(vS(e)){var l=e.kernelName,f=e.inputs,h=e.attrs;null==this.backendName&&this.backend;var d=_E(l,this.backendName);Fb(null!=d,(function(){return"Cannot find registered kernel '".concat(l,"' for backend '").concat(a.backendName,"'")})),n=function(){var e=a.backend.numDataIds();r=d.kernelFunc({inputs:f,attrs:h,backend:a.backend});var t=Array.isArray(r)?r:[r];a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(l,e,t);var n=t.map((function(e){if(null!=e.rank)return e;var t=e.dataId,n=e.shape,r=e.dtype;return a.makeTensorFromDataId(t,n,r)}));if(o){var s=a.getTensorsForGradient(l,f,n);i=a.saveTensorsForBackwardMode(s)}return n}}else{var p=e.forwardFunc,m=function(e){o&&(i=e.map((function(e){return a.keep(a.clone(e))})))};n=function(){var e=a.backend.numDataIds();r=a.tidy((function(){return p(a.backend,m)}));var t=Array.isArray(r)?r:[r];return a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(c,e,t),t}}var v,y=e.inputs,g=e.attrs,b=vS(e)?null:e.backwardsFunc;return this.scopedRun((function(){return a.state.kernelDepth++}),(function(){return a.state.kernelDepth--}),(function(){a.ENV.getBool("DEBUG")||a.state.profiling?(v=a.profiler.profileKernel(c,y,(function(){return n()})),a.ENV.getBool("DEBUG")&&a.profiler.logKernelProfile(v),t=v.outputs):t=n()})),o&&this.addTapeNode(c,y,t,b,i,g),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-u,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(y).map((function(e){return null!=y[e]?y[e].shape:null})),outputShapes:t.map((function(e){return e.shape})),kernelTimeMs:v.timeMs,extraInfo:v.extraInfo}),Array.isArray(r)?t:t[0]}},{key:"saveTensorsForBackwardMode",value:function(e){var t=this,n=e.map((function(e){return t.keep(t.clone(e))}));return n}},{key:"getTensorsForGradient",value:function(e,t,n){var r=IE(e);if(null!=r){var a,i=r.inputsToSave||[],o=r.outputsToSave||[];r.saveAllInputs?(Fb(Array.isArray(t),(function(){return"saveAllInputs is true, expected inputs to be an array."})),a=Object.keys(t).map((function(e){return t[e]}))):a=i.map((function(e){return t[e]}));var s=n.filter((function(e,t){return o[t]}));return a.concat(s)}return[]}},{key:"makeTensor",value:function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var a=e;"string"===n&&sk(e[0])&&(a=e.map((function(e){return VE(e)})));var i=r.write(a,t,n),o=new tS(t,n,i,this.nextTensorId());if(this.trackTensor(o,r),"string"===n){var s=this.state.tensorInfo.get(i),u=ok(a);this.state.numBytes+=u-s.bytes,s.bytes=u}return o}},{key:"makeTensorFromDataId",value:function(e,t,n,r){var a=new tS(t,n=n||"float32",e,this.nextTensorId());return this.trackTensor(a,r),a}},{key:"makeVariable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));var a=new sS(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name ".concat(a.name," was already registered"));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}},{key:"trackTensor",value:function(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;var n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*ik(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof sS||this.track(e)}},{key:"incRef",value:function(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}},{key:"removeDataId",value:function(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}},{key:"disposeTensor",value:function(e){if(this.state.tensorInfo.has(e.dataId)){var t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){var n=e.size*ik(e.dtype);this.state.numBytes-=n}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}}},{key:"disposeVariables",value:function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}}},{key:"disposeVariable",value:function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}},{key:"memory",value:function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}},{key:"profile",value:function(){var e=Rt(Ot().mark((function e(t){var n,r,a,i,o;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],e.next=6,t();case 6:this.state.activeProfile.result=e.sent,this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,U(this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot})))),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,a=ae(this.state.activeProfile.kernels),e.prev=12,a.s();case 14:if((i=a.n()).done){e.next=24;break}return o=i.value,e.next=18,o.kernelTimeMs;case 18:return o.kernelTimeMs=e.sent,e.next=21,o.extraInfo;case 21:o.extraInfo=e.sent;case 22:e.next=14;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(12),a.e(e.t0);case 29:return e.prev=29,a.f(),e.finish(29);case 32:return e.abrupt("return",this.state.activeProfile);case 33:case"end":return e.stop()}}),e,this,[[12,26,29,32]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isTapeOn",value:function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}},{key:"addTapeNode",value:function(e,t,n,r,a,i){var o=this,s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},u=IE(e);null!=u&&(r=u.gradFunc),null!=r&&(s.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],a=yk(r.size,r.dtype);return o.makeTensor(a,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],a,i)}),this.state.activeTape.push(s)}},{key:"keep",value:function(e){return e.kept=!0,e}},{key:"startTape",value:function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}},{key:"endTape",value:function(){this.state.gradientDepth--}},{key:"startScope",value:function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}},{key:"endScope",value:function(e){for(var t=this,n=pS(e),r=new Set(n.map((function(e){return e.id}))),a=0;a<this.state.activeScope.track.length;a++){var i=this.state.activeScope.track[a];i.kept||r.has(i.id)||i.dispose()}var o=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==o.id||t.track(e)}))}},{key:"gradients",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(Fb(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));var i=this.scopedRun((function(){return r.startTape()}),(function(){return r.endTape()}),(function(){return r.tidy("forward",e)}));Fb(i instanceof tS,(function(){return"The result y returned by f() must be a tensor."}));var o=function(e,t,n){for(var r={},a={},i=0;i<t.length;i++)r[t[i].id]=!0;for(var o=0;o<e.length;o++){var s=e[o],u=s.inputs;for(var c in u){for(var l=u[c],f=!1,h=0;h<t.length;h++)if(r[l.id]){s.outputs.forEach((function(e){return r[e.id]=!0})),f=!0,a[s.id]=!0;break}if(f)break}}var d={};d[n.id]=!0;for(var p={},m=e.length-1;m>=0;m--)for(var v=e[m],y=v.inputs,g=0;g<v.outputs.length;g++)if(d[v.outputs[g].id]){for(var b in y)d[y[b].id]=!0,p[v.id]=!0;break}for(var k=[],w=0;w<e.length;w++){var x=e[w];if(a[x.id]&&p[x.id]){var E={};for(var S in x.inputs){var N=x.inputs[S];r[N.id]&&(E[S]=N)}var T=Object.assign({},x);T.inputs=E,T.outputs=x.outputs,k.push(T)}}return k}(this.state.activeTape,t,i);if(!a&&0===o.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e={};e[i.id]=null==n?function(e){var t=vk(Ub(e),"float32");return kS.makeTensor(t,e,"float32")}(i.shape):n,function(e,t,n,r){for(var a=function(){var a=t[i],o=[];if(a.outputs.forEach((function(t){var n=e[t.id];null!=n?o.push(n):o.push(null)})),null==a.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(a.kernelName,"."));var s=a.gradient(o),u=function(t){if(!(t in s))throw new Error("Cannot backprop through input ".concat(t,". ")+"Available gradients found: ".concat(Object.keys(s),"."));var i=n((function(){return s[t]()}));if("float32"!==i.dtype)throw new Error("Error in gradient for op ".concat(a.kernelName,". The gradient of input ")+"".concat(t," must have 'float32' dtype, but has '").concat(i.dtype,"'"));var o=a.inputs[t];if(!qb(i.shape,o.shape))throw new Error("Error in gradient for op ".concat(a.kernelName,". The gradient of input ")+"'".concat(t,"' has shape '").concat(i.shape,"', which does not match ")+"the shape of the input '".concat(o.shape,"'"));if(null==e[o.id])e[o.id]=i;else{var u=e[o.id];e[o.id]=r(u,i),u.dispose()}};for(var c in a.inputs)u(c)},i=t.length-1;i>=0;i--)a()}(e,o,(function(e){return r.tidy(e)}),wS);var a=t.map((function(t){return e[t.id]}));return 0===r.state.gradientDepth&&(r.state.activeTape.forEach((function(e){var t,n=ae(e.saved);try{for(n.s();!(t=n.n()).done;){t.value.dispose()}}catch(r){n.e(r)}finally{n.f()}})),r.state.activeTape=null),{value:i,grads:a}}))}},{key:"customGrad",value:function(e){var t=this;return Fb(fk(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var i;Fb(r.every((function(e){return e instanceof tS})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var o={};r.forEach((function(e,t){o[t]=e}));return t.runKernelFunc({forwardFunc:function(t,n){return Fb((i=e.apply(void 0,[].concat(r,[n]))).value instanceof tS,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),Fb(fk(i.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),i.value},backwardsFunc:function(e,t){var n=i.gradFunc(e,t),a=Array.isArray(n)?n:[n];Fb(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),Fb(a.every((function(e){return e instanceof tS})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var o={};return a.forEach((function(e,t){o[t]=function(){return e}})),o},inputs:o})}}},{key:"readSync",value:function(e){return this.state.tensorInfo.get(e).backend.readSync(e)}},{key:"read",value:function(e){return this.state.tensorInfo.get(e).backend.read(e)}},{key:"time",value:function(){var e=Rt(Ot().mark((function e(t){var n,r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=jE(),e.next=3,this.backend.time(t);case 3:return(r=e.sent).wallMs=jE()-n,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"track",value:function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}},{key:"registeredVariables",get:function(){return this.state.registeredVariables}},{key:"reset",value:function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new yS,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}]),e}();function bS(){var e=Ik();if(null==e._tfengine){var t=new Sk(e);e._tfengine=new gS(t)}return function(e){_k=e}(e._tfengine.ENV),function(e){ZE=e}((function(){return e._tfengine})),e._tfengine}gS.nextTensorId=0,gS.nextVariableId=0;var kS=bS();function wS(e,t){var n={a:e,b:t};return kS.runKernel(Mk,n)}function xS(){if("undefined"!==typeof navigator&&null!=navigator){var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function ES(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}var SS=Nk();function NS(e,t){var n=e;if(ak(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||ak(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&Nk().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&TS(e,r,[]),r}function TS(e,t,n){if(n=n||[],Array.isArray(e)||ak(e)){Fb(t.length>0,(function(){return"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(e.length," elements")})),Fb(e.length===t[0],(function(){return"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," ")+"elements, but has ".concat(e.length," elements")}));for(var r=t.slice(1),a=0;a<e.length;++a)TS(e[a],r,n.concat(a))}else Fb(0===t.length,(function(){return"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(t[0]," elements")}))}function _S(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}}function IS(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof tS)return _S(r,e.dtype,t,n),e;var a=lk(e);if("string"!==a&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),_S(r,a,t,n),null==e||!ak(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){var i=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(i,"'"))}var o=NS(e,a);ak(e)||Array.isArray(e)||(e=[e]);var s="string"!==a?FE(e,a):Vb(e,[],!0);return kS.makeTensor(s,o,a)}function AS(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");return e.map((function(e,a){return IS(e,"".concat(t,"[").concat(a,"]"),n,r)}))}SS.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),SS.registerFlag("IS_BROWSER",(function(){return ES()})),SS.registerFlag("IS_NODE",(function(){return"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node})),SS.registerFlag("IS_CHROME",(function(){return"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),SS.registerFlag("PROD",(function(){return!1})),SS.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return SS.getBool("DEBUG")})),SS.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),SS.registerFlag("IS_TEST",(function(){return!1})),SS.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(function(){return!0}));var CS="__op";function DS(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=CS;var a=function(){kS.startScope(n);try{var e=r.apply(void 0,arguments);return xk(e)&&console.error("Cannot return a Promise inside of tidy."),kS.endScope(e),e}catch(t){throw kS.endScope(null),t}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}var OS=DS({complex_:function(e,t){var n=IS(e,"real","complex"),r=IS(t,"imag","complex");jb(n.shape,r.shape,"real and imag shapes, ".concat(n.shape," and ").concat(r.shape,", ")+"must match in call to tf.complex().");var a={real:n,imag:r};return kS.runKernel(tw,a)}});function MS(e,t,n,r){if(null==r&&(r=lk(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!ak(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){bk(t);var a=Ub(t),i=Ub(n);Fb(a===i,(function(){return"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(a," values but has ").concat(i)}));for(var o=0;o<n.length;++o){var s=n[o],u=o!==n.length-1||s!==Ub(t.slice(o));Fb(n[o]===t[o]||!u,(function(){return"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). ")}))}}return ak(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?FE(e,r):Vb(e,[],!0),kS.makeTensor(e,t,r)}function RS(e,t,n){return MS(e,t,NS(e,n),n)}var PS={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8},LS=4;function FS(e,t){return jS.apply(this,arguments)}function jS(){return jS=Rt(Ot().mark((function e(t,n){var r,a,i,o,s,u;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],a=[],i=Array.isArray(t)?t.map((function(e){return e.name})):Object.keys(t),o=Ot().mark((function e(){var o,u,c,l;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=i[s],"float32"===(u=Array.isArray(t)?t[s].tensor:t[o]).dtype||"int32"===u.dtype||"bool"===u.dtype||"string"===u.dtype||"complex64"===u.dtype){e.next=4;break}throw new Error("Unsupported dtype in weight '".concat(o,"': ").concat(u.dtype));case 4:c={name:o,shape:u.shape,dtype:u.dtype},"string"===u.dtype?(l=new Promise(function(){var e=Rt(Ot().mark((function e(t){var n,r,a,i,o,s,c;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.bytes();case 2:for(n=e.sent,r=n.reduce((function(e,t){return e+t.length}),0)+LS*n.length,a=new Uint8Array(r),i=0,o=0;o<n.length;o++)s=n[o],c=new Uint8Array(new Uint32Array([s.length]).buffer),a.set(c,i),i+=LS,a.set(s,i),i+=s.length;t(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.push(l)):a.push(u.data()),null!=n&&(c.group=n),r.push(c);case 8:case"end":return e.stop()}}),e)})),s=0;case 5:if(!(s<i.length)){e.next=10;break}return e.delegateYield(o(),"t0",7);case 7:++s,e.next=5;break;case 10:return e.next=12,Promise.all(a);case 12:return u=e.sent,e.abrupt("return",{data:VS(u),specs:r});case 14:case"end":return e.stop()}}),e)}))),jS.apply(this,arguments)}function zS(e,t){var n,r,a={},i=0,o=ae(t);try{for(o.s();!(r=o.n()).done;){var s=r.value,u=s.name,c=s.dtype,l=s.shape,f=Ub(l),h=void 0;if("quantization"in s){var d=s.quantization;if("uint8"===d.dtype||"uint16"===d.dtype){if(!("min"in d)||!("scale"in d))throw new Error("Weight ".concat(s.name," with quantization ").concat(d.dtype," ")+"doesn't have corresponding metadata min and scale.")}else{if("float16"!==d.dtype)throw new Error("Weight ".concat(s.name," has unknown ")+"quantization dtype ".concat(d.dtype,". ")+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==c)throw new Error("Weight ".concat(s.name," is quantized with ").concat(d.dtype," ")+"which only supports weights of type float32 not ".concat(c,"."))}var p=PS[d.dtype],m=e.slice(i,i+f*p),v="uint8"===d.dtype?new Uint8Array(m):new Uint16Array(m);if("float32"===c)if("uint8"===d.dtype||"uint16"===d.dtype){h=new Float32Array(v.length);for(var y=0;y<v.length;y++){var g=v[y];h[y]=g*d.scale+d.min}}else{if("float16"!==d.dtype)throw new Error("Unsupported quantization type ".concat(d.dtype," ")+"for weight type float32.");void 0===n&&(n=QS()),h=n(v)}else{if("int32"!==c)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(c));if("uint8"!==d.dtype&&"uint16"!==d.dtype)throw new Error("Unsupported quantization type ".concat(d.dtype," ")+"for weight type int32.");h=new Int32Array(v.length);for(var b=0;b<v.length;b++){var k=v[b];h[b]=Math.round(k*d.scale+d.min)}}i+=f*p}else if("string"===c){var w=Ub(s.shape);h=[];for(var x=0;x<w;x++){var E=new Uint32Array(e.slice(i,i+LS))[0];i+=LS;var S=new Uint8Array(e.slice(i,i+E));h.push(S),i+=E}}else{var N=PS[c],T=e.slice(i,i+f*N);if("float32"===c)h=new Float32Array(T);else if("int32"===c)h=new Int32Array(T);else if("bool"===c)h=new Uint8Array(T);else{if("complex64"!==c)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(c));h=new Float32Array(T);for(var _=new Float32Array(h.length/2),I=new Float32Array(h.length/2),A=0;A<_.length;A++)_[A]=h[2*A],I[A]=h[2*A+1];var C=RS(_,l,"float32"),D=RS(I,l,"float32");a[u]=OS(C,D),C.dispose(),D.dispose()}i+=f*N}"complex64"!==c&&(a[u]=RS(h,l,c))}}catch(O){o.e(O)}finally{o.f()}return a}function VS(e){if(null===e)throw new Error("Invalid input value: ".concat(JSON.stringify(e)));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(e.constructor.name))}));var r=new Uint8Array(t),a=0;return n.forEach((function(e){r.set(new Uint8Array(e.buffer),a),a+=e.byteLength})),r.buffer}var US="undefined"!==typeof Buffer&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function BS(e){return US?Buffer.byteLength(e):new Blob([e]).size}function qS(e){if(US)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function HS(e){if(US){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}function WS(e){if(1===e.length)return e[0];var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function KS(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function GS(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:BS(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:BS(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function QS(){var e=function(){var e=function(e){for(var t=e<<13,n=0;0===(8388608&t);)n-=8388608,t<<=1;return(t&=-8388609)|n+947912704},t=new Uint32Array(2048);t[0]=0;for(var n=1;n<1024;n++)t[n]=e(n);for(var r=1024;r<2048;r++)t[r]=939524096+(r-1024<<13);return t}(),t=function(){var e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(var t=1;t<31;t++)e[t]=t<<23;for(var n=33;n<63;n++)e[n]=2147483648+(n-32<<23);return e}(),n=function(){for(var e=new Uint32Array(64),t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return function(r){for(var a=new ArrayBuffer(4*r.length),i=new Uint32Array(a),o=0;o<r.length;o++){var s=r[o],u=e[n[s>>10]+(1023&s)]+t[s>>10];i[o]=u}return new Float32Array(a)}}var YS=function(){function e(){B(this,e),this.saveRouters=[],this.loadRouters=[]}return K(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerSaveRouter",value:function(t){e.getInstance().saveRouters.push(t)}},{key:"registerLoadRouter",value:function(t){e.getInstance().loadRouters.push(t)}},{key:"getSaveHandlers",value:function(t){return e.getHandlers(t,"save")}},{key:"getLoadHandlers",value:function(t,n){return e.getHandlers(t,"load",n)}},{key:"getHandlers",value:function(t,n,r){var a=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&a.push(n)})),a}}]),e}(),XS=function(e){return YS.registerSaveRouter(e)},$S=function(e){return YS.registerLoadRouter(e)},JS=function(e){return YS.getSaveHandlers(e)},ZS=function(e,t){return YS.getLoadHandlers(e,t)},eN="tensorflowjs",tN="models_store",nN="model_info_store";function rN(){if(!Nk().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function aN(e){var t=e.result;t.createObjectStore(tN,{keyPath:"modelPath"}),t.createObjectStore(nN,{keyPath:"modelPath"})}var iN=function(){function e(t){if(B(this,e),this.indexedDB=rN(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return K(e,[{key:"save",value:function(){var e=Rt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return e.abrupt("return",this.databaseAction(this.modelPath,t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Rt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.databaseAction(this.modelPath));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"databaseAction",value:function(e,t){var n=this;return new Promise((function(e,r){var a=n.indexedDB.open(eN,1);a.onupgradeneeded=function(){return aN(a)},a.onsuccess=function(){var i=a.result;if(null==t){var o=i.transaction(tN,"readonly"),s=o.objectStore(tN).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return i.close(),r(new Error("Cannot find model with path '".concat(n.modelPath,"' ")+"in IndexedDB."));e(s.result.modelArtifacts)},s.onerror=function(e){return i.close(),r(s.error)},o.oncomplete=function(){return i.close()}}else{var u,c=GS(t),l=i.transaction(nN,"readwrite"),f=l.objectStore(nN),h=f.put({modelPath:n.modelPath,modelArtifactsInfo:c});h.onsuccess=function(){var a=(u=i.transaction(tN,"readwrite")).objectStore(tN).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:c});a.onsuccess=function(){return e({modelArtifactsInfo:c})},a.onerror=function(e){var t=(f=l.objectStore(nN)).delete(n.modelPath);t.onsuccess=function(){return i.close(),r(a.error)},t.onerror=function(e){return i.close(),r(a.error)}}},h.onerror=function(e){return i.close(),r(h.error)},l.oncomplete=function(){null==u?i.close():u.oncomplete=function(){return i.close()}}}},a.onerror=function(e){return r(a.error)}}))}}]),e}();iN.URL_SCHEME="indexeddb://";var oN=function(e){return Nk().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(iN.URL_SCHEME)?(t=e.slice(iN.URL_SCHEME.length),new iN(t)):null;var t};YS.registerSaveRouter(oN),YS.registerLoadRouter(oN);var sN=function(){function e(){B(this,e),this.indexedDB=rN()}return K(e,[{key:"listModels",value:function(){var e=Rt(Ot().mark((function e(){var t=this;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=t.indexedDB.open(eN,1);r.onupgradeneeded=function(){return aN(r)},r.onsuccess=function(){var t=r.result,a=t.transaction(nN,"readonly"),i=a.objectStore(nN).getAll();i.onsuccess=function(){var t,n={},r=ae(i.result);try{for(r.s();!(t=r.n()).done;){var a=t.value;n[a.modelPath]=a.modelArtifactsInfo}}catch(o){r.e(o)}finally{r.f()}e(n)},i.onerror=function(e){return t.close(),n(i.error)},a.oncomplete=function(){return t.close()}},r.onerror=function(e){return n(r.error)}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=Rt(Ot().mark((function e(t){var n=this;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(r=t).startsWith(iN.URL_SCHEME)?r.slice(iN.URL_SCHEME.length):r,e.abrupt("return",new Promise((function(e,r){var a=n.indexedDB.open(eN,1);a.onupgradeneeded=function(){return aN(a)},a.onsuccess=function(){var n,i=a.result,o=i.transaction(nN,"readwrite"),s=o.objectStore(nN),u=s.get(t);u.onsuccess=function(){if(null==u.result)return i.close(),r(new Error("Cannot find model with path '".concat(t,"' ")+"in IndexedDB."));var a=s.delete(t),o=function(){var a=(n=i.transaction(tN,"readwrite")).objectStore(tN).delete(t);a.onsuccess=function(){return e(u.result.modelArtifactsInfo)},a.onerror=function(e){return r(u.error)}};a.onsuccess=o,a.onerror=function(e){return o(),i.close(),r(u.error)}},u.onerror=function(e){return i.close(),r(u.error)},o.oncomplete=function(){null==n?i.close():n.oncomplete=function(){return i.close()}}},a.onerror=function(e){return r(a.error)}})));case 2:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),uN="/",cN="tensorflowjs_models",lN="info",fN="model_topology",hN="weight_specs",dN="weight_data",pN="model_metadata";function mN(e){return{info:[cN,e,lN].join(uN),topology:[cN,e,fN].join(uN),weightSpecs:[cN,e,hN].join(uN),weightData:[cN,e,dN].join(uN),modelMetadata:[cN,e,pN].join(uN)}}function vN(e){var t=e.split(uN);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(uN)}var yN=function(){function e(t){if(B(this,e),!Nk().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=mN(this.modelPath)}return K(e,[{key:"save",value:function(){var e=Rt(Ot().mark((function e(t){var n,r,a,i;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=4;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 4:return n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),a=GS(t),e.prev=7,this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,qS(t.weightData)),i={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy},null!=t.signature&&(i.signature=t.signature),null!=t.userDefinedMetadata&&(i.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(i.modelInitializer=t.modelInitializer),this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),e.abrupt("return",{modelArtifactsInfo:a});case 20:throw e.prev=20,e.t0=e.catch(7),this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(a.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(a.weightSpecsBytes,", ")+"weightDataBytes=".concat(a.weightDataBytes,"."));case 28:case"end":return e.stop()}}),e,this,[[7,20]])})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Rt(Ot().mark((function e(){var t,n,r,a,i,o,s;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=JSON.parse(this.LS.getItem(this.keys.info)))){e.next=3;break}throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));case 3:if("JSON"===t.modelTopologyType){e.next=5;break}throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");case 5:if(n={},null!=(r=JSON.parse(this.LS.getItem(this.keys.topology)))){e.next=9;break}throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");case 9:if(n.modelTopology=r,null!=(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))){e.next=13;break}throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");case 13:if(n.weightSpecs=a,null!=(i=this.LS.getItem(this.keys.modelMetadata))&&(o=JSON.parse(i),n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,null!=o.signature&&(n.signature=o.signature),null!=o.userDefinedMetadata&&(n.userDefinedMetadata=o.userDefinedMetadata),null!=o.modelInitializer&&(n.modelInitializer=o.modelInitializer)),null!=(s=this.LS.getItem(this.keys.weightData))){e.next=19;break}throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));case 19:return n.weightData=HS(s),e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();yN.URL_SCHEME="localstorage://";var gN=function(e){return Nk().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(yN.URL_SCHEME)?(t=e.slice(yN.URL_SCHEME.length),new yN(t)):null;var t};YS.registerSaveRouter(gN),YS.registerLoadRouter(gN);var bN=function(){function e(){B(this,e),Fb(Nk().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),Fb("undefined"===typeof window||"undefined"!==typeof window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return K(e,[{key:"listModels",value:function(){var e=Rt(Ot().mark((function e(){var t,n,r,a,i,o;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t={},n=cN+uN,r=uN+lN,a=0;a<this.LS.length;++a)(i=this.LS.key(a)).startsWith(n)&&i.endsWith(r)&&(o=vN(i),t[o]=JSON.parse(this.LS.getItem(i)));return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=Rt(Ot().mark((function e(t){var n,r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(a=t).startsWith(yN.URL_SCHEME)?a.slice(yN.URL_SCHEME.length):a,n=mN(t),null!=this.LS.getItem(n.info)){e.next=4;break}throw new Error("Cannot find model at path '".concat(t,"'"));case 4:return r=JSON.parse(this.LS.getItem(n.info)),this.LS.removeItem(n.info),this.LS.removeItem(n.topology),this.LS.removeItem(n.weightSpecs),this.LS.removeItem(n.weightData),e.abrupt("return",r);case 10:case"end":return e.stop()}var a}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),kN="://",wN=function(){function e(){B(this,e),this.managers={}}return K(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerManager",value:function(t,n){Fb(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(kN)&&(t=t.slice(0,t.indexOf(kN))),Fb(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();Fb(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '".concat(t,"'.")})),r.managers[t]=n}},{key:"getManager",value:function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '".concat(e,"'"));return t}},{key:"getSchemes",value:function(){return Object.keys(this.getInstance().managers)}}]),e}();function xN(e){if(-1===e.indexOf(kN))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+"".concat(wN.getSchemes().join(",")));return{scheme:e.split(kN)[0],path:e.split(kN)[1]}}function EN(e,t){return SN.apply(this,arguments)}function SN(){return SN=Rt(Ot().mark((function e(t,n){var r,a,i,o,s,u,c,l,f,h,d=arguments;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>2&&void 0!==d[2]&&d[2],Fb(t!==n,(function(){return"Old path and new path are the same: '".concat(t,"'")})),Fb((a=YS.getLoadHandlers(t)).length>0,(function(){return"Copying failed because no load handler is found for source URL ".concat(t,".")})),Fb(a.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"load handlers for source URL ".concat(t,".")})),i=a[0],Fb((o=YS.getSaveHandlers(n)).length>0,(function(){return"Copying failed because no save handler is found for destination "+"URL ".concat(n,".")})),Fb(o.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"save handlers for destination URL ".concat(n,".")})),s=o[0],u=xN(t).scheme,c=xN(t).path,l=u===xN(t).scheme,e.next=15,i.load();case 15:if(f=e.sent,!r||!l){e.next=19;break}return e.next=19,wN.getManager(u).removeModel(c);case 19:return e.next=21,s.save(f);case 21:if(h=e.sent,!r||l){e.next=25;break}return e.next=25,wN.getManager(u).removeModel(c);case 25:return e.abrupt("return",h.modelArtifactsInfo);case 26:case"end":return e.stop()}}),e)}))),SN.apply(this,arguments)}function NN(){return TN.apply(this,arguments)}function TN(){return(TN=Rt(Ot().mark((function e(){var t,n,r,a,i,o,s;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=wN.getSchemes(),n={},r=ae(t),e.prev=3,r.s();case 5:if((a=r.n()).done){e.next=13;break}return i=a.value,e.next=9,wN.getManager(i).listModels();case 9:for(s in o=e.sent)n[i+kN+s]=o[s];case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",n);case 22:case"end":return e.stop()}}),e,null,[[3,15,18,21]])})))).apply(this,arguments)}function _N(e){return IN.apply(this,arguments)}function IN(){return(IN=Rt(Ot().mark((function e(t){var n,r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=xN(t),r=wN.getManager(n.scheme),e.abrupt("return",r.removeModel(n.path));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function AN(e,t){return CN.apply(this,arguments)}function CN(){return(CN=Rt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1,e.abrupt("return",EN(t,n,false));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function DN(e,t){return ON.apply(this,arguments)}function ON(){return(ON=Rt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!0,e.abrupt("return",EN(t,n,true));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var MN=function(){function e(){B(this,e)}return K(e,[{key:"fetch",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return fetch(e,t)}))},{key:"now",value:function(){return performance.now()}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return new TextDecoder(t).decode(e)}}]),e}();if(Nk().get("IS_BROWSER")){Nk().setPlatform("browser",new MN);try{wN.registerManager(yN.URL_SCHEME,new bN)}catch(zP){}try{wN.registerManager(iN.URL_SCHEME,new sN)}catch(zP){}}var RN,PN=function(){return n(410)};var LN=function(){function e(){B(this,e),this.util=n(628),this.textEncoder=new this.util.TextEncoder}return K(e,[{key:"fetch",value:function(e,t){return null!=Nk().global.fetch?Nk().global.fetch(e,t):(null==RN&&(RN=PN()),RN(e,t))}},{key:"now",value:function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}}]),e}();function FN(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",bk(e),new JE(e,t,n)}Nk().get("IS_NODE")&&Nk().setPlatform("node",new LN);var jN=DS({cast_:function(e,t){var n=IS(e,"x","cast");if(!nk(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var r={x:n},a={dtype:t};return kS.runKernel(Jk,r,a)}});var zN=DS({clone_:function(e){var t={x:IS(e,"x","clone","string_or_numeric")};return kS.runKernel(Uw,t)}});function VN(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}bS(),eS={buffer:FN,cast:jN,clone:zN,print:VN};var UN="model",BN=".json",qN=".weights.bin";function HN(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var WN=function(){function e(t){if(B(this,e),!Nk().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t=UN),this.modelTopologyFileName=t+BN,this.weightDataFileName=t+qN}return K(e,[{key:"save",value:function(){var e=Rt(Ot().mark((function e(t){var n,r,a,i,o,s;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof document){e.next=2;break}throw new Error("Browser downloads are not supported in this environment since `document` is not present");case 2:if(n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer)){e.next=7;break}throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 7:return r=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],a={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:r},null!=t.signature&&(a.signature=t.signature),null!=t.userDefinedMetadata&&(a.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(a.modelInitializer=t.modelInitializer),i=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),(o=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,o.href=i,e.next=18,HN((function(){return o.dispatchEvent(new MouseEvent("click"))}));case 18:if(null==t.weightData){e.next=24;break}return(s=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,e.next=24,HN((function(){return s.dispatchEvent(new MouseEvent("click"))}));case 24:return e.abrupt("return",{modelArtifactsInfo:GS(t)});case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();WN.URL_SCHEME="downloads://";var KN=function(){function e(t){if(B(this,e),null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+"but received ".concat(t));this.files=t}return K(e,[{key:"load",value:function(){var e=Rt(Ot().mark((function e(){var t,n,r=this;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.files[0],n=this.files.slice(1),e.abrupt("return",new Promise((function(e,a){var i=new FileReader;i.onload=function(i){var o=JSON.parse(i.target.result),s=o.modelTopology;if(null!=s){0===n.length&&e({modelTopology:s});var u=o.weightsManifest;if(null!=u){var c;try{c=r.checkManifestAndWeightFiles(u,n)}catch(zP){return void a(zP)}var l=[],f=[],h=[];u.forEach((function(e){e.paths.forEach((function(e){f.push(e),h.push(null)})),l.push.apply(l,U(e.weights))})),u.forEach((function(t){t.paths.forEach((function(t){var n=new FileReader;n.onload=function(n){var r=n.target.result,a=f.indexOf(t);if(h[a]=r,-1===h.indexOf(null)){var i={modelTopology:s,weightSpecs:l,weightData:WS(h),format:o.format,generatedBy:o.generatedBy,convertedBy:o.convertedBy};null!=o.signature&&(i.signature=o.signature),null!=o.userDefinedMetadata&&(i.userDefinedMetadata=o.userDefinedMetadata),null!=o.modelInitializer&&(i.modelInitializer=o.modelInitializer),e(i)}},n.onerror=function(e){return a("Failed to weights data from file of path '".concat(t,"'."))},n.readAsArrayBuffer(c[t])}))}))}else a(new Error("weightManifest field is missing from file ".concat(t.name)))}else a(new Error("modelTopology field is missing from file ".concat(t.name)))},i.onerror=function(e){return a("Failed to read model topology and weights manifest JSON "+"from file '".concat(t.name,"'. BrowserFiles supports loading ")+"Keras-style tf.Model artifacts only.")},i.readAsText(t)})));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkManifestAndWeightFiles",value:function(e,t){var n,r=[],a=t.map((function(e){return KS(e.name)})),i={},o=ae(e);try{for(o.s();!(n=o.n()).done;){n.value.paths.forEach((function(e){var n=KS(e);if(-1!==r.indexOf(n))throw new Error("Duplicate file basename found in weights manifest: "+"'".concat(n,"'"));if(r.push(n),-1===a.indexOf(n))throw new Error("Weight file with basename '".concat(n,"' is not provided."));i[e]=t[a.indexOf(n)]}))}}catch(zP){o.e(zP)}finally{o.f()}if(r.length!==t.length)throw new Error("Mismatch in the number of files in weights manifest "+"(".concat(r.length,") and the number of weight files provided ")+"(".concat(t.length,")."));return i}}]),e}();function GN(e){return new KN(e)}function QN(e,t,n,r){!function(e){Fb(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){Fb(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(e)})),Fb(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(t)})),Fb(t>=e,(function(){return"startFraction must be no more than endFraction, but "+"got startFraction ".concat(e," and endFraction ")+"".concat(t)}))}(n=null==n?0:n,r=null==r?1:r);var a=0;return Promise.all(e.map((function(i){return i.then((function(i){var o=n+ ++a/e.length*(r-n);return t(o),i})),i})))}function YN(e,t){return XN.apply(this,arguments)}function XN(){return(XN=Rt(Ot().mark((function e(t,n){var r,a,i,o,s,u,c,l,f;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),r=null==n.fetchFunc?Nk().platform.fetch:n.fetchFunc,a=t.map((function(e){return r(e,n.requestInit,{isBinary:!0})})),i=0,o=.5,null!=n.onProgress){e.next=11;break}return e.next=8,Promise.all(a);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,QN(a,n.onProgress,i,o);case 13:e.t0=e.sent;case 14:if(s=e.t0,u=s.map((function(e){return e.arrayBuffer()})),c=.5,l=1,null!=n.onProgress){e.next=24;break}return e.next=21,Promise.all(u);case 21:e.t1=e.sent,e.next=27;break;case 24:return e.next=26,QN(u,n.onProgress,c,l);case 26:e.t1=e.sent;case 27:return f=e.t1,e.abrupt("return",f);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $N(e){return JN.apply(this,arguments)}function JN(){return JN=Rt(Ot().mark((function e(t){var n,r,a,i,o=arguments;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"",r=o.length>2?o[2]:void 0,a=o.length>3?o[3]:void 0,i=ZN((function(e){return YN(e,{requestInit:a})})),e.abrupt("return",i(t,n,r));case 6:case"end":return e.stop()}}),e)}))),JN.apply(this,arguments)}function ZN(e){return function(){var t=Rt(Ot().mark((function t(n){var r,a,i,o,s,u,c,l,f,h,d,p,m=arguments;return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=m.length>1&&void 0!==m[1]?m[1]:"",a=m.length>2?m[2]:void 0,i=n.map((function(){return!1})),o={},s=null!=a?a.map((function(){return!1})):[],u=[],n.forEach((function(e,t){var n=0;e.weights.forEach((function(e){var r="quantization"in e?e.quantization.dtype:e.dtype,c=PS[r]*Ub(e.shape),l=function(){i[t]=!0,null==o[t]&&(o[t]=[]),o[t].push({manifestEntry:e,groupOffset:n,sizeBytes:c})};null!=a?a.forEach((function(t,n){t===e.name&&(l(),s[n]=!0)})):l(),u.push(e.name),n+=c}))})),s.every((function(e){return e}))){t.next=10;break}throw c=a.filter((function(e,t){return!s[t]})),new Error("Could not find weights in manifest with names: "+"".concat(c.join(", "),". \n")+"Manifest JSON has weights with names: "+"".concat(u.join(", "),"."));case 10:return l=i.reduce((function(e,t,n){return t&&e.push(n),e}),[]),f=[],l.forEach((function(e){n[e].paths.forEach((function(e){var t=r+(r.endsWith("/")?"":"/")+e;f.push(t)}))})),t.next=15,e(f);case 15:return h=t.sent,d={},p=0,l.forEach((function(e){for(var t=n[e].paths.length,r=0,a=0;a<t;a++)r+=h[p+a].byteLength;for(var i=new ArrayBuffer(r),s=new Uint8Array(i),u=0,c=0;c<t;c++){var l=new Uint8Array(h[p+c]);s.set(l,u),u+=l.byteLength}o[e].forEach((function(e){var t=zS(i.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)d[n]=t[n]})),p+=t})),t.abrupt("return",d);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}YS.registerSaveRouter((function(e){return Nk().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(WN.URL_SCHEME)?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new WN(e)}(e.slice(WN.URL_SCHEME.length)):null}));var eT=function(){function e(t,n){if(B(this,e),this.DEFAULT_METHOD="POST",null==n&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,null!=n.fetchFunc?(Fb("function"===typeof n.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=n.fetchFunc):this.fetch=Nk().platform.fetch,Fb(null!=t&&t.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(t)&&Fb(2===t.length,(function(){return"URL paths for http must have a length of 2, "+"(actual length is ".concat(t.length,").")})),this.path=t,null!=n.requestInit&&null!=n.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return K(e,[{key:"save",value:function(){var e=Rt(Ot().mark((function e(t){var n,r,a,i;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");case 2:return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],a={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:r},null!=t.signature&&(a.signature=t.signature),null!=t.userDefinedMetadata&&(a.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(a.modelInitializer=t.modelInitializer),n.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),null!=t.weightData&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),e.next=13,this.fetch(this.path,n);case 13:if(!(i=e.sent).ok){e.next=18;break}return e.abrupt("return",{modelArtifactsInfo:GS(t),responses:[i]});case 18:throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(i.status,"."));case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Rt(Ot().mark((function e(){var t,n,r,a,i,o,s,u,c,l,f,h,d,p,m,v;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch(this.path,this.requestInit);case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(t.status,". Please verify this URL points to ")+"the model JSON of the model to load.");case 5:return e.prev=5,e.next=8,t.json();case 8:n=e.sent,e.next=16;break;case 11:throw e.prev=11,e.t0=e.catch(5),r="Failed to parse model JSON of response from ".concat(this.path,"."),this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 16:if(a=n.modelTopology,i=n.weightsManifest,o=n.generatedBy,s=n.convertedBy,u=n.format,c=n.signature,l=n.userDefinedMetadata,null!=a||null!=i){e.next=25;break}throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");case 25:if(null==i){e.next=32;break}return e.next=28,this.loadWeights(i);case 28:d=e.sent,p=te(d,2),f=p[0],h=p[1];case 32:return m={modelTopology:a,weightSpecs:f,weightData:h,generatedBy:o,convertedBy:s,format:u},null!=c&&(m.signature=c),null!=l&&(m.userDefinedMetadata=l),(v=n.modelInitializer)&&(m.modelInitializer=v),e.abrupt("return",m);case 38:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(){var e=Rt(Ot().mark((function e(t){var n,r,a,i,o,s,u,c,l,f,h,d,p,m,v,y,g,b,k;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Array.isArray(this.path)?this.path[1]:this.path,r=tT(n),a=te(r,2),i=a[0],o=a[1],s=this.weightPathPrefix||i,u=[],c=ae(t);try{for(c.s();!(l=c.n()).done;)f=l.value,u.push.apply(u,U(f.weights))}catch(zP){c.e(zP)}finally{c.f()}h=[],d=[],p=ae(t);try{for(p.s();!(m=p.n()).done;){v=m.value,y=ae(v.paths);try{for(y.s();!(g=y.n()).done;)b=g.value,null!=this.weightUrlConverter?d.push(this.weightUrlConverter(b)):h.push(s+b+o)}catch(zP){y.e(zP)}finally{y.f()}}}catch(zP){p.e(zP)}finally{p.f()}if(!this.weightUrlConverter){e.next=19;break}return e.t0=h.push,e.t1=h,e.t2=U,e.next=16,Promise.all(d);case 16:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4);case 19:return e.next=21,YN(h,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});case 21:return k=e.sent,e.abrupt("return",[u,WS(k)]);case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function tT(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}function nT(e){return null!=e.match(eT.URL_SCHEME_REGEX)}eT.URL_SCHEME_REGEX=/^https?:\/\//;var rT=function(e,t){if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;return(Array.isArray(e)?e.every((function(e){return nT(e)})):nT(e))?aT(e,t):null};function aT(e,t){return new eT(e,t)}function iT(e,t){return aT(e,t)}YS.registerSaveRouter(rT),YS.registerLoadRouter(rT);var oT=function(){function e(t){B(this,e),this.modelArtifacts=t}return K(e,[{key:"load",value:function(){var e=Rt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.modelArtifacts);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),sT=function(){function e(t){B(this,e),this.saveHandler=t}return K(e,[{key:"save",value:function(){var e=Rt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.saveHandler(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function uT(e,t,n,r){return 1===arguments.length?null!=e.modelTopology||null!=e.weightSpecs?new oT(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new oT({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new oT({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))}function cT(e){return new sT(e)}var lT=DS({matMul_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=IS(e,"a","matMul"),i=IS(t,"b","matMul"),o=te(fS(a,i),2),s={a:a=o[0],b:i=o[1]},u={transposeA:n,transposeB:r};return kS.runKernel(Qk,s,u)}});var fT=DS({oneHot_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));var a={indices:IS(e,"indices","oneHot","int32")},i={depth:t,onValue:n,offValue:r};return kS.runKernel(Nx,a,i)}});var hT=DS({transpose_:function(e,t){var n=IS(e,"x","transpose");if(null==t&&(t=n.shape.map((function(e,t){return t})).reverse()),Fb(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of perm ".concat(t,".")})),t.forEach((function(e){Fb(e>=0&&e<n.rank,(function(){return"All entries in 'perm' must be between 0 and ".concat(n.rank-1)+" but got ".concat(t)}))})),n.rank<=1)return n.clone();var r={x:n},a={perm:t};return kS.runKernel(pE,r,a)}});var dT,pT=DS({confusionMatrix_:function(e,t,n){var r=IS(e,"labels","confusionMatrix"),a=IS(t,"predictions","confusionMatrix");Fb(null==n||n>0&&Number.isInteger(n),(function(){return"If provided, numClasses must be a positive integer, "+"but got ".concat(n)})),Fb(1===r.rank,(function(){return"Expected the rank of labels to be 1, but got ".concat(r.rank)})),Fb(1===a.rank,(function(){return"Expected the rank of predictions to be 1, "+"but got ".concat(a.rank)})),Fb(r.shape[0]===a.shape[0],(function(){return"Mismatch in the number of examples: "+"".concat(r.shape[0]," vs. ").concat(a.shape[0],". ")+"Labels and predictions should have the same number of elements."})),Fb(n>0&&Number.isInteger(n),(function(){return"numClasses is required to be a positive integer, but got "+"".concat(n)}));var i=fT(jN(r,"int32"),n),o=fT(jN(a,"int32"),n),s=hT(i),u=lT(s,o);return jN(u,"int32")}});function mT(e,t,n){if(zb(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var r=NS(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return MS(e,t,r,n)}function vT(e,t){return yT.apply(this,arguments)}function yT(){return yT=Rt(Ot().mark((function e(t,n){var r,a,i,o,s,u,c,l,f,h,d,p,m,v,y,g,b;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=IS(t,"img","toPixels"),t instanceof tS||(r=jN(a=r,"int32"),a.dispose()),2===r.rank||3===r.rank){e.next=4;break}throw new Error("toPixels only supports rank 2 or 3 tensors, got rank ".concat(r.rank,"."));case 4:if(i=r.shape.slice(0,2),o=te(i,2),s=o[0],u=o[1],!((c=2===r.rank?1:r.shape[2])>4||2===c)){e.next=8;break}throw new Error("toPixels only supports depth of size "+"1, 3 or 4 but got ".concat(c));case 8:if("float32"===r.dtype||"int32"===r.dtype){e.next=10;break}throw new Error("Unsupported type for toPixels: ".concat(r.dtype,".")+" Please use float32 or int32 tensors.");case 10:return e.next=12,r.data();case 12:l=e.sent,f="float32"===r.dtype?255:1,h=new Uint8ClampedArray(u*s*4),d=0;case 16:if(!(d<s*u)){e.next=41;break}p=[0,0,0,255],m=0;case 19:if(!(m<c)){e.next=33;break}if(v=l[d*c+m],"float32"!==r.dtype){e.next=26;break}if(!(v<0||v>1)){e.next=24;break}throw new Error("Tensor values for a float32 Tensor must be in the "+"range [0 - 1] but encountered ".concat(v,"."));case 24:e.next=29;break;case 26:if("int32"!==r.dtype){e.next=29;break}if(!(v<0||v>255)){e.next=29;break}throw new Error("Tensor values for a int32 Tensor must be in the "+"range [0 - 255] but encountered ".concat(v,"."));case 29:1===c?(p[0]=v*f,p[1]=v*f,p[2]=v*f):p[m]=v*f;case 30:m++,e.next=19;break;case 33:h[(y=4*d)+0]=Math.round(p[0]),h[y+1]=Math.round(p[1]),h[y+2]=Math.round(p[2]),h[y+3]=Math.round(p[3]);case 38:++d,e.next=16;break;case 41:return null!=n&&(n.width=u,n.height=s,g=n.getContext("2d"),b=new ImageData(h,u,s),g.putImageData(b,0,0)),r!==t&&r.dispose(),e.abrupt("return",h);case 44:case"end":return e.stop()}}),e)}))),yT.apply(this,arguments)}var gT=DS({fromPixels_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,a=!1,i=!1,o=!1,s=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!==typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!==typeof HTMLVideoElement&&e instanceof HTMLVideoElement)a=!0;else if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement)i=!0;else if(null!=e.getContext)o=!0;else{if(!("undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, "+"but was ".concat(e.constructor.name));s=!0}if(a){if(a&&e.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.")}if(null!=_E(kE,kS.backendName)){var u={pixels:e},c={numChannels:t};return kS.runKernel(kE,u,c)}var l,f,h=te(a?[e.videoWidth,e.videoHeight]:[e.width,e.height],2),d=h[0],p=h[1];if(o?l=e.getContext("2d").getImageData(0,0,d,p).data:r||n?l=e.data:(i||a||s)&&(null==dT&&(dT=document.createElement("canvas").getContext("2d")),dT.canvas.width=d,dT.canvas.height=p,dT.drawImage(e,0,0,d,p),l=dT.getImageData(0,0,d,p).data),4===t)f=new Int32Array(l);else{var m=d*p;f=new Int32Array(m*t);for(var v=0;v<m;v++)for(var y=0;y<t;++y)f[v*t+y]=l[4*v+y]}return mT(f,[p,d,t],"int32")}});function bT(e,t){var n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(r,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(t.shape[r-1]," vs. ").concat(n));if(0===Ub(e.shape))throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(e.shape,"."));for(var a=t.shape,i=a[a.length-1],o=1,s=0;s<a.length-1;++s)o*=a[s];var u=e.shape,c=a.slice();c.pop();for(var l=1,f=i;f<n;++f)l*=u[f],c.push(u[f]);var h=[].concat(U(dk(e.shape).map((function(e){return e/l}))),[1]).slice(0,i);return[c,o,l,h]}function kT(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + "+"shape[sliceDim:], got updates.shape: ".concat(n.shape)+", indices.shape: ".concat(t.shape,", shape: ").concat(e)+", sliceDim: ".concat(r,", and batchDim: ").concat(a,".");if(n.rank<a)throw new Error(i+" update.rank < ".concat(a,". "));if(e.length<r+(n.rank-a))throw new Error(i+" Output shape length < ".concat(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(i+" update.rank != ".concat(a+e.length-r));for(var o=0;o<a;++o)if(n.shape[o]!==t.shape[o])throw new Error(i+" updates.shape[".concat(o,"] (").concat(n.shape[o],") != indices.shape[").concat(o,"] (").concat(t.shape[o],")."));for(var s=0;s<n.rank-a;++s)if(n.shape[s+a]!==e[s+r])throw new Error(i+" updates.shape[".concat(s+a,"] (").concat(n.shape[s+a],") != shape[").concat(s+a,"] (").concat(e[s+a],")"))}function wT(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+" but the rank was ".concat(e.rank,"."));if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(0===e.size)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}kT(n,t,e)}function xT(e,t,n){for(var r=t.shape.length,a=r>1?t.shape[r-1]:1,i=n.length,o=1,s=a;s<i;++s)o*=n[s];var u=a<1?1:a;return{sliceRank:a,numUpdates:Ub(t.shape)/u,sliceSize:o,strides:[].concat(U(dk(n.slice(0,a))),[1]),outputSize:Ub(n)}}function ET(e,t,n){var r=e.shape.length;Fb(r===t.length,(function(){return"Error in slice".concat(r,"D: Length of begin ").concat(t," must ")+"match the rank of the array (".concat(r,").")})),Fb(r===n.length,(function(){return"Error in slice".concat(r,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(r,").")}));for(var a=function(a){Fb(t[a]+n[a]<=e.shape[a],(function(){return"Error in slice".concat(r,"D: begin[").concat(a,"] + size[").concat(a,"] ")+"(".concat(t[a]+n[a],") would overflow input.shape[").concat(a,"] (").concat(e.shape[a],")")}))},i=0;i<r;++i)a(i)}function ST(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function NT(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function TT(e,t,n,r){for(var a=U(e),i=a.length;i<r.length;i++)a.push(1);for(var o=0;o<n;o++)0===o?a[t]=1:(a.splice(t,0,1),a.pop());return a}function _T(e,t,n){return n<=e?n:n-(t-1)}function IT(e,t){for(var n=[],r=0;r<e;r++)n.push(t+r);return n}function AT(e,t,n,r,a,i,o,s,u){var c=e.length,l=new Array(c),f=new Array(c),h=new Array(c);if(t.length&&n>0){var d=t[0],p=n+1;l=CT(o,d,p,r,e),f=DT(s,d,p,a,e),h=TT(i,d,p,e)}else for(var m=0;m<c;m++)l[m]=MT(o,r,i,e,m,u),f[m]=RT(s,a,i,e,m,u),h[m]=OT(i,m,u);return{begin:l,end:f,strides:h}}function CT(e,t,n,r,a){for(var i=U(a),o=IT(n,t),s=0;s<i.length;s++)if(o.indexOf(s)>-1)i[s]=0;else{var u=_T(t,n,s),c=r[u];e&1<<u&&(c=0),i[s]=c}return i}function DT(e,t,n,r,a){for(var i=U(a),o=IT(n,t),s=0;s<i.length;s++)if(o.indexOf(s)>-1)i[s]=Number.MAX_SAFE_INTEGER;else{var u=_T(t,n,s),c=r[u];e&1<<u&&(c=Number.MAX_SAFE_INTEGER),i[s]=c}for(var l=0;l<i.length;l++){var f=a[l];i[l]<0&&(i[l]+=f),i[l]=Ob(0,i[l],a[l])}return i}function OT(e,t,n){var r=e[t];return(n&1<<t||null==r)&&(r=1),r}function MT(e,t,n,r,a,i){var o=t[a],s=n[a]||1;(e&1<<a||i&1<<a||null==o)&&(o=s>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var u=r[a];return o<0&&(o+=u),o=Ob(0,o,u-1)}function RT(e,t,n,r,a,i){var o=t[a],s=n[a]||1;(e&1<<a||i&1<<a||null==o)&&(o=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var u=r[a];return o<0&&(o+=u),o=s>0?Ob(0,o,u):Ob(-1,o,u-1)}function PT(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(var i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function LT(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function FT(e,t,n){var r,a,i=e.shape.length;return(r="number"===typeof t?[t].concat(U(new Array(i-1).fill(0))):t.length<i?t.concat(new Array(i-t.length).fill(0)):t.slice()).forEach((function(e){Fb(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),a=(a=null==n?new Array(i).fill(-1):"number"===typeof n?[n].concat(U(new Array(i-1).fill(-1))):n.length<i?n.concat(new Array(i-n.length).fill(-1)):n).map((function(t,n){return t>=0?t:(Fb(-1===t,(function(){return"Negative size values should be exactly -1 but got "+"".concat(t," for the slice() size at index ").concat(n,".")})),e.shape[n]-r[n])})),[r,a]}function jT(e,t,n,r,a,i,o,s,u){var c=t.slice(),l=n.slice(),f=r;null==r&&(f=new Array(c.length));var h=ST(o);if(h.length>1)throw new Error("Multiple ellipses in slice is not allowed.");if(0!==o&&0!==s)throw new Error("Using both ellipsisMask and newAxisMask is not yet supported.");if(0!==o&&0!==u)throw new Error("Using both ellipsisMask and shrinkAxisMask is not yet supported.");var d=e.length-c.length,p=ST(s),m=e.slice();p.forEach((function(e){c[e]=0,l[e]=1,m.splice(e,0,1)}));var v=AT(m,h,d,c,l,f,a,i,o),y=v.begin,g=v.end,b=v.strides;c=y,l=g,f=b;var k=ST(u);k.forEach((function(e){l[e]=c[e]+1,f[e]=1}));var w=NT(c,l,f),x=w.filter((function(e,t){return-1===k.indexOf(t)})),E=f.every((function(e){return 1===e}));return{nonStrided:E,$begin:c,$end:l,$strides:f,size:w,newShape:m,outShape:x}}var zT=function(){function e(){B(this,e)}return K(e,[{key:"getClassName",value:function(){return this.constructor.className}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),e}(),VT=function(){function e(){B(this,e),this.classNameMap={}}return K(e,null,[{key:"getMap",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"register",value:function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]}}]),e}();function UT(e){Fb(null!=e.className,(function(){return"Class being registered does not have the static className property defined."})),Fb("string"===typeof e.className,(function(){return"className is required to be a string, but got type "+typeof e.className})),Fb(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),VT.register(e)}var BT=.001,qT=.1;function HT(e,t,n){return null==n&&(n=WT()),KT(e,t,(function(e,t){return XT(e,t,n)}))}function WT(){return 32===kS.backend.floatPrecision()?BT:qT}function KT(e,t,n){var r=!0;if((ak(e)||ak(t))&&(r=!1),ak(e)&&ak(t)&&(r=!0),r){var a=e.constructor.name,i=t.constructor.name;if(a!==i)throw new Error("Arrays are of different type. Actual: ".concat(a,". ")+"Expected: ".concat(i))}if(Array.isArray(e)&&Array.isArray(t)){var o=NS(e),s=NS(t);if(!qb(o,s))throw new Error("Arrays have different shapes. "+"Actual: [".concat(o,"]. Expected: [").concat(s,"]"))}var u=ak(e)?e:Vb(e),c=ak(t)?t:Vb(t);if(u.length!==c.length)throw new Error("Arrays have different lengths actual: ".concat(u.length," vs ")+"expected: ".concat(c.length,".\n")+"Actual:   ".concat(u,".\n")+"Expected: ".concat(c,"."));for(var l=0;l<c.length;++l){var f=u[l],h=c[l];if(!n(f,h))throw new Error("Arrays differ: actual[".concat(l,"] = ").concat(f,", expected[").concat(l,"] = ").concat(h,".\n")+"Actual:   ".concat(u,".\n")+"Expected: ".concat(c,"."))}}function GT(e,t){e().then((function(){return t.fail()}),(function(){return t()}))}function QT(e,t){var n="string"===typeof t||"number"===typeof t||"boolean"===typeof t?[t]:t;return sk(e)||sk(e[0])||sk(t)||sk(t[0])?KT(e,n,(function(e,t){return e==t})):KT(e,t,(function(e,t){return XT(e,t,0)}))}function YT(e,t,n){if(null==n&&(n=WT()),!XT(e,t,n))throw new Error("Numbers differ: actual === ".concat(e,", expected === ").concat(t))}function XT(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}function $T(e,t,n){for(var r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error("Value out of range:".concat(e[r]," low: ").concat(t,", high: ").concat(n))}function JT(e,t){expect(new Float32Array(e)).toEqual(new Float32Array(t))}function ZT(e){for(var t=0;t<e.length;t++){var n=e[t];Array.isArray(n)?ZT(n):e[t]=VE(n)}return e}var e_="3.1.0";function t_(){Nk().set("PROD",!0)}function n_(){Nk().set("DEBUG",!0)}function r_(){Nk().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function a_(e){Nk().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function i_(){kS.disposeVariables()}function o_(){return kS}function s_(){return kS.memory()}function u_(e){return kS.profile(e)}function c_(e,t){return kS.tidy(e,t)}function l_(e){pS(e).forEach((function(e){return e.dispose()}))}function f_(e){return kS.keep(e)}function h_(e){return kS.time(e)}function d_(e){return kS.setBackend(e)}function p_(){return kS.ready()}function m_(){return kS.backendName}function v_(e){kS.removeBackend(e)}function y_(e){return kS.findBackend(e)}function g_(e){return kS.findBackendFactory(e)}function b_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return kS.registerBackend(e,t,n)}function k_(){return kS.backend}function w_(e,t){Nk().setPlatform(e,t)}!function(e){e}(a_);var x_=DS({add_:function(e,t){var n=IS(e,"a","add"),r=IS(t,"b","add"),a=te(fS(n,r),2),i={a:n=a[0],b:r=a[1]};return kS.runKernel(Mk,i)}});var E_=DS({floorDiv_:function(e,t){var n=IS(e,"a","floorDiv"),r=IS(t,"b","floorDiv"),a=te(fS(n,r),2),i={a:n=a[0],b:r=a[1]};return kS.runKernel(Pw,i)}});var S_=DS({div_:function(e,t){var n=IS(e,"a","div"),r=IS(t,"b","div"),a=te(fS(n,r),2);if(n=a[0],r=a[1],"int32"===n.dtype&&"int32"===r.dtype)return E_(n,r);var i={a:n,b:r};return kS.runKernel(Ew,i,{})}});var N_=DS({mul_:function(e,t){var n=IS(e,"a","mul"),r=IS(t,"b","mul"),a=te(fS(n,r),2),i={a:n=a[0],b:r=a[1]};return kS.runKernel(gx,i)}});var T_=DS({sqrt_:function(e){var t={x:IS(e,"x","sqrt")};return kS.runKernel(eE,t)}});var __=DS({square_:function(e){var t=IS(e,"x","square");return kS.runKernel("Square",{x:t},{})}});var I_=DS({zerosLike_:function(e){var t={x:IS(e,"x","zerosLike")};return kS.runKernel(gE,t)}});function A_(e){return Fb(fk(e),(function(){return"The f passed in grad(f) must be a function"})),function(t,n){var r=IS(t,"x","tf.grad","string_or_numeric"),a=null!=n?IS(n,"dy","tf.grad"):null;return kS.tidy((function(){var t=kS.gradients((function(){return e(r)}),[r],a),n=t.value,i=t.grads;return null!=a&&jb(n.shape,a.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),P_(i),i[0]}))}}function C_(e){return Fb(fk(e),(function(){return"The f passed in grads(f) must be a function"})),function(t,n){Fb(Array.isArray(t),(function(){return"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s"}));var r=AS(t,"args","tf.grads","string_or_numeric"),a=null!=n?IS(n,"dy","tf.grads"):null;return kS.tidy((function(){var t=kS.gradients((function(){return e.apply(void 0,U(r))}),r,a),n=t.value,i=t.grads;return null!=a&&jb(n.shape,a.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),P_(i),i}))}}function D_(e){return Fb(fk(e),(function(){return"The f passed in valueAndGrad(f) must be a function"})),function(t,n){Fb(t instanceof tS,(function(){return"The x passed in valueAndGrad(f)(x) must be a tensor"})),Fb(null==n||n instanceof tS,(function(){return"The dy passed in valueAndGrad(f)(x, dy) must be a tensor"}));var r=kS.gradients((function(){return e(t)}),[t],n),a=r.grads,i=r.value;return P_(a),{grad:a[0],value:i}}}function O_(e){return Fb(fk(e),(function(){return"The f passed in valueAndGrads(f) must be a function"})),function(t,n){Fb(Array.isArray(t)&&t.every((function(e){return e instanceof tS})),(function(){return"The args passed in valueAndGrads(f)(args) must be array of tensors"})),Fb(null==n||n instanceof tS,(function(){return"The dy passed in valueAndGrads(f)(args, dy) must be a tensor"}));var r=kS.gradients((function(){return e.apply(void 0,U(t))}),t,n);return null!=n&&jb(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),P_(r.grads),r}}function M_(e,t){Fb(fk(e),(function(){return"The f passed in variableGrads(f) must be a function"})),Fb(null==t||Array.isArray(t)&&t.every((function(e){return e instanceof sS})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=t;if(!n)for(var r in t=[],kS.registeredVariables)t.push(kS.registeredVariables[r]);var a=n?t.filter((function(e){return!e.trainable})):null,i=t.length;t=t.filter((function(e){return e.trainable})),Fb(t.length>0,(function(){return"variableGrads() expects at least one of the input variables to "+"be trainable, but none of the ".concat(i," variables is ")+"trainable."}));var o=kS.gradients(e,t,null,!0),s=o.value,u=o.grads;Fb(u.some((function(e){return null!=e})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),Fb(0===s.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it "+"returned a rank-".concat(s.rank," tensor")}));var c={};return t.forEach((function(e,t){null!=u[t]&&(c[e.name]=u[t])})),null!=a&&a.forEach((function(e){return c[e.name]=null})),{value:s,grads:c}}function R_(e){return kS.customGrad(e)}function P_(e){var t=e.filter((function(e){return null==e})).length;if(t>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}function L_(e,t){if((ak(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&ak(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return MS(e,[],[],t)}var F_=function(e){Q(n,e);var t=J(n);function n(){return B(this,n),t.apply(this,arguments)}return K(n,[{key:"minimize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this.computeGradients(e,n),a=r.value,i=r.grads;if(null!=n){var o=n.map((function(e){return{name:e.name,tensor:i[e.name]}}));this.applyGradients(o)}else this.applyGradients(i);return l_(i),t?a:(a.dispose(),null)}},{key:"iterations",get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}},{key:"incrementIterations",value:function(){this.iterations_=this.iterations+1}},{key:"computeGradients",value:function(e,t){return M_(e,t)}},{key:"dispose",value:function(){null!=this.iterations_&&l_(this.iterations_)}},{key:"saveIterations",value:function(){var e=Rt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==this.iterations_&&(this.iterations_=0),e.abrupt("return",{name:"iter",tensor:L_(this.iterations_,"int32")});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getWeights",value:function(){var e=Rt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for this optimizer yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Rt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for this optimizer class "+"".concat(this.getClassName()));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"extractIterations",value:function(){var e=Rt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t[0].tensor.data();case 2:return this.iterations_=e.sent[0],e.abrupt("return",t.slice(1));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(zT);Object.defineProperty(F_,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var j_=function(e){Q(n,e);var t=J(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return B(this,n),(a=t.call(this)).learningRate=e,a.rho=r,a.epsilon=i,a.accumulatedGrads=[],a.accumulatedUpdates=[],null==i&&(a.epsilon=kS.backend.epsilon()),a}return K(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=kS.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:"".concat(n,"/accum_grad"),variable:c_((function(){return I_(a).variable(false)}))}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:"".concat(n,"/accum_var"),variable:c_((function(){return I_(a).variable(false)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable,s=t.accumulatedUpdates[r].variable;c_((function(){var e=x_(N_(o,t.rho),N_(__(i),1-t.rho)),n=N_(S_(T_(x_(s,t.epsilon)),T_(x_(o,t.epsilon))),i),r=x_(N_(s,t.rho),N_(__(n),1-t.rho));o.assign(e),s.assign(r);var u=x_(N_(n,-t.learningRate),a);a.assign(u)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedUpdates&&(l_(this.accumulatedGrads.map((function(e){return e.variable}))),l_(this.accumulatedUpdates.map((function(e){return e.variable}))))}},{key:"getWeights",value:function(){var e=Rt(Ot().mark((function e(){var t;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat(U(this.accumulatedGrads),U(this.accumulatedUpdates)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Rt(Ot().mark((function e(t){var n;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=t.length/2,!1,this.accumulatedGrads=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedUpdates=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}]),n}(F_);function z_(e,t,n){var r={shape:e,value:t,dtype:n};return kS.runKernel(Ow,{},r)}j_.className="Adadelta",UT(j_);var V_=function(e){Q(n,e);var t=J(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return B(this,n),(r=t.call(this)).learningRate=e,r.initialAccumulatorValue=a,r.accumulatedGrads=[],r}return K(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=kS.registeredVariables[n];if(null==t.accumulatedGrads[r]){t.accumulatedGrads[r]={originalName:"".concat(n,"/accumulator"),variable:c_((function(){return z_(a.shape,t.initialAccumulatorValue).variable(false)}))}}var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable;c_((function(){var e=x_(o,__(i));o.assign(e);var n=x_(N_(S_(i,T_(x_(e,kS.backend.epsilon()))),-t.learningRate),a);a.assign(n)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedGrads&&l_(this.accumulatedGrads.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=Rt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulatedGrads.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Rt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulatedGrads=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}]),n}(F_);V_.className="Adagrad",UT(V_);var U_=DS({pow_:function(e,t){var n=IS(e,"base","pow"),r=IS(t,"exp","pow"),a=te(fS(n,r),2),i={a:n=a[0],b:r=a[1]};return kS.runKernel(Ax,i)}});var B_=DS({sub_:function(e,t){var n=IS(e,"a","sub"),r=IS(t,"b","sub"),a=te(fS(n,r),2),i={a:n=a[0],b:r=a[1]};return kS.runKernel(sE,i)}}),q_=function(e){Q(n,e);var t=J(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return B(this,n),(i=t.call(this)).learningRate=e,i.beta1=r,i.beta2=a,i.epsilon=o,i.accumulatedFirstMoment=[],i.accumulatedSecondMoment=[],c_((function(){i.accBeta1=L_(r).variable(),i.accBeta2=L_(a).variable()})),null==o&&(i.epsilon=kS.backend.epsilon()),i}return K(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);c_((function(){var r=B_(1,t.accBeta1),a=B_(1,t.accBeta2);n.forEach((function(n,i){var o=kS.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:c_((function(){return I_(o).variable(false)}))}),null==t.accumulatedSecondMoment[i]&&(t.accumulatedSecondMoment[i]={originalName:"".concat(n,"/v"),variable:c_((function(){return I_(o).variable(false)}))});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[i].variable,c=t.accumulatedSecondMoment[i].variable,l=x_(N_(u,t.beta1),N_(s,1-t.beta1)),f=x_(N_(c,t.beta2),N_(__(s),1-t.beta2)),h=S_(l,r),d=S_(f,a);u.assign(l),c.assign(f);var p=x_(N_(S_(h,x_(T_(d),t.epsilon)),-t.learningRate),o);o.assign(p)}})),t.accBeta1.assign(N_(t.accBeta1,t.beta1)),t.accBeta2.assign(N_(t.accBeta2,t.beta2))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&l_(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedSecondMoment&&l_(this.accumulatedSecondMoment.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=Rt(Ot().mark((function e(){var t;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat(U(this.accumulatedFirstMoment),U(this.accumulatedSecondMoment)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Rt(Ot().mark((function e(t){var n,r=this;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,c_((function(){r.accBeta1.assign(U_(r.beta1,r.iterations_+1)),r.accBeta2.assign(U_(r.beta2,r.iterations_+1))})),n=t.length/2,!1,this.accumulatedFirstMoment=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedSecondMoment=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}]),n}(F_);q_.className="Adam",UT(q_);var H_=DS({abs_:function(e){var t=IS(e,"x","abs");if("complex64"===t.dtype){var n={x:t};return kS.runKernel(nw,n)}var r={x:t};return kS.runKernel(Ck,r)}});function W_(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var i=n-1-a,o=e[i]||1;(t[t.length-1-a]||1)>1&&1===o&&r.unshift(i)}return r}function K_(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],i=t.length-r-1,o=t[i];(null==a||1===a&&o>1)&&n.unshift(i)}return n}function G_(e,t){for(var n=[],r=Math.max(e.length,t.length),a=0;a<r;a++){var i=e[e.length-a-1];null==i&&(i=1);var o=t[t.length-a-1];if(null==o&&(o=1),1===i)n.unshift(o);else if(1===o)n.unshift(i);else{if(i!==o){var s="Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,".");throw Error(s)}n.unshift(i)}}return n}var Q_=DS({maximum_:function(e,t){var n=IS(e,"a","maximum"),r=IS(t,"b","maximum"),a=te(fS(n,r),2);n=a[0],r=a[1],"bool"===n.dtype&&(n=jN(n,"int32"),r=jN(r,"int32")),G_(n.shape,r.shape);var i={a:n,b:r};return kS.runKernel(ox,i)}}),Y_=function(e){Q(n,e);var t=J(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return B(this,n),(i=t.call(this)).learningRate=e,i.beta1=r,i.beta2=a,i.epsilon=o,i.decay=s,i.accumulatedFirstMoment=[],i.accumulatedWeightedInfNorm=[],c_((function(){i.iteration=L_(0).variable(),i.accBeta1=L_(r).variable()})),null==o&&(i.epsilon=kS.backend.epsilon()),i}return K(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);c_((function(){var r=B_(1,t.accBeta1),a=S_(-t.learningRate,x_(N_(t.iteration,t.decay),1));n.forEach((function(n,i){var o=kS.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:I_(o).variable(false)}),null==t.accumulatedWeightedInfNorm[i]&&(t.accumulatedWeightedInfNorm[i]={originalName:"".concat(n,"/v"),variable:I_(o).variable(false)});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[i].variable,c=t.accumulatedWeightedInfNorm[i].variable,l=x_(N_(u,t.beta1),N_(s,1-t.beta1)),f=N_(c,t.beta2),h=H_(s),d=Q_(f,h);u.assign(l),c.assign(d);var p=x_(N_(S_(a,r),S_(l,x_(d,t.epsilon))),o);o.assign(p)}})),t.iteration.assign(x_(t.iteration,1)),t.accBeta1.assign(N_(t.accBeta1,t.beta1))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&l_(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedWeightedInfNorm&&l_(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=Rt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Rt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}]),n}(F_);Y_.className="Adamax",UT(Y_);var X_=function(e){Q(n,e);var t=J(n);function n(e){var r;return B(this,n),(r=t.call(this)).learningRate=e,r.setLearningRate(e),r}return K(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);n.forEach((function(n,r){var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var i=kS.registeredVariables[n];c_((function(){var e=x_(N_(t.c,a),i);i.assign(e)}))}})),this.incrementIterations()}},{key:"setLearningRate",value:function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=f_(L_(-e))}},{key:"dispose",value:function(){this.c.dispose()}},{key:"getWeights",value:function(){var e=Rt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0]);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Rt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:if(0===(t=e.sent).length){e.next=5;break}throw new Error("SGD optimizer does not have settable weights.");case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate)}}]),n}(F_);X_.className="SGD",UT(X_);var $_=function(e){Q(n,e);var t=J(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return B(this,n),(a=t.call(this,e)).learningRate=e,a.momentum=r,a.useNesterov=i,a.accumulations=[],a.m=L_(a.momentum),a}return K(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=kS.registeredVariables[n];if(null==t.accumulations[r]){t.accumulations[r]={originalName:"".concat(n,"/momentum"),variable:c_((function(){return I_(a).variable(false)}))}}var i=t.accumulations[r].variable,o=Array.isArray(e)?e[r].tensor:e[n];null!=o&&c_((function(){var e,n=x_(N_(t.m,i),o);e=t.useNesterov?x_(N_(t.c,x_(o,N_(n,t.m))),a):x_(N_(t.c,n),a),i.assign(n),a.assign(e)}))})),this.incrementIterations()}},{key:"dispose",value:function(){this.m.dispose(),null!=this.accumulations&&l_(this.accumulations.map((function(e){return e.variable})))}},{key:"setMomentum",value:function(e){this.momentum=e}},{key:"getWeights",value:function(){var e=Rt(Ot().mark((function e(){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulations.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Rt(Ot().mark((function e(t){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulations=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}]),n}(X_);$_.className="Momentum",UT($_);var J_=function(e){Q(n,e);var t=J(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(B(this,n),(r=t.call(this)).learningRate=e,r.decay=a,r.momentum=i,r.epsilon=o,r.accumulatedMeanSquares=[],r.accumulatedMoments=[],r.accumulatedMeanGrads=[],r.centered=s,null==o&&(r.epsilon=kS.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.");return r}return K(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=kS.registeredVariables[n],i=!1;null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:"".concat(n,"/rms"),variable:c_((function(){return I_(a).variable(i)}))}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:"".concat(n,"/momentum"),variable:c_((function(){return I_(a).variable(i)}))}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:"".concat(n,"/mg"),variable:c_((function(){return I_(a).variable(i)}))});var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var s=t.accumulatedMeanSquares[r].variable,u=t.accumulatedMoments[r].variable;c_((function(){var e=x_(N_(s,t.decay),N_(__(o),1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,i=x_(N_(n,t.decay),N_(o,1-t.decay)),c=S_(N_(o,t.learningRate),T_(B_(e,x_(__(i),t.epsilon)))),l=x_(N_(u,t.momentum),c);s.assign(e),n.assign(i),u.assign(l);var f=B_(a,l);a.assign(f)}else{var h=x_(N_(s,t.decay),N_(__(o),1-t.decay)),d=x_(N_(u,t.momentum),S_(N_(o,t.learningRate),T_(x_(h,t.epsilon))));s.assign(h),u.assign(d);var p=B_(a,d);a.assign(p)}}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedMeanSquares&&l_(this.accumulatedMeanSquares.map((function(e){return e.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&l_(this.accumulatedMeanGrads.map((function(e){return e.variable}))),null!=this.accumulatedMoments&&l_(this.accumulatedMoments.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=Rt(Ot().mark((function e(){var t;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat(U(this.accumulatedMeanSquares),U(this.accumulatedMoments)),this.centered&&t.push.apply(t,U(this.accumulatedMeanGrads)),e.next=4,this.saveIterations();case 4:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Rt(Ot().mark((function e(t){var n,r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=this.centered?t.length/3:t.length/2,r=!1,this.accumulatedMeanSquares=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.accumulatedMoments=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.centered&&(this.accumulatedMeanGrads=t.slice(2*n,3*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}]),n}(F_);J_.className="RMSProp",UT(J_);var Z_=DS({acos_:function(e){var t={x:IS(e,"x","acos")};return kS.runKernel(Dk,t)}});var eI=DS({acosh_:function(e){var t={x:IS(e,"x","acosh")};return kS.runKernel(Ok,t)}});var tI=DS({addN_:function(e){Fb(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),Fb(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+"".concat(e.length)}));var t=e.map((function(e,t){return IS(e,"tensors".concat(t),"addN")})),n=t[0];t.forEach((function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(e){if(!qb(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var r=t;return kS.runKernel(Rk,r)}});var nI=DS({all_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:IS(e,"x","all","bool")},a={axis:t,keepDims:n};return kS.runKernel(Pk,r,a)}});var rI=DS({any_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:IS(e,"x","any","bool")},a={axis:t,keepDims:n};return kS.runKernel(Lk,r,a)}});var aI=DS({argMax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={x:IS(e,"x","argMax")},r={axis:t};return kS.runKernel(Fk,n,r)}});var iI=DS({argMin_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={x:IS(e,"x","argMin")},r={axis:t};return kS.runKernel(jk,n,r)}});var oI=DS({asin_:function(e){var t={x:IS(e,"x","asin")};return kS.runKernel(zk,t)}});var sI=DS({asinh_:function(e){var t={x:IS(e,"x","asinh")};return kS.runKernel(Vk,t)}});var uI=DS({atan_:function(e){var t={x:IS(e,"x","atan")};return kS.runKernel(Uk,t)}});var cI=DS({atan2_:function(e,t){var n=IS(e,"a","atan2"),r=IS(t,"b","atan2"),a=te(fS(n,r),2),i={a:n=a[0],b:r=a[1]};return kS.runKernel(qk,i)}});var lI=DS({atanh_:function(e){var t={x:IS(e,"x","atanh")};return kS.runKernel(Bk,t)}});function fI(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5?arguments[5]:void 0,o=e[3];return pI(e,[].concat(U(t),[o]),n,i,r,null,null,EI(a))}function hI(e,t,n,r,a,i){var o,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",u=te(yI(t),2),c=u[0],l=u[1];if("channelsLast"===s)o=[c,l,e[3],e[3]];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));o=[c,l,e[1],e[1]]}return pI(e,o,n,r,a,i,!1,s)}function dI(e,t,n,r,a,i){var o,s,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC",c=te(gI(t),3),l=c[0],f=c[1],h=c[2];if("NDHWC"===u)s="channelsLast",o=[l,f,h,e[4],e[4]];else{if("NCDHW"!==u)throw new Error("Unknown dataFormat ".concat(u));s="channelsFirst",o=[l,f,h,e[1],e[1]]}return mI(e,o,n,r,a,!1,s,i)}function pI(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",u=-1,c=-1,l=-1,f=-1;if("channelsLast"===s){var h=te(e,4);u=h[0],c=h[1],l=h[2],f=h[3]}else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));var d=te(e,4);u=d[0],f=d[1],c=d[2],l=d[3]}var p,m=te(t,4),v=m[0],y=m[1],g=m[3],b=te(yI(n),2),k=b[0],w=b[1],x=te(yI(r),2),E=x[0],S=x[1],N=bI(v,E),T=bI(y,S),_=function(e,t,n,r,a,i,o,s,u){var c,l,f;if("number"===typeof e){c={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var h=function(e,t,n,r,a){null==r&&(r=vI(e,t,n));var i=e[0],o=e[1],s=kI((i-t+2*r)/n+1,a),u=kI((o-t+2*r)/n+1,a);return[s,u]}([t,n],i,r,e,s);l=h[0],f=h[1]}else if("same"===e){l=Math.ceil(t/r),f=Math.ceil(n/a);var d=Math.max(0,(l-1)*r+i-t),p=Math.max(0,(f-1)*a+o-n),m=Math.floor(d/2),v=d-m,y=Math.floor(p/2);c={top:m,bottom:v,left:y,right:p-y,type:"SAME"}}else if("valid"===e)c={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((t-i+1)/r),f=Math.ceil((n-o+1)/a);else{if("object"!==typeof e)throw Error("Unknown padding parameter: ".concat(e));var g="channelsLast"===u?e[1][0]:e[2][0],b="channelsLast"===u?e[1][1]:e[2][1],k="channelsLast"===u?e[2][0]:e[3][0],w="channelsLast"===u?e[2][1]:e[3][1];c={top:g,bottom:b,left:k,right:w,type:0===g&&0===b&&0===k&&0===w?"VALID":"EXPLICIT"},l=kI((t-i+g+b)/r+1,s),f=kI((n-o+k+w)/a+1,s)}return{padInfo:c,outHeight:l,outWidth:f}}(a,c,l,k,w,N,T,i,s),I=_.padInfo,A=_.outHeight,C=_.outWidth,D=o?g*f:g;return"channelsFirst"===s?p=[u,D,A,C]:"channelsLast"===s&&(p=[u,A,C,D]),{batchSize:u,dataFormat:s,inHeight:c,inWidth:l,inChannels:f,outHeight:A,outWidth:C,outChannels:D,padInfo:I,strideHeight:k,strideWidth:w,filterHeight:v,filterWidth:y,effectiveFilterHeight:N,effectiveFilterWidth:T,dilationHeight:E,dilationWidth:S,inShape:e,outShape:p,filterShape:t}}function mI(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",s=arguments.length>7?arguments[7]:void 0,u=-1,c=-1,l=-1,f=-1,h=-1;if("channelsLast"===o){var d=te(e,5);u=d[0],c=d[1],l=d[2],f=d[3],h=d[4]}else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat ".concat(o));var p=te(e,5);u=p[0],h=p[1],c=p[2],l=p[3],f=p[4]}var m,v=te(t,5),y=v[0],g=v[1],b=v[2],k=v[4],w=te(gI(n),3),x=w[0],E=w[1],S=w[2],N=te(gI(r),3),T=N[0],_=N[1],I=N[2],A=bI(y,T),C=bI(g,_),D=bI(b,I),O=function(e,t,n,r,a,i,o,s,u,c,l){var f,h,d,p;if("number"===typeof e){f={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var m=function(e,t,n,r,a,i){null==a&&(a=vI(e,t,r));var o=e[0],s=e[1],u=e[2],c=kI((o-t+2*a)/r+1,i),l=kI((s-t+2*a)/r+1,i),f=kI((u-t+2*a)/r+1,i);return[c,l,f,n]}([t,n,r,1],s,1,a,e,l);h=m[0],d=m[1],p=m[2]}else if("same"===e){var v=((h=Math.ceil(t/a))-1)*a+s-t,y=((d=Math.ceil(n/i))-1)*i+u-n,g=((p=Math.ceil(r/o))-1)*o+c-r,b=Math.floor(v/2),k=v-b,w=Math.floor(y/2),x=y-w,E=Math.floor(g/2);f={top:w,bottom:x,left:E,right:g-E,front:b,back:k,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: ".concat(e));f={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},h=Math.ceil((t-s+1)/a),d=Math.ceil((n-u+1)/i),p=Math.ceil((r-c+1)/o)}return{padInfo:f,outDepth:h,outHeight:d,outWidth:p}}(a,c,l,f,x,E,S,A,C,D,s),M=O.padInfo,R=O.outDepth,P=O.outHeight,L=O.outWidth,F=i?k*h:k;return"channelsFirst"===o?m=[u,F,R,P,L]:"channelsLast"===o&&(m=[u,R,P,L,F]),{batchSize:u,dataFormat:o,inDepth:c,inHeight:l,inWidth:f,inChannels:h,outDepth:R,outHeight:P,outWidth:L,outChannels:F,padInfo:M,strideDepth:x,strideHeight:E,strideWidth:S,filterDepth:y,filterHeight:g,filterWidth:b,effectiveFilterDepth:A,effectiveFilterHeight:C,effectiveFilterWidth:D,dilationDepth:T,dilationHeight:_,dilationWidth:I,inShape:e,outShape:m,filterShape:t}}function vI(e,t,n){var r=bI(t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:1);return Math.floor((e[0]*(n-1)-n+r)/2)}function yI(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function gI(e){return"number"===typeof e?[e,e,e]:e}function bI(e,t){return t<=1?e:e+(e-1)*(t-1)}function kI(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function wI(e){var t=te(yI(e),3),n=t[0],r=t[1],a=t[2];return 1===n&&1===r&&1===a}function xI(e,t){return wI(e)||wI(t)}function EI(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}var SI=DS({reshape_:function(e,t){var n={x:IS(e,"x","reshape","string_or_numeric")},r={shape:t};return kS.runKernel(Lx,n,r)}});var NI=DS({avgPool_:function(e,t,n,r,a){var i=IS(e,"x","avgPool","float32");Fb(xI(n,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")}));var o=i,s=!1;3===i.rank&&(s=!0,o=SI(i,[1,i.shape[0],i.shape[1],i.shape[2]])),Fb(4===o.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank ".concat(o.rank,".")})),null!=a&&Fb(Hb(r),(function(){return"Error in avgPool: pad must be an integer when using, "+"dimRoundingMode ".concat(a," but got pad ").concat(r,".")}));var u={x:o},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a},l=kS.runKernel(Hk,u,c);return l=jN(l,i.dtype),s?SI(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var TI=DS({avgPool3d_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",o=IS(e,"x","avgPool3d","float32"),s=o,u=!1;4===o.rank&&(u=!0,s=SI(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),Fb(5===s.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),Fb("NDHWC"===i,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(i)})),null!=a&&Fb(Hb(r),(function(){return"Error in avgPool3d: pad must be an integer when using, "+"dimRoundingMode ".concat(a," but got pad ").concat(r,".")}));var c={x:s},l={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},f=kS.runKernel(Kk,c,l);return f=jN(f,s.dtype),u?SI(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}});var _I=DS({concat_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Fb(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=AS(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))})),1===n.length)return zN(n[0]);var r=n,a={axis:t};return kS.runKernel(rw,r,a)}});var II=DS({sigmoid_:function(e){var t={x:IS(e,"x","sigmoid")};return kS.runKernel(Jx,t)}});var AI=DS({slice_:function(e,t,n){var r=IS(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");var a={x:r},i={begin:t,size:n};return kS.runKernel(Qx,a,i)}});var CI=DS({tanh_:function(e){var t={x:IS(e,"x","tanh")};return kS.runKernel(fE,t)}});var DI=DS({basicLSTMCell_:function(e,t,n,r,a,i){var o=IS(e,"forgetBias","basicLSTMCell"),s=IS(t,"lstmKernel","basicLSTMCell"),u=IS(n,"lstmBias","basicLSTMCell"),c=IS(r,"data","basicLSTMCell"),l=IS(a,"c","basicLSTMCell"),f=IS(i,"h","basicLSTMCell"),h=_I([c,f],1),d=lT(h,s),p=x_(d,u),m=p.shape[0],v=p.shape[1]/4,y=[m,v],g=AI(p,[0,0],y),b=AI(p,[0,v],y),k=AI(p,[0,2*v],y),w=AI(p,[0,3*v],y),x=x_(N_(II(g),CI(b)),N_(l,II(x_(o,k))));return[x,N_(CI(x),II(w))]}});var OI=DS({batchToSpaceND_:function(e,t,n){var r=IS(e,"x","batchToSpaceND"),a=t.reduce((function(e,t){return e*t}));Fb(r.rank>=1+t.length,(function(){return"input rank is ".concat(r.rank," but should be > than blockShape.length ").concat(t.length)})),Fb(n.length===t.length,(function(){return"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length)})),Fb(r.shape[0]%a===0,(function(){return"input tensor batch is ".concat(r.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(t.join(" * ")," === ").concat(a)}));var i={x:r},o={blockShape:t,crops:n};return kS.runKernel(Yk,i,o)}});var MI=DS({batchNorm_:function(e,t,n,r,a,i){null==i&&(i=.001);var o,s,u=IS(e,"x","batchNorm"),c=IS(t,"mean","batchNorm"),l=IS(n,"variance","batchNorm");null!=a&&(o=IS(a,"scale","batchNorm")),null!=r&&(s=IS(r,"offset","batchNorm")),Fb(c.rank===l.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),Fb(null==s||c.rank===s.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),Fb(null==o||c.rank===o.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var f=function(e){return 0===e.rank||1===e.rank?SI(e,[1,1,1,e.size]):2===e.rank?SI(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?SI(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e}(u),h={x:f,scale:o,offset:s,mean:c,variance:l},d={varianceEpsilon:i},p=kS.runKernel(Lw,h,d);return SI(p,u.shape)}});var RI=DS({batchNorm2d_:function(e,t,n,r,a,i){var o,s,u=IS(e,"x","batchNorm"),c=IS(t,"mean","batchNorm"),l=IS(n,"variance","batchNorm");return null!=a&&(o=IS(a,"scale","batchNorm")),null!=r&&(s=IS(r,"offset","batchNorm")),Fb(2===u.rank,(function(){return"Error in batchNorm2D: x must be rank 2 but got rank "+"".concat(u.rank,".")})),Fb(2===c.rank||1===c.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+"got rank ".concat(c.rank,".")})),Fb(2===l.rank||1===l.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=o&&Fb(2===o.rank||1===o.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&Fb(2===s.rank||1===s.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 "+"but got rank ".concat(s.rank,".")})),MI(u,c,l,s,o,i)}});var PI=DS({batchNorm3d_:function(e,t,n,r,a,i){var o,s,u=IS(e,"x","batchNorm"),c=IS(t,"mean","batchNorm"),l=IS(n,"variance","batchNorm");return null!=a&&(o=IS(a,"scale","batchNorm")),null!=r&&(s=IS(r,"offset","batchNorm")),Fb(3===u.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(u.rank,".")})),Fb(3===c.rank||1===c.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+"got rank ".concat(c.rank,".")})),Fb(3===l.rank||1===l.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=o&&Fb(3===o.rank||1===o.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&Fb(3===s.rank||1===s.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 "+"but got rank ".concat(s.rank,".")})),MI(u,c,l,s,o,i)}});var LI=DS({batchNorm4d_:function(e,t,n,r,a,i){var o,s,u=IS(e,"x","batchNorm"),c=IS(t,"mean","batchNorm"),l=IS(n,"variance","batchNorm");return null!=a&&(o=IS(a,"scale","batchNorm")),null!=r&&(s=IS(r,"offset","batchNorm")),Fb(4===u.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+"".concat(u.rank,".")})),Fb(4===c.rank||1===c.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+"got rank ".concat(c.rank,".")})),Fb(4===l.rank||1===l.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=o&&Fb(4===o.rank||1===o.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&Fb(4===s.rank||1===s.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 "+"but got rank ".concat(s.rank,".")})),MI(u,c,l,s,o,i)}});var FI=DS({bincount_:function(e,t,n){var r=IS(e,"x","bincount"),a=IS(t,"weights","bincount");Fb("int32"===r.dtype,(function(){return"Error in bincount: input "+"dtype must be int32, but got ".concat(r.dtype)})),Fb(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),Fb(a.size===r.size||0===a.size,(function(){return"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(r.shape,", weights shape: ")+"".concat(a.shape,".")}));var i={x:r,weights:a},o={size:n};return kS.runKernel(Xk,i,o)}});var jI=DS({broadcastTo_:function(e,t){var n=IS(e,"broadcastTo","x"),r=n.shape;if(t.some((function(e){return!(e>0)||e%1!==0})))throw new Error("broadcastTo(): Invalid broadcast shape [".concat(t,"]."));if(t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){for(var a=n.shape.slice();a.length<t.length;)a.unshift(1);n=SI(n,a)}for(var i=n.shape,o=Array.from(t),s=t.length-1;s>=0;s--)if(i[s]===t[s])o[s]=1;else if(1!==n.shape[s])throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(t,"]."));var u=o.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0}));if(0===u.length)return zN(n);var c={x:n},l={reps:o};return kS.runKernel(hE,c,l)}});var zI=DS({ceil_:function(e){var t={x:IS(e,"x","ceil")};return kS.runKernel(Zk,t)}});var VI=DS({clipByValue_:function(e,t,n){var r=IS(e,"x","clipByValue");Fb(t<=n,(function(){return"Error in clip: min (".concat(t,") must be ")+"less than or equal to max (".concat(n,").")}));var a={x:r},i={clipValueMin:t,clipValueMax:n};return kS.runKernel(ew,a,i)}});var UI=DS({concat1d_:function(e){return _I(e,0)}});var BI=DS({concat2d_:function(e,t){return _I(e,t)}});var qI=DS({concat3d_:function(e,t){return _I(e,t)}});var HI=DS({concat4d_:function(e,t){return _I(e,t)}});var WI=DS({conv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=IS(e,"x","conv2d"),u=IS(t,"filter","conv2d"),c=s,l=!1;3===s.rank&&(l=!0,c=SI(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Fb(4===c.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank ".concat(c.rank,".")})),Fb(4===u.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+"".concat(u.rank,".")})),null!=o&&Fb(Hb(r),(function(){return"Error in conv2d: pad must be an integer when using, "+"dimRoundingMode ".concat(o," but got pad ").concat(r,".")}));var f="NHWC"===a?c.shape[3]:c.shape[1];Fb(f===u.shape[2],(function(){return"Error in conv2d: depth of input (".concat(f,") must match ")+"input depth for filter ".concat(u.shape[2],".")})),Fb(xI(n,i),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'")}));var h={x:c,filter:u},d={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},p=kS.runKernel(aw,h,d);return l?SI(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});var KI=DS({conv1d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6?arguments[6]:void 0,s=IS(e,"x","conv1d"),u=IS(t,"filter","conv1d"),c=s,l=!1;2===s.rank&&(l=!0,c=SI(s,[1,s.shape[0],s.shape[1]])),Fb(3===c.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank ".concat(c.rank,".")})),Fb(3===u.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+"".concat(u.rank,".")})),null!=o&&Fb(Hb(r),(function(){return"Error in conv1d: pad must be an integer when using, "+"dimRoundingMode ".concat(o," but got pad ").concat(r,".")})),Fb(c.shape[2]===u.shape[1],(function(){return"Error in conv1d: depth of input (".concat(c.shape[2],") must match ")+"input depth for filter ".concat(u.shape[1],".")})),Fb(xI(n,i),(function(){return"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(i,"'")})),Fb("NWC"===a,(function(){return"Error in conv1d: got dataFormat of ".concat(a," but only NWC is currently supported.")}));var f=SI(u,[1,u.shape[0],u.shape[1],u.shape[2]]),h=SI(c,[c.shape[0],1,c.shape[1],c.shape[2]]),d=WI(h,f,[1,n],r,"NHWC",[1,i],o);return SI(d,l?[d.shape[2],d.shape[3]]:[d.shape[0],d.shape[2],d.shape[3]])}});var GI=DS({conv2DBackpropInput_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=arguments.length>6?arguments[6]:void 0;Fb(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var s=e,u=t,c=!1;3===t.rank&&(c=!0,u=SI(t,[1,t.shape[0],t.shape[1],t.shape[2]]),s=[1,e[0],e[1],e[2]]),Fb(4===s.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(s.length,".")})),Fb(4===u.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(u.rank)})),Fb(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank)}));var l="NHWC"===i?s[3]:s[1],f="NHWC"===i?u.shape[3]:u.shape[1];Fb(l===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input (".concat(l,") must ")+"match input depth for filter ".concat(n.shape[2],".")})),Fb(f===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output (".concat(f,") must ")+"match output depth for filter ".concat(n.shape[3],".")})),null!=o&&Fb(Hb(a),(function(){return"Error in conv2dDerInput: pad must be an integer when using, "+"dimRoundingMode ".concat(o," but got pad ").concat(a,".")}));var h={dy:u,filter:n},d={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,inputShape:s},p=kS.runKernel(ow,h,d);return c?SI(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});var QI=DS({conv2dTranspose_:function(e,t,n,r,a,i){var o=IS(e,"x","conv2dTranspose"),s=IS(t,"filter","conv2dTranspose");return GI(n,o,s,r,a,"NHWC",i)}});var YI=DS({conv3d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1],o=IS(e,"x","conv3d"),s=IS(t,"filter","conv3d"),u=o,c=!1;4===o.rank&&(c=!0,u=SI(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),Fb(5===u.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank ".concat(u.rank,".")})),Fb(5===s.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+"".concat(s.rank,".")})),Fb(u.shape[4]===s.shape[3],(function(){return"Error in conv3d: depth of input (".concat(u.shape[4],") must match ")+"input depth for filter ".concat(s.shape[3],".")})),Fb(xI(n,i),(function(){return"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'")})),Fb("NDHWC"===a,(function(){return"Error in conv3d: got dataFormat of ".concat(a," but only NDHWC is currently supported.")}));var l={x:u,filter:s},f={strides:n,pad:r,dataFormat:a,dilations:i},h=kS.runKernel(sw,l,f);return c?SI(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});var XI=DS({conv3DBackpropInput_:function(e,t,n,r,a){Fb(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var i=e,o=t,s=!1;4===t.rank&&(s=!0,o=SI(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),i=[1,e[0],e[1],e[2],e[3]]);var u=i[4],c=o.shape[4];Fb(5===i.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(i.length,".")})),Fb(5===o.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(o.rank)})),Fb(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank)})),Fb(u===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input (".concat(u,") must ")+"match input depth for filter ".concat(n.shape[3],".")})),Fb(c===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output (".concat(c,") must ")+"match output depth for filter ".concat(n.shape[4],".")}));var l={dy:o,filter:n},f={pad:a,strides:r,inputShape:i},h=kS.runKernel(cw,l,f);return s?SI(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});var $I=DS({conv3dTranspose_:function(e,t,n,r,a){var i=IS(e,"x","conv3dTranspose"),o=IS(t,"filter","conv3dTranspose");return XI(n,i,o,r,a)}});var JI=DS({cos_:function(e){var t={x:IS(e,"x","cos")};return kS.runKernel(lw,t)}});var ZI=DS({cosh_:function(e){var t={x:IS(e,"x","cosh")};return kS.runKernel(fw,t)}});var eA=DS({cumsum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a={x:IS(e,"x","cumsum")},i={axis:t,exclusive:n,reverse:r};return kS.runKernel(hw,a,i)}});var tA=DS({denseBincount_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=IS(e,"x","denseBincount"),i=IS(t,"weights","denseBincount");Fb("int32"===a.dtype,(function(){return"Error in denseBincount: input "+"dtype must be int32, but got ".concat(a.dtype)})),Fb(a.rank<=2,(function(){return"Error in denseBincount: input must be at most rank 2, but got "+"rank ".concat(a.rank,".")})),Fb(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),Fb(i.size===a.size||0===i.size,(function(){return"Error in denseBincount: weights must have the same shape as x or "+"0-length, but got x shape: ".concat(a.shape,", weights shape: ")+"".concat(i.shape,".")}));var o={x:a,weights:i},s={size:n,binaryOutput:r};return kS.runKernel(pw,o,s)}});var nA=DS({depthToSpace_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC",r=IS(e,"x","depthToSpace"),a="NHWC"===n?r.shape[1]:r.shape[2],i="NHWC"===n?r.shape[2]:r.shape[3],o="NHWC"===n?r.shape[3]:r.shape[1];Fb(a*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(a," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(r.shape)})),Fb(i*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(i," and ").concat(t," for depthToSpace with input shape\n        ").concat(r.shape)})),Fb(o%(t*t)===0,(function(){return"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(o," for depthToSpace with input shape ").concat(r.shape)}));var s={x:r},u={blockSize:t,dataFormat:n};return kS.runKernel(mw,s,u)}});var rA=DS({depthwiseConv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=IS(e,"x","depthwiseConv2d"),u=IS(t,"filter","depthwiseConv2d"),c=s,l=!1;3===s.rank&&(l=!0,c=SI(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Fb(4===c.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(c.rank,".")})),Fb(4===u.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(u.rank,".")})),Fb(c.shape[3]===u.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels "+"(".concat(c.shape[3],") must match the inChannels dimension in ")+"filter ".concat(u.shape[2],".")})),null!=o&&Fb(Hb(r),(function(){return"Error in depthwiseConv2d: pad must be an integer when using, "+"dimRoundingMode ".concat(o," but got pad ").concat(r,".")}));var f={x:c,filter:u},h={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},d=kS.runKernel(vw,f,h);return l?SI(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});var aA=DS({diag_:function(e){var t={x:IS(e,"x","diag")};return kS.runKernel(bw,t)}});var iA=DS({dilation2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=IS(e,"x","dilation2d"),s=IS(t,"filter","dilation2d");Fb(3===o.rank||4===o.rank,(function(){return"Error in dilation2d: input must be rank 3 or 4, but got rank "+"".concat(o.rank,".")})),Fb(3===s.rank,(function(){return"Error in dilation2d: filter must be rank 3, but got rank "+"".concat(s.rank,".")})),Fb("NHWC"===i,(function(){return"Error in dilation2d: Only NHWC is currently supported, "+"but got dataFormat of ".concat(i)}));var u=o,c=!1;3===o.rank&&(u=SI(o,[1,o.shape[0],o.shape[1],o.shape[2]]),c=!0);var l={x:u,filter:s},f={strides:n,pad:r,dilations:a},h=kS.runKernel(kw,l,f);return c?SI(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});var oA=DS({equal_:function(e,t){var n=IS(e,"a","equal"),r=IS(t,"b","equal"),a=te(fS(n,r),2);n=a[0],r=a[1],G_(n.shape,r.shape);var i={a:n,b:r};return kS.runKernel(_w,i)}});var sA=DS({where_:function(e,t,n){var r=IS(t,"a","where"),a=IS(n,"b","where"),i=IS(e,"condition","where","bool"),o=G_(r.shape,a.shape),s=jI(r,o),u=jI(a,o);1===i.rank&&Fb(i.shape[0]===r.shape[0],(function(){return"The first dimension of `a` must match the size of `condition`."})),1!==i.rank&&jb(i.shape,u.shape,"Error in where: ");var c={condition:i,t:s,e:u};return kS.runKernel(Kx,c)}});var uA=DS({divNoNan_:function(e,t){var n=IS(e,"a","div"),r=IS(t,"b","div"),a=te(fS(n,r),2);n=a[0],r=a[1];var i=S_(n,r),o=I_(i),s=oA(r,o);return sA(s,o,i)}});var cA=DS({dot_:function(e,t){var n=IS(e,"t1","dot"),r=IS(t,"t2","dot");Fb((1===n.rank||2===n.rank)&&(1===r.rank||2===r.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")}));var a=1===n.rank?n.size:n.shape[1],i=1===r.rank?r.size:r.shape[0];if(Fb(a===i,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+"".concat(a," and ").concat(i,".")})),1===n.rank&&1===r.rank){var o=SI(n,[1,-1]),s=SI(r,[-1,1]),u=lT(o,s);return SI(u,[])}if(1===n.rank&&2===r.rank){var c=SI(n,[1,-1]),l=SI(r,[r.shape[0],r.shape[1]]),f=lT(c,l);return SI(f,[f.size])}if(2===n.rank&&1===r.rank){var h=SI(r,[-1,1]),d=lT(n,h);return SI(d,[d.size])}var p=SI(r,[r.shape[0],r.shape[1]]);return lT(n,p)}});var lA=DS({elu_:function(e){var t={x:IS(e,"x","elu")};return kS.runKernel(Sw,t)}});var fA=DS({erf_:function(e){var t=IS(e,"x","erf");Fb("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=jN(t,"float32"));var n={x:t};return kS.runKernel(Tw,n)}});var hA=DS({exp_:function(e){var t={x:IS(e,"x","exp")};return kS.runKernel(Iw,t)}});var dA=DS({expandDims_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=IS(e,"x","expandDims","string_or_numeric");Fb(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r={input:n},a={dim:t};return kS.runKernel(Aw,r,a)}});var pA=DS({expm1_:function(e){var t={x:IS(e,"x","expm1")};return kS.runKernel(Cw,t)}});var mA=DS({tile_:function(e,t){var n=IS(e,"x","tile","string_or_numeric");Fb(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(t,".")}));var r={x:n},a={reps:t};return kS.runKernel(hE,r,a)}});var vA=DS({eye_:function(e,t,n){null==t&&(t=e);for(var r=FN([e,t],arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32"),a=e<=t?e:t,i=0;i<a;++i)r.set(1,i,i);var o=SI(r.toTensor(),[e,t]);if(null==n)return o;if(1===n.length)return mA(dA(o,0),[n[0],1,1]);if(2===n.length)return mA(dA(dA(o,0),0),[n[0],n[1],1,1]);if(3===n.length)return mA(dA(dA(dA(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}});var yA=DS({floor_:function(e){var t={x:IS(e,"x","floor")};return kS.runKernel(Rw,t)}});var gA=DS({gather_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a={x:IS(e,"x","gather"),indices:IS(t,"indices","gather","int32")},i={axis:n,batchDims:r};return kS.runKernel(Fw,a,i)}});var bA=DS({greater_:function(e,t){var n=IS(e,"a","greater"),r=IS(t,"b","greater"),a=te(fS(n,r),2);n=a[0],r=a[1],G_(n.shape,r.shape);var i={a:n,b:r};return kS.runKernel(zw,i)}});var kA=DS({greaterEqual_:function(e,t){var n=IS(e,"a","greaterEqual"),r=IS(t,"b","greaterEqual"),a=te(fS(n,r),2);n=a[0],r=a[1],G_(n.shape,r.shape);var i={a:n,b:r};return kS.runKernel(Vw,i)}});var wA=DS({imag_:function(e){var t={input:IS(e,"input","imag")};return kS.runKernel(qw,t)}});var xA=DS({isFinite_:function(e){var t={x:IS(e,"x","isFinite")};return kS.runKernel(Hw,t)}});var EA=DS({isInf_:function(e){var t={x:IS(e,"x","isInf")};return kS.runKernel(Ww,t)}});var SA=DS({isNaN_:function(e){var t={x:IS(e,"x","isNaN")};return kS.runKernel(Kw,t)}});var NA=DS({leakyRelu_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n={x:IS(e,"x","leakyRelu")},r={alpha:t};return kS.runKernel(Gw,n,r)}});var TA=DS({less_:function(e,t){var n=IS(e,"a","less"),r=IS(t,"b","less"),a=te(fS(n,r),2);n=a[0],r=a[1],G_(n.shape,r.shape);var i={a:n,b:r};return kS.runKernel(Qw,i)}});var _A=DS({lessEqual_:function(e,t){var n=IS(e,"a","lessEqual"),r=IS(t,"b","lessEqual"),a=te(fS(n,r),2);n=a[0],r=a[1],G_(n.shape,r.shape);var i={a:n,b:r};return kS.runKernel(Yw,i)}});function IA(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");var r={start:e,stop:t,num:n};return kS.runKernel(Xw,{},r)}var AA=DS({localResponseNormalization_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,i=IS(e,"x","localResponseNormalization");Fb(4===i.rank||3===i.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(i.rank,".")})),Fb(Hb(t),(function(){return"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(t,".")}));var o=i,s=!1;3===i.rank&&(s=!0,o=SI(i,[1,i.shape[0],i.shape[1],i.shape[2]]));var u={x:o},c={depthRadius:t,bias:n,alpha:r,beta:a},l=kS.runKernel(rx,u,c);return s?SI(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var CA=DS({log_:function(e){var t={x:IS(e,"x","log")};return kS.runKernel($w,t)}});var DA=DS({log1p_:function(e){var t={x:IS(e,"x","log1p")};return kS.runKernel(Jw,t)}});var OA=DS({neg_:function(e){var t={x:IS(e,"x","neg")};return kS.runKernel(bx,t)}});var MA=DS({softplus_:function(e){var t={x:IS(e,"x","softplus")};return kS.runKernel(Zx,t)}});var RA=DS({logSigmoid_:function(e){var t=IS(e,"x","logSigmoid"),n=R_((function(e){return{value:OA(MA(OA(e))),gradFunc:function(t){return N_(t,II(OA(e)))}}}));return n(t)}});var PA=DS({max_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:IS(e,"x","max")},a={reductionIndices:t,keepDims:n};return kS.runKernel(ix,r,a)}});var LA=DS({sum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=IS(e,"x","sum");"bool"===r.dtype&&(r=jN(r,"int32"));var a={x:r},i={axis:t,keepDims:n};return kS.runKernel(tE,a,i)}});var FA=DS({logSoftmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=IS(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(t));var r=R_((function(e,n){var r=PA(e,t,!0),a=B_(e,r),i=B_(jN(a,"float32"),CA(LA(hA(a),t,!0)));n([i]);return{value:i,gradFunc:function(e,n){var r=te(n,1)[0],a=hA(r);return B_(e,N_(LA(e,t,!0),a))}}}));return r(n)}});function jA(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function zA(e,t,n){for(var r=e.length+t.length,a=[],i=0,o=0,s=0;s<r;s++)-1===n.indexOf(s)?a.push(e[i++]):a.push(t[o++]);return a}function VA(e,t){for(var n=[],r=e.length,a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);var i=t.map((function(t){return e[t]}));return[n,i]}function UA(e,t){return zA(e,t.map((function(e){return 1})),t)}function BA(e,t,n){Fb(jA(t,n),(function(){return"".concat(e," supports only inner-most axes for now. ")+"Got axes ".concat(t," and rank-").concat(n," input.")}))}function qA(e,t){if(jA(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function HA(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function WA(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}var KA=DS({logSumExp_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=IS(e,"x","logSumExp"),a=$b(t,r.shape),i=PA(r,a,!0),o=B_(r,i),s=hA(o),u=LA(s,a),c=CA(u),l=x_(SI(i,c.shape),c);if(n){var f=UA(l.shape,a);return SI(l,f)}return l}});var GA=DS({logicalAnd_:function(e,t){var n=IS(e,"a","logicalAnd","bool"),r=IS(t,"b","logicalAnd","bool");G_(n.shape,r.shape);var a={a:n,b:r};return kS.runKernel(Zw,a)}});var QA=DS({logicalNot_:function(e){var t={x:IS(e,"x","logicalNot","bool")};return kS.runKernel(ex,t)}});var YA=DS({logicalOr_:function(e,t){var n=IS(e,"a","logicalOr","bool"),r=IS(t,"b","logicalOr","bool");G_(n.shape,r.shape);var a={a:n,b:r};return kS.runKernel(tx,a)}});var XA=DS({logicalXor_:function(e,t){var n=IS(e,"a","logicalXor","bool"),r=IS(t,"b","logicalXor","bool");return G_(n.shape,r.shape),GA(YA(e,t),QA(GA(e,t)))}});var $A=DS({maxPool_:function(e,t,n,r,a){var i=IS(e,"x","maxPool"),o=i,s=!1;3===i.rank&&(s=!0,o=SI(i,[1,i.shape[0],i.shape[1],i.shape[2]])),Fb(4===o.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(o.rank,".")})),Fb(xI(n,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")})),null!=a&&Fb(Hb(r),(function(){return"Error in maxPool: pad must be an integer when using, "+"dimRoundingMode ".concat(a," but got pad ").concat(r,".")}));var u={x:o},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a},l=kS.runKernel(sx,u,c);return s?SI(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var JA=DS({maxPool3d_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",o=IS(e,"x","maxPool3d"),s=o,u=!1;4===o.rank&&(u=!0,s=SI(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),Fb(5===s.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),Fb("NDHWC"===i,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(i)})),null!=a&&Fb(Hb(r),(function(){return"Error in maxPool3d: pad must be an integer when using, "+"dimRoundingMode ".concat(a," but got pad ").concat(r,".")}));var c={x:s},l={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},f=kS.runKernel(cx,c,l);return u?SI(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}});var ZA=DS({maxPoolWithArgmax_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i={x:IS(e,"x","maxPoolWithArgmax")},o={filterSize:t,strides:n,pad:r,includeBatchInIndex:a},s=kS.runKernel(fx,i,o);return{result:s[0],indexes:s[1]}}});var eC=DS({mean_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:IS(e,"x","mean")},a={axis:t,keepDims:n};return kS.runKernel(hx,r,a)}});var tC=DS({min_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:IS(e,"x","min")},a={axis:t,keepDims:n};return kS.runKernel(dx,r,a)}});var nC=DS({minimum_:function(e,t){var n=IS(e,"a","minimum"),r=IS(t,"b","minimum"),a=te(fS(n,r),2);n=a[0],r=a[1],"bool"===n.dtype&&(n=jN(n,"int32"),r=jN(r,"int32")),G_(n.shape,r.shape);var i={a:n,b:r};return kS.runKernel(px,i)}});var rC=DS({mirrorPad_:function(e,t,n){Fb("reflect"===n||"symmetric"===n,(function(){return"Invalid mode. Mode must be either reflect or symmetric. "+"Got ".concat(n,".")}));var r=IS(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");Fb(t.length===r.rank,(function(){return"Padding doesn't match input. Must be ".concat(r.rank,". ")+"Got ".concat(t.length,".")}));for(var a="reflect"===n?1:0,i=function(e){Fb(2===t[e].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Fb(t[e][0]>=0&&t[e][0]<=r.shape[e]-a&&t[e][1]>=0&&t[e][1]<=r.shape[e]-a,(function(){return"Padding in dimension ".concat(e," cannot be greater than or equal ")+"to ".concat(r.shape[e]-a," or less than 0 for input of ")+"shape ".concat(r.shape)}))},o=0;o<r.rank;o++)i(o);var s={paddings:t,mode:n},u={x:r};return kS.runKernel(mx,u,s)}});var aC=DS({mod_:function(e,t){var n=IS(e,"a","mod"),r=IS(t,"b","mod"),a=te(fS(n,r),2),i={a:n=a[0],b:r=a[1]};return kS.runKernel(vx,i)}});var iC=DS({moments_:function(e){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=$b(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,(e=IS(e,"x","moments")).shape),r=eC(e,n,t),a=r.shape;t||(a=UA(r.shape,n));var i=__(B_(jN(e,"float32"),SI(r,a)));return{mean:r,variance:eC(i,n,t)}}});var oC=DS({multiRNNCell_:function(e,t,n,r){for(var a=IS(t,"data","multiRNNCell"),i=AS(n,"c","multiRNNCell"),o=AS(r,"h","multiRNNCell"),s=a,u=[],c=0;c<e.length;c++){var l=e[c](s,i[c],o[c]);u.push(l[0]),u.push(l[1]),s=l[1]}for(var f=[],h=[],d=0;d<u.length;d+=2)f.push(u[d]),h.push(u[d+1]);return[f,h]}});var sC=DS({multinomial_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=IS(e,"logits","multinomial"),i=a.size,o=a.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+"".concat(i,"."));if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is ".concat(o));n=n||Math.random();var s={logits:1===o?SI(a,[1,-1]):a},u={numSamples:t,seed:n,normalized:r},c=kS.runKernel(yx,s,u);return 1===o?SI(c,[c.size]):c}});var uC=DS({notEqual_:function(e,t){var n=IS(e,"a","notEqual"),r=IS(t,"b","notEqual"),a=te(fS(n,r),2);n=a[0],r=a[1],G_(n.shape,r.shape);var i={a:n,b:r};return kS.runKernel(kx,i)}});function cC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=cC(e,"float32"),r=cC(e,"float32");return OS(n,r)}var a=yk(Ub(e),t);return kS.makeTensor(a,e,t)}function lC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=lC(e,"float32"),r=cC(e,"float32");return OS(n,r)}var a=vk(Ub(e),t);return kS.makeTensor(a,e,t)}var fC=DS({onesLike_:function(e){var t={x:IS(e,"x","onesLike")};return kS.runKernel(Sx,t)}});var hC=DS({outerProduct_:function(e,t){var n=IS(e,"v1","outerProduct"),r=IS(t,"v2","outerProduct");Fb(1===n.rank&&1===r.rank,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")}));var a=SI(n,[-1,1]),i=SI(r,[1,-1]);return lT(a,i)}});var dC=DS({pad_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=IS(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:t,constantValue:n},i={x:r};return kS.runKernel(_x,i,a)}});var pC=DS({pad1d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Fb(2===t.length,(function(){return"Invalid number of paddings. Must be length of 2."})),dC(e,[t],n)}});var mC=DS({pad2d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Fb(2===t.length&&2===t[0].length&&2===t[1].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),dC(e,t,n)}});var vC=DS({pad3d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Fb(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),dC(e,t,n)}});var yC=DS({pad4d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Fb(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),dC(e,t,n)}});var gC=DS({spaceToBatchND_:function(e,t,n){var r=IS(e,"x","spaceToBatchND");Fb(r.rank>=1+t.length,(function(){return"input rank ".concat(r.rank," should be > than [blockShape] ").concat(t.length)})),Fb(n.length===t.length,(function(){return"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length)})),Fb(r.shape.reduce((function(e,r,a){return a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]===0:e}),!0),(function(){return"input spatial dimensions ".concat(r.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString())}));var a={x:r},i={blockShape:t,paddings:n};return kS.runKernel(nE,a,i)}});var bC=DS({pool_:function(e,t,n,r,a,i){null==a&&(a=[1,1]),null==i&&(i=1),0===r&&(r="valid");var o=IS(e,"x","maxPool"),s=o,u=!1;3===o.rank&&(u=!0,s=SI(o,[1,o.shape[0],o.shape[1],o.shape[2]])),Fb(xI(i,a),(function(){return"Error in pool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(a,"'")}));var c,l=hI(s.shape,t,i,a,r),f=[l.dilationHeight,l.dilationWidth];c="same"===r?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})),r=n.map((function(e){return e-1})),a=r.map((function(e){return Math.floor(e/2)})),i=r.map((function(e,t){return e-a[t]}));return r.map((function(e,t){return[a[t],i[t]]}))}([l.filterHeight,l.filterWidth],f):[[0,0],[0,0]];var h=1===f[0]&&1===f[1],d=function(e,t,n){var r=n.map((function(e){return e[0]})),a=n.map((function(e){return e[1]})),i=e.concat(r,a),o=t.map((function(e,t){return(e-i[t]%e)%e})),s=a.map((function(e,t){return e+o[t]})),u=t.map((function(e,t){return[r[t],s[t]]})),c=t.map((function(e,t){return[0,o[t]]}));return[u,c]}([l.inHeight,l.inWidth],f,c),p=te(d,2),m=p[0],v=p[1],y=h?r:"valid",g=h?s:gC(s,f,m),b=("avg"===n?function(){return NI(g,t,i,y)}:function(){return $A(g,t,i,y)})(),k=h?b:OI(b,f,v);return u?SI(k,[k.shape[1],k.shape[2],k.shape[3]]):k}});var kC=DS({prelu_:function(e,t){var n={x:IS(e,"x","prelu"),alpha:IS(t,"alpha","prelu")};return kS.runKernel(Cx,n)}});var wC=DS({prod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=IS(e,"x","prod");"bool"===r.dtype&&(r=jN(r,"int32"));var a={x:r},i={axis:t,keepDims:n};return kS.runKernel(Dx,a,i)}});var xC=DS({rand_:function(e,t,n){var r=Ub(e),a=null;if(null==n||"float32"===n)a=new Float32Array(r);else if("int32"===n)a=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type ".concat(n));a=new Uint8Array(r)}for(var i=0;i<r;i++)a[i]=t();return kS.makeTensor(a,e,n)}}),EC=n(699),SC=function(){function e(t,n,r,a,i){B(this,e),this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var o=i||Math.random();this.random=EC.alea(o.toString())}return K(e,[{key:"nextValue",value:function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var a=void 0,i=void 0,o=void 0;do{o=(a=2*this.random()-1)*a+(i=2*this.random()-1)*i}while(o>=1||0===o);var s=Math.sqrt(-2*Math.log(o)/o);t=this.mean+this.stdDev*a*s,n=this.mean+this.stdDev*i*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)}},{key:"convertValue",value:function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}},{key:"isValidTruncated",value:function(e){return e<=this.upper&&e>=this.lower}}]),e}(),NC=function(){function e(t,n,r,a){B(this,e),this.alpha=t,this.beta=1/n,this.dtype=r;var i=a||Math.random();this.randu=EC.alea(i.toString()),this.randn=new SC(0,1,r,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return K(e,[{key:"nextValue",value:function(){for(var e,t,n,r,a,i;;){do{r=this.randn.nextValue(),i=1+this.c*r}while(i<=0);if(i*=i*i,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-i+Math.log(i)),(a=this.randu())<t||Math.log(a)<n)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)}},{key:"convertValue",value:function(e){return"float32"===this.dtype?e:Math.round(e)}}]),e}(),TC=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(B(this,e),this.canReturnFloat=function(){return null==t.dtype||"float32"===t.dtype},this.min=n,this.range=r-n,this.dtype=a,null==i&&(i=Math.random()),"number"===typeof i&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(n," - ").concat(r," <= 1 and dtype is not float"));this.random=EC.alea(i)}return K(e,[{key:"convertValue",value:function(e){return this.canReturnFloat()?e:Math.round(e)}},{key:"nextValue",value:function(){return this.convertValue(this.min+this.range*this.random())}}]),e}();var _C=DS({randomGamma_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0;if(null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type ".concat(r));for(var i=new NC(t,n,r,a),o=FN(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var IC=DS({randomNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type ".concat(r));for(var i=new SC(t,n,r,!1,a),o=FN(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var AC=DS({randomUniform_:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>4?arguments[4]:void 0,a=FN(e,arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32"),i=new TC(t,n,null,r),o=0;o<a.values.length;o++)a.values[o]=i.nextValue();return a.toTensor()}});function CC(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");var a={start:e,stop:t,step:n,dtype:r};return kS.runKernel(Ox,{},a)}var DC=DS({real_:function(e){var t={input:IS(e,"input","real")};return kS.runKernel(Mx,t)}});var OC=DS({reciprocal_:function(e){var t={x:IS(e,"x","reciprocal")};return kS.runKernel(Rx,t)}});var MC=DS({relu_:function(e){var t={x:IS(e,"x","relu")};return kS.runKernel(Px,t)}});var RC=DS({relu6_:function(e){var t={x:IS(e,"x","relu6")};return kS.runKernel(Ux,t)}});var PC=DS({reverse_:function(e,t){var n={x:IS(e,"x","reverse")},r={dims:t};return kS.runKernel(Bx,n,r)}});var LC=DS({reverse1d_:function(e){var t=IS(e,"x","reverse");return Fb(1===t.rank,(function(){return"Error in reverse1D: x must be rank 1 but got rank ".concat(t.rank,".")})),PC(t,0)}});var FC=DS({reverse2d_:function(e,t){var n=IS(e,"x","reverse");return Fb(2===n.rank,(function(){return"Error in reverse2D: x must be rank 2 but got rank ".concat(n.rank,".")})),PC(n,t)}});var jC=DS({reverse3d_:function(e,t){var n=IS(e,"x","reverse");return Fb(3===n.rank,(function(){return"Error in reverse3D: x must be rank 3 but got rank ".concat(n.rank,".")})),PC(n,t)}});var zC=DS({reverse4d_:function(e,t){var n=IS(e,"x","reverse");return Fb(4===n.rank,(function(){return"Error in reverse4D: x must be rank 4 but got rank ".concat(n.rank,".")})),PC(n,t)}});var VC=DS({round_:function(e){var t={x:IS(e,"x","round")};return kS.runKernel(qx,t)}});var UC=DS({rsqrt_:function(e){var t={x:IS(e,"x","rsqrt")};return kS.runKernel(Hx,t)}});var BC=DS({selu_:function(e){var t={x:IS(e,"x","selu")};return kS.runKernel(Gx,t)}});var qC=DS({separableConv2d_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC",s=IS(e,"x","separableConv2d"),u=IS(t,"depthwiseFilter","separableConv2d"),c=IS(n,"pointwiseFilter","separableConv2d"),l=s,f=!1;if(3===s.rank&&(f=!0,l=SI(s,[1,s.shape[0],s.shape[1],s.shape[2]])),"NCHW"===o)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");Fb(4===l.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got "+"rank ".concat(l.rank,".")})),Fb(4===u.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but "+"got rank ".concat(u.rank,".")})),Fb(4===c.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but "+"got rank ".concat(u.rank,".")})),Fb(1===c.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter "+" must be 1, but got ".concat(c.shape[0],".")})),Fb(1===c.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise "+"filter must be 1, but got ".concat(c.shape[1],".")}));var h=u.shape[2],d=u.shape[3];Fb(c.shape[2]===h*d,(function(){return"Error in separableConv2d: the third dimension of pointwise filter "+"must be ".concat(h*d,", ")+"but got ".concat(c.shape[2],".")}));var p=rA(l,u,r,a,o,i),m=WI(p,c,1,"valid",o);return f?SI(m,[m.shape[1],m.shape[2],m.shape[3]]):m}});function HC(){return HC=Rt(Ot().mark((function e(t,n){var r,a,i,o,s,u,c,l,f,h,d;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=IS(t,"x","setdiff1d"),a=IS(n,"y","setdiff1d"),Fb(r.dtype===a.dtype,(function(){return"x and y should have the same dtype, but got x (".concat(r.dtype,") and y (").concat(a.dtype,").")})),Fb(1===r.rank,(function(){return"x should be 1D tensor, but got x (".concat(r.shape,").")})),Fb(1===a.rank,(function(){return"y should be 1D tensor, but got y (".concat(a.shape,").")})),e.next=7,r.data();case 7:return i=e.sent,e.next=10,a.data();case 10:for(o=e.sent,s=new Set(o),u=0,c=0;c<i.length;c++)s.has(i[c])||u++;for(l=new JE([u],r.dtype),f=new JE([u],"int32"),h=0,d=0;h<i.length;h++)s.has(i[h])||(l.values[d]=i[h],f.values[d]=h,d++);return e.abrupt("return",[l.toTensor(),f.toTensor()]);case 18:case"end":return e.stop()}}),e)}))),HC.apply(this,arguments)}var WC=function(e,t){return HC.apply(this,arguments)};var KC=DS({sign_:function(e){var t={x:IS(e,"x","sign")};return kS.runKernel($x,t)}});var GC=DS({sin_:function(e){var t={x:IS(e,"x","sin")};return kS.runKernel(Yx,t)}});var QC=DS({sinh_:function(e){var t={x:IS(e,"x","sinh")};return kS.runKernel(Xx,t)}});var YC=DS({slice1d_:function(e,t,n){var r=IS(e,"x","slice1d");return Fb(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-".concat(r.rank," tensor")})),AI(r,[t],[n])}});var XC=DS({slice2d_:function(e,t,n){var r=IS(e,"x","slice2d");return Fb(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-".concat(r.rank," tensor")})),AI(r,t,n)}});var $C=DS({slice3d_:function(e,t,n){var r=IS(e,"x","slice3d");return Fb(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-".concat(r.rank," tensor")})),AI(r,t,n)}});var JC=DS({slice4d_:function(e,t,n){var r=IS(e,"x","slice4d");return Fb(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-".concat(r.rank," tensor")})),AI(r,t,n)}});var ZC=DS({softmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=IS(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(t));var r={logits:n},a={dim:t};return kS.runKernel(aE,r,a)}});var eD=DS({fft_:function(e){Fb("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return kS.runKernel(Dw,t)}});var tD=DS({ifft_:function(e){Fb("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return kS.runKernel(Bw,t)}});var nD=DS({irfft_:function(e){var t,n=e.shape[e.shape.length-1],r=e.size/n;if(n<=2){var a=SI(e,[r,n]);t=tD(a)}else{var i=[r,2*(n-1)],o=SI(DC(e),[r,n]),s=SI(wA(e),[r,n]),u=PC(AI(o,[0,1],[r,n-2]),1),c=N_(PC(AI(s,[0,1],[r,n-2]),1),L_(-1)),l=_I([o,u],1),f=_I([s,c],1),h=SI(OS(l,f),[i[0],i[1]]);t=tD(h)}if(t=DC(t),3===e.rank&&0!==e.shape[0]){var d=t,p=e.shape[0];t=SI(t,[p,t.shape[0]/p,t.shape[1]]),d.dispose()}return t}});var rD=DS({split_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r={x:IS(e,"x","split")},a={numOrSizeSplits:t,axis:n};return kS.runKernel(rE,r,a)}});var aD=DS({rfft_:function(e,t){Fb("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got ".concat(e.dtype)}));var n,r=e.shape[e.shape.length-1],a=e.size/r;if(null!=t&&t<r){var i=e.shape.map((function(e){return 0})),o=e.shape.map((function(e){return e}));o[e.shape.length-1]=t,n=AI(e,i,o),r=t}else if(null!=t&&t>r){var s=e.shape.map((function(e){return e}));s[e.shape.length-1]=t-r,n=_I([e,cC(s)],e.shape.length-1),r=t}else n=e;var u=I_(n),c=SI(OS(n,u),[a,r]),l=eD(c),f=Math.floor(r/2)+1,h=DC(l),d=wA(l),p=rD(h,[f,r-f],h.shape.length-1),m=rD(d,[f,r-f],d.shape.length-1),v=n.shape.slice();return v[n.shape.length-1]=f,SI(OS(p[0],m[0]),v)}});var iD=DS({squaredDifference_:function(e,t){var n=IS(e,"a","squaredDifference"),r=IS(t,"b","squaredDifference"),a=te(fS(n,r),2);n=a[0],r=a[1],G_(n.shape,r.shape);var i={a:n,b:r};return kS.runKernel(iE,i,{})}});var oD=DS({squeeze_:function(e,t){var n=IS(e,"x","squeeze");return SI(n,Jb(n.shape,t).newShape)}});var sD=DS({stack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=AS(e,"tensors","stack","string_or_numeric");Fb(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),n.length>0&&Fb(t<=n[0].rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n,a={axis:t};return kS.runKernel(Tx,r,a)}});var uD=DS({step_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={x:IS(e,"x","step")},r={alpha:t};return kS.runKernel(bE,n,r)}});var cD=DS({stridedSlice_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c={x:IS(e,"x","stridedSlice")},l={begin:t,end:n,strides:r,beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u};return kS.runKernel(cE,c,l)}});var lD=DS({tan_:function(e){var t={x:IS(e,"x","tan")};return kS.runKernel(lE,t)}});function fD(e,t){zb(e);var n=NS(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return MS(e,null,n,t)}function hD(e,t,n){if(zb(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=NS(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return MS(e,t,r,n)}function dD(e,t,n){if(zb(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=NS(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return MS(e,t,r,n)}function pD(e,t,n){if(zb(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=NS(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return MS(e,t,r,n)}function mD(e,t,n){if(zb(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=NS(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return MS(e,t=t||r,r,n)}var vD=DS({topk_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=IS(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(a,") ")+"but got ".concat(t));var i={x:r},o={k:t,sorted:n},s=te(kS.runKernel(dE,i,o),2);return{values:s[0],indices:s[1]}}});var yD=DS({truncatedNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");for(var i=new SC(t,n,r,!0,a),o=FN(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var gD=DS({unique_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=IS(e,"x","unique","string_or_numeric");Fb(n.rank>0,(function(){return"The input tensor must be at least 1D"}));var r={x:n},a={axis:t},i=te(kS.runKernel(mE,r,a),2);return{values:i[0],indices:i[1]}}});var bD=DS({unsortedSegmentSum_:function(e,t,n){var r=IS(e,"x","unsortedSegmentSum"),a=IS(t,"segmentIds","unsortedSegmentSum","int32");Fb(Hb(n),(function(){return"numSegments must be of dtype int"}));var i={x:r,segmentIds:a},o={numSegments:n};return kS.runKernel(yE,i,o)}});var kD=DS({unstack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=IS(e,"x","unstack","string_or_numeric");Fb(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")}));var r={value:n},a={axis:t};return kS.runKernel(vE,r,a)}});function wD(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return kS.makeVariable(e,t,n,r)}function xD(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);for(var a=FN(e,"int32"),i=FN([n.length,e.length],"int32"),o=0;o<n.length;o++){var s=a.indexToLoc(n[o]),u=o*e.length;i.values.set(s,u)}return i.toTensor()}function ED(){return(ED=Rt(Ot().mark((function e(t){var n,r,a;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=IS(t,"condition","whereAsync","bool"),e.next=3,n.data();case 3:return r=e.sent,a=xD(n.shape,r),t!==n&&n.dispose(),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var SD=function(e){return ED.apply(this,arguments)};function ND(){return ND=Rt(Ot().mark((function e(t,n,r){var a,i,o,s,u,c,l,f,h,d,p,m,v;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=IS(t,"tensor","boolMask"),i=IS(n,"mask","boolMask","bool"),o=null==r?0:r,s=i.rank,u=a.shape,Fb(s>0,(function(){return"mask cannot be scalar"})),jb(u.slice(o,o+s),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),c=1,l=o;l<o+s;l++)c*=u[l];return f=u.slice(0,o).concat([c],u.slice(o+s)),h=SI(a,f),d=SI(i,[-1]),e.next=14,SD(d);case 14:return p=e.sent,m=oD(p,[1]),v=gA(h,m,o),t!==a&&a.dispose(),n!==i&&i.dispose(),m.dispose(),h.dispose(),d.dispose(),p.dispose(),e.abrupt("return",v);case 24:case"end":return e.stop()}}),e)}))),ND.apply(this,arguments)}var TD=function(e,t,n){return ND.apply(this,arguments)};function _D(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return H_(e);if(1!==e.rank&&null===n)return _D(SI(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return LA(H_(e),n);if(t===1/0)return PA(H_(e),n);if(t===-1/0)return tC(H_(e),n);if("euclidean"===t||2===t)return T_(LA(U_(H_(e),L_(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&2===n.length){if(1===t)return PA(LA(H_(e),n[0]),n[1]-1);if(t===1/0)return PA(LA(H_(e),n[1]),n[0]);if(t===-1/0)return tC(LA(H_(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return T_(LA(__(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}var ID=DS({norm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=_D(e=IS(e,"x","norm"),t,n),i=a.shape;if(r){var o=$b(n,e.shape);i=UA(a.shape,o)}return SI(a,i)}});var AD=DS({movingAverage_:function(e,t,n,r){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=IS(e,"v","movingAverage"),o=IS(t,"x","movingAverage"),s=IS(n,"decay","movingAverage");hS(i,o),Fb(qb(i.shape,o.shape),(function(){return"Shape mismatch in v and x"}));var u=L_(1),c=B_(u,s),l=N_(B_(o,i),c);if(a){Fb(null!=r,(function(){return"When using zeroDebias: true, step is required."}));var f=IS(r,"step","movingAverage");l=S_(l,B_(u,U_(s,f)))}return x_(i,l)}});var CD=DS({scatterND_:function(e,t,n){var r=IS(e,"indices","scatterND","int32"),a=IS(t,"updates","scatterND");wT(a,r,n);var i={indices:r,updates:a},o={shape:n};return kS.runKernel(Wx,i,o)}});var DD=DS({sparseToDense_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=IS(e,"sparseIndices","sparseToDense","int32"),i=IS(t,"sparseValues","sparseToDense"),o=IS(r,"defaultValue","sparseToDense",i.dtype);!function(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type,"+" but the dtype was ".concat(e.dtype,"."));if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix,"+" but got shape ".concat(e.shape,"."));var a=e.rank>0?e.shape[0]:1,i=e.rank>1?e.shape[1]:1;if(n.length!==i)throw new Error("outputShape has incorrect number of elements:,"+" ".concat(n.length,", should be: ").concat(i,"."));var o=t.size;if(0!==t.rank&&(1!==t.rank||o!==a))throw new Error("sparseValues has incorrect shape "+"".concat(t.shape,", should be [] or [").concat(a,"]"));if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(a,i,n,o);var s={sparseIndices:a,sparseValues:i,defaultValue:o},u={outputShape:n};return kS.runKernel(uE,s,u)}});var OD=DS({gatherND_:function(e,t){var n=IS(t,"indices","gatherND","int32"),r={params:IS(e,"x","gatherND"),indices:n};return kS.runKernel(jw,r)}});var MD=DS({dropout_:function(e,t,n,r){var a=IS(e,"x","dropout");if(Fb("float32"===a.dtype,(function(){return"x has to be a floating point tensor since it's going to be "+"scaled, but got a ".concat(a.dtype," tensor instead.")})),Fb(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got ".concat(t,".")})),0===t)return e instanceof tS?a.clone():a;var i=function(e,t){if(null==t)return e.shape.slice();if(qb(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(a,n),o=1-t,s=S_(yA(x_(AC(i,0,1,"float32",r),o)),o);return N_(a,s)}});function RD(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function PD(e,t,n){for(var r=1-e%2,a=new Float32Array(e),i=0;i<e;++i){var o=2*Math.PI*i/(e+r-1);a[i]=t-n*Math.cos(o)}return fD(a,"float32")}function LD(){return LD=Rt(Ot().mark((function e(t,n){var r,a,i,o,s,u,c,l,f,h,d,p,m,v,y,g=arguments;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g.length>2&&void 0!==g[2]?g[2]:1,a=IS(t,"predictions","inTopK"),i=IS(n,"targets","inTopK"),Fb(a.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, "+"but got ".concat(a.rank)})),Fb(a.rank-1===i.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+"".concat(a.rank," and targets rank ").concat(i.rank)})),jb(a.shape.slice(0,a.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),o=a.shape[a.shape.length-1],Fb(r>0&&r<=o,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last "+"dimension (".concat(o,"), but got ").concat(r)})),e.next=10,a.data();case 10:return s=e.sent,e.next=13,i.data();case 13:u=e.sent,c=s.length/o,l=o,f=Zb("bool",c),h=0;case 17:if(!(h<c)){e.next=35;break}for(d=h*l,p=s.subarray(d,d+l),m=[],v=0;v<p.length;v++)m.push({value:p[v],index:v});m.sort((function(e,t){return t.value-e.value})),f[h]=0,y=0;case 25:if(!(y<r)){e.next=32;break}if(m[y].index!==u[h]){e.next=29;break}return f[h]=1,e.abrupt("break",32);case 29:y++,e.next=25;break;case 32:h++,e.next=17;break;case 35:return t!==a&&a.dispose(),n!==i&&i.dispose(),e.abrupt("return",RS(f,i.shape,"bool"));case 38:case"end":return e.stop()}}),e)}))),LD.apply(this,arguments)}var FD=function(e,t){return LD.apply(this,arguments)};var jD=DS({conv2DBackpropFilter_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=SI(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=SI(t,[1,t.shape[0],t.shape[1],t.shape[2]])),Fb(4===s.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(s.shape,".")})),Fb(4===u.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(u.shape,".")})),Fb(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,".")}));var c="NHWC"===i?s.shape[3]:s.shape[1],l="NHWC"===i?u.shape[3]:u.shape[1];Fb(c===n[2],(function(){return"Error in conv2dDerFilter: depth of input ".concat(c,") must ")+"match input depth in filter (".concat(n[2],".")})),Fb(l===n[3],(function(){return"Error in conv2dDerFilter: depth of dy (".concat(l,") must ")+"match output depth for filter (".concat(n[3],").")})),null!=o&&Fb(Hb(a),(function(){return"Error in conv2dDerFilter: pad must be an integer when using, "+"dimRoundingMode ".concat(o," but got pad ").concat(a,".")}));var f={x:s,dy:u},h={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,filterShape:n};return kS.runKernel(iw,f,h)}});function zD(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return N_(e,uD(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function VD(e,t){var n=t,r=K_(e.shape,t.shape);return r.length>0&&(n=LA(n,r)),SI(n,e.shape)}function UD(e,t,n,r){if("linear"===t)return e;if("relu"===t)return MC(e);if("elu"===t)return lA(e);if("relu6"===t)return RC(e);if("prelu"===t)return kC(e,n);if("leakyrelu"===t)return NA(e,r);throw new Error("Unknown fused activation ".concat(t,"."))}var BD=function(e,t){return!(e>0)||"linear"===t};var qD=DS({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=void 0===i?"NHWC":i,s=e.dilations,u=void 0===s?[1,1]:s,c=e.dimRoundingMode,l=e.bias,f=e.activation,h=void 0===f?"linear":f,d=e.preluActivationWeights,p=e.leakyreluAlpha;if(h=h||"linear",!1===BD(kS.state.gradientDepth,h)){var m=WI(t,n,r,a,o,u,c);return null!=l&&(m=x_(m,l)),UD(m,h,d,p)}var v=IS(t,"x","conv2d"),y=IS(n,"filter","conv2d"),g=v,b=!1;3===v.rank&&(b=!0,g=SI(v,[1,v.shape[0],v.shape[1],v.shape[2]])),Fb(4===g.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(g.rank,".")})),Fb(4===y.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(y.rank,".")})),null!=c&&Fb(Hb(a),(function(){return"Error in fused conv2d: pad must be an integer when using, "+"dimRoundingMode ".concat(c," but got pad ").concat(a,".")})),Fb(g.shape[3]===y.shape[2],(function(){return"Error in conv2d: depth of input (".concat(g.shape[3],") must match ")+"input depth for filter ".concat(y.shape[2],".")})),Fb(xI(r,u),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(r," and dilations '").concat(u,"'")})),Fb("NHWC"===o,(function(){return"Error in conv2d: got dataFormat of ".concat(o," but only NHWC is currently supported.")}));var k,w,x=pI(g.shape,y.shape,r,u,a,c);null!=l&&(k=te(fS(k=IS(l,"bias","fused conv2d"),v),1)[0],G_(x.outShape,k.shape)),null!=d&&(w=IS(d,"prelu weights","fused conv2d"));var E=function(e,t){var n=te(t,4),i=n[0],o=n[1],s=n[2],c=n[3],l=zD(e,s,h);Fb(wI(u),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(u,"'")}));var f=[GI(o.shape,l,i,r,a),jD(o,l,i.shape,r,a)];if(null!=c){var d=VD(c,l);f.push(d)}return f},S={x:g,filter:y,bias:k,preluActivationWeights:w},N={strides:r,pad:a,dataFormat:o,dilations:u,dimRoundingMode:c,activation:h,leakyreluAlpha:p};if(null==l){var T=R_((function(e,t,n){var r=kS.runKernel(EE,S,N);return n([t,e,r]),b&&(r=SI(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:E}}));return T(g,y)}var _=R_((function(e,t,n,r){var a=kS.runKernel(EE,S,N);return r([t,e,a,n]),b&&(a=SI(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:E}}));return _(g,y,k)}});var HD=DS({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=SI(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=SI(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var c={x:s,dy:u},l={strides:r,pad:a,dimRoundingMode:o,dilations:i,filterShape:n};return kS.runKernel(yw,c,l)}});var WD=DS({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=t,u=!1;3===t.rank&&(u=!0,s=SI(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var c={dy:s,filter:n},l={strides:r,pad:a,dimRoundingMode:o,dilations:i,inputShape:e},f=kS.runKernel(gw,c,l);return u?SI(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});var KD=DS({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=void 0===i?"NHWC":i,s=e.dilations,u=void 0===s?[1,1]:s,c=e.dimRoundingMode,l=e.bias,f=e.activation,h=void 0===f?"linear":f,d=e.preluActivationWeights,p=e.leakyreluAlpha;if(!1===BD(kS.state.gradientDepth,h)){var m=rA(t,n,r,a,o,u,c);return null!=l&&(m=x_(m,l)),UD(m,h,d,p)}var v=IS(t,"x","depthwiseConv2d"),y=IS(n,"filter","depthwiseConv2d"),g=v,b=!1;3===v.rank&&(b=!0,g=SI(v,[1,v.shape[0],v.shape[1],v.shape[2]])),Fb(4===g.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(g.rank,".")})),Fb(4===y.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, "+"but got rank ".concat(y.rank,".")})),Fb(g.shape[3]===y.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels "+"(".concat(g.shape[3],") must match the inChannels dimension in ")+"filter ".concat(y.shape[2],".")})),null==u&&(u=[1,1]),Fb(xI(r,u),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must "+"be 1. Got strides ".concat(r," and dilations '").concat(u,"'")})),null!=c&&Fb(Hb(a),(function(){return"Error in fused depthwiseConv2d: pad must be an integer when "+"using dimRoundingMode ".concat(c," but got pad ").concat(a,".")}));var k,w,x=pI(g.shape,y.shape,r,u,a,c,!0);if(null!=l){var E=te(fS(k=IS(l,"bias","fused conv2d"),v),1);k=E[0],G_(x.outShape,k.shape)}null!=d&&(w=IS(d,"prelu weights","fused depthwiseConv2d"));var S=function(e,t){Fb(wI(u),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(u,"'")}));var n=te(t,4),i=n[0],o=n[1],s=n[2],l=n[3],f=zD(e,s,h),d=WD(o.shape,f,i,r,a,u,c),p=HD(o,f,i.shape,r,a,u,c);return null!=l?[d,p,VD(k,f)]:[d,p]},N={x:g,filter:y,bias:k,preluActivationWeights:w},T={strides:r,pad:a,dataFormat:o,dilations:u,dimRoundingMode:c,activation:h,leakyreluAlpha:p};if(null==l){var _=R_((function(e,t,n){var r=kS.runKernel(SE,N,T);return n([t,e,r]),b&&(r=SI(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:S}}));return _(g,y)}var I=R_((function(e,t,n,r){var a=kS.runKernel(SE,N,T);return r([t,e,a,n]),b&&(a=SI(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:S}}));return I(g,y,k)}});var GD=DS({fusedMatMul_:function(e){var t=e.a,n=e.b,r=e.transposeA,a=void 0!==r&&r,i=e.transposeB,o=void 0!==i&&i,s=e.bias,u=e.activation,c=void 0===u?"linear":u,l=e.preluActivationWeights,f=e.leakyreluAlpha;if(!1===BD(kS.state.gradientDepth,c)){var h=lT(t,n,a,o);return null!=s&&(h=x_(h,s)),UD(h,c,l,f)}var d=IS(t,"a","fused matMul"),p=IS(n,"b","fused matMul"),m=te(fS(d,p),2);d=m[0],p=m[1];var v=a?d.shape[d.rank-2]:d.shape[d.rank-1],y=o?p.shape[p.rank-1]:p.shape[p.rank-2],g=a?d.shape[d.rank-1]:d.shape[d.rank-2],b=o?p.shape[p.rank-2]:p.shape[p.rank-1],k=d.shape.slice(0,-2),w=p.shape.slice(0,-2),x=Ub(k),E=Ub(w);Fb(d.rank>=2&&p.rank>=2&&d.rank===p.rank,(function(){return"Error in fused matMul: inputs must have the same rank of at "+"least 2, got ranks ".concat(d.rank," and ").concat(p.rank,".")})),Fb(qb(k,w),(function(){return"Error in fused matMul: outer dimensions (".concat(k,") and (")+"".concat(w,") of Tensors with shapes ").concat(d.shape," and ")+"".concat(p.shape," must match.")})),Fb(v===y,(function(){return"Error in fused matMul: inner shapes (".concat(v,") and (")+"".concat(y,") of Tensors with shapes ").concat(d.shape," and ")+"".concat(p.shape," and transposeA=").concat(a)+" and transposeB=".concat(o," must match.")}));var S,N,T=d.shape.slice(0,-2).concat([g,b]),_=SI(d,a?[x,v,g]:[x,g,v]),I=SI(p,o?[E,b,y]:[E,y,b]);null!=s&&(S=te(fS(S=IS(s,"bias","fused matMul"),d),1)[0],G_(T,S.shape)),null!=l&&(N=IS(l,"prelu weights","fused matMul"));var A=function(e,t){var n,r,i=te(t,4),u=i[0],l=i[1],f=i[2],h=i[3],d=zD(SI(e,f.shape),f,c);return a||o?!a&&o?(n=lT(d,l,!1,!1),r=lT(d,u,!0,!1)):a&&!o?(n=lT(l,d,!1,!0),r=lT(u,d,!1,!1)):(n=lT(l,d,!0,!0),r=lT(d,u,!0,!0)):(n=lT(d,l,!1,!0),r=lT(u,d,!0,!1)),null!=s?[n,r,VD(h,d)]:[n,r]},C={a:_,b:I,bias:S,preluActivationWeights:N},D={transposeA:a,transposeB:o,activation:c,leakyreluAlpha:f};if(null==s){var O=R_((function(e,t,n){var r=kS.runKernel(xE,C,D);return n([e,t,r]),{value:SI(r,T),gradFunc:A}}));return O(_,I)}var M=R_((function(e,t,n,r){var a=kS.runKernel(xE,C,D);return r([e,t,a,n]),{value:SI(a,T),gradFunc:A}}));return M(_,I,S)}});var QD=DS({hammingWindow_:function(e){return PD(e,.54,.46)}});var YD=DS({hannWindow_:function(e){return PD(e,.5,.5)}});var XD=DS({frame_:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=0,o=[];i+t<=e.size;)o.push(AI(e,i,t)),i+=n;if(r)for(;i<e.size;){var s=i+t-e.size,u=_I([AI(e,i,t-s),z_([s],a)]);o.push(u),i+=n}return 0===o.length?hD([],[0,t]):SI(_I(o),[o.length,t])}});var $D=DS({stft_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:YD;null==r&&(r=RD(t));for(var i=XD(e,t,n),o=N_(i,a(t)),s=[],u=0;u<i.shape[0];u++)s.push(aD(AI(o,[u,0],[1,t]),r));return _I(s)}});var JD=DS({cropAndResize_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=IS(e,"image","cropAndResize"),s=IS(t,"boxes","cropAndResize","float32"),u=IS(n,"boxInd","cropAndResize","int32"),c=s.shape[0];Fb(4===o.rank,(function(){return"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(o.rank,".")})),Fb(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size [".concat(c,",4] ")+"but had shape ".concat(s.shape,".")})),Fb(1===u.rank&&u.shape[0]===c,(function(){return"Error in cropAndResize: boxInd must be have size [".concat(c,"] ")+"but had shape ".concat(s.shape,".")})),Fb(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(r.length,".")})),Fb(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was ".concat(r)})),Fb("bilinear"===a||"nearest"===a,(function(){return"method must be bilinear or nearest, but was ".concat(a)}));var l={image:o,boxes:s,boxInd:u},f={method:a,extrapolationValue:i,cropSize:r};return kS.runKernel(dw,l,f)}});var ZD=DS({flipLeftRight_:function(e){var t=IS(e,"image","flipLeftRight","float32");Fb(4===t.rank,(function(){return"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(t.rank,".")}));var n={image:t};return kS.runKernel(Mw,n,{})}});var eO=DS({rotateWithOffset_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=IS(e,"image","rotateWithOffset","float32");Fb(4===a.rank,(function(){return"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(a.rank,".")}));var i={image:a},o={radians:t,fillValue:n,center:r};return kS.runKernel(wE,i,o)}});function tO(e,t,n,r,a,i){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==i&&(i=0);var o=e.shape[0];return n=Math.min(n,o),Fb(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '".concat(r,"'")})),Fb(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")})),Fb(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])})),Fb(1===t.rank,(function(){return"scores must be a 1D tensor"})),Fb(t.shape[0]===o,(function(){return"scores has incompatible shape with boxes. Expected ".concat(o,", ")+"but was ".concat(t.shape[0])})),Fb(0<=i&&i<=1,(function(){return"softNmsSigma must be in [0, 1], but was '".concat(i,"'")})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}var nO=DS({nonMaxSuppression_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=IS(e,"boxes","nonMaxSuppression"),o=IS(t,"scores","nonMaxSuppression"),s=tO(i,o,n,r,a),u={maxOutputSize:n=s.maxOutputSize,iouThreshold:r=s.iouThreshold,scoreThreshold:a=s.scoreThreshold};return kS.runKernel(wx,{boxes:i,scores:o},u)}});function rO(e,t,n){var r=function(e,t,n){return function(e,t,n){var r=0,a=e.length,i=0,o=!1;for(;r<a;){var s=n(t,e[i=r+(a-r>>>1)]);s>0?r=i+1:(a=i,o=!s)}return o?r:-r-1}(e,t,n||aO)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function aO(e,t){return e>t?1:e<t?-1:0}function iO(e,t,n,r,a){return uO(e,t,n,r,a,0)}function oO(e,t,n,r,a,i){return uO(e,t,n,r,a,0,!1,i,!0)}function sO(e,t,n,r,a,i){return uO(e,t,n,r,a,i,!0)}function uO(e,t,n,r,a,i){for(var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=arguments.length>8&&void 0!==arguments[8]&&arguments[8],c=[],l=0;l<t.length;l++)t[l]>a&&c.push({score:t[l],boxIndex:l,suppressBeginIndex:0});c.sort(fO);for(var f=i>0?-.5/i:0,h=[],d=[];h.length<n&&c.length>0;){var p=c.pop(),m=p.score,v=p.boxIndex,y=p.suppressBeginIndex;if(m<a)break;for(var g=!1,b=h.length-1;b>=y;--b){var k=cO(e,v,h[b]);if(k>=r){g=!0;break}if(p.score=p.score*lO(r,f,k),p.score<=a)break}p.suppressBeginIndex=h.length,g||(p.score===m?(h.push(v),d.push(p.score)):p.score>a&&rO(c,p,fO))}var w=h.length,x=n-w;s&&x>0&&(h.push.apply(h,U(new Array(x).fill(0))),d.push.apply(d,U(new Array(x).fill(0))));var E={selectedIndices:h};return o&&(E.selectedScores=d),u&&(E.validOutputs=w),E}function cO(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(a[0],a[2]),l=Math.min(a[1],a[3]),f=Math.max(a[0],a[2]),h=Math.max(a[1],a[3]),d=(s-i)*(u-o),p=(f-c)*(h-l);if(d<=0||p<=0)return 0;var m=Math.max(i,c),v=Math.max(o,l),y=Math.min(s,f),g=Math.min(u,h),b=Math.max(y-m,0)*Math.max(g-v,0);return b/(d+p-b)}function lO(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function fO(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function hO(){return hO=Rt(Ot().mark((function e(t,n,r){var a,i,o,s,u,c,l,f,h,d,p=arguments;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.length>3&&void 0!==p[3]?p[3]:.5,i=p.length>4&&void 0!==p[4]?p[4]:Number.NEGATIVE_INFINITY,o=IS(t,"boxes","nonMaxSuppressionAsync"),s=IS(n,"scores","nonMaxSuppressionAsync"),u=tO(o,s,r,a,i),r=u.maxOutputSize,a=u.iouThreshold,i=u.scoreThreshold,e.next=10,Promise.all([o.data(),s.data()]);case 10:return c=e.sent,l=c[0],f=c[1],h=iO(l,f,r,a,i),d=h.selectedIndices,o!==t&&o.dispose(),s!==n&&s.dispose(),e.abrupt("return",fD(d,"int32"));case 17:case"end":return e.stop()}}),e)}))),hO.apply(this,arguments)}var dO=function(e,t,n){return hO.apply(this,arguments)};var pO=DS({nonMaxSuppressionWithScore_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=IS(e,"boxes","nonMaxSuppression"),s=IS(t,"scores","nonMaxSuppression"),u=tO(o,s,n,r,a,i),c={boxes:o,scores:s},l={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:a=u.scoreThreshold,softNmsSigma:i=u.softNmsSigma},f=kS.runKernel(Ex,c,l);return{selectedIndices:f[0],selectedScores:f[1]}}});function mO(){return mO=Rt(Ot().mark((function e(t,n,r){var a,i,o,s,u,c,l,f,h,d,p,m,v=arguments;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=v.length>3&&void 0!==v[3]?v[3]:.5,i=v.length>4&&void 0!==v[4]?v[4]:Number.NEGATIVE_INFINITY,o=v.length>5&&void 0!==v[5]?v[5]:0,s=IS(t,"boxes","nonMaxSuppressionAsync"),u=IS(n,"scores","nonMaxSuppressionAsync"),c=tO(s,u,r,a,i,o),r=c.maxOutputSize,a=c.iouThreshold,i=c.scoreThreshold,o=c.softNmsSigma,e.next=12,Promise.all([s.data(),u.data()]);case 12:return l=e.sent,f=l[0],h=l[1],d=sO(f,h,r,a,i,o),p=d.selectedIndices,m=d.selectedScores,s!==t&&s.dispose(),u!==n&&u.dispose(),e.abrupt("return",{selectedIndices:fD(p,"int32"),selectedScores:fD(m)});case 19:case"end":return e.stop()}}),e)}))),mO.apply(this,arguments)}var vO=function(e,t,n){return mO.apply(this,arguments)};var yO=DS({nonMaxSuppressionPadded_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=IS(e,"boxes","nonMaxSuppression"),s=IS(t,"scores","nonMaxSuppression"),u=tO(o,s,n,r,a,null),c={boxes:o,scores:s},l={maxOutputSize:u.maxOutputSize,iouThreshold:u.iouThreshold,scoreThreshold:u.scoreThreshold,padToMaxOutputSize:i},f=kS.runKernel(xx,c,l);return{selectedIndices:f[0],validOutputs:f[1]}}});function gO(){return gO=Rt(Ot().mark((function e(t,n,r){var a,i,o,s,u,c,l,f,h,d,p,m,v,y,g,b,k=arguments;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=k.length>3&&void 0!==k[3]?k[3]:.5,i=k.length>4&&void 0!==k[4]?k[4]:Number.NEGATIVE_INFINITY,o=k.length>5&&void 0!==k[5]&&k[5],s=IS(t,"boxes","nonMaxSuppressionAsync"),u=IS(n,"scores","nonMaxSuppressionAsync"),c=tO(s,u,r,a,i,null),l=c.maxOutputSize,f=c.iouThreshold,h=c.scoreThreshold,e.next=11,Promise.all([s.data(),u.data()]);case 11:return d=e.sent,p=te(d,2),m=p[0],v=p[1],y=oO(m,v,l,f,h,o),g=y.selectedIndices,b=y.validOutputs,s!==t&&s.dispose(),u!==n&&u.dispose(),e.abrupt("return",{selectedIndices:fD(g,"int32"),validOutputs:L_(b,"int32")});case 19:case"end":return e.stop()}}),e)}))),gO.apply(this,arguments)}var bO=function(e,t,n){return gO.apply(this,arguments)};var kO=DS({resizeBilinear_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=IS(e,"images","resizeBilinear");Fb(3===a.rank||4===a.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")})),Fb(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(t,".")})),Fb(!1===r||!1===n,(function(){return"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."}));var i=a,o=!1;3===a.rank&&(o=!0,i=SI(a,[1,a.shape[0],a.shape[1],a.shape[2]])),te(t,0);var s={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},c=kS.runKernel(zx,s,u);return o?SI(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});var wO=DS({resizeNearestNeighbor_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=IS(e,"images","resizeNearestNeighbor");Fb(3===a.rank||4===a.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")})),Fb(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(t,".")})),Fb("float32"===a.dtype||"int32"===a.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"})),Fb(!1===r||!1===n,(function(){return"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."}));var i=a,o=!1;3===a.rank&&(o=!0,i=SI(a,[1,a.shape[0],a.shape[1],a.shape[2]])),te(t,0);var s={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},c=kS.runKernel(Fx,s,u);return o?SI(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});var xO=DS({bandPart_:function(e,t,n){Fb(t%1===0,(function(){return"bandPart(): numLower must be an integer, got ".concat(t,".")})),Fb(n%1===0,(function(){return"bandPart(): numUpper must be an integer, got ".concat(n,".")}));var r=IS(e,"a","bandPart");Fb(r.rank>=2,(function(){return"bandPart(): Rank must be at least 2, got ".concat(r.rank,".")}));var a=r.shape,i=te(r.shape.slice(-2),2),o=i[0],s=i[1];if(!(t<=o))throw new Error("bandPart(): numLower (".concat(t,")")+" must not be greater than the number of rows (".concat(o,")."));if(!(n<=s))throw new Error("bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(s,")."));t<0&&(t=o),n<0&&(n=s);var u=SI(CC(0,o,1,"int32"),[-1,1]),c=CC(0,s,1,"int32"),l=B_(u,c),f=GA(_A(l,L_(+t,"int32")),kA(l,L_(-n,"int32"))),h=cC([o,s],r.dtype);return SI(sD(kD(SI(r,[-1,o,s])).map((function(e){return sA(f,e,h)}))),a)}});var EO=DS({gramSchmidt_:function(e){var t;if(Array.isArray(e)){t=!1,Fb(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){Fb(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(e[t].shape[0]," vs. ").concat(n,")")}))},a=1;a<e.length;++a)r(a)}else t=!0,e=rD(e,e.shape[0],0).map((function(e){return oD(e,[0])}));Fb(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds ")+"number of dimensions (".concat(e[0].shape[0],").")}));for(var i=[],o=e,s=function(e){i.push(kS.tidy((function(){var t=o[e];if(e>0)for(var n=0;n<e;++n){var r=N_(LA(N_(i[n],t)),i[n]);t=B_(t,r)}return S_(t,ID(t,"euclidean"))})))},u=0;u<e.length;++u)s(u);return t?sD(i,0):i}});function SO(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return kS.tidy((function(){Fb(2===e.shape.length,(function(){return"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor.")}));for(var n=e.shape[0],r=e.shape[1],a=vA(n),i=zN(e),o=hD([[1]],[1,1]),s=zN(o),u=n>=r?r:n,c=function(e){var t=i,u=s,c=a,l=kS.tidy((function(){var t=AI(i,[e,e],[n-e,1]),u=ID(t),c=AI(i,[e,e],[1,1]),l=sA(bA(c,0),hD([[-1]]),hD([[1]])),f=B_(c,N_(l,u)),h=S_(t,f);s=1===h.shape[0]?zN(o):_I([o,AI(h,[1,0],[h.shape[0]-1,h.shape[1]])],0);var d=OA(S_(lT(l,f),u)),p=AI(i,[e,0],[n-e,r]),m=N_(d,s),v=hT(s);if(0===e)i=B_(p,lT(m,lT(v,p)));else{var y=B_(p,lT(m,lT(v,p)));i=_I([AI(i,[0,0],[e,r]),y],0)}var g=hT(m),b=AI(a,[0,e],[n,a.shape[1]-e]);if(0===e)a=B_(b,lT(lT(b,s),g));else{var k=B_(b,lT(lT(b,s),g));a=_I([AI(a,[0,0],[n,e]),k],1)}return[s,i,a]})),f=te(l,3);s=f[0],i=f[1],a=f[2],l_([t,u,c])},l=0;l<u;++l)c(l);return!t&&n>r&&(a=AI(a,[0,0],[n,r]),i=AI(i,[0,0],[r,r])),[a,i]}))}var NO,TO=DS({qr_:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Fb(e.rank>=2,(function(){return"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank)})),2===e.rank)return SO(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=kD(SI(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],i=[];return r.forEach((function(e){var n=te(SO(e,t),2),r=n[0],o=n[1];a.push(r),i.push(o)})),[SI(sD(a,0),e.shape),SI(sD(i,0),e.shape)]}});!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(NO||(NO={}));var _O=DS({computeWeightedLoss_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:NO.SUM_BY_NONZERO_WEIGHTS,r=IS(e,"losses","computeWeightedLoss"),a=null;null!=t&&(a=IS(t,"weights","computeWeightedLoss"));var i=null==a?r:N_(r,a);if(n===NO.NONE)return i;if(n===NO.SUM)return LA(i);if(n===NO.MEAN){if(null==a)return eC(i);var o=r.size/a.size,s=S_(LA(i),LA(a));return o>1?S_(s,L_(o)):s}if(n===NO.SUM_BY_NONZERO_WEIGHTS){if(null==a)return S_(LA(i),L_(r.size));var u=N_(a,lC(r.shape)),c=jN(LA(uC(u,L_(0))),"float32");return S_(LA(i),c)}throw Error("Unknown reduction: ".concat(n))}});var IO=DS({absoluteDifference_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NO.SUM_BY_NONZERO_WEIGHTS,a=IS(e,"labels","absoluteDifference"),i=IS(t,"predictions","absoluteDifference"),o=null;null!=n&&(o=IS(n,"weights","absoluteDifference")),jb(a.shape,i.shape,"Error in absoluteDifference: ");var s=H_(B_(a,i));return _O(s,o,r)}});var AO=DS({cosineDistance_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:NO.SUM_BY_NONZERO_WEIGHTS,i=IS(e,"labels","cosineDistance"),o=IS(t,"predictions","cosineDistance"),s=null;null!=r&&(s=IS(r,"weights","cosineDistance")),jb(i.shape,o.shape,"Error in cosineDistance: ");var u=L_(1),c=B_(u,LA(N_(i,o),n,!0));return _O(c,s,a)}});var CO=DS({hingeLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NO.SUM_BY_NONZERO_WEIGHTS,a=IS(e,"labels","hingeLoss"),i=IS(t,"predictions","hingeLoss"),o=null;null!=n&&(o=IS(n,"weights","hingeLoss")),jb(a.shape,i.shape,"Error in hingeLoss: ");var s=L_(1);a=B_(N_(L_(2),a),s);var u=MC(B_(s,N_(a,i)));return _O(u,o,r)}});var DO=DS({huberLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:NO.SUM_BY_NONZERO_WEIGHTS,i=IS(e,"labels","huberLoss"),o=IS(t,"predictions","huberLoss"),s=null;null!=n&&(s=IS(n,"weights","huberLoss")),jb(i.shape,o.shape,"Error in huberLoss: ");var u=L_(r),c=H_(B_(o,i)),l=nC(c,u),f=B_(c,l),h=x_(N_(L_(.5),__(l)),N_(u,f));return _O(h,s,a)}});var OO=DS({logLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:NO.SUM_BY_NONZERO_WEIGHTS,i=IS(e,"labels","logLoss"),o=IS(t,"predictions","logLoss"),s=null;null!=n&&(s=IS(n,"weights","logLoss")),jb(i.shape,o.shape,"Error in logLoss: ");var u=L_(1),c=L_(r),l=OA(N_(i,CA(x_(o,c)))),f=N_(B_(u,i),CA(x_(B_(u,o),c))),h=B_(l,f);return _O(h,s,a)}});var MO=DS({meanSquaredError_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NO.SUM_BY_NONZERO_WEIGHTS,a=IS(e,"labels","meanSquaredError"),i=IS(t,"predictions","meanSquaredError"),o=null;null!=n&&(o=IS(n,"weights","meanSquaredError")),jb(a.shape,i.shape,"Error in meanSquaredError: ");var s=iD(a,i);return _O(s,o,r)}});var RO=DS({sigmoidCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:NO.SUM_BY_NONZERO_WEIGHTS,i=IS(e,"multiClassLabels","sigmoidCrossEntropy"),o=IS(t,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=IS(n,"weights","sigmoidCrossEntropy")),jb(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=L_(r),c=L_(1),l=L_(.5);i=x_(N_(i,B_(c,u)),N_(l,u))}var f=function(e,t){var n=IS(e,"labels","sigmoidCrossEntropyWithLogits"),r=IS(t,"logits","sigmoidCrossEntropyWithLogits");jb(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var a=MC(r),i=N_(r,n),o=DA(hA(OA(H_(r))));return x_(B_(a,i),o)}(i,o);return _O(f,s,a)}});var PO=DS({softmaxCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:NO.SUM_BY_NONZERO_WEIGHTS,i=IS(e,"onehotLabels","softmaxCrossEntropy"),o=IS(t,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=IS(n,"weights","softmaxCrossEntropy")),jb(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var u=L_(r),c=L_(1),l=L_(i.shape[1]);i=x_(N_(i,B_(c,u)),S_(u,l))}var f=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+"supported. Labels / logits was rank ".concat(t.rank," ")+"and dim was ".concat(n));var r=R_((function(e,t,r){var a=KA(t,[n],!0),i=B_(jN(t,"float32"),a);r([e,i]);var o=OA(N_(i,e));return{value:LA(o,[n]),gradFunc:function(e,t){var r=te(t,2),a=r[0],i=r[1],o=UA(e.shape,[n]);return[N_(SI(e,o),B_(jN(a,"float32"),hA(i))),N_(SI(e,o),B_(hA(i),jN(a,"float32")))]}}}));return r(e,t)}(i,o);return _O(f,s,a)}}),LO={fft:eD,ifft:tD,rfft:aD,irfft:nD},FO={hammingWindow:QD,hannWindow:YD,frame:XD,stft:$D},jO={flipLeftRight:ZD,resizeNearestNeighbor:wO,resizeBilinear:kO,rotateWithOffset:eO,cropAndResize:JD,nonMaxSuppression:nO,nonMaxSuppressionAsync:dO,nonMaxSuppressionWithScore:pO,nonMaxSuppressionWithScoreAsync:vO,nonMaxSuppressionPadded:yO,nonMaxSuppressionPaddedAsync:bO},zO={bandPart:xO,gramSchmidt:EO,qr:TO},VO={absoluteDifference:IO,computeWeightedLoss:_O,cosineDistance:AO,hingeLoss:CO,huberLoss:DO,logLoss:OO,meanSquaredError:MO,sigmoidCrossEntropy:RO,softmaxCrossEntropy:PO},UO=function(){function e(){B(this,e)}return K(e,null,[{key:"sgd",value:function(e){return new X_(e)}},{key:"momentum",value:function(e,t){return new $_(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2])}},{key:"rmsprop",value:function(e){return new J_(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,arguments.length>4&&void 0!==arguments[4]&&arguments[4])}},{key:"adam",value:function(){return new q_(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null)}},{key:"adadelta",value:function(){return new j_(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"adamax",value:function(){return new Y_(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.002,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,arguments.length>4&&void 0!==arguments[4]?arguments[4]:0)}},{key:"adagrad",value:function(e){return new V_(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1)}}]),e}(),BO={sgd:UO.sgd,momentum:UO.momentum,adadelta:UO.adadelta,adagrad:UO.adagrad,rmsprop:UO.rmsprop,adamax:UO.adamax,adam:UO.adam},qO="undefined"!==typeof requestAnimationFrame?requestAnimationFrame:"undefined"!==typeof setImmediate?setImmediate:function(e){return e()};function HO(){return new Promise((function(e){return qO((function(){return e()}))}))}function WO(e,t){var n=e[0].length;e.forEach((function(e,t){Fb(e.length===n,(function(){return"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same ")+"as the rank of the rest (".concat(n,")")}))})),Fb(t>=0&&t<n,(function(){return"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")}));var r=e[0];e.forEach((function(e,a){for(var i=0;i<n;i++)Fb(i===t||e[i]===r[i],(function(){return"Error in concat".concat(n,"D: Shape of tensors[").concat(a,"] (").concat(e,") ")+"does not match the shape of the rest (".concat(r,") ")+"along the non-concatenated axis ".concat(a,".")}))}))}function KO(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}var GO=30;function QO(e){return e<=GO?e:hk(e,Math.floor(Math.sqrt(e)))}function YO(e,t,n){return[n*("number"===typeof e?e:e[0]),t*("number"===typeof e?e:e[1])]}function XO(e,t,n){var r=[];if(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])(r=r.concat(t.slice(0))).push(e[0]/n),r=r.concat(e.slice(1));else{r=r.concat(e[0]);for(var a=t.length,i=0;i<a;++i)r=r.concat([e[i+1]/t[i],t[i]]);r=r.concat(e.slice(a+1))}return r}function $O(e,t){var n=[];if(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]){n.push(t);for(var r=t+1;r<e;++r)r<=2*t?(n.push(r),n.push(r-(t+1))):n.push(r)}else{for(var a=[],i=[],o=1;o<e;++o)o>=2*t+1||o%2===1?i.push(o):a.push(o);n.push.apply(n,a),n.push(0),n.push.apply(n,i)}return n}function JO(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var i=1;i<e.length;++i)i<=t.length?r?a.push(t[i-1]*e[i]):a.push(e[i]/t[i-1]):a.push(e[i]);return a}function ZO(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function eM(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}var tM,nM,rM=1.7580993408473768,aM=1.0507009873554805,iM=.3275911,oM=.254829592,sM=-.284496736,uM=1.421413741,cM=-1.453152027,lM=1.061405429;function fM(){var e;Nk().getBool("IS_TEST")||(e=console).warn.apply(e,arguments)}function hM(){var e;Nk().getBool("IS_TEST")||(e=console).log.apply(e,arguments)}function dM(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(e.length,", imag: ").concat(t.length,"."));for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function pM(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function mM(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function vM(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function yM(e,t){return{real:e[2*t],imag:e[2*t+1]}}function gM(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function bM(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),a=0;a<Math.ceil(e/2);a++){var i=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(i),r[a]=Math.sin(i)}return{real:n,imag:r}}function kM(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}function wM(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"===typeof t)Fb(e.shape[n]%t===0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(e.shape[n]/t);else{Fb(t.reduce((function(e,t){return-1===t&&(e+=1),e}),0)<=1,(function(){return"There should be only one negative value in split array."}));var a=t.indexOf(-1);if(-1!==a){var i=t.reduce((function(e,t){return t>0?e+t:e}));t[a]=e.shape[n]-i}Fb(e.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t}return r}function xM(e,t){var n,r=!1;for(e<=GO?(n=e,r=!0):n=hk(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=hk(e,n+1);return n}function EM(e,t,n){for(var r=[],a=e.length,i=0;i<a;i++)i!==t?r.push(e[i]):r.push(n);return r}function SM(e,t,n,r){var a=t.shape.length,i=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-".concat(a,", ").concat(a,"], but got ").concat(r));if(r<0&&(r+=a),r>i)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(i,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(var o=0;o<r;++o)if(e.shape[o]!==t.shape[o])throw new Error("x.shape[".concat(o,"]: ").concat(e.shape[o]," should be equal to indices.shape[").concat(o,"]: ").concat(t.shape[o],"."));for(var s=e.shape[n],u=[],c=1,l=1,f=1,h=0;h<r;++h)u.push(e.shape[h]),c*=e.shape[h];for(var d=r;d<n;d++)u.push(e.shape[d]),l*=e.shape[d];for(var p=r;p<a;p++)u.push(t.shape[p]);for(var m=n+1;m<i;m++)u.push(e.shape[m]),f*=e.shape[m];return{batchSize:c,sliceSize:f,outerSize:l,dimSize:s,outputShape:u}}function NM(e){try{return e.map((function(e){return UE(e)}))}catch(zP){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(zP))}}function TM(e){return e.map((function(e){return VE(e)}))}!function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF"}(tM||(tM={})),function(e){!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(nM||(nM={}));var _M={};function IM(e){return _M[e]}function AM(e,t,n,r,a){var i=t.inputParams[e];if(i&&void 0!==i.inputIndexStart){var o=i.inputIndexStart,s=0===i.inputIndexEnd?void 0:void 0===i.inputIndexEnd?o+1:i.inputIndexEnd;if("tensor"===i.type)return CM(t.inputNames[i.inputIndexStart],n,r,a);if("tensors"===i.type)return t.inputNames.slice(o,s).map((function(e){return CM(e,n,r,a)}));var u=CM(t.inputNames.slice(o)[0],n,r,a),c=u.dataSync();return"number"===i.type?c[0]:mk(u.shape,c)}var l=t.attrParams[e];return l&&l.value}function CM(e,t,n,r){var a=te(MM(e),2),i=a[0],o=a[1];if(null!=r){var s=r.getHashTableHandleByName(i);if(null!=s)return s}var u=n.currentContextIds.find((function(e){return!!t[OM(i,e)]}));return void 0!==u?t[OM(i,u)][o]:void 0}function DM(e,t){var n=te(MM(e),2),r=n[0],a=n[1];return[OM(r,t&&t.currentContextId),a]}function OM(e,t){return t?"".concat(e,"-").concat(t):e}function MM(e){var t=e.split(":");return 1===t.length?[e,0]:[t[0],Number(t[t.length-1])]}function RM(e,t,n){var r=AM("pad",e,t,n);if("explicit"===r){r=AM("explicitPaddings",e,t,n);for(var a=[[0,0],[0,0],[0,0],[0,0]],i=0;i<4;i++)a[i][0]=r[2*i],a[i][1]=r[2*i+1];return a}return r}function PM(e){return e.kept?e:zN(e)}var LM=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],FM=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],jM=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]}],zM=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number"}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],VM=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],UM=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],BM=[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],qM=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],HM=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]}],WM=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}],KM=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],GM=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],QM=[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],YM=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],XM=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],$M=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],JM=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]}],ZM=function(){function e(){var t;B(this,e);var n=[y,g,b,k,w,x,E,_,T,S,I,A,C,D,O,M,N],r=(t=[]).concat.apply(t,U(n.map((function(e){return e.json}))));this.opMappers=r.reduce((function(e,t){return e[t.tfOpName]=t,e}),{})}return K(e,[{key:"transformGraph",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.node,a=[],i=[],o=[],s=r.reduce((function(e,n){return e[n.name]=t.mapNode(n),n.op.startsWith("Placeholder")?a.push(e[n.name]):"Const"===n.op?i.push(e[n.name]):null!=n.input&&0!==n.input.length||o.push(e[n.name]),e}),{}),u=[],c=[],l={},f={};null!=n&&(l=this.mapSignatureEntries(n.inputs),f=this.mapSignatureEntries(n.outputs));var h=Object.keys(s);h.forEach((function(e){var t=s[e];t.inputNames.forEach((function(e){var n=te(DM(e),1)[0];t.inputs.push(s[n]),s[n].children.push(t)}))})),0===Object.keys(f).length?h.forEach((function(e){var t=s[e];0===t.children.length&&c.push(t)})):Object.keys(f).forEach((function(e){var t=te(DM(e),1)[0],n=s[t];null!=n&&(n.signatureKey=f[e],c.push(n))})),Object.keys(l).length>0?Object.keys(l).forEach((function(e){var t=te(DM(e),1)[0],n=s[t];n&&(n.signatureKey=l[e],u.push(n))})):u=a;var d={};null!=e.library&&null!=e.library.function&&(d=e.library.function.reduce((function(e,n){return e[n.signature.name]=t.mapFunction(n),e}),{}));var p={nodes:s,inputs:u,outputs:c,weights:i,placeholders:a,signature:n,functions:d};return o.length>0&&(p.initNodes=o),p}},{key:"mapSignatureEntries",value:function(e){return Object.keys(e||{}).reduce((function(t,n){return t[e[n].name]=n,t}),{})}},{key:"mapNode",value:function(e){var t=IM(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});var n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map((function(e){return e.startsWith("^")?e.substr(1):e})),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr};return null!=t.inputs&&(n.inputParams=t.inputs.reduce((function(e,t){return e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e}),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce((function(t,n){var r=n.type,a=void 0;switch(n.type){case"string":void 0===(a=tR(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=tR(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":void 0===(a=fR(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=fR(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":void 0===(a=rR(e.attr,n.tfName,n.defaultValue||0))&&n.tfDeprecatedName&&(a=rR(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":void 0===(a=lR(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=lR(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":void 0===(a=nR(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=nR(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":void 0===(a=dR(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=dR(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":void 0===(a=cR(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=cR(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":void 0===(a=hR(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=hR(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":void 0===(a=oR(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=oR(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":void 0===(a=sR(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=sR(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":void 0===(a=iR(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=iR(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: ".concat(n.type," for op: ").concat(e.op))}return t[n.name]={value:a,type:r},t}),{})),n}},{key:"mapFunction",value:function(e){var t=this,n=e.nodeDef,r=[],a={};null!=n&&(a=n.reduce((function(e,n){return e[n.name]=t.mapNode(n),"Const"===n.op&&r.push(e[n.name]),e}),{}));var i=[],o=[];e.signature.inputArg.forEach((function(e){var t=te(DM(e.name),1)[0],n={name:t,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:aR(e.type),type:"dtype"}},children:[]};n.signatureKey=e.name,i.push(n),a[t]=n})),Object.keys(a).forEach((function(e){var t=a[e];t.inputNames.forEach((function(e){var n=te(DM(e),1)[0];t.inputs.push(a[n]),a[n].children.push(t)}))}));var s=e.ret;e.signature.outputArg.forEach((function(e){var t=te(DM(s[e.name]),2),n=t[0],r=t[1],i=a[n];null!=i&&(i.defaultOutput=r,o.push(i))}));var u=this.mapArgsToSignature(e);return{nodes:a,inputs:i,outputs:o,weights:r,placeholders:[],signature:u}}},{key:"mapArgsToSignature",value:function(e){var t=this;return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((function(e,n){return e[n.name]=t.mapArgToTensorInfo(n),e}),{}),outputs:e.signature.outputArg.reduce((function(n,r){return n[r.name]=t.mapArgToTensorInfo(r,e.ret),n}),{})}}},{key:"mapArgToTensorInfo",value:function(e,t){var n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}],[{key:"Instance",get:function(){return this._instance||(this._instance=new this)}}]),e}();function eR(e,t){var n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){var t=Nk().global;if("undefined"!==typeof t.atob)return t.atob(e);if("undefined"!==typeof Buffer)return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function tR(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return null!=a?eR(a.s,r):n}function nR(e,t,n){var r=e[t];return r?r.b:n}function rR(e,t,n){var r=e[t]||{},a=null!=r.i?r.i:null!=r.f?r.f:n;return"number"===typeof a?a:parseInt(a,10)}function aR(e){switch("string"===typeof e&&(e=tM[e]),e){case tM.DT_FLOAT:return"float32";case tM.DT_INT32:case tM.DT_INT64:case tM.DT_INT8:case tM.DT_UINT8:return"int32";case tM.DT_BOOL:return"bool";case tM.DT_DOUBLE:return"float32";case tM.DT_STRING:return"string";default:return null}}function iR(e,t,n){var r=e[t];return r&&r.func?r.func.name:n}function oR(e,t,n){var r=e[t];return r&&r.type?aR(r.type):n}function sR(e,t,n){var r=e[t];return r&&r.list&&r.list.type?r.list.type.map((function(e){return aR(e)})):n}function uR(e){if(!e.unknownRank)return null!=e.dim?e.dim.map((function(e){return"number"===typeof e.size?e.size:parseInt(e.size,10)})):[]}function cR(e,t,n){var r=e[t];return r&&r.shape?uR(r.shape):n}function lR(e,t,n){var r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map((function(e){return"number"===typeof e?e:parseInt(e,10)})):n}function fR(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return a&&a.list&&a.list.s?a.list.s.map((function(e){return eR(e,r)})):n}function hR(e,t,n){var r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map((function(e){return uR(e)})):n}function dR(e,t,n){var r=e[t];return r&&r.list&&r.list.b?r.list.b:n}var pR=function(){function e(t,n,r){var a=this;B(this,e),this.node=t,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map((function(e){return a.getInput(e)})),null!=t.rawAttrs&&(this.attrs=Object.keys(t.rawAttrs).reduce((function(e,t){return e[t]=a.getAttr(t),e}),{}))}return K(e,[{key:"getInput",value:function(e){return CM(e,this.tensorMap,this.context)}},{key:"getAttr",value:function(e,t){var n=this.node.rawAttrs[e];if(null!=n.tensor)return CM(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return rR(this.node.rawAttrs,e,t);if(null!=n.s)return tR(this.node.rawAttrs,e,t);if(null!=n.b)return nR(this.node.rawAttrs,e,t);if(null!=n.shape)return cR(this.node.rawAttrs,e,t);if(null!=n.type)return oR(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return lR(this.node.rawAttrs,e,t);if(null!=n.list.s)return fR(this.node.rawAttrs,e,t);if(null!=n.list.shape)return hR(this.node.rawAttrs,e,t);if(null!=n.list.b)return dR(this.node.rawAttrs,e,t);if(null!=n.list.type)return sR(this.node.rawAttrs,e,t)}return t}}]),e}(),mR=function(e,t,n){switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[x_(AM("a",e,t,n),AM("b",e,t,n))];case"AddN":return[tI(AM("tensors",e,t,n))];case"FloorMod":case"Mod":return[aC(AM("a",e,t,n),AM("b",e,t,n))];case"Mul":return[N_(AM("a",e,t,n),AM("b",e,t,n))];case"RealDiv":case"Div":return[S_(AM("a",e,t,n),AM("b",e,t,n))];case"DivNoNan":return[uA(AM("a",e,t,n),AM("b",e,t,n))];case"FloorDiv":return[E_(AM("a",e,t,n),AM("b",e,t,n))];case"Sub":return[B_(AM("a",e,t,n),AM("b",e,t,n))];case"Minimum":return[nC(AM("a",e,t,n),AM("b",e,t,n))];case"Maximum":return[Q_(AM("a",e,t,n),AM("b",e,t,n))];case"Pow":return[U_(AM("a",e,t,n),AM("b",e,t,n))];case"SquaredDifference":return[iD(AM("a",e,t,n),AM("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},vR=function(e,t,n){switch(e.op){case"Abs":case"ComplexAbs":return[H_(AM("x",e,t,n))];case"Acos":return[Z_(AM("x",e,t,n))];case"Acosh":return[eI(AM("x",e,t,n))];case"Asin":return[oI(AM("x",e,t,n))];case"Asinh":return[sI(AM("x",e,t,n))];case"Atan":return[uI(AM("x",e,t,n))];case"Atan2":return[cI(AM("x",e,t,n),AM("y",e,t,n))];case"Atanh":return[lI(AM("x",e,t,n))];case"Ceil":return[zI(AM("x",e,t,n))];case"Complex":return[OS(AM("real",e,t,n),AM("imag",e,t,n))];case"Cos":return[JI(AM("x",e,t,n))];case"Cosh":return[ZI(AM("x",e,t,n))];case"Elu":return[lA(AM("x",e,t,n))];case"Erf":return[fA(AM("x",e,t,n))];case"Exp":return[hA(AM("x",e,t,n))];case"Expm1":return[pA(AM("x",e,t,n))];case"Floor":return[yA(AM("x",e,t,n))];case"Log":return[CA(AM("x",e,t,n))];case"Log1p":return[DA(AM("x",e,t,n))];case"Imag":return[wA(AM("x",e,t,n))];case"Neg":return[OA(AM("x",e,t,n))];case"Reciprocal":return[OC(AM("x",e,t,n))];case"Real":return[DC(AM("x",e,t,n))];case"Relu":return[MC(AM("x",e,t,n))];case"Round":return[VC(AM("x",e,t,n))];case"Selu":return[BC(AM("x",e,t,n))];case"Sigmoid":return[II(AM("x",e,t,n))];case"Sin":return[GC(AM("x",e,t,n))];case"Sign":return[KC(AM("x",e,t,n))];case"Sinh":return[QC(AM("x",e,t,n))];case"Softplus":return[MA(AM("x",e,t,n))];case"Sqrt":return[T_(AM("x",e,t,n))];case"Square":return[__(AM("x",e,t,n))];case"Tanh":return[CI(AM("x",e,t,n))];case"Tan":return[lD(AM("x",e,t,n))];case"ClipByValue":return[VI(AM("x",e,t,n),AM("clipValueMin",e,t,n),AM("clipValueMax",e,t,n))];case"Relu6":return[RC(AM("x",e,t,n))];case"Rsqrt":return[UC(CM(e.inputNames[0],t,n))];case"Prod":return[wC(AM("x",e,t,n),AM("axes",e,t,n))];case"LeakyRelu":return[NA(AM("x",e,t,n),AM("alpha",e,t,n))];case"Prelu":return[kC(AM("x",e,t,n),AM("alpha",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function yR(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("number"!==typeof e&&"number"!==typeof t){Fb(e.length===t.length,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}));for(var r=0;r<e.length;r++){var a=e[r],i=t[r];Fb(a<0||i<0||a===i,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}}}function gR(e){return"number"!==typeof e&&!e.some((function(e){return e<0}))}function bR(e,t,n){var r=kR(e,n),a=!gR(r);if(a&&0===t.length)throw new Error("Tried to calculate elements of an empty list"+" with non-fully-defined elementShape: ".concat(r));if(a&&t.forEach((function(e){r=kR(e.shape,r)})),!gR(r))throw new Error("Non-fully-defined elementShape: ".concat(r));return r}function kR(e,t){if("number"===typeof e)return t;if("number"===typeof t)return e;if(e.length!==t.length)throw new Error("Incompatible ranks during merge: ".concat(e," vs. ").concat(t));for(var n=[],r=0;r<e.length;++r){var a=e[r],i=t[r];if(a>=0&&i>=0&&a!==i)throw new Error("Incompatible shape during merge: ".concat(e," vs. ").concat(t));n[r]=a>=0?a:i}return n}var wR=function(){function e(t,n,r,a,i,o,s){B(this,e),this.name=t,this.dtype=n,this.maxSize=r,this.elementShape=a,this.identicalElementShapes=i,this.dynamicSize=o,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.idTensor=L_(0),f_(this.idTensor)}return K(e,[{key:"id",get:function(){return this.idTensor.id}},{key:"closed",get:function(){return this.closed_}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.tensor.id)||t.tensor.dispose()})),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"read",value:function(e){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||e>=this.size())throw new Error("Tried to read from index ".concat(e,", but array size is: ").concat(this.size()));var t=this.tensors[e];if(t.cleared)throw new Error("TensorArray ".concat(this.name,": Could not read index ").concat(e," twice because it was cleared after a previous read ")+"(perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}},{key:"readMany",value:function(e){var t=this;return e.map((function(e){return t.read(e)}))}},{key:"write",value:function(e,t){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index ".concat(e,", but array is not resizeable and size is: ").concat(this.maxSize));var n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,",\n          because the value dtype is ").concat(t.dtype,", but TensorArray dtype is ").concat(this.dtype,"."));if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),yR(this.elementShape,t.shape,"TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,".")),n.read)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been read."));if(n.written)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been written."));n.tensor=t,f_(t),n.written=!0,this.tensors[e]=n}},{key:"writeMany",value:function(e,t){var n=this;if(e.length!==t.length)throw new Error("TensorArray ".concat(this.name,": could not write multiple tensors,")+"because the index size: ".concat(e.length," is not the same as tensors size: ").concat(t.length,"."));e.forEach((function(e,r){return n.write(e,t[r])}))}},{key:"gather",value:function(e,t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but gather requested dtype ").concat(t));if(e)e=e.slice(0,this.size());else{e=[];for(var n=0;n<this.size();n++)e.push(n)}if(0===e.length)return RS([],[0].concat(this.elementShape));var r=this.readMany(e);return yR(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),sD(r,0)}},{key:"concat",value:function(e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but concat requested dtype ").concat(e));if(0===this.size())return RS([],[0].concat(this.elementShape));for(var t=[],n=0;n<this.size();n++)t.push(n);var r=this.readMany(t);return yR(this.elementShape,r[0].shape,"TensorArray shape mismatch: tensor array shape (".concat(this.elementShape,") vs first tensor shape (").concat(r[0].shape,")")),_I(r,0)}},{key:"scatter",value:function(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(e.length," vs. ").concat(t.shape[0]));var n=Math.max.apply(Math,U(e));if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size (".concat(n,"  vs. ").concat(this.maxSize,")"));this.writeMany(e,kD(t,0))}},{key:"split",value:function(e,t){var n=this;if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));var r=0,a=e.map((function(e){return r+=e}));if(r!==t.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(t.shape));if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths (".concat(this.maxSize," vs. ").concat(e.length,"), ")+"and the TensorArray is not marked as dynamically resizeable");var i=0===r?0:t.size/r,o=[];c_((function(){t=SI(t,[1,r,i]);for(var s=0;s<e.length;++s){var u=[0,0===s?0:a[s-1],0],c=[1,e[s],i];o[s]=SI(AI(t,u,c),n.elementShape)}return o}));for(var s=[],u=0;u<e.length;u++)s[u]=u;this.writeMany(s,o)}}]),e}(),xR=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;B(this,e),this.tensors=t,this.elementShape=n,this.elementDtype=r,null!=t&&t.forEach((function(e){if(r!==e.dtype)throw new Error("Invalid data types; op elements ".concat(r,", but list elements ").concat(e.dtype));yR(n,e.shape,"TensorList shape mismatch: "),f_(e)})),this.idTensor=L_(0),this.maxNumElements=a,f_(this.idTensor)}return K(e,[{key:"id",get:function(){return this.idTensor.id}},{key:"copy",value:function(){return new e(U(this.tensors),this.elementShape,this.elementDtype)}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.id)||t.dispose()})),this.tensors.length=0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"stack",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(-1!==r&&this.tensors.length!==r)throw new Error("Operation expected a list with ".concat(r," elements but got a list with ").concat(this.tensors.length," elements."));yR(e,this.elementShape,"TensorList shape mismatch: ");var a=bR(this.elementShape,this.tensors,e);return c_((function(){var e=n.tensors.map((function(e){return SI(e,a)}));return sD(e,0)}))}},{key:"popBack",value:function(e,t){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(0===this.size())throw new Error("Trying to pop from an empty list.");var n=bR(this.elementShape,this.tensors,e),r=this.tensors.pop();return yR(r.shape,e,"TensorList shape mismatch: "),SI(r,n)}},{key:"pushBack",value:function(e){if(e.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(this.elementDtype));if(yR(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");f_(e),this.tensors.push(e)}},{key:"resize",value:function(e){if(e<0)throw new Error("TensorListResize expects size to be non-negative. Got: ".concat(e));if(-1!==this.maxNumElements&&e>this.maxNumElements)throw new Error("TensorListResize input size ".concat(e," is greater maxNumElement ").concat(this.maxNumElements,"."));this.tensors.length=e}},{key:"getItem",value:function(e,t,n){if(n!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(this.elementDtype));if(e<0||e>this.tensors.length)throw new Error("Trying to access element ".concat(e," in a list with ").concat(this.tensors.length," elements."));if(null==this.tensors[e])throw new Error("element at index ".concat(e," is null."));yR(this.tensors[e].shape,t,"TensorList shape mismatch: ");var r=bR(this.elementShape,this.tensors,t);return SI(this.tensors[e],r)}},{key:"setItem",value:function(e,t){if(t.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t.dtype,", but list elements ").concat(this.elementDtype));if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error("Trying to set element ".concat(e," in a list with max ").concat(this.maxNumElements," elements."));yR(this.elementShape,t.shape,"TensorList shape mismatch: "),f_(t),this.tensors[e]=t}},{key:"gather",value:function(e,t,n){var r=this;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));yR(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());var a=bR(this.elementShape,this.tensors,n);return 0===e.length?RS([],[0].concat(a)):c_((function(){var t=e.map((function(e){return SI(r.tensors[e],a)}));return sD(t,0)}))}},{key:"concat",value:function(e,t){var n=this;if(e&&e!==this.elementDtype)throw new Error("TensorList dtype is ".concat(this.elementDtype," but concat requested dtype ").concat(e));yR(this.elementShape,t,"TensorList shape mismatch: ");var r=bR(this.elementShape,this.tensors,t);return 0===this.size()?RS([],[0].concat(r)):c_((function(){var e=n.tensors.map((function(e){return SI(e,r)}));return _I(e,0)}))}}]),e}();function ER(e,t,n){var r=e.dtype;if(e.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: ".concat(e.shape));if(e.dtype!==n)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(n));yR(e.shape.slice(1),t,"TensorList shape mismatch: ");var a=kD(e);return new xR(a,t,r)}function SR(e,t,n){return new xR([],e,t,n)}function NR(e,t,n,r){if(t.length!==e.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(t.length," vs. ").concat(e.shape[0]));var a=Math.max.apply(Math,U(t));if(null!=r&&-1!==r&&a>=r)throw new Error("Max index must be < array size (".concat(a,"  vs. ").concat(r,")"));var i=new xR([],n,e.dtype,r),o=kD(e,0);return t.forEach((function(e,t){i.setItem(e,o[t])})),i}function TR(e,t,n){var r=0,a=t.map((function(e){return r+=e}));if(r!==e.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(e.shape));for(var i=kR(e.shape.slice(1),n),o=0===r?0:e.size/r,s=c_((function(){var n=[];e=SI(e,[1,r,o]);for(var s=0;s<t.length;++s){var u=[0,0===s?0:a[s-1],0],c=[1,t[s],o];n[s]=SI(AI(e,u,c),i)}return e.dispose(),n})),u=new xR([],n,e.dtype,t.length),c=0;c<s.length;c++)u.setItem(c,s[c]);return u}var _R=function(){var e=Rt(Ot().mark((function e(t,n,r){var a,i,o,s,u,c,l,f,h,d,p,m,v,y,g,b,k,w,x,E,S,N,T,_,I,A,C,D,O,M,R,P,L,F,j,z,V,U,B,q,H,W,K,G,Q,Y,X,$,J,Z,ee,te,ne,re,ae,ie,oe,se,ue,ce,le,fe,he,de,pe,me,ve,ye,ge,be,ke,we,xe,Ee,Se,Ne,Te,_e,Ie,Ae,Ce,De,Oe,Me,Re,Pe,Le,Fe,je,ze,Ve,Ue,Be,qe,He,We,Ke,Ge,Qe,Ye,Xe,$e,Je;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="If"===e.t0||"StatelessIf"===e.t0?3:"While"===e.t0||"StatelessWhile"===e.t0?15:"LoopCond"===e.t0?33:"Switch"===e.t0?35:"Merge"===e.t0?46:"Enter"===e.t0?51:"Exit"===e.t0?55:"NextIteration"===e.t0?58:"TensorArrayV3"===e.t0?61:"TensorArrayWriteV3"===e.t0?71:"TensorArrayReadV3"===e.t0?77:"TensorArrayGatherV3"===e.t0?81:"TensorArrayScatterV3"===e.t0?86:"TensorArrayConcatV3"===e.t0?92:"TensorArraySplitV3"===e.t0?96:"TensorArraySizeV3"===e.t0?102:"TensorArrayCloseV3"===e.t0?105:"TensorListSetItem"===e.t0?109:"TensorListGetItem"===e.t0?115:"TensorListScatterV2"===e.t0||"TensorListScatter"===e.t0?121:"TensorListReserve"===e.t0||"EmptyTensorList"===e.t0?128:"TensorListGather"===e.t0?135:"TensorListStack"===e.t0?141:"TensorListFromTensor"===e.t0?147:"TensorListConcat"===e.t0?153:"TensorListPushBack"===e.t0?158:"TensorListPopBack"===e.t0?163:"TensorListSplit"===e.t0?168:174;break;case 3:return a=AM("thenBranch",t,n,r),i=AM("elseBranch",t,n,r),o=AM("cond",t,n,r),s=AM("args",t,n,r),e.next=9,o.data();case 9:if(!e.sent[0]){e.next=14;break}return e.abrupt("return",r.functionMap[a].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap));case 14:return e.abrupt("return",r.functionMap[i].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap));case 15:return u=AM("body",t,n,r),c=AM("cond",t,n,r),l=AM("args",t,n,r),e.next=20,r.functionMap[c].executeFunctionAsync(l,r.tensorArrayMap,r.tensorListMap);case 20:return f=e.sent,h=l.map((function(e){return e.id})),e.next=24,f[0].data();case 24:d=e.sent,f.forEach((function(e){e.kept||-1!==h.indexOf(e.id)||e.dispose()})),p=l,m=Ot().mark((function e(){var t,n,a;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p,e.next=3,r.functionMap[u].executeFunctionAsync(p,r.tensorArrayMap,r.tensorListMap);case 3:return p=e.sent,n=p.map((function(e){return e.id})),t.forEach((function(e){e.kept||-1!==h.indexOf(e.id)||-1!==n.indexOf(e.id)||e.dispose()})),e.next=8,r.functionMap[c].executeFunctionAsync(p,r.tensorArrayMap,r.tensorListMap);case 8:return a=e.sent,e.next=11,a[0].data();case 11:d=e.sent,a.forEach((function(e){e.kept||-1!==h.indexOf(e.id)||-1!==n.indexOf(e.id)||e.dispose()}));case 13:case"end":return e.stop()}}),e)}));case 28:if(!d[0]){e.next=32;break}return e.delegateYield(m(),"t1",30);case 30:e.next=28;break;case 32:return e.abrupt("return",p);case 33:return v=AM("pred",t,n,r),e.abrupt("return",[PM(v)]);case 35:return y=AM("pred",t,n,r),(g=AM("data",t,n,r)).kept||(g=PM(g)),e.next=40,y.data();case 40:if(!e.sent[0]){e.next=44;break}e.t2=[void 0,g],e.next=45;break;case 44:e.t2=[g,void 0];case 45:return e.abrupt("return",e.t2);case 46:if(b=t.inputNames.find((function(e){return void 0!==CM(e,n,r)})),!b){e.next=50;break}return k=CM(b,n,r),e.abrupt("return",[PM(k)]);case 50:return e.abrupt("return",void 0);case 51:return w=AM("frameName",t,n,r),x=AM("tensor",t,n,r),r.enterFrame(w),e.abrupt("return",[PM(x)]);case 55:return E=AM("tensor",t,n,r),r.exitFrame(),e.abrupt("return",[PM(E)]);case 58:return S=AM("tensor",t,n,r),r.nextIteration(),e.abrupt("return",[PM(S)]);case 61:return N=AM("size",t,n,r),T=AM("dtype",t,n,r),_=AM("elementShape",t,n,r),I=AM("dynamicSize",t,n,r),A=AM("clearAfterRead",t,n,r),C=AM("identicalElementShapes",t,n,r),D=AM("name",t,n,r),O=new wR(D,T,N,_,C,I,A),r.addTensorArray(O),e.abrupt("return",[O.idTensor,L_(1)]);case 71:return M=AM("tensorArrayId",t,n,r),R=AM("index",t,n,r),P=AM("tensor",t,n,r),(L=r.getTensorArray(M.id)).write(R,P),e.abrupt("return",[L.idTensor]);case 77:return F=AM("tensorArrayId",t,n,r),j=AM("index",t,n,r),z=r.getTensorArray(F.id),e.abrupt("return",[z.read(j)]);case 81:return V=AM("tensorArrayId",t,n,r),U=AM("indices",t,n,r),B=AM("dtype",t,n,r),q=r.getTensorArray(V.id),e.abrupt("return",[q.gather(U,B)]);case 86:return H=AM("tensorArrayId",t,n,r),W=AM("indices",t,n,r),K=AM("tensor",t,n,r),(G=r.getTensorArray(H.id)).scatter(W,K),e.abrupt("return",[G.idTensor]);case 92:return Q=AM("tensorArrayId",t,n,r),Y=r.getTensorArray(Q.id),X=AM("dtype",t,n,r),e.abrupt("return",[Y.concat(X)]);case 96:return $=AM("tensorArrayId",t,n,r),J=AM("tensor",t,n,r),Z=AM("lengths",t,n,r),(ee=r.getTensorArray($.id)).split(Z,J),e.abrupt("return",[ee.idTensor]);case 102:return te=AM("tensorArrayId",t,n,r),ne=r.getTensorArray(te.id),e.abrupt("return",[L_(ne.size(),"int32")]);case 105:return re=AM("tensorArrayId",t,n,r),(ae=r.getTensorArray(re.id)).clearAndClose(),e.abrupt("return",[ae.idTensor]);case 109:return ie=AM("tensorListId",t,n,r),oe=AM("index",t,n,r),se=AM("tensor",t,n,r),(ue=r.getTensorList(ie.id)).setItem(oe,se),e.abrupt("return",[ue.idTensor]);case 115:return ce=AM("tensorListId",t,n,r),le=AM("index",t,n,r),fe=AM("elementShape",t,n,r),he=AM("elementDType",t,n,r),de=r.getTensorList(ce.id),e.abrupt("return",[de.getItem(le,fe,he)]);case 121:return pe=AM("indices",t,n,r),me=AM("tensor",t,n,r),ve=AM("elementShape",t,n,r),ye=AM("numElements",t,n,r),ge=NR(me,pe,ve,ye),r.addTensorList(ge),e.abrupt("return",[ge.idTensor]);case 128:return be=AM("elementShape",t,n,r),ke=AM("elementDType",t,n,r),we="TensorListReserve"===t.op?"numElements":"maxNumElements",xe=AM(we,t,n,r),Ee=SR(be,ke,xe),r.addTensorList(Ee),e.abrupt("return",[Ee.idTensor]);case 135:return Se=AM("tensorListId",t,n,r),Ne=AM("indices",t,n,r),Te=AM("elementShape",t,n,r),_e=AM("elementDType",t,n,r),Ie=r.getTensorList(Se.id),e.abrupt("return",[Ie.gather(Ne,_e,Te)]);case 141:return Ae=AM("tensorListId",t,n,r),Ce=AM("elementShape",t,n,r),De=AM("elementDType",t,n,r),Oe=AM("numElements",t,n,r),Me=r.getTensorList(Ae.id),e.abrupt("return",[Me.stack(Ce,De,Oe)]);case 147:return Re=AM("tensor",t,n,r),Pe=AM("elementShape",t,n,r),Le=AM("elementDType",t,n,r),Fe=ER(Re,Pe,Le),r.addTensorList(Fe),e.abrupt("return",[Fe.idTensor]);case 153:return je=AM("tensorListId",t,n,r),ze=r.getTensorList(je.id),Ve=AM("dtype",t,n,r),Ue=AM("elementShape",t,n,r),e.abrupt("return",[ze.concat(Ve,Ue)]);case 158:return Be=AM("tensorListId",t,n,r),qe=AM("tensor",t,n,r),(He=r.getTensorList(Be.id)).pushBack(qe),e.abrupt("return",[He.idTensor]);case 163:return We=AM("tensorListId",t,n,r),Ke=AM("elementShape",t,n,r),Ge=AM("elementDType",t,n,r),Qe=r.getTensorList(We.id),e.abrupt("return",[Qe.popBack(Ke,Ge)]);case 168:return Ye=AM("tensor",t,n,r),Xe=AM("elementShape",t,n,r),$e=AM("lengths",t,n,r),Je=TR(Ye,$e,Xe),r.addTensorList(Je),e.abrupt("return",[Je.idTensor]);case 174:throw TypeError("Node type ".concat(t.op," is not implemented"));case 175:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function IR(e,t,n){var r=te(AM("fusedOps",e,t,n),2),a=r[0],i=r[1],o="biasadd"===a,s="prelu"===i,u="fusedbatchnorm"===a,c=AM("numArgs",e,t,n);if(o){if(s&&2!==c)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&1!==c)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(u)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported.");var l=AM("strides",e,t,n),f=RM(e,t,n),h=AM("dataFormat",e,t,n).toUpperCase(),d=AM("dilations",e,t,n),p=te(AM("args",e,t,n),2);return{stride:l,pad:f,dataFormat:h,dilations:d,biasArg:p[0],preluArg:p[1],activationFunc:i,leakyreluAlpha:AM("leakyreluAlpha",e,t,n)}}var AR=function(e,t,n){switch(e.op){case"Conv1D":var r=AM("stride",e,t,n),a=AM("pad",e,t,n),i=AM("dataFormat",e,t,n).toUpperCase(),o=AM("dilation",e,t,n);return[KI(AM("x",e,t,n),AM("filter",e,t,n),r,a,i,o)];case"Conv2D":var s=AM("strides",e,t,n),u=RM(e,t,n),c=AM("dataFormat",e,t,n).toUpperCase(),l=AM("dilations",e,t,n);return[WI(AM("x",e,t,n),AM("filter",e,t,n),[s[1],s[2]],u,c,[l[1],l[2]])];case"_FusedConv2D":var f=IR(e,t,n),h=f.stride,d=f.pad,p=f.dataFormat,m=f.dilations,v=f.biasArg,y=f.preluArg,g=f.activationFunc,b=f.leakyreluAlpha;return[qD({x:AM("x",e,t,n),filter:AM("filter",e,t,n),strides:[h[1],h[2]],pad:d,dataFormat:p,dilations:[m[1],m[2]],bias:v,activation:g,preluActivationWeights:y,leakyreluAlpha:b})];case"FusedDepthwiseConv2dNative":var k=IR(e,t,n),w=k.stride,x=k.pad,E=k.dataFormat,S=k.dilations,N=k.biasArg,T=k.preluArg,_=k.activationFunc,I=k.leakyreluAlpha;return[KD({x:AM("x",e,t,n),filter:AM("filter",e,t,n),strides:[w[1],w[2]],pad:x,dataFormat:E,dilations:[S[1],S[2]],bias:N,activation:_,preluActivationWeights:T,leakyreluAlpha:I})];case"Conv2DBackpropInput":case"Conv2dTranspose":var A=AM("outputShape",e,t,n),C=AM("strides",e,t,n),D=RM(e,t,n);return[QI(AM("x",e,t,n),AM("filter",e,t,n),A,[C[1],C[2]],D)];case"DepthwiseConv2dNative":case"DepthwiseConv2d":var O=AM("strides",e,t,n),M=RM(e,t,n),R=AM("dilations",e,t,n),P=AM("dataFormat",e,t,n).toUpperCase();return[rA(AM("input",e,t,n),AM("filter",e,t,n),[O[1],O[2]],M,P,[R[1],R[2]])];case"Conv3D":var L=AM("strides",e,t,n),F=AM("pad",e,t,n),j=AM("dataFormat",e,t,n).toUpperCase(),z=AM("dilations",e,t,n);return[YI(AM("x",e,t,n),AM("filter",e,t,n),[L[1],L[2],L[3]],F,j,[z[1],z[2],z[3]])];case"AvgPool":var V=AM("strides",e,t,n),U=AM("pad",e,t,n),B=AM("kernelSize",e,t,n);return[NI(AM("x",e,t,n),[B[1],B[2]],[V[1],V[2]],U)];case"MaxPool":var q=AM("strides",e,t,n),H=AM("pad",e,t,n),W=AM("kernelSize",e,t,n);return[$A(AM("x",e,t,n),[W[1],W[2]],[q[1],q[2]],H)];case"MaxPoolWithArgmax":var K=AM("strides",e,t,n),G=AM("pad",e,t,n),Q=AM("kernelSize",e,t,n),Y=AM("includeBatchInIndex",e,t,n),X=ZA(AM("x",e,t,n),[Q[1],Q[2]],[K[1],K[2]],G,Y);return[X.result,X.indexes];case"AvgPool3D":var $=AM("strides",e,t,n),J=AM("pad",e,t,n),Z=AM("kernelSize",e,t,n);return[TI(AM("x",e,t,n),[Z[1],Z[2],Z[3]],[$[1],$[2],$[3]],J)];case"MaxPool3D":var ee=AM("strides",e,t,n),te=AM("pad",e,t,n),ne=AM("kernelSize",e,t,n);return[JA(AM("x",e,t,n),[ne[1],ne[2],ne[3]],[ee[1],ee[2],ee[3]],te)];case"Dilation2D":var re=AM("strides",e,t,n),ae=AM("pad",e,t,n),ie=AM("dilations",e,t,n),oe=re[1],se=re[2],ue=ie[1],ce=ie[2];return[iA(AM("x",e,t,n),AM("filter",e,t,n),[oe,se],ae,[ue,ce],"NHWC")];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},CR=function(e,t,n){switch(e.op){case"Fill":var r=AM("shape",e,t,n),a=AM("dtype",e,t,n);return[z_(r,AM("value",e,t,n),a)];case"LinSpace":return[IA(AM("start",e,t,n),AM("stop",e,t,n),AM("num",e,t,n))];case"Multinomial":var i=AM("logits",e,t,n),o=AM("numSamples",e,t,n),s=AM("seed",e,t,n);return[sC(i,o,s)];case"OneHot":var u=AM("indices",e,t,n),c=AM("depth",e,t,n),l=AM("onValue",e,t,n),f=AM("offValue",e,t,n);return[fT(u,c,l,f)];case"Ones":return[lC(AM("shape",e,t,n),AM("dtype",e,t,n))];case"OnesLike":return[fC(AM("x",e,t,n))];case"RandomUniform":return[AC(AM("shape",e,t,n),AM("minval",e,t,n),AM("maxval",e,t,n),AM("dtype",e,t,n))];case"Range":return[CC(AM("start",e,t,n),AM("stop",e,t,n),AM("step",e,t,n),AM("dtype",e,t,n))];case"TruncatedNormal":var h=AM("shape",e,t,n),d=AM("mean",e,t,n),p=AM("stdDev",e,t,n),m=AM("seed",e,t,n);return[yD(h,d,p,AM("dtype",e,t,n),m)];case"Zeros":return[cC(AM("shape",e,t,n),AM("dtype",e,t,n))];case"ZerosLike":return[I_(AM("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function DR(e,t,n){return{boxes:AM("boxes",e,t,n),scores:AM("scores",e,t,n),maxOutputSize:AM("maxOutputSize",e,t,n),iouThreshold:AM("iouThreshold",e,t,n),scoreThreshold:AM("scoreThreshold",e,t,n),softNmsSigma:AM("softNmsSigma",e,t,n)}}var OR=function(){var e=Rt(Ot().mark((function e(t,n,r){var a,i,o,s,u,c,l,f,h,d,p,m,v,y,g,b,k,w,x,E,S,N,T,_;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="NonMaxSuppressionV5"===e.t0?3:"NonMaxSuppressionV4"===e.t0?8:"NonMaxSuppressionV3"===e.t0||"NonMaxSuppressionV2"===e.t0?14:"Where"===e.t0?19:"ListDiff"===e.t0?26:27;break;case 3:return a=DR(t,n,r),i=a.boxes,o=a.scores,s=a.maxOutputSize,u=a.iouThreshold,c=a.scoreThreshold,l=a.softNmsSigma,e.next=6,jO.nonMaxSuppressionWithScoreAsync(i,o,s,u,c,l);case 6:return f=e.sent,e.abrupt("return",[f.selectedIndices,f.selectedScores]);case 8:return h=DR(t,n,r),d=h.boxes,p=h.scores,m=h.maxOutputSize,v=h.iouThreshold,y=h.scoreThreshold,g=AM("padToMaxOutputSize",t,n,r),e.next=12,jO.nonMaxSuppressionPaddedAsync(d,p,m,v,y,g);case 12:return b=e.sent,e.abrupt("return",[b.selectedIndices,b.validOutputs]);case 14:return k=DR(t,n,r),w=k.boxes,x=k.scores,E=k.maxOutputSize,S=k.iouThreshold,N=k.scoreThreshold,e.next=17,jO.nonMaxSuppressionAsync(w,x,E,S,N);case 17:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 19:return T=jN(AM("condition",t,n,r),"bool"),e.next=22,SD(T);case 22:return e.t2=e.sent,_=[e.t2],T.dispose(),e.abrupt("return",_);case 26:return e.abrupt("return",WC(AM("x",t,n,r),AM("y",t,n,r)));case 27:throw TypeError("Node type ".concat(t.op," is not implemented"));case 28:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),MR=function(e,t,n){switch(e.op){case"TopKV2":var r=AM("x",e,t,n),a=AM("k",e,t,n),i=AM("sorted",e,t,n),o=vD(r,a,i);return[o.values,o.indices];case"Unique":var s=AM("x",e,t,n),u=gD(s);return[u.values,u.indices];case"UniqueV2":var c=AM("x",e,t,n),l=AM("axis",e,t,n),f=gD(c,l);return[f.values,f.indices];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},RR=function(e,t,n){switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":var r=AM("default",e,t,n);return[CM(e.name,t,n)||r];case"Placeholder":return[CM(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":return[PM(AM("x",e,t,n))];case"IdentityN":return AM("x",e,t,n).map((function(e){return PM(e)}));case"Snapshot":return[PM(AM("x",e,t,n))];case"Shape":return[fD(AM("x",e,t,n).shape,"int32")];case"ShapeN":return AM("x",e,t,n).map((function(e){return fD(e.shape)}));case"Size":return[L_(AM("x",e,t,n).size,"int32")];case"Rank":return[L_(AM("x",e,t,n).rank,"int32")];case"NoOp":return[L_(1)];case"Print":var a=AM("x",e,t,n),i=AM("data",e,t,n),o=AM("message",e,t,n),s=AM("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(o);for(var u=0;u<i.length;u++)console.log(Array.prototype.slice.call(i[u].dataSync()).slice(0,s));return[a];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},PR=function(){function e(t,n){B(this,e),this.keyDType=t,this.valueDType=n,this.handle=L_(0),this.tensorMap=new Map,f_(this.handle)}return K(e,[{key:"id",get:function(){return this.handle.id}},{key:"clearAndClose",value:function(){this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),this.handle.dispose()}},{key:"size",value:function(){return this.tensorMap.size}},{key:"import",value:function(){var e=Rt(Ot().mark((function e(t,n){var r,a=this;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),e.abrupt("return",c_((function(){var e=kD(n),t=r.length,i=e.length;Fb(t===i,(function(){return"The number of elements doesn't match, keys has "+"".concat(t," elements, the values has ").concat(i," ")+"elements."}));for(var o=0;o<t;o++){var s=r[o],u=e[o];f_(u),a.tensorMap.set(s,u)}return a.handle})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"find",value:function(){var e=Rt(Ot().mark((function e(t,n){var r,a=this;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,e.abrupt("return",c_((function(){for(var e=[],t=0;t<r.length;t++){var i=r[t],o=a.findWithDefault(i,n);e.push(o)}return sD(e)})));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"findWithDefault",value:function(e,t){var n=this.tensorMap.get(e);return null!=n?n:t}},{key:"checkKeyAndValueTensor",value:function(e,t){if(e.dtype!==this.keyDType)throw new Error("Expect key dtype ".concat(this.keyDType,", but got ")+"".concat(e.dtype));if(t.dtype!==this.valueDType)throw new Error("Expect value dtype ".concat(this.valueDType,", but got ")+"".concat(t.dtype))}}]),e}(),LR=function(){var e=Rt(Ot().mark((function e(t,n,r,a){var i,o,s,u,c,l,f,h,d,p,m;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="HashTable"===e.t0||"HashTableV2"===e.t0?3:"LookupTableImport"===e.t0||"LookupTableImportV2"===e.t0?8:"LookupTableFind"===e.t0||"LookupTableFindV2"===e.t0?16:24;break;case 3:return i=AM("keyDType",t,n,r),o=AM("valueDType",t,n,r),s=new PR(i,o),a.addHashTable(t.name,s),e.abrupt("return",[s.handle]);case 8:return u=AM("tableHandle",t,n,r,a),c=AM("keys",t,n,r),l=AM("values",t,n,r),f=a.getHashTableById(u.id),e.next=14,f.import(c,l);case 14:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 16:return h=AM("tableHandle",t,n,r,a),d=AM("keys",t,n,r),p=AM("defaultValue",t,n,r),m=a.getHashTableById(h.id),e.next=22,m.find(d,p);case 22:return e.t2=e.sent,e.abrupt("return",[e.t2]);case 24:throw TypeError("Node type ".concat(t.op," is not implemented"));case 25:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),FR=function(e,t,n){switch(e.op){case"ResizeBilinear":var r=AM("images",e,t,n),a=AM("size",e,t,n),i=AM("alignCorners",e,t,n),o=AM("halfPixelCenters",e,t,n);return[jO.resizeBilinear(r,[a[0],a[1]],i,o)];case"ResizeNearestNeighbor":var s=AM("images",e,t,n),u=AM("size",e,t,n),c=AM("alignCorners",e,t,n),l=AM("halfPixelCenters",e,t,n);return[jO.resizeNearestNeighbor(s,[u[0],u[1]],c,l)];case"CropAndResize":var f=AM("image",e,t,n),h=AM("boxes",e,t,n),d=AM("boxInd",e,t,n),p=AM("cropSize",e,t,n),m=AM("method",e,t,n),v=AM("extrapolationValue",e,t,n);return[jO.cropAndResize(f,h,d,p,m,v)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},jR=function(e,t,n){switch(e.op){case"Equal":return[oA(AM("a",e,t,n),AM("b",e,t,n))];case"NotEqual":return[uC(AM("a",e,t,n),AM("b",e,t,n))];case"Greater":return[bA(AM("a",e,t,n),AM("b",e,t,n))];case"GreaterEqual":return[kA(AM("a",e,t,n),AM("b",e,t,n))];case"Less":return[TA(AM("a",e,t,n),AM("b",e,t,n))];case"LessEqual":return[_A(AM("a",e,t,n),AM("b",e,t,n))];case"LogicalAnd":return[GA(AM("a",e,t,n),AM("b",e,t,n))];case"LogicalNot":return[QA(AM("a",e,t,n))];case"LogicalOr":return[YA(AM("a",e,t,n),AM("b",e,t,n))];case"Select":case"SelectV2":return[sA(AM("condition",e,t,n),AM("a",e,t,n),AM("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},zR=function(e,t,n){switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[lT(AM("a",e,t,n),AM("b",e,t,n),AM("transposeA",e,t,n),AM("transposeB",e,t,n))];case"Transpose":return[hT(AM("x",e,t,n),AM("perm",e,t,n))];case"_FusedMatMul":var r=te(AM("fusedOps",e,t,n),2),a=r[0],i=r[1],o="biasadd"===a,s="prelu"===i,u=AM("numArgs",e,t,n),c=AM("leakyreluAlpha",e,t,n);if(o){if(s&&2!==u)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&1!==u)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}var l=te(AM("args",e,t,n),2),f=l[0],h=l[1];return[GD({a:AM("a",e,t,n),b:AM("b",e,t,n),transposeA:AM("transposeA",e,t,n),transposeB:AM("transposeB",e,t,n),bias:f,activation:i,preluActivationWeights:h,leakyreluAlpha:c})];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},VR=function(e,t,n){switch(e.op){case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[MI(AM("x",e,t,n),AM("mean",e,t,n),AM("variance",e,t,n),AM("offset",e,t,n),AM("scale",e,t,n),AM("epsilon",e,t,n))];case"LRN":return[AA(AM("x",e,t,n),AM("radius",e,t,n),AM("bias",e,t,n),AM("alpha",e,t,n),AM("beta",e,t,n))];case"Softmax":return[ZC(AM("x",e,t,n))];case"LogSoftmax":return[FA(AM("x",e,t,n))];case"SparseToDense":return[DD(AM("sparseIndices",e,t,n),AM("outputShape",e,t,n),AM("sparseValues",e,t,n),AM("defaultValue",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},UR=function(e,t,n){switch(e.op){case"Max":var r=AM("axis",e,t,n),a=AM("keepDims",e,t,n);return[PA(AM("x",e,t,n),r,a)];case"Mean":var i=AM("axis",e,t,n),o=AM("keepDims",e,t,n);return[eC(AM("x",e,t,n),i,o)];case"Min":var s=AM("axis",e,t,n),u=AM("keepDims",e,t,n);return[tC(AM("x",e,t,n),s,u)];case"Sum":var c=AM("axis",e,t,n),l=AM("keepDims",e,t,n);return[LA(AM("x",e,t,n),c,l)];case"All":var f=AM("axis",e,t,n),h=AM("keepDims",e,t,n);return[nI(AM("x",e,t,n),f,h)];case"Any":var d=AM("axis",e,t,n),p=AM("keepDims",e,t,n);return[rI(AM("x",e,t,n),d,p)];case"ArgMax":var m=AM("axis",e,t,n);return[aI(AM("x",e,t,n),m)];case"ArgMin":var v=AM("axis",e,t,n);return[iI(AM("x",e,t,n),v)];case"Prod":var y=AM("axis",e,t,n),g=AM("keepDims",e,t,n);return[wC(AM("x",e,t,n),y,g)];case"Cumsum":var b=AM("axis",e,t,n),k=AM("exclusive",e,t,n),w=AM("reverse",e,t,n);return[eA(AM("x",e,t,n),b,k,w)];case"Bincount":var x=AM("x",e,t,n),E=AM("weights",e,t,n),S=AM("size",e,t,n);return[FI(x,E,S)];case"DenseBincount":var N=AM("x",e,t,n),T=AM("weights",e,t,n),_=AM("size",e,t,n),I=AM("binaryOutput",e,t,n);return[tA(N,T,_,I)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},BR=function(e,t,n){switch(e.op){case"ConcatV2":case"Concat":var r=AM("n",e,t,n),a=AM("axis",e,t,n),i=AM("tensors",e,t,n);return i=i.slice(0,r),[_I(i,a)];case"Gather":var o=AM("x",e,t,n),s=AM("indices",e,t,n);return[gA(o,jN(s,"int32"),0)];case"GatherV2":var u=AM("axis",e,t,n),c=AM("batchDims",e,t,n),l=AM("x",e,t,n),f=AM("indices",e,t,n);return[gA(l,jN(f,"int32"),u,c)];case"Reverse":for(var h=AM("dims",e,t,n),d=[],p=0;p<h.length;p++)h[p]&&d.push(p);var m=AM("x",e,t,n);return[PC(m,d)];case"ReverseV2":var v=AM("axis",e,t,n),y=AM("x",e,t,n);return[PC(y,v)];case"Slice":var g=AM("begin",e,t,n),b=AM("size",e,t,n);return[AI(AM("x",e,t,n),g,b)];case"StridedSlice":var k=AM("begin",e,t,n),w=AM("end",e,t,n),x=AM("strides",e,t,n),E=AM("beginMask",e,t,n),S=AM("endMask",e,t,n),N=AM("ellipsisMask",e,t,n),T=AM("newAxisMask",e,t,n),_=AM("shrinkAxisMask",e,t,n),I=AM("x",e,t,n);return[cD(I,k,w,x,E,S,N,T,_)];case"Pack":return c_((function(){var r=AM("axis",e,t,n),a=AM("tensors",e,t,n),i=a[0].shape,o=oD(a[0]).shape,s=a.map((function(e){var t=qb(e.shape,i);if(!t&&!qb(oD(e).shape,o))throw new Error("the input tensors shape does not match");return t?e:SI(e,i)}));return[sD(s,r)]}));case"Unpack":var A=AM("axis",e,t,n),C=AM("tensor",e,t,n);return kD(C,A);case"Tile":var D=AM("reps",e,t,n);return[mA(AM("x",e,t,n),D)];case"Split":case"SplitV":var O=AM("axis",e,t,n),M=AM("numOrSizeSplits",e,t,n),R=AM("x",e,t,n);return rD(R,M,O);case"ScatterNd":var P=AM("indices",e,t,n),L=AM("values",e,t,n),F=AM("shape",e,t,n);return[CD(P,L,F)];case"GatherNd":var j=AM("x",e,t,n),z=AM("indices",e,t,n);return[OD(j,z)];case"SparseToDense":var V=AM("sparseIndices",e,t,n),U=AM("outputShape",e,t,n),B=AM("sparseValues",e,t,n),q=AM("defaultValue",e,t,n);return[DD(V,B,U,B.dtype===q.dtype?q:jN(q,B.dtype))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},qR=function(e,t,n){switch(e.op){case"FFT":return[eD(AM("x",e,t,n))];case"IFFT":return[tD(AM("x",e,t,n))];case"RFFT":return[aD(AM("x",e,t,n))];case"IRFFT":return[nD(AM("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},HR=function(e,t,n){switch(e.op){case"Cast":return[jN(AM("x",e,t,n),AM("dtype",e,t,n))];case"ExpandDims":var r=AM("axis",e,t,n);return[dA(AM("x",e,t,n),r)];case"Squeeze":var a=AM("axis",e,t,n);return[oD(AM("x",e,t,n),a)];case"Reshape":return[SI(AM("x",e,t,n),AM("shape",e,t,n))];case"MirrorPad":return[rC(AM("x",e,t,n),AM("padding",e,t,n),AM("mode",e,t,n))];case"PadV2":case"Pad":return[dC(AM("x",e,t,n),AM("padding",e,t,n),AM("constantValue",e,t,n))];case"SpaceToBatchND":var i=AM("blockShape",e,t,n),o=AM("paddings",e,t,n);return[gC(AM("x",e,t,n),i,o)];case"BatchToSpaceND":var s=AM("blockShape",e,t,n),u=AM("crops",e,t,n);return[OI(AM("x",e,t,n),s,u)];case"DepthToSpace":var c=AM("blockSize",e,t,n),l=AM("dataFormat",e,t,n).toUpperCase();return[nA(AM("x",e,t,n),c,l)];case"BroadcastTo":return[jI(AM("x",e,t,n),AM("shape",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function WR(e,t,n,r){var a=function(e,t,n){switch(e.category){case"arithmetic":return c_((function(){return mR(e,t,n)}));case"basic_math":return c_((function(){return vR(e,t,n)}));case"control":return _R(e,t,n);case"convolution":return c_((function(){return AR(e,t,n)}));case"creation":return c_((function(){return CR(e,t,n)}));case"dynamic":return OR(e,t,n);case"evaluation":return c_((function(){return MR(e,t,n)}));case"image":return c_((function(){return FR(e,t,n)}));case"graph":return c_((function(){return RR(e,t,n)}));case"logical":return c_((function(){return jR(e,t,n)}));case"matrices":return c_((function(){return zR(e,t,n)}));case"normalization":return c_((function(){return VR(e,t,n)}));case"reduction":return c_((function(){return UR(e,t,n)}));case"slice_join":return c_((function(){return BR(e,t,n)}));case"spectral":return c_((function(){return qR(e,t,n)}));case"transformation":return c_((function(){return HR(e,t,n)}));case"hash_table":return LR(e,t,n,r);case"custom":var a=IM(e.op);if(a&&a.customExecutor)return a.customExecutor(new pR(e,t,n));throw TypeError("Custom op ".concat(e.op," is not registered."));default:throw TypeError("Unknown op '".concat(e.op,"'. File an issue at ")+"https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}}(e,t,n);return xk(a)?a.then((function(e){return[].concat(e)})):[].concat(a)}var KR=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};B(this,e),this.weightMap=t,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return K(e,[{key:"newFrame",value:function(e,t){return{id:e,frameName:t,iterationId:0}}},{key:"currentContext",get:function(){return this.contexts},set:function(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}},{key:"currentContextId",get:function(){return this._currentContextIds[0]}},{key:"currentContextIds",get:function(){return this._currentContextIds}},{key:"generateCurrentContextIds",value:function(){for(var e=[],t=0;t<this.contexts.length-1;t++){var n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}},{key:"contextIdforContexts",value:function(e){return e?e.map((function(e){return 0===e.id&&0===e.iterationId?"":"".concat(e.frameName,"-").concat(e.iterationId)})).join("/"):""}},{key:"enterFrame",value:function(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}},{key:"exitFrame",value:function(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}},{key:"nextIteration",value:function(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}},{key:"getWeight",value:function(e){return this.weightMap[e]}},{key:"addTensorArray",value:function(e){this.tensorArrayMap[e.id]=e}},{key:"getTensorArray",value:function(e){return this.tensorArrayMap[e]}},{key:"addTensorList",value:function(e){this.tensorListMap[e.id]=e}},{key:"getTensorList",value:function(e){return this.tensorListMap[e]}},{key:"dispose",value:function(e){for(var t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(var n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}]),e}();function GR(e,t,n,r){var a=new Set,i=[],o=null,s=null,u=new Set,c=Object.keys(e).map((function(e){return MM(e)[0]})),l=[];null!=r&&(l=r.map((function(e){return MM(e.name)[0]})));for(var f=U(t);f.length>0;){var h=f.pop();($R(h)||JR(h)||ZR(h))&&null==o&&(s=(o=h).children.map((function(e){return e.name})).filter((function(e){return a.has(e)}))),a.add(h.name),null==n[h.name]&&(-1===c.indexOf(h.name)&&-1===l.indexOf(h.name)&&(0!==h.inputs.length?h.inputs.forEach((function(e){u.has(e.name)||(u.add(e.name),f.push(e))})):i.push(h.name)))}return{inputs:e,outputs:t,usedNodes:a,missingInputs:i,dynamicNode:o,syncInputs:s}}var QR=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],YR=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],XR=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2"];function $R(e){return QR.indexOf(e.op)>=0}function JR(e){return YR.indexOf(e.op)>=0}function ZR(e){return XR.indexOf(e.op)>=0}var eP=function(){function e(t,n){var r=this;B(this,e),this.graph=t,this.parent=n,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,null!=t.functions&&Object.keys(t.functions).forEach((function(n){r._functionExecutorMap[n]=new e(t.functions[n],r)}))}return K(e,[{key:"weightIds",get:function(){return this.parent?this.parent.weightIds:this._weightIds}},{key:"functionExecutorMap",get:function(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}},{key:"weightMap",get:function(){return this.parent?this.parent.weightMap:this._weightMap},set:function(e){var t,n=Object.keys(e).map((function(t){return e[t].map((function(e){return e.id}))}));this._weightIds=(t=[]).concat.apply(t,U(n)),this._weightMap=e}},{key:"resourceManager",set:function(e){this._resourceManager=e}},{key:"inputs",get:function(){return this._inputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"outputs",get:function(){return this._outputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"inputNodes",get:function(){return this._inputs.map((function(e){return e.signatureKey||e.name}))}},{key:"outputNodes",get:function(){return this._outputs.map((function(e){var t=e.signatureKey||e.name;return e.defaultOutput?"".concat(t,":").concat(e.defaultOutput):t}))}},{key:"functions",get:function(){var e=this;return Object.keys(this._functions).reduce((function(t,n){return t[n]=e._functions[n].signature,t}),{})}},{key:"getCompilationKey",value:function(e,t){var n=e.map((function(e){return e.name})).sort(),r=t.map((function(e){return e.name})).sort();return n.join(this.SEPERATOR)+"--"+r.join(this.SEPERATOR)}},{key:"compile",value:function(e,t){var n=GR(e,t,this.weightMap,this._initNodes),r=n.missingInputs,a=n.dynamicNode,i=n.syncInputs;if(null!=a)throw new Error("This execution contains the node '".concat(a.name,"', which has ")+"the dynamic op '".concat(a.op,"'. Please use ")+"model.executeAsync() instead. Alternatively, to avoid the "+"dynamic ops, specify the inputs [".concat(i,"]"));if(r.length>0){var o=t.map((function(e){return e.name})),s=Object.keys(e);throw new Error("Cannot compute the outputs [".concat(o,"] from the provided inputs ")+"[".concat(s,"]. Missing the following inputs: [").concat(r,"]"))}return function(e,t,n){var r=n.usedNodes,a=n.inputs,i=[],o=Object.keys(a).map((function(e){return MM(e)[0]})).map((function(t){return e.nodes[t]})),s=e.initNodes;o.forEach((function(e){r.has(e.name)&&i.push(e)})),e.weights.forEach((function(e){r.has(e.name)&&i.push(e)})),null!=s&&s.forEach((function(e){r.has(e.name)&&i.push(e)}));for(var u=new Set,c=[];i.length>0;){var l=i.pop();u.add(l.name),t[l.name]||c.push(l),l.children.forEach((function(e){!u.has(e.name)&&r.has(e.name)&&e.inputs.every((function(e){return u.has(e.name)}))&&i.push(e)}))}return c}(this.graph,this.weightMap,n)}},{key:"execute",value:function(e,t){var n=this;e=this.mapInputs(e);var r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);var a=r.map((function(e){return n.graph.nodes[MM(e)[0]]})),i=t.map((function(e){return MM(e)[0]})),o=i.map((function(e){return n.graph.nodes[e]}));0===o.length&&(o=this._outputs);var s=this.getCompilationKey(a,o),u=this.compiledMap.get(s);null==u&&(u=this.compile(e,o),this.compiledMap.set(s,u));var c={},l={};return c_((function(){var r=new KR(n.weightMap,c,l,n.functionExecutorMap),a=Object.assign({},n.weightMap);Object.keys(e).forEach((function(t){var n=te(MM(t),2),r=n[0],i=[];i[n[1]]=e[t],a[r]=i}));for(var o=n.getFrozenTensorIds(a),s={},f=0;f<u.length;f++){var h=u[f];if(!a[h.name]){var d=WR(h,a,r,n._resourceManager);if(xk(d))throw new Error("The execution of the op '".concat(h.op,"' returned a promise. ")+"Please use model.executeAsync() instead.");a[h.name]=d,n.checkTensorForDisposal(h.name,h,a,r,o,i,s)}}return null==n.parent&&r.dispose(o),t.map((function(e){return CM(e,a,r)}))}))}},{key:"getFrozenTensorIds",value:function(e){var t=[].concat.apply([],Object.keys(e).map((function(t){return e[t]})).map((function(e){return e.map((function(e){return e.id}))})));return new Set(t)}},{key:"checkTensorForDisposal",value:function(e,t,n,r,a,i,o){"control"!==t.category&&-1===i.indexOf(e)&&(n[e].forEach((function(e){null!=e&&(o[e.id]=(o[e.id]||0)+t.children.length)})),t.inputs.forEach((function(e){if("control"!==e.category){var t=function(e,t,n){return t[OM(e,n.currentContextId)]}(e.name,n,r);null!=t&&t.forEach((function(e){if(e&&!a.has(e.id)){var t=o[e.id];1===t?(e.dispose(),delete o[e.id]):null!=t&&o[e.id]--}}))}})))}},{key:"executeAsync",value:function(){var e=Rt(Ot().mark((function e(t,n){return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._executeAsync(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_executeAsync",value:function(){var e=Rt(Ot().mark((function e(t,n){var r,a,i,o,s,u,c,l,f,h=arguments;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:{},i=h.length>4&&void 0!==h[4]?h[4]:{},(r=h.length>2&&void 0!==h[2]&&h[2])||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),n=this.mapOutputs(n),this.checkOutputs(n)),o=new KR(this.weightMap,a,i,this.functionExecutorMap),e.next=7,this.executeWithControlFlow(t,o,n,r);case 7:return s=e.sent,u=n.map((function(e){return CM(e,s,o)})),c=u.map((function(e){return e.id})),l=Object.keys(t).map((function(e){return t[e].id})),f=new Set([].concat(U(c),U(l),U(this.weightIds))),Object.keys(s).forEach((function(e){s[e].forEach((function(e){!e||e.isDisposed||f.has(e.id)||e.dispose()}))})),null==this.parent&&o.dispose(f),e.abrupt("return",u);case 15:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"executeFunctionAsync",value:function(){var e=Rt(Ot().mark((function e(t,n,r){var a,i=this;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.reduce((function(e,t,n){return e[i.inputs[n].name]=t,e}),{}),e.abrupt("return",this._executeAsync(a,this.outputNodes,!0,n,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"executeWithControlFlow",value:function(){var e=Rt(Ot().mark((function e(t,n,r,a){var i,o,s,u,c,l,f,h,d,p,m,v,y,g,b,k,w,x=this;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Object.keys(t),o=i.map((function(e){return x.graph.nodes[MM(e)[0]]})),s=r.map((function(e){return MM(e)[0]})),0===(u=s.map((function(e){return x.graph.nodes[e]}))).length&&(u=this._outputs),c=GR(t,u,this.weightMap,this._initNodes),l=c.usedNodes,f=c.missingInputs,h=c.dynamicNode,d=c.syncInputs,p=[].concat(U(o),U(this.graph.weights),U(this._initNodes||[])).map((function(e){return{node:e,contexts:n.currentContext}})),m=Object.assign({},this.weightMap),Object.keys(t).forEach((function(e){var n=te(MM(e),2),r=n[0],a=[];a[n[1]]=t[e],m[r]=a})),v={},y=this.getFrozenTensorIds(m),g={};case 12:if(!(p.length>0)){e.next=18;break}return b=this.processStack(o,p,n,m,g,y,s,v,l),e.next=16,Promise.all(b);case 16:e.next=12;break;case 18:if(null!=h||a||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead."),!((k=u.filter((function(e){return!$R(e)&&!CM(e.name,m,n)})).map((function(e){return e.name}))).length>0)){e.next=24;break}throw w="",null!=h&&(w="Alternatively, to avoid the dynamic ops, use model.execute() "+"and specify the inputs [".concat(d,"]")),new Error("Cannot compute the outputs [".concat(k,"] from the provided ")+"inputs [".concat(i,"]. Consider providing the following inputs: ")+"[".concat(f,"]. ").concat(w));case 24:return e.abrupt("return",m);case 25:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"processStack",value:function(e,t,n,r,a,i,o,s,u){for(var c=this,l=[],f=function(){var e=t.pop();n.currentContext=e.contexts;var f="";if("Enter"===e.node.op&&AM("isConstant",e.node,r,n)){var h=te(DM(e.node.name,n),1);f=h[0]}if(null==r[e.node.name]){var d=WR(e.node,r,n,c._resourceManager);if(!f){var p=te(DM(e.node.name,n),1);f=p[0]}var m=n.currentContext;xk(d)?l.push(d.then((function(l){return r[f]=l,n.currentContext=m,c.checkTensorForDisposal(f,e.node,r,n,i,o,s),c.processChildNodes(e.node,t,n,r,a,u),l}))):(r[f]=d,c.checkTensorForDisposal(f,e.node,r,n,i,o,s),c.processChildNodes(e.node,t,n,r,a,u))}else c.processChildNodes(e.node,t,n,r,a,u)};t.length>0;)f();return l}},{key:"processChildNodes",value:function(e,t,n,r,a,i){e.children.forEach((function(e){var o=te(DM(e.name,n),1)[0];!a[o]&&i.has(e.name)&&("Merge"===e.op?e.inputNames.some((function(e){return!!CM(e,r,n)}))&&(a[o]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every((function(e){return!!CM(e,r,n)}))&&(a[o]=!0,t.push({contexts:n.currentContext,node:e})))}))}},{key:"dispose",value:function(){var e=this;Object.keys(this.weightMap).forEach((function(t){return e.weightMap[t].forEach((function(e){return e.dispose()}))}))}},{key:"checkInputShapeAndType",value:function(e){var t=this;Object.keys(e).forEach((function(n){var r=e[n],a=te(MM(n),1)[0],i=t.graph.nodes[a];if(i.attrParams.shape&&i.attrParams.shape.value){var o=i.attrParams.shape.value;Fb(o.length===r.shape.length&&r.shape.every((function(e,t){return-1===o[t]||o[t]===e})),(function(){return"The shape of dict['".concat(i.name,"'] provided in ")+"model.execute(dict) must be [".concat(o,"], but was ")+"[".concat(r.shape,"]")}))}i.attrParams.dtype&&i.attrParams.dtype.value&&Fb(r.dtype===i.attrParams.dtype.value,(function(){return"The dtype of dict['".concat(i.name,"'] provided in ")+"model.execute(dict) must be "+"".concat(i.attrParams.dtype.value,", but was ").concat(r.dtype)}))}))}},{key:"mapInputs",value:function(e){var t={};for(var n in e){if(null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[n])t[this._signature.inputs[n].name]=e[n];else t[n]=e[n]}return t}},{key:"checkInputs",value:function(e){var t=this,n=Object.keys(e).filter((function(e){var n=te(MM(e),1)[0];return null==t.graph.nodes[n]}));if(n.length>0)throw new Error("The dict provided in model.execute(dict) has "+"keys: [".concat(n,"] that are not part of graph"))}},{key:"mapOutputs",value:function(e){var t=this;return e.map((function(e){return null!=t._signature&&null!=t._signature.outputs&&null!=t._signature.outputs[e]?t._signature.outputs[e].name:e}),{})}},{key:"checkOutputs",value:function(e){var t=this;e.forEach((function(e){var n=te(MM(e),1)[0];if(!t.graph.nodes[n])throw new Error("The output '".concat(e,"' is not found in the graph"))}))}}]),e}(),tP=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};B(this,e),this.hashTableNameToHandle=t,this.hashTableMap=n}return K(e,[{key:"addHashTable",value:function(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}},{key:"getHashTableHandleByName",value:function(e){return this.hashTableNameToHandle[e]}},{key:"getHashTableById",value:function(e){return this.hashTableMap[e]}},{key:"dispose",value:function(){for(var e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(var t in this.hashTableNameToHandle)this.hashTableNameToHandle[t].dispose(),delete this.hashTableNameToHandle[t]}}]),e}(),nP="?tfjs-format=file",rP="model.json",aP=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};B(this,e),this.modelUrl=t,this.loadOptions=n,this.version="n/a",null==n&&(this.loadOptions={}),this.resourceManager=new tP}return K(e,[{key:"modelVersion",get:function(){return this.version}},{key:"inputNodes",get:function(){return this.executor.inputNodes}},{key:"outputNodes",get:function(){return this.executor.outputNodes}},{key:"inputs",get:function(){return this.executor.inputs}},{key:"outputs",get:function(){return this.executor.outputs}},{key:"weights",get:function(){return this.executor.weightMap}},{key:"metadata",get:function(){return this.artifacts.userDefinedMetadata}},{key:"modelSignature",get:function(){return this.signature}},{key:"findIOHandler",value:function(){var e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=iT(e,this.loadOptions);else{var t=ZS(e,this.loadOptions);if(0===t.length)t.push(iT(e,this.loadOptions));else if(t.length>1)throw new Error("Found more than one (".concat(t.length,") load handlers for ")+"URL '".concat([e],"'"));this.handler=t[0]}}},{key:"load",value:function(){var e=Rt(Ot().mark((function e(){var t;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.findIOHandler(),null!=this.handler.load){e.next=3;break}throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");case 3:return e.next=5,this.handler.load();case 5:return t=e.sent,e.abrupt("return",this.loadSync(t));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadSync",value:function(e){this.artifacts=e;var t,n=this.artifacts.modelTopology;t=null!=this.artifacts.userDefinedMetadata&&null!=this.artifacts.userDefinedMetadata.signature?this.artifacts.userDefinedMetadata.signature:this.artifacts.signature,this.signature=t,this.version="".concat(n.versions.producer,".").concat(n.versions.minConsumer);var r=zS(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new eP(ZM.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(r),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){var a=ZM.Instance.transformGraph(e.modelInitializer);this.initializer=new eP(a),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}},{key:"save",value:function(){var e=Rt(Ot().mark((function e(t,n){var r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=9;break}if(0!==(r=JS(t)).length){e.next=6;break}throw new Error("Cannot find any save handlers for URL '".concat(t,"'"));case 6:if(!(r.length>1)){e.next=8;break}throw new Error("Found more than one (".concat(r.length,") save handlers for ")+"URL '".concat(t,"'"));case 8:t=r[0];case 9:if(null!=t.save){e.next=11;break}throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 11:return e.abrupt("return",t.save(this.artifacts));case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"predict",value:function(e,t){return this.execute(e,this.outputNodes)}},{key:"normalizeInputs",value:function(e){if(!(e instanceof tS)&&!Array.isArray(e))return e;if((e=Array.isArray(e)?e:[e]).length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,"+"the graph model has ".concat(this.inputNodes.length," placeholders, ")+"while there are ".concat(e.length," input tensors."));return this.inputNodes.reduce((function(t,n,r){return t[n]=e[r],t}),{})}},{key:"normalizeOutputs",value:function(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}},{key:"execute",value:function(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);var n=this.executor.execute(e,t);return n.length>1?n:n[0]}},{key:"executeAsync",value:function(){var e=Rt(Ot().mark((function e(t,n){var r;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.normalizeInputs(t),n=this.normalizeOutputs(n),e.next=4,this.executor.executeAsync(t,n);case 4:return r=e.sent,e.abrupt("return",r.length>1?r:r[0]);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"convertTensorMapToTensorsMap",value:function(e){return Object.keys(e).reduce((function(t,n){return t[n]=[e[n]],t}),{})}},{key:"dispose",value:function(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}}]),e}();function iP(e){return oP.apply(this,arguments)}function oP(){return oP=Rt(Ot().mark((function e(t){var n,r,a=arguments;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:{},null!=t){e.next=3;break}throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");case 3:return null==n&&(n={}),n.fromTFHub&&null==t.load&&(t.endsWith("/")||(t+="/"),t="".concat(t).concat(rP).concat(nP)),r=new aP(t,n),e.next=8,r.load();case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)}))),oP.apply(this,arguments)}function sP(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(o,s)}u((r=r.apply(e,t||[])).next())}))}function uP(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var cP={0:"tench, Tinca tinca",1:"goldfish, Carassius auratus",2:"great white shark, white shark, man-eater, man-eating shark, Carcharodon carcharias",3:"tiger shark, Galeocerdo cuvieri",4:"hammerhead, hammerhead shark",5:"electric ray, crampfish, numbfish, torpedo",6:"stingray",7:"cock",8:"hen",9:"ostrich, Struthio camelus",10:"brambling, Fringilla montifringilla",11:"goldfinch, Carduelis carduelis",12:"house finch, linnet, Carpodacus mexicanus",13:"junco, snowbird",14:"indigo bunting, indigo finch, indigo bird, Passerina cyanea",15:"robin, American robin, Turdus migratorius",16:"bulbul",17:"jay",18:"magpie",19:"chickadee",20:"water ouzel, dipper",21:"kite",22:"bald eagle, American eagle, Haliaeetus leucocephalus",23:"vulture",24:"great grey owl, great gray owl, Strix nebulosa",25:"European fire salamander, Salamandra salamandra",26:"common newt, Triturus vulgaris",27:"eft",28:"spotted salamander, Ambystoma maculatum",29:"axolotl, mud puppy, Ambystoma mexicanum",30:"bullfrog, Rana catesbeiana",31:"tree frog, tree-frog",32:"tailed frog, bell toad, ribbed toad, tailed toad, Ascaphus trui",33:"loggerhead, loggerhead turtle, Caretta caretta",34:"leatherback turtle, leatherback, leathery turtle, Dermochelys coriacea",35:"mud turtle",36:"terrapin",37:"box turtle, box tortoise",38:"banded gecko",39:"common iguana, iguana, Iguana iguana",40:"American chameleon, anole, Anolis carolinensis",41:"whiptail, whiptail lizard",42:"agama",43:"frilled lizard, Chlamydosaurus kingi",44:"alligator lizard",45:"Gila monster, Heloderma suspectum",46:"green lizard, Lacerta viridis",47:"African chameleon, Chamaeleo chamaeleon",48:"Komodo dragon, Komodo lizard, dragon lizard, giant lizard, Varanus komodoensis",49:"African crocodile, Nile crocodile, Crocodylus niloticus",50:"American alligator, Alligator mississipiensis",51:"triceratops",52:"thunder snake, worm snake, Carphophis amoenus",53:"ringneck snake, ring-necked snake, ring snake",54:"hognose snake, puff adder, sand viper",55:"green snake, grass snake",56:"king snake, kingsnake",57:"garter snake, grass snake",58:"water snake",59:"vine snake",60:"night snake, Hypsiglena torquata",61:"boa constrictor, Constrictor constrictor",62:"rock python, rock snake, Python sebae",63:"Indian cobra, Naja naja",64:"green mamba",65:"sea snake",66:"horned viper, cerastes, sand viper, horned asp, Cerastes cornutus",67:"diamondback, diamondback rattlesnake, Crotalus adamanteus",68:"sidewinder, horned rattlesnake, Crotalus cerastes",69:"trilobite",70:"harvestman, daddy longlegs, Phalangium opilio",71:"scorpion",72:"black and gold garden spider, Argiope aurantia",73:"barn spider, Araneus cavaticus",74:"garden spider, Aranea diademata",75:"black widow, Latrodectus mactans",76:"tarantula",77:"wolf spider, hunting spider",78:"tick",79:"centipede",80:"black grouse",81:"ptarmigan",82:"ruffed grouse, partridge, Bonasa umbellus",83:"prairie chicken, prairie grouse, prairie fowl",84:"peacock",85:"quail",86:"partridge",87:"African grey, African gray, Psittacus erithacus",88:"macaw",89:"sulphur-crested cockatoo, Kakatoe galerita, Cacatua galerita",90:"lorikeet",91:"coucal",92:"bee eater",93:"hornbill",94:"hummingbird",95:"jacamar",96:"toucan",97:"drake",98:"red-breasted merganser, Mergus serrator",99:"goose",100:"black swan, Cygnus atratus",101:"tusker",102:"echidna, spiny anteater, anteater",103:"platypus, duckbill, duckbilled platypus, duck-billed platypus, Ornithorhynchus anatinus",104:"wallaby, brush kangaroo",105:"koala, koala bear, kangaroo bear, native bear, Phascolarctos cinereus",106:"wombat",107:"jelly fish",108:"sea anemone, anemone",109:"brain coral",110:"flatworm, platyhelminth",111:"nematode, nematode worm, roundworm",112:"conch",113:"snail",114:"slug",115:"sea slug, nudibranch",116:"chiton, coat-of-mail shell, sea cradle, polyplacophore",117:"chambered nautilus, pearly nautilus, nautilus",118:"Dungeness crab, Cancer magister",119:"rock crab, Cancer irroratus",120:"fiddler crab",121:"king crab, Alaska crab, Alaskan king crab, Alaska king crab, Paralithodes camtschatica",122:"American lobster, Northern lobster, Maine lobster, Homarus americanus",123:"spiny lobster, langouste, rock lobster, crawfish, crayfish, sea crawfish",124:"crayfish, crawfish, crawdad, crawdaddy",125:"hermit crab",126:"isopod",127:"white stork, Ciconia ciconia",128:"black stork, Ciconia nigra",129:"spoonbill",130:"flamingo",131:"little blue heron, Egretta caerulea",132:"American egret, great white heron, Egretta albus",133:"bittern",134:"crane",135:"limpkin, Aramus pictus",136:"European gallinule, Porphyrio porphyrio",137:"American coot, marsh hen, mud hen, water hen, Fulica americana",138:"bustard",139:"ruddy turnstone, Arenaria interpres",140:"red-backed sandpiper, dunlin, Erolia alpina",141:"redshank, Tringa totanus",142:"dowitcher",143:"oystercatcher, oyster catcher",144:"pelican",145:"king penguin, Aptenodytes patagonica",146:"albatross, mollymawk",147:"grey whale, gray whale, devilfish, Eschrichtius gibbosus, Eschrichtius robustus",148:"killer whale, killer, orca, grampus, sea wolf, Orcinus orca",149:"dugong, Dugong dugon",150:"sea lion",151:"Chihuahua",152:"Japanese spaniel",153:"Maltese dog, Maltese terrier, Maltese",154:"Pekinese, Pekingese, Peke",155:"Shih-Tzu",156:"Blenheim spaniel",157:"papillon",158:"toy terrier",159:"Rhodesian ridgeback",160:"Afghan hound, Afghan",161:"basset, basset hound",162:"beagle",163:"bloodhound, sleuthhound",164:"bluetick",165:"black-and-tan coonhound",166:"Walker hound, Walker foxhound",167:"English foxhound",168:"redbone",169:"borzoi, Russian wolfhound",170:"Irish wolfhound",171:"Italian greyhound",172:"whippet",173:"Ibizan hound, Ibizan Podenco",174:"Norwegian elkhound, elkhound",175:"otterhound, otter hound",176:"Saluki, gazelle hound",177:"Scottish deerhound, deerhound",178:"Weimaraner",179:"Staffordshire bullterrier, Staffordshire bull terrier",180:"American Staffordshire terrier, Staffordshire terrier, American pit bull terrier, pit bull terrier",181:"Bedlington terrier",182:"Border terrier",183:"Kerry blue terrier",184:"Irish terrier",185:"Norfolk terrier",186:"Norwich terrier",187:"Yorkshire terrier",188:"wire-haired fox terrier",189:"Lakeland terrier",190:"Sealyham terrier, Sealyham",191:"Airedale, Airedale terrier",192:"cairn, cairn terrier",193:"Australian terrier",194:"Dandie Dinmont, Dandie Dinmont terrier",195:"Boston bull, Boston terrier",196:"miniature schnauzer",197:"giant schnauzer",198:"standard schnauzer",199:"Scotch terrier, Scottish terrier, Scottie",200:"Tibetan terrier, chrysanthemum dog",201:"silky terrier, Sydney silky",202:"soft-coated wheaten terrier",203:"West Highland white terrier",204:"Lhasa, Lhasa apso",205:"flat-coated retriever",206:"curly-coated retriever",207:"golden retriever",208:"Labrador retriever",209:"Chesapeake Bay retriever",210:"German short-haired pointer",211:"vizsla, Hungarian pointer",212:"English setter",213:"Irish setter, red setter",214:"Gordon setter",215:"Brittany spaniel",216:"clumber, clumber spaniel",217:"English springer, English springer spaniel",218:"Welsh springer spaniel",219:"cocker spaniel, English cocker spaniel, cocker",220:"Sussex spaniel",221:"Irish water spaniel",222:"kuvasz",223:"schipperke",224:"groenendael",225:"malinois",226:"briard",227:"kelpie",228:"komondor",229:"Old English sheepdog, bobtail",230:"Shetland sheepdog, Shetland sheep dog, Shetland",231:"collie",232:"Border collie",233:"Bouvier des Flandres, Bouviers des Flandres",234:"Rottweiler",235:"German shepherd, German shepherd dog, German police dog, alsatian",236:"Doberman, Doberman pinscher",237:"miniature pinscher",238:"Greater Swiss Mountain dog",239:"Bernese mountain dog",240:"Appenzeller",241:"EntleBucher",242:"boxer",243:"bull mastiff",244:"Tibetan mastiff",245:"French bulldog",246:"Great Dane",247:"Saint Bernard, St Bernard",248:"Eskimo dog, husky",249:"malamute, malemute, Alaskan malamute",250:"Siberian husky",251:"dalmatian, coach dog, carriage dog",252:"affenpinscher, monkey pinscher, monkey dog",253:"basenji",254:"pug, pug-dog",255:"Leonberg",256:"Newfoundland, Newfoundland dog",257:"Great Pyrenees",258:"Samoyed, Samoyede",259:"Pomeranian",260:"chow, chow chow",261:"keeshond",262:"Brabancon griffon",263:"Pembroke, Pembroke Welsh corgi",264:"Cardigan, Cardigan Welsh corgi",265:"toy poodle",266:"miniature poodle",267:"standard poodle",268:"Mexican hairless",269:"timber wolf, grey wolf, gray wolf, Canis lupus",270:"white wolf, Arctic wolf, Canis lupus tundrarum",271:"red wolf, maned wolf, Canis rufus, Canis niger",272:"coyote, prairie wolf, brush wolf, Canis latrans",273:"dingo, warrigal, warragal, Canis dingo",274:"dhole, Cuon alpinus",275:"African hunting dog, hyena dog, Cape hunting dog, Lycaon pictus",276:"hyena, hyaena",277:"red fox, Vulpes vulpes",278:"kit fox, Vulpes macrotis",279:"Arctic fox, white fox, Alopex lagopus",280:"grey fox, gray fox, Urocyon cinereoargenteus",281:"tabby, tabby cat",282:"tiger cat",283:"Persian cat",284:"Siamese cat, Siamese",285:"Egyptian cat",286:"cougar, puma, catamount, mountain lion, painter, panther, Felis concolor",287:"lynx, catamount",288:"leopard, Panthera pardus",289:"snow leopard, ounce, Panthera uncia",290:"jaguar, panther, Panthera onca, Felis onca",291:"lion, king of beasts, Panthera leo",292:"tiger, Panthera tigris",293:"cheetah, chetah, Acinonyx jubatus",294:"brown bear, bruin, Ursus arctos",295:"American black bear, black bear, Ursus americanus, Euarctos americanus",296:"ice bear, polar bear, Ursus Maritimus, Thalarctos maritimus",297:"sloth bear, Melursus ursinus, Ursus ursinus",298:"mongoose",299:"meerkat, mierkat",300:"tiger beetle",301:"ladybug, ladybeetle, lady beetle, ladybird, ladybird beetle",302:"ground beetle, carabid beetle",303:"long-horned beetle, longicorn, longicorn beetle",304:"leaf beetle, chrysomelid",305:"dung beetle",306:"rhinoceros beetle",307:"weevil",308:"fly",309:"bee",310:"ant, emmet, pismire",311:"grasshopper, hopper",312:"cricket",313:"walking stick, walkingstick, stick insect",314:"cockroach, roach",315:"mantis, mantid",316:"cicada, cicala",317:"leafhopper",318:"lacewing, lacewing fly",319:"dragonfly, darning needle, devil's darning needle, sewing needle, snake feeder, snake doctor, mosquito hawk, skeeter hawk",320:"damselfly",321:"admiral",322:"ringlet, ringlet butterfly",323:"monarch, monarch butterfly, milkweed butterfly, Danaus plexippus",324:"cabbage butterfly",325:"sulphur butterfly, sulfur butterfly",326:"lycaenid, lycaenid butterfly",327:"starfish, sea star",328:"sea urchin",329:"sea cucumber, holothurian",330:"wood rabbit, cottontail, cottontail rabbit",331:"hare",332:"Angora, Angora rabbit",333:"hamster",334:"porcupine, hedgehog",335:"fox squirrel, eastern fox squirrel, Sciurus niger",336:"marmot",337:"beaver",338:"guinea pig, Cavia cobaya",339:"sorrel",340:"zebra",341:"hog, pig, grunter, squealer, Sus scrofa",342:"wild boar, boar, Sus scrofa",343:"warthog",344:"hippopotamus, hippo, river horse, Hippopotamus amphibius",345:"ox",346:"water buffalo, water ox, Asiatic buffalo, Bubalus bubalis",347:"bison",348:"ram, tup",349:"bighorn, bighorn sheep, cimarron, Rocky Mountain bighorn, Rocky Mountain sheep, Ovis canadensis",350:"ibex, Capra ibex",351:"hartebeest",352:"impala, Aepyceros melampus",353:"gazelle",354:"Arabian camel, dromedary, Camelus dromedarius",355:"llama",356:"weasel",357:"mink",358:"polecat, fitch, foulmart, foumart, Mustela putorius",359:"black-footed ferret, ferret, Mustela nigripes",360:"otter",361:"skunk, polecat, wood pussy",362:"badger",363:"armadillo",364:"three-toed sloth, ai, Bradypus tridactylus",365:"orangutan, orang, orangutang, Pongo pygmaeus",366:"gorilla, Gorilla gorilla",367:"chimpanzee, chimp, Pan troglodytes",368:"gibbon, Hylobates lar",369:"siamang, Hylobates syndactylus, Symphalangus syndactylus",370:"guenon, guenon monkey",371:"patas, hussar monkey, Erythrocebus patas",372:"baboon",373:"macaque",374:"langur",375:"colobus, colobus monkey",376:"proboscis monkey, Nasalis larvatus",377:"marmoset",378:"capuchin, ringtail, Cebus capucinus",379:"howler monkey, howler",380:"titi, titi monkey",381:"spider monkey, Ateles geoffroyi",382:"squirrel monkey, Saimiri sciureus",383:"Madagascar cat, ring-tailed lemur, Lemur catta",384:"indri, indris, Indri indri, Indri brevicaudatus",385:"Indian elephant, Elephas maximus",386:"African elephant, Loxodonta africana",387:"lesser panda, red panda, panda, bear cat, cat bear, Ailurus fulgens",388:"giant panda, panda, panda bear, coon bear, Ailuropoda melanoleuca",389:"barracouta, snoek",390:"eel",391:"coho, cohoe, coho salmon, blue jack, silver salmon, Oncorhynchus kisutch",392:"rock beauty, Holocanthus tricolor",393:"anemone fish",394:"sturgeon",395:"gar, garfish, garpike, billfish, Lepisosteus osseus",396:"lionfish",397:"puffer, pufferfish, blowfish, globefish",398:"abacus",399:"abaya",400:"academic gown, academic robe, judge's robe",401:"accordion, piano accordion, squeeze box",402:"acoustic guitar",403:"aircraft carrier, carrier, flattop, attack aircraft carrier",404:"airliner",405:"airship, dirigible",406:"altar",407:"ambulance",408:"amphibian, amphibious vehicle",409:"analog clock",410:"apiary, bee house",411:"apron",412:"ashcan, trash can, garbage can, wastebin, ash bin, ash-bin, ashbin, dustbin, trash barrel, trash bin",413:"assault rifle, assault gun",414:"backpack, back pack, knapsack, packsack, rucksack, haversack",415:"bakery, bakeshop, bakehouse",416:"balance beam, beam",417:"balloon",418:"ballpoint, ballpoint pen, ballpen, Biro",419:"Band Aid",420:"banjo",421:"bannister, banister, balustrade, balusters, handrail",422:"barbell",423:"barber chair",424:"barbershop",425:"barn",426:"barometer",427:"barrel, cask",428:"barrow, garden cart, lawn cart, wheelbarrow",429:"baseball",430:"basketball",431:"bassinet",432:"bassoon",433:"bathing cap, swimming cap",434:"bath towel",435:"bathtub, bathing tub, bath, tub",436:"beach wagon, station wagon, wagon, estate car, beach waggon, station waggon, waggon",437:"beacon, lighthouse, beacon light, pharos",438:"beaker",439:"bearskin, busby, shako",440:"beer bottle",441:"beer glass",442:"bell cote, bell cot",443:"bib",444:"bicycle-built-for-two, tandem bicycle, tandem",445:"bikini, two-piece",446:"binder, ring-binder",447:"binoculars, field glasses, opera glasses",448:"birdhouse",449:"boathouse",450:"bobsled, bobsleigh, bob",451:"bolo tie, bolo, bola tie, bola",452:"bonnet, poke bonnet",453:"bookcase",454:"bookshop, bookstore, bookstall",455:"bottlecap",456:"bow",457:"bow tie, bow-tie, bowtie",458:"brass, memorial tablet, plaque",459:"brassiere, bra, bandeau",460:"breakwater, groin, groyne, mole, bulwark, seawall, jetty",461:"breastplate, aegis, egis",462:"broom",463:"bucket, pail",464:"buckle",465:"bulletproof vest",466:"bullet train, bullet",467:"butcher shop, meat market",468:"cab, hack, taxi, taxicab",469:"caldron, cauldron",470:"candle, taper, wax light",471:"cannon",472:"canoe",473:"can opener, tin opener",474:"cardigan",475:"car mirror",476:"carousel, carrousel, merry-go-round, roundabout, whirligig",477:"carpenter's kit, tool kit",478:"carton",479:"car wheel",480:"cash machine, cash dispenser, automated teller machine, automatic teller machine, automated teller, automatic teller, ATM",481:"cassette",482:"cassette player",483:"castle",484:"catamaran",485:"CD player",486:"cello, violoncello",487:"cellular telephone, cellular phone, cellphone, cell, mobile phone",488:"chain",489:"chainlink fence",490:"chain mail, ring mail, mail, chain armor, chain armour, ring armor, ring armour",491:"chain saw, chainsaw",492:"chest",493:"chiffonier, commode",494:"chime, bell, gong",495:"china cabinet, china closet",496:"Christmas stocking",497:"church, church building",498:"cinema, movie theater, movie theatre, movie house, picture palace",499:"cleaver, meat cleaver, chopper",500:"cliff dwelling",501:"cloak",502:"clog, geta, patten, sabot",503:"cocktail shaker",504:"coffee mug",505:"coffeepot",506:"coil, spiral, volute, whorl, helix",507:"combination lock",508:"computer keyboard, keypad",509:"confectionery, confectionary, candy store",510:"container ship, containership, container vessel",511:"convertible",512:"corkscrew, bottle screw",513:"cornet, horn, trumpet, trump",514:"cowboy boot",515:"cowboy hat, ten-gallon hat",516:"cradle",517:"crane",518:"crash helmet",519:"crate",520:"crib, cot",521:"Crock Pot",522:"croquet ball",523:"crutch",524:"cuirass",525:"dam, dike, dyke",526:"desk",527:"desktop computer",528:"dial telephone, dial phone",529:"diaper, nappy, napkin",530:"digital clock",531:"digital watch",532:"dining table, board",533:"dishrag, dishcloth",534:"dishwasher, dish washer, dishwashing machine",535:"disk brake, disc brake",536:"dock, dockage, docking facility",537:"dogsled, dog sled, dog sleigh",538:"dome",539:"doormat, welcome mat",540:"drilling platform, offshore rig",541:"drum, membranophone, tympan",542:"drumstick",543:"dumbbell",544:"Dutch oven",545:"electric fan, blower",546:"electric guitar",547:"electric locomotive",548:"entertainment center",549:"envelope",550:"espresso maker",551:"face powder",552:"feather boa, boa",553:"file, file cabinet, filing cabinet",554:"fireboat",555:"fire engine, fire truck",556:"fire screen, fireguard",557:"flagpole, flagstaff",558:"flute, transverse flute",559:"folding chair",560:"football helmet",561:"forklift",562:"fountain",563:"fountain pen",564:"four-poster",565:"freight car",566:"French horn, horn",567:"frying pan, frypan, skillet",568:"fur coat",569:"garbage truck, dustcart",570:"gasmask, respirator, gas helmet",571:"gas pump, gasoline pump, petrol pump, island dispenser",572:"goblet",573:"go-kart",574:"golf ball",575:"golfcart, golf cart",576:"gondola",577:"gong, tam-tam",578:"gown",579:"grand piano, grand",580:"greenhouse, nursery, glasshouse",581:"grille, radiator grille",582:"grocery store, grocery, food market, market",583:"guillotine",584:"hair slide",585:"hair spray",586:"half track",587:"hammer",588:"hamper",589:"hand blower, blow dryer, blow drier, hair dryer, hair drier",590:"hand-held computer, hand-held microcomputer",591:"handkerchief, hankie, hanky, hankey",592:"hard disc, hard disk, fixed disk",593:"harmonica, mouth organ, harp, mouth harp",594:"harp",595:"harvester, reaper",596:"hatchet",597:"holster",598:"home theater, home theatre",599:"honeycomb",600:"hook, claw",601:"hoopskirt, crinoline",602:"horizontal bar, high bar",603:"horse cart, horse-cart",604:"hourglass",605:"iPod",606:"iron, smoothing iron",607:"jack-o'-lantern",608:"jean, blue jean, denim",609:"jeep, landrover",610:"jersey, T-shirt, tee shirt",611:"jigsaw puzzle",612:"jinrikisha, ricksha, rickshaw",613:"joystick",614:"kimono",615:"knee pad",616:"knot",617:"lab coat, laboratory coat",618:"ladle",619:"lampshade, lamp shade",620:"laptop, laptop computer",621:"lawn mower, mower",622:"lens cap, lens cover",623:"letter opener, paper knife, paperknife",624:"library",625:"lifeboat",626:"lighter, light, igniter, ignitor",627:"limousine, limo",628:"liner, ocean liner",629:"lipstick, lip rouge",630:"Loafer",631:"lotion",632:"loudspeaker, speaker, speaker unit, loudspeaker system, speaker system",633:"loupe, jeweler's loupe",634:"lumbermill, sawmill",635:"magnetic compass",636:"mailbag, postbag",637:"mailbox, letter box",638:"maillot",639:"maillot, tank suit",640:"manhole cover",641:"maraca",642:"marimba, xylophone",643:"mask",644:"matchstick",645:"maypole",646:"maze, labyrinth",647:"measuring cup",648:"medicine chest, medicine cabinet",649:"megalith, megalithic structure",650:"microphone, mike",651:"microwave, microwave oven",652:"military uniform",653:"milk can",654:"minibus",655:"miniskirt, mini",656:"minivan",657:"missile",658:"mitten",659:"mixing bowl",660:"mobile home, manufactured home",661:"Model T",662:"modem",663:"monastery",664:"monitor",665:"moped",666:"mortar",667:"mortarboard",668:"mosque",669:"mosquito net",670:"motor scooter, scooter",671:"mountain bike, all-terrain bike, off-roader",672:"mountain tent",673:"mouse, computer mouse",674:"mousetrap",675:"moving van",676:"muzzle",677:"nail",678:"neck brace",679:"necklace",680:"nipple",681:"notebook, notebook computer",682:"obelisk",683:"oboe, hautboy, hautbois",684:"ocarina, sweet potato",685:"odometer, hodometer, mileometer, milometer",686:"oil filter",687:"organ, pipe organ",688:"oscilloscope, scope, cathode-ray oscilloscope, CRO",689:"overskirt",690:"oxcart",691:"oxygen mask",692:"packet",693:"paddle, boat paddle",694:"paddlewheel, paddle wheel",695:"padlock",696:"paintbrush",697:"pajama, pyjama, pj's, jammies",698:"palace",699:"panpipe, pandean pipe, syrinx",700:"paper towel",701:"parachute, chute",702:"parallel bars, bars",703:"park bench",704:"parking meter",705:"passenger car, coach, carriage",706:"patio, terrace",707:"pay-phone, pay-station",708:"pedestal, plinth, footstall",709:"pencil box, pencil case",710:"pencil sharpener",711:"perfume, essence",712:"Petri dish",713:"photocopier",714:"pick, plectrum, plectron",715:"pickelhaube",716:"picket fence, paling",717:"pickup, pickup truck",718:"pier",719:"piggy bank, penny bank",720:"pill bottle",721:"pillow",722:"ping-pong ball",723:"pinwheel",724:"pirate, pirate ship",725:"pitcher, ewer",726:"plane, carpenter's plane, woodworking plane",727:"planetarium",728:"plastic bag",729:"plate rack",730:"plow, plough",731:"plunger, plumber's helper",732:"Polaroid camera, Polaroid Land camera",733:"pole",734:"police van, police wagon, paddy wagon, patrol wagon, wagon, black Maria",735:"poncho",736:"pool table, billiard table, snooker table",737:"pop bottle, soda bottle",738:"pot, flowerpot",739:"potter's wheel",740:"power drill",741:"prayer rug, prayer mat",742:"printer",743:"prison, prison house",744:"projectile, missile",745:"projector",746:"puck, hockey puck",747:"punching bag, punch bag, punching ball, punchball",748:"purse",749:"quill, quill pen",750:"quilt, comforter, comfort, puff",751:"racer, race car, racing car",752:"racket, racquet",753:"radiator",754:"radio, wireless",755:"radio telescope, radio reflector",756:"rain barrel",757:"recreational vehicle, RV, R.V.",758:"reel",759:"reflex camera",760:"refrigerator, icebox",761:"remote control, remote",762:"restaurant, eating house, eating place, eatery",763:"revolver, six-gun, six-shooter",764:"rifle",765:"rocking chair, rocker",766:"rotisserie",767:"rubber eraser, rubber, pencil eraser",768:"rugby ball",769:"rule, ruler",770:"running shoe",771:"safe",772:"safety pin",773:"saltshaker, salt shaker",774:"sandal",775:"sarong",776:"sax, saxophone",777:"scabbard",778:"scale, weighing machine",779:"school bus",780:"schooner",781:"scoreboard",782:"screen, CRT screen",783:"screw",784:"screwdriver",785:"seat belt, seatbelt",786:"sewing machine",787:"shield, buckler",788:"shoe shop, shoe-shop, shoe store",789:"shoji",790:"shopping basket",791:"shopping cart",792:"shovel",793:"shower cap",794:"shower curtain",795:"ski",796:"ski mask",797:"sleeping bag",798:"slide rule, slipstick",799:"sliding door",800:"slot, one-armed bandit",801:"snorkel",802:"snowmobile",803:"snowplow, snowplough",804:"soap dispenser",805:"soccer ball",806:"sock",807:"solar dish, solar collector, solar furnace",808:"sombrero",809:"soup bowl",810:"space bar",811:"space heater",812:"space shuttle",813:"spatula",814:"speedboat",815:"spider web, spider's web",816:"spindle",817:"sports car, sport car",818:"spotlight, spot",819:"stage",820:"steam locomotive",821:"steel arch bridge",822:"steel drum",823:"stethoscope",824:"stole",825:"stone wall",826:"stopwatch, stop watch",827:"stove",828:"strainer",829:"streetcar, tram, tramcar, trolley, trolley car",830:"stretcher",831:"studio couch, day bed",832:"stupa, tope",833:"submarine, pigboat, sub, U-boat",834:"suit, suit of clothes",835:"sundial",836:"sunglass",837:"sunglasses, dark glasses, shades",838:"sunscreen, sunblock, sun blocker",839:"suspension bridge",840:"swab, swob, mop",841:"sweatshirt",842:"swimming trunks, bathing trunks",843:"swing",844:"switch, electric switch, electrical switch",845:"syringe",846:"table lamp",847:"tank, army tank, armored combat vehicle, armoured combat vehicle",848:"tape player",849:"teapot",850:"teddy, teddy bear",851:"television, television system",852:"tennis ball",853:"thatch, thatched roof",854:"theater curtain, theatre curtain",855:"thimble",856:"thresher, thrasher, threshing machine",857:"throne",858:"tile roof",859:"toaster",860:"tobacco shop, tobacconist shop, tobacconist",861:"toilet seat",862:"torch",863:"totem pole",864:"tow truck, tow car, wrecker",865:"toyshop",866:"tractor",867:"trailer truck, tractor trailer, trucking rig, rig, articulated lorry, semi",868:"tray",869:"trench coat",870:"tricycle, trike, velocipede",871:"trimaran",872:"tripod",873:"triumphal arch",874:"trolleybus, trolley coach, trackless trolley",875:"trombone",876:"tub, vat",877:"turnstile",878:"typewriter keyboard",879:"umbrella",880:"unicycle, monocycle",881:"upright, upright piano",882:"vacuum, vacuum cleaner",883:"vase",884:"vault",885:"velvet",886:"vending machine",887:"vestment",888:"viaduct",889:"violin, fiddle",890:"volleyball",891:"waffle iron",892:"wall clock",893:"wallet, billfold, notecase, pocketbook",894:"wardrobe, closet, press",895:"warplane, military plane",896:"washbasin, handbasin, washbowl, lavabo, wash-hand basin",897:"washer, automatic washer, washing machine",898:"water bottle",899:"water jug",900:"water tower",901:"whiskey jug",902:"whistle",903:"wig",904:"window screen",905:"window shade",906:"Windsor tie",907:"wine bottle",908:"wing",909:"wok",910:"wooden spoon",911:"wool, woolen, woollen",912:"worm fence, snake fence, snake-rail fence, Virginia fence",913:"wreck",914:"yawl",915:"yurt",916:"web site, website, internet site, site",917:"comic book",918:"crossword puzzle, crossword",919:"street sign",920:"traffic light, traffic signal, stoplight",921:"book jacket, dust cover, dust jacket, dust wrapper",922:"menu",923:"plate",924:"guacamole",925:"consomme",926:"hot pot, hotpot",927:"trifle",928:"ice cream, icecream",929:"ice lolly, lolly, lollipop, popsicle",930:"French loaf",931:"bagel, beigel",932:"pretzel",933:"cheeseburger",934:"hotdog, hot dog, red hot",935:"mashed potato",936:"head cabbage",937:"broccoli",938:"cauliflower",939:"zucchini, courgette",940:"spaghetti squash",941:"acorn squash",942:"butternut squash",943:"cucumber, cuke",944:"artichoke, globe artichoke",945:"bell pepper",946:"cardoon",947:"mushroom",948:"Granny Smith",949:"strawberry",950:"orange",951:"lemon",952:"fig",953:"pineapple, ananas",954:"banana",955:"jackfruit, jak, jack",956:"custard apple",957:"pomegranate",958:"hay",959:"carbonara",960:"chocolate sauce, chocolate syrup",961:"dough",962:"meat loaf, meatloaf",963:"pizza, pizza pie",964:"potpie",965:"burrito",966:"red wine",967:"espresso",968:"cup",969:"eggnog",970:"alp",971:"bubble",972:"cliff, drop, drop-off",973:"coral reef",974:"geyser",975:"lakeside, lakeshore",976:"promontory, headland, head, foreland",977:"sandbar, sand bar",978:"seashore, coast, seacoast, sea-coast",979:"valley, vale",980:"volcano",981:"ballplayer, baseball player",982:"groom, bridegroom",983:"scuba diver",984:"rapeseed",985:"daisy",986:"yellow lady's slipper, yellow lady-slipper, Cypripedium calceolus, Cypripedium parviflorum",987:"corn",988:"acorn",989:"hip, rose hip, rosehip",990:"buckeye, horse chestnut, conker",991:"coral fungus",992:"agaric",993:"gyromitra",994:"stinkhorn, carrion fungus",995:"earthstar",996:"hen-of-the-woods, hen of the woods, Polyporus frondosus, Grifola frondosa",997:"bolete",998:"ear, spike, capitulum",999:"toilet tissue, toilet paper, bathroom tissue"},lP=224,fP={"1.00":"module_apply_default/MobilenetV1/Logits/global_pool","2.00":"module_apply_default/MobilenetV2/Logits/AvgPool"},hP={"1.00":{.25:{url:"https://tfhub.dev/google/imagenet/mobilenet_v1_025_224/classification/1",inputRange:[0,1]},"0.50":{url:"https://tfhub.dev/google/imagenet/mobilenet_v1_050_224/classification/1",inputRange:[0,1]},.75:{url:"https://tfhub.dev/google/imagenet/mobilenet_v1_075_224/classification/1",inputRange:[0,1]},"1.00":{url:"https://tfhub.dev/google/imagenet/mobilenet_v1_100_224/classification/1",inputRange:[0,1]}},"2.00":{"0.50":{url:"https://tfhub.dev/google/imagenet/mobilenet_v2_050_224/classification/2",inputRange:[0,1]},.75:{url:"https://tfhub.dev/google/imagenet/mobilenet_v2_075_224/classification/2",inputRange:[0,1]},"1.00":{url:"https://tfhub.dev/google/imagenet/mobilenet_v2_100_224/classification/2",inputRange:[0,1]}}};function dP(e){return void 0===e&&(e={version:1,alpha:1}),sP(this,void 0,void 0,(function(){var t,n,r,a,i,o,s;return uP(this,(function(u){switch(u.label){case 0:if(null==v)throw new Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this model.");if(r=e.version.toFixed(2),a=e.alpha?e.alpha.toFixed(2):"",i=-1,o=1,null==e.modelUrl){if(!(r in hP))throw new Error("Invalid version of MobileNet. Valid versions are: "+Object.keys(hP));if(!(a in hP[r]))throw new Error("MobileNet constructed with invalid alpha "+e.alpha+". Valid multipliers for this version are: "+Object.keys(hP[r])+".");t=hP[r][a].inputRange,i=t[0],o=t[1]}return null!=e.inputRange&&(n=e.inputRange,i=n[0],o=n[1]),[4,(s=new pP(r,a,e.modelUrl,i,o)).load()];case 1:return u.sent(),[2,s]}}))}))}var pP=function(){function e(e,t,n,r,a){void 0===r&&(r=-1),void 0===a&&(a=1),this.version=e,this.alpha=t,this.modelUrl=n,this.inputMin=r,this.inputMax=a,this.normalizationConstant=(a-r)/255}return e.prototype.load=function(){return sP(this,void 0,void 0,(function(){var e,t,n,r,a=this;return uP(this,(function(i){switch(i.label){case 0:return this.modelUrl?(e=this,[4,iP(this.modelUrl)]):[3,2];case 1:return e.model=i.sent(),[3,4];case 2:return t=hP[this.version][this.alpha].url,n=this,[4,iP(t,{fromTFHub:!0})];case 3:n.model=i.sent(),i.label=4;case 4:return[4,(r=c_((function(){return a.model.predict(cC([1,lP,lP,3]))}))).data()];case 5:return i.sent(),r.dispose(),[2]}}))}))},e.prototype.infer=function(e,t){var n=this;return void 0===t&&(t=!1),c_((function(){e instanceof tS||(e=gT(e));var r=x_(N_(jN(e,"float32"),n.normalizationConstant),n.inputMin),a=r;e.shape[0]===lP&&e.shape[1]===lP||(a=jO.resizeBilinear(r,[lP,lP],!0));var i,o=SI(a,[-1,lP,lP,3]);if(t){var s=fP[n.version],u=n.model.execute(o,s);i=oD(u,[1,2])}else{var c=n.model.predict(o);i=AI(c,[0,1],[-1,1e3])}return i}))},e.prototype.classify=function(e,t){return void 0===t&&(t=3),sP(this,void 0,void 0,(function(){var n,r;return uP(this,(function(a){switch(a.label){case 0:return[4,mP(n=this.infer(e),t)];case 1:return r=a.sent(),n.dispose(),[2,r]}}))}))},e}();function mP(e,t){return sP(this,void 0,void 0,(function(){var n,r,a,i,o,s,u;return uP(this,(function(c){switch(c.label){case 0:return[4,(n=ZC(e)).data()];case 1:for(r=c.sent(),n.dispose(),a=[],u=0;u<r.length;u++)a.push({value:r[u],index:u});for(a.sort((function(e,t){return t.value-e.value})),i=new Float32Array(t),o=new Int32Array(t),u=0;u<t;u++)i[u]=a[u].value,o[u]=a[u].index;for(s=[],u=0;u<o.length;u++)s.push({className:cP[o[u]],probability:i[u]});return[2,s]}}))}))}var vP=function(){var e=te((0,P.useState)(!1),2),t=e[0],n=e[1],r=te((0,P.useState)(null),2),a=r[0],i=r[1],o=te((0,P.useState)(null),2),s=o[0],u=o[1],c=te((0,P.useState)([]),2),l=c[0],f=c[1],h=te((0,P.useState)([]),2),d=h[0],p=h[1],m=pb().userInfo,v=(0,P.useRef)(),y=(0,P.useRef)(),g=(0,P.useRef)(),b=te((0,P.useState)(),2),k=(b[0],b[1]),w=te((0,P.useState)(""),2),x=(w[0],w[1],function(){var e=Rt(Ot().mark((function e(){var t;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),e.prev=1,e.next=4,dP();case 4:t=e.sent,i(t),n(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),n(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}()),E=function(){var e=Rt(Ot().mark((function e(){var t;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y.current.value="",e.next=3,a.classify(v.current);case 3:t=e.sent,f(t),k(t[0]);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,P.useEffect)((function(){x()}),[]),(0,P.useEffect)((function(){s&&p([s].concat(U(d)))}),[s]),t?(0,Ct.jsx)(Ct.Fragment,{children:(0,Ct.jsx)("div",{className:"p-10 border-[#00CDC4] rounded-full border-[5px] animate-spin border-t-transparent"})}):m?(0,Ct.jsxs)("div",{className:"container h-screen my-10 border rounded-lg bg-[#CCEDCB]",children:[(0,Ct.jsx)("h1",{className:"py-10 text-2xl font-bold text-[#00CDC4]",children:"Ph\xe2n t\xedch v\u1eadt th\u1ec3 sang ti\u1ebfng anh"}),(0,Ct.jsxs)("div",{className:"flex flex-col items-center justify-between",children:[(0,Ct.jsxs)("div",{className:"flex items-center justify-center w-auto gap-x-3 max-w-[300px] w-full",children:[(0,Ct.jsx)("input",{id:"choose",type:"file",accept:"image/*",capture:"camera",className:"hidden uploadInput",onChange:function(e){var t=e.target.files;if(t.length>0){var n=URL.createObjectURL(t[0]);u(n)}else u(null)},ref:g}),(0,Ct.jsx)("label",{htmlFor:"choose",className:"w-full p-3 font-medium bg-white rounded-lg cursor-pointer ",children:"Ch\u1ecdn T\u1ec7p"}),s&&(0,Ct.jsx)("label",{className:"w-full p-3 text-white bg-black rounded-lg",onClick:function(){return E()},children:"Ph\xe2n t\xedch"})]}),(0,Ct.jsx)("span",{className:"hidden or",children:"OR"}),(0,Ct.jsx)("input",{type:"text",className:"hidden",placeholder:"Paster image URL",ref:y,onChange:function(e){u(e.target.value),f([])}})]}),(0,Ct.jsx)("div",{className:"flex items-start justify-center my-5 mainWrapper gap-x-2",children:(0,Ct.jsxs)("div",{className:"flex items-start justify-center mainContent gap-x-5 ",children:[(0,Ct.jsx)("div",{className:"imageHolder w-[400px] h-[300px] overflow-hidden rounded-lg flex items-center justify-center ",children:s&&(0,Ct.jsx)("img",{src:s,alt:"Upload Preview",crossOrigin:"anonymous",ref:v,className:"object-contain w-full h-full rounded-lg"})}),l.length>0&&(0,Ct.jsx)("div",{className:"my-5 font-medium text-slate-900 resultsHolder max-w-[400px] w-full text-left",children:l.map((function(e,t){return(0,Ct.jsxs)("div",{className:"flex justify-between result gap-x-4",children:[(0,Ct.jsx)("span",{className:"w-full name",children:e.className}),(0,Ct.jsxs)("span",{className:"confidence max-w-[200px] w-full",children:["\u0110\u1ed9 Ch\xednh X\xe1c: ",(100*e.probability).toFixed(2),"%"," "]})]},e.className)}))})]})})]}):(0,Ct.jsx)(fb,{})},yP=function(){var e=pb().userInfo,t=rt(),n=te((0,P.useState)([]),2),r=n[0],a=n[1],i=gg(lb,"TopicVoc");return(0,P.useEffect)((function(){function e(){return(e=Rt(Ot().mark((function e(){var t;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,sb(i);case 3:e.sent.forEach((function(e){t.push(e.data())})),a(t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),e?(0,Ct.jsx)("div",{className:"w-full p-5",children:(0,Ct.jsxs)("div",{className:"h-screen py-10 text-black bg-white rounded-lg",children:[(0,Ct.jsx)("h3",{className:"mb-10 text-3xl font-bold text-center text-[#FA7070]",children:"Topics"}),(0,Ct.jsx)("div",{className:"flex flex-wrap items-center gap-x-2 gap-y-5 justify-evenly",children:r.length>0&&r.map((function(e){return(0,Ct.jsxs)("div",{className:"h-[300px]  rounded-md w-[300px] relative cursor-pointer  transition-all z-10 bg-white shadow-sm border p-5",onClick:function(){return t(e.TopicName)},children:[(0,Ct.jsx)("div",{className:"w-full h-[200px] ",children:(0,Ct.jsx)("img",{src:e.TopicImg,alt:"",className:"object-cover w-full h-full rounded-full"})}),(0,Ct.jsx)("div",{className:"absolute bottom-0 z-30 p-2 text-2xl font-medium bg-[#FBF2CF] text-[#fa7070a7] rounded-md left-2/4 -translate-x-2/4 w-full",children:e.TopicName})]},e.TopicId)}))})]})}):(0,Ct.jsx)(fb,{})},gP={d:function(e,t){for(var n in t)gP.o(t,n)&&!gP.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},bP={};function kP(e){for(var t=[],n=0,r=0;r<e.length;r++){var a=e.charCodeAt(r);128>a?t[n++]=a:(2048>a?t[n++]=a>>6|192:(55296==(64512&a)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(a=65536+((1023&a)<<10)+(1023&e.charCodeAt(++r)),t[n++]=a>>18|240,t[n++]=a>>12&63|128):t[n++]=a>>12|224,t[n++]=a>>6&63|128),t[n++]=63&a|128)}var i=0;for(n=0;n<t.length;n++)i+=t[n],i=wP(i,"+-a^+6");return i=wP(i,"+-3^+b+-f"),0>(i^=0)&&(i=2147483648+(2147483647&i)),(i%=1e6).toString()+"."+i.toString()}gP.d(bP,{ZP:function(){return DP},j1:function(){return EP},Gb:function(){return NP},e6:function(){return TP},XU:function(){return AP},Iu:function(){return CP}});var wP=function(e,t){for(var n=0;n<t.length-2;n+=3){var r=t.charAt(n+2);r="a"<=r?r.charCodeAt(0)-87:Number(r),r="+"==t.charAt(n+1)?e>>>r:e<<r,e="+"==t.charAt(n)?e+r:e^r}return e},xP={client:"gtx",from:"auto",to:"en",hl:"en",tld:"com"};function EP(e,t){var n=Object.assign(Object.assign({},xP),t),r={client:n.client,sl:n.from,tl:n.to,hl:n.hl,ie:"UTF-8",oe:"UTF-8",otf:"1",ssel:"0",tsel:"0",kc:"7",q:e,tk:kP(e)},a=new URLSearchParams(r);return["at","bd","ex","ld","md","qca","rw","rm","ss","t"].forEach((function(e){return a.append("dt",e)})),"https://translate.google.".concat(n.tld,"/translate_a/single?").concat(a)}var SP={auto:"Automatic",af:"Afrikaans",sq:"Albanian",am:"Amharic",ar:"Arabic",hy:"Armenian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",bg:"Bulgarian",ca:"Catalan",ceb:"Cebuano",ny:"Chichewa",zh:"Chinese Simplified","zh-cn":"Chinese Simplified","zh-tw":"Chinese Traditional",co:"Corsican",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch",en:"English",eo:"Esperanto",et:"Estonian",tl:"Filipino",fi:"Finnish",fr:"French",fy:"Frisian",gl:"Galician",ka:"Georgian",de:"German",el:"Greek",gu:"Gujarati",ht:"Haitian Creole",ha:"Hausa",haw:"Hawaiian",he:"Hebrew",iw:"Hebrew",hi:"Hindi",hmn:"Hmong",hu:"Hungarian",is:"Icelandic",ig:"Igbo",id:"Indonesian",ga:"Irish",it:"Italian",ja:"Japanese",jw:"Javanese",kn:"Kannada",kk:"Kazakh",km:"Khmer",rw:"Kinyarwanda",ko:"Korean",ku:"Kurdish (Kurmanji)",ky:"Kyrgyz",lo:"Lao",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"Macedonian",mg:"Malagasy",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mn:"Mongolian",my:"Myanmar (Burmese)",ne:"Nepali",no:"Norwegian",or:"Odia (Oriya)",ps:"Pashto",fa:"Persian",pl:"Polish",pt:"Portuguese",pa:"Punjabi",ro:"Romanian",ru:"Russian",sm:"Samoan",gd:"Scots Gaelic",sr:"Serbian",st:"Sesotho",sn:"Shona",sd:"Sindhi",si:"Sinhala",sk:"Slovak",sl:"Slovenian",so:"Somali",es:"Spanish",su:"Sundanese",sw:"Swahili",sv:"Swedish",tg:"Tajik",ta:"Tamil",tt:"Tatar",te:"Telugu",th:"Thai",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",ur:"Urdu",ug:"Uyghur",uz:"Uzbek",vi:"Vietnamese",cy:"Welsh",xh:"Xhosa",yi:"Yiddish",yo:"Yoruba",zu:"Zulu"},NP=function(e){return Boolean(SP[e])};function TP(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={text:"",pronunciation:"",from:{language:{didYouMean:!1,iso:""},text:{autoCorrected:!1,value:"",didYouMean:!1}}};if(e[0].forEach((function(e){e[0]?n.text+=e[0]:e[2]&&(n.pronunciation+=e[2])})),e[2]===e[8][0][0]?n.from.language.iso=e[2]:(n.from.language.didYouMean=!0,n.from.language.iso=e[8][0][0]),e[7]&&e[7][0]){var r=e[7][0];r=(r=r.replace(/<b><i>/g,"[")).replace(/<\/i><\/b>/g,"]"),n.from.text.value=r,!0===e[7][5]?n.from.text.autoCorrected=!0:n.from.text.didYouMean=!0}return t&&(n.raw=e),n}var _P=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},IP="",AP=function(e){return IP=e,CP};function CP(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _P(this,void 0,void 0,Ot().mark((function n(){var r,a;return Ot().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=EP(e,t),n.next=3,fetch("".concat(IP).concat(r));case 3:if((a=n.sent).ok){n.next=6;break}throw new Error("Request failed");case 6:return n.t0=TP,n.next=9,a.json();case 9:return n.t1=n.sent,n.t2=t.raw,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 12:case"end":return n.stop()}}),n)})))}var DP=CP,OP=n(682);function MP(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var RP=["className"],PP=function(e){var t=e.className,n=MP(e,RP);return(0,Ct.jsx)("svg",En(En({},n),{},{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-6 h-6 ".concat(t),children:(0,Ct.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z"})}))},LP=function(e){var t=e.name,n=e.img,r=(0,OP.h5)(),a=r.speak,i=(r.voices,te((0,P.useState)(""),2)),o=i[0],s=(i[1],new URLSearchParams);s.append("source_language","en"),s.append("target_language","vi"),s.append("text",t);return(0,Ct.jsxs)("div",{className:"w-[350px] p-5 flex items-center flex-col border rounded-lg bg-white h-[350px] justify-center",children:[(0,Ct.jsx)("img",{src:n,alt:"",className:"object-cover h-[150px] "}),(0,Ct.jsxs)("div",{className:"flex my-10 gap-x-1",children:[(0,Ct.jsx)("h5",{className:"text-xl font-semibold text-blue-700",children:t}),(0,Ct.jsxs)("h5",{className:"text-xl font-semibold text-blue-300",children:["(",o,")"]})]}),(0,Ct.jsx)(PP,{className:"cursor-pointer",onClick:function(){return a({text:t})}})]})},FP=function(){var e=function(){var e=P.useContext(Je).matches,t=e[e.length-1];return t?t.params:{}}().vocName,t=te((0,P.useState)([]),2),n=t[0],r=t[1],a=te((0,P.useState)([]),2),i=a[0],o=a[1];return(0,P.useEffect)((function(){function t(){return t=Rt(Ot().mark((function t(){var n;return Ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Kg(gg(lb,"TopicVoc"),Qg("TopicName","==",e)),t.next=3,sb(n);case 3:t.sent.forEach((function(e){r(En({id:e.id},e.data()))}));case 5:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e]),(0,P.useEffect)((function(){function e(){return e=Rt(Ot().mark((function e(){var t,r,a;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Kg(gg(lb,"VocDesc"),Qg("id","==",null===n||void 0===n?void 0:n.TopicId)),e.next=3,sb(t);case 3:r=e.sent,a=[],r.forEach((function(e){a.push(En({},e.data()))})),o(a);case 7:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[null===n||void 0===n?void 0:n.TopicId]),(0,Ct.jsx)("div",{className:"w-full p-10",children:(0,Ct.jsxs)("div",{className:" text-black bg-[#C6EBC5] py-10 rounded-lg",children:[(0,Ct.jsx)("h3",{className:"mb-10 text-3xl font-semibold text-center text-[#FA7070]",children:e}),(0,Ct.jsx)("div",{className:"flex flex-wrap items-center gap-x-2 gap-y-5 justify-evenly",children:i.length>0&&i.map((function(e){return(0,Ct.jsx)(LP,{name:e.name,img:e.img},e.name)}))})]})})};var jP=function(){return(0,Ct.jsx)("div",{className:"App",children:(0,Ct.jsx)(db,{children:(0,Ct.jsx)(gt,{children:(0,Ct.jsxs)(vt,{element:(0,Ct.jsx)(wb,{}),children:[(0,Ct.jsx)(vt,{path:"/",element:(0,Ct.jsx)(bb,{})}),(0,Ct.jsx)(vt,{path:"/sign-in",element:(0,Ct.jsx)(fb,{})}),(0,Ct.jsx)(vt,{path:"/exercise",element:(0,Ct.jsx)(Tb,{})}),(0,Ct.jsx)(vt,{path:"/AI",element:(0,Ct.jsx)(vP,{})}),(0,Ct.jsx)(vt,{path:"/dashboard",element:(0,Ct.jsx)(Dt,{})}),(0,Ct.jsx)(vt,{path:"/fill-in-the-word",element:(0,Ct.jsx)(Eb,{})}),(0,Ct.jsx)(vt,{path:"/multiple-choice",element:(0,Ct.jsx)(Nb,{})}),(0,Ct.jsx)(vt,{path:"/Grammar",element:(0,Ct.jsx)(yP,{})}),(0,Ct.jsx)(vt,{path:"Grammar/:vocName",element:(0,Ct.jsx)(FP,{})})]})})})})};F.createRoot(document.getElementById("root")).render((0,Ct.jsx)(P.StrictMode,{children:(0,Ct.jsx)(St,{children:(0,Ct.jsx)(jP,{})})}))}()}();
//# sourceMappingURL=main.77d4fe03.js.map